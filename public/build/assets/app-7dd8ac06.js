import{d as E,c}from"./vue.esm-bundler-ea606579.js";const tt="modulepreload",et=function(t){return"/build/"+t},O={},w=function(e,a,i){if(!a||a.length===0)return e();const u=document.getElementsByTagName("link");return Promise.all(a.map(l=>{if(l=et(l),l in O)return;O[l]=!0;const m=l.endsWith(".css"),_=m?'[rel="stylesheet"]':"";if(!!i)for(let f=u.length-1;f>=0;f--){const g=u[f];if(g.href===l&&(!m||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${_}`))return;const o=document.createElement("link");if(o.rel=m?"stylesheet":tt,m||(o.as="script",o.crossOrigin=""),o.href=l,document.head.appendChild(o),m)return new Promise((f,g)=>{o.addEventListener("load",f),o.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${l}`)))})})).then(()=>e())};const at=E(()=>w(()=>import("./TiptapEditor-1875d43a.js"),["assets/TiptapEditor-1875d43a.js","assets/vue.esm-bundler-ea606579.js","assets/_plugin-vue_export-helper-c27b6911.js","assets/TiptapEditor-c427340f.css"])),it=E(()=>w(()=>import("./JspreadsheetComponent-76505896.js"),["assets/JspreadsheetComponent-76505896.js","assets/vue.esm-bundler-ea606579.js","assets/_plugin-vue_export-helper-c27b6911.js","assets/JspreadsheetComponent-2623a89e.css"])),rt=E(()=>w(()=>import("./DirectoryTree-15a57c93.js"),["assets/DirectoryTree-15a57c93.js","assets/vue.esm-bundler-ea606579.js","assets/_plugin-vue_export-helper-c27b6911.js","assets/DirectoryTree-8d647b14.css"])),st=E(()=>w(()=>import("./InlineObservatiiEditor-baf42462.js"),["assets/InlineObservatiiEditor-baf42462.js","assets/vue.esm-bundler-ea606579.js","assets/_plugin-vue_export-helper-c27b6911.js","assets/InlineObservatiiEditor-4365ca00.css"])),nt=E(()=>w(()=>import("./TogglePredat-9f558e6c.js"),["assets/TogglePredat-9f558e6c.js","assets/vue.esm-bundler-ea606579.js","assets/_plugin-vue_export-helper-c27b6911.js","assets/TogglePredat-65267045.css"])),A=E(()=>w(()=>import("./DatePicker-1702cb2a.js"),["assets/DatePicker-1702cb2a.js","assets/vue.esm-bundler-ea606579.js","assets/_plugin-vue_export-helper-c27b6911.js","assets/DatePicker-3bf3781e.css"])),N=c({});N.component("VueDatepickerNext",A);document.getElementById("app")!=null&&N.mount("#app");const q=c({});q.component("vue-datepicker-next",A);document.getElementById("datePicker")!=null&&q.mount("#datePicker");const ot=c({el:"#camion",data(){return{tip_camion:tipCamionVechi,tipuriCamioane,tipuriCamioaneListaAutocomplete:[],firma_id:firmaIdVechi,firma_nume:"",firme,firmeListaAutocomplete:[]}},created:function(){if(this.firma_id){for(var t=0;t<this.firme.length;t++)if(this.firme[t].id==this.firma_id){this.firma_nume=this.firme[t].nume;break}}},methods:{autocompleteTipuriCamioane(){this.tipuriCamioaneListaAutocomplete=[];for(var t=0;t<this.tipuriCamioane.length;t++)this.tipuriCamioane[t].tip_camion&&this.tipuriCamioane[t].tip_camion.toLowerCase().includes(this.tip_camion.toLowerCase())&&this.tipuriCamioaneListaAutocomplete.push(this.tipuriCamioane[t])},autocompleteFirme(){this.firmeListaAutocomplete=[];for(var t=0;t<this.firme.length;t++)this.firme[t].nume&&this.firme[t].nume.toLowerCase().includes(this.firma_nume.toLowerCase())&&this.firmeListaAutocomplete.push(this.firme[t])}}});document.getElementById("camion")!=null&&ot.mount("#camion");const x=c({el:"#formularComanda",data(){return{firmaTransportatorId:firmaTransportatorIdVechi,firmaTransportatorNume:"",firmeTransportatori,firmeTransportatoriListaAutocomplete:[],firmaClientId:firmaClientIdVechi,firmaClientNume:"",firmeClienti,firmeClientiListaAutocomplete:[],clientiListaTotiDinDB:[],clientiAtasatiLaComanda:typeof clientiAtasatiLaComanda<"u"?clientiAtasatiLaComanda:[],camionId:camionIdVechi,camionNumarInmatriculare:"",camionTipCamion:"",camionPretKmGoi:"",camionPretKmPlini:"",camioane,camioaneListaAutocomplete:[],locuriOperareIncarcari:[],locuriOperareDescarcari:[],incarcari:typeof incarcari<"u"?incarcari:[],descarcari:typeof descarcari<"u"?descarcari:[],transportatorTarifPeKm:typeof transportatorTarifPeKmVechi<"u"?transportatorTarifPeKmVechi:"",transportatorPretKmGoi:typeof transportatorPretKmGoiVechi<"u"?transportatorPretKmGoiVechi:"",transportatorPretKmPlini:typeof transportatorPretKmPliniVechi<"u"?transportatorPretKmPliniVechi:"",transportatorKmGoi:typeof transportatorKmGoiVechi<"u"?transportatorKmGoiVechi:"",transportatorKmPlini:typeof transportatorKmPliniVechi<"u"?transportatorKmPliniVechi:"",transportatorValoareKmGoi:typeof transportatorValoareKmGoiVechi<"u"?transportatorValoareKmGoiVechi:"",transportatorValoareKmPlini:typeof transportatorValoareKmPliniVechi<"u"?transportatorValoareKmPliniVechi:"",transportatorValoareContract:typeof transportatorValoareContractVechi<"u"?transportatorValoareContractVechi:"",transportatorPretAutostrada:typeof transportatorPretAutostradaVechi<"u"?transportatorPretAutostradaVechi:"",transportatorPretFerry:typeof transportatorPretFerryVechi<"u"?transportatorPretFerryVechi:"",clientValoareContractInitiala:typeof clientValoareContractInitialaVechi<"u"?clientValoareContractInitialaVechi:"",clientValoareContract:typeof clientValoareContractVechi<"u"?clientValoareContractVechi:"",alertaCampuriNecompletate:""}},created:function(){if(this.firmaTransportatorId)for(var t=0;t<this.firmeTransportatori.length;t++)this.firmeTransportatori[t].id==this.firmaTransportatorId&&(this.firmaTransportatorNume=this.firmeTransportatori[t].nume);if(this.firmaClientId)for(var t=0;t<this.firmeClienti.length;t++)this.firmeClienti[t].id==this.firmaClientId&&(this.firmaClientNume=this.firmeClienti[t].nume);if(this.camionId)for(var t=0;t<this.camioane.length;t++)this.camioane[t].id==this.camionId&&(this.camionNumarInmatriculare=this.camioane[t].numar_inmatriculare,this.camionTipCamion=this.camioane[t].tip_camion,this.camionPretKmGoi=this.camioane[t].pret_km_goi,this.camionPretKmPlini=this.camioane[t].pret_km_plini)},methods:{autocompleteFirmeTransportatori(){this.firmeTransportatoriListaAutocomplete=[];for(var t=0;t<this.firmeTransportatori.length;t++)this.firmeTransportatori[t].nume&&this.firmeTransportatori[t].nume.toLowerCase().includes(this.firmaTransportatorNume.toLowerCase())&&this.firmeTransportatoriListaAutocomplete.push(this.firmeTransportatori[t])},autocompleteFirmeClienti(){this.firmeClientiListaAutocomplete=[];for(var t=0;t<this.firmeClienti.length;t++)this.firmeClienti[t].nume&&this.firmeClienti[t].nume.toLowerCase().includes(this.firmaClientNume.toLowerCase())&&this.firmeClientiListaAutocomplete.push(this.firmeClienti[t])},autocompleteCamioane(){this.camioaneListaAutocomplete=[];for(var t=0;t<this.camioane.length;t++)this.camioane[t].numar_inmatriculare&&this.camioane[t].numar_inmatriculare.toLowerCase().includes(this.camionNumarInmatriculare.toLowerCase())&&this.camioaneListaAutocomplete.push(this.camioane[t])},getClienti(t){this.clientiListaTotiDinDB=[],clientiAtasatiLaComanda[t].nume&&clientiAtasatiLaComanda[t].nume.length>2&&axios.get("/axios/clienti",{params:{request:"clienti",nume:clientiAtasatiLaComanda[t].nume}}).then(e=>this.clientiListaTotiDinDB[t]=e.data.raspuns)},getLocuriOperareIncarcari(t){this.locuriOperareIncarcari=[],(incarcari[t].nume&&incarcari[t].nume.length>2||incarcari[t].oras&&incarcari[t].oras.length>2)&&axios.get("/axios/locuri-operare",{params:{request:"locuriOperare",nume:incarcari[t].nume,oras:incarcari[t].oras}}).then(e=>this.locuriOperareIncarcari[t]=e.data.raspuns)},getLocuriOperareDescarcari(t){this.locuriOperareDescarcari=[],(descarcari[t].nume&&descarcari[t].nume.length>2||descarcari[t].oras&&descarcari[t].oras.length>2)&&axios.get("/axios/locuri-operare",{params:{request:"locuriOperare",nume:descarcari[t].nume,oras:descarcari[t].oras}}).then(e=>this.locuriOperareDescarcari[t]=e.data.raspuns)},adaugaClientGol(){let t={tara:{},pivot:{moneda_id:2}};this.clientiAtasatiLaComanda.push(t)},adaugaIncarcareGoala(){let t={data_ora:"qweqweqwe",tara:{},pivot:{}};this.incarcari.push(t)},adaugaDescarcareGoala(){let t={tara:{id:"",nume:""},pivot:{}};this.descarcari.push(t)}}}),K={beforeMount:(t,e)=>{t.clickOutsideEvent=a=>{t==a.target||t.contains(a.target)||e.value()},document.addEventListener("click",t.clickOutsideEvent)},unmounted:t=>{document.removeEventListener("click",t.clickOutsideEvent)}};x.directive("clickOut",K);x.component("vue-datepicker-next",A);document.getElementById("formularComanda")!=null&&x.mount("#formularComanda");const ct=c({el:"#statusuri",data(){return{statusuri:[],timer:null,mesajLipsaStatusuri:"",comandaId:""}},created:function(){},mounted:function(){this.timer=setInterval(()=>{this.getStatusuri()},1e4)},beforeUnmount(){clearInterval(this.timer)},methods:{getStatusuri(){this.comandaId!==""&&axios.get("/axios/statusuri",{params:{comanda_id:this.comandaId}}).then(t=>{this.statusuri=t.data.raspuns,this.statusuri.length===0?this.mesajLipsaStatusuri="Nu există „statusuri” în baza de date pentru această comandă":this.mesajLipsaStatusuri=""})}}});document.getElementById("statusuri")!=null&&ct.mount("#statusuri");const R=c({el:"#mementoAlerte",data(){return{tip,dataExpirare:"",dataSelectata:"",dateSelectate}},methods:{captureDataExpirare(t){if(this.tip==2)var e=[3,15];else if(this.tip==3)var e=[3,30,60];if(e&&this.dataExpirare!==t){this.dataExpirare=t,this.dateSelectate=[];for(var a=0;a<e.length;a++){var i=new Date(t);i=i.setDate(i.getDate()-e[a]),i=new Date(i).toLocaleDateString("en-CA"),i!==null&&!this.dateSelectate.includes(i)&&this.dateSelectate.push(i)}}},captureDataDeLaCopil(t){this.dataSelectata!==t&&(this.dataSelectata=t)},adaugaAlerta:function(){this.dataSelectata!==null&&!this.dateSelectate.includes(this.dataSelectata)&&this.dateSelectate.push(this.dataSelectata)},stergeAlerta:function(t){for(var e=0;e<this.dateSelectate.length;e++)if(this.dateSelectate[e]==t){this.dateSelectate.splice(e,1);break}}}});R.component("vue-datepicker-next",A);document.getElementById("mementoAlerte")!=null&&R.mount("#mementoAlerte");const k=c({el:"#creareFactura",data(){return{firmeClienti,firmeClientiListaAutocomplete:[],firmaClient:"",client_id,client_nume,client_reg_com,client_cif,client_adresa,client_tara_id,client_telefon,client_email,numarDeCautat:"",comandaGasita:"",afisareMesajAtentionareNegasireComanda:!1,produsGasitDenumire:"",produsDenumire:"",produsUm:"",produsCantitate:"",produsPret:"",produsPretulIncludeTva:0,comandaId,produse,moneda_id,procenteTva,procent_tva_id,zile_scadente,showInfoAlerteScadenta:!1,showDateProdusIncomplete:"",total_fara_tva_moneda:0,total_tva_moneda:0,total_fara_tva_lei:0,total_tva_lei:0,chitanta_suma_incasata,dateFacturiIntocmitDeVechi,dateFacturiDelegatVechi,dateFacturiMentiuniVechi,dateFacturiIntocmitDeVechiListaAutocomplete:[],dateFacturiDelegatVechiListaAutocomplete:[],dateFacturiMentiuniVechiListaAutocomplete:[],intocmit_de,cnp,delegat,buletin,auto,mentiuni}},watch:{produse:{handler:function(t){this.calculeazaSumeTotale()},deep:!0}},created:function(){if(this.firmaClientId)for(var t=0;t<this.firmeClienti.length;t++)this.firmeClienti[t].id==this.firmaClientId&&(this.client_nume=this.firmeClienti[t].nume);this.calculeazaSumeTotale()},methods:{autocompleteFirmeClienti(){this.firmeClientiListaAutocomplete=[];for(var t=0;t<this.firmeClienti.length;t++)this.firmeClienti[t].nume&&this.firmeClienti[t].nume.toLowerCase().includes(this.client_nume.toLowerCase())&&this.firmeClientiListaAutocomplete.push(this.firmeClienti[t])},axiosCautaClient(t){axios.get("/facturi/axios/cauta-client",{params:{client_id:t}}).then(e=>{e.data.client&&(this.firmaClient=e.data.client,this.preiaDateClient()),this.firmeClientiListaAutocomplete=""})},preiaDateClient(){this.firmaClient&&(this.client_id=this.firmaClient.id,this.client_nume=this.firmaClient.nume,this.client_reg_com=this.firmaClient.reg_com,this.client_cif=this.firmaClient.cif,this.client_adresa=this.firmaClient.adresa,this.client_tara_id=this.firmaClient.tara_id,this.client_email=this.firmaClient.email)},preiaDateFacturare(){this.comandaGasita&&(this.comandaGasita.client_moneda&&(this.moneda_id=this.comandaGasita.client_moneda.id),this.procent_tva_id=this.comandaGasita.client_procent_tva_id,this.zile_scadente=this.comandaGasita.client_zile_scadente)},preiaDateProdus(){this.comandaGasita&&(this.produsDenumire=this.produsGasitDenumire,this.produsUm="um",this.produsCantitate=1,this.produsPret=this.comandaGasita.client_valoare_contract,this.produsPretulIncludeTva=0)},adaugaProdusLaFactura(){if(this.produsCantitate=parseInt(this.produsCantitate),this.produsPret=parseFloat(this.produsPret),this.showDateProdusIncomplete="",this.produsDenumire?this.produsUm?this.produsCantitate?this.produsPret?this.procent_tva_id?Number.isInteger(this.produsCantitate)?typeof this.produsPret!="number"?this.showDateProdusIncomplete+="Prețul trebuie să fie un număr. ":this.showDateProdusIncomplete="":this.showDateProdusIncomplete+="Cantitatea trebuie să fie un număr întreg. ":this.showDateProdusIncomplete="Alegeți procentul TVA. ":this.showDateProdusIncomplete="Completați prețul. ":this.showDateProdusIncomplete="Completați cantitatea. ":this.showDateProdusIncomplete="Completați unitatea de măsură. ":this.showDateProdusIncomplete="Completați denumirea. ",this.showDateProdusIncomplete)return;let t=0;for(var e=0;e<this.procenteTva.length;e++)this.procenteTva[e].id==this.procent_tva_id&&(t=parseInt(this.procenteTva[e].nume));if(isNaN(this.produsCantitate)||isNaN(this.produsPret)||isNaN(t))return;let a=0,i=0;t===0?(a=this.produsPret,i=0):parseInt(this.produsPretulIncludeTva)===0?(a=this.produsPret,i=this.produsPret*t/100):parseInt(this.produsPretulIncludeTva)===1&&(i=this.produsPret*t/100,a=this.produsPret-i);let u={comanda_id:this.comandaGasita.id,denumire:this.produsDenumire,um:"buc",cantitate:this.produsCantitate,pret_unitar_fara_tva:a,valoare:this.produsCantitate*a,valoare_tva:this.produsCantitate*i};this.produse.push(u)},axiosCautaComanda(){axios.post("/facturi/axios/cauta-comanda",{numarDeCautat:this.numarDeCautat},{params:{}}).then(t=>{if(this.comandaGasita=t.data.comanda,this.comandaGasita&&this.comandaGasita.client){this.afisareMesajAtentionareNegasireComanda=!1,this.firmaClient=this.comandaGasita.client,this.comandaId=this.comandaGasita.id,this.produsGasitDenumire=this.comandaGasita.client_contract?this.comandaGasita.client_contract+" // ":"";for(var e=0;e<this.comandaGasita.locuri_operare_incarcari.length;e++)this.comandaGasita.locuri_operare_incarcari[e].pivot&&this.comandaGasita.locuri_operare_incarcari[e].pivot.data_ora&&(this.produsGasitDenumire+=this.comandaGasita.locuri_operare_incarcari[e].pivot.data_ora.slice(8,10)+"."+this.comandaGasita.locuri_operare_incarcari[e].pivot.data_ora.slice(5,7)+"."+this.comandaGasita.locuri_operare_incarcari[e].pivot.data_ora.slice(0,4)),this.comandaGasita.locuri_operare_incarcari[e].oras&&(this.produsGasitDenumire+=" "+this.comandaGasita.locuri_operare_incarcari[e].oras),this.comandaGasita.locuri_operare_incarcari[e].tara&&this.comandaGasita.locuri_operare_incarcari[e].tara.nume&&(this.produsGasitDenumire+=" "+this.comandaGasita.locuri_operare_incarcari[e].tara.nume+" / ");for(var e=0;e<this.comandaGasita.locuri_operare_descarcari.length;e++)this.comandaGasita.locuri_operare_descarcari[e].pivot&&(this.produsGasitDenumire+=this.comandaGasita.locuri_operare_descarcari[e].pivot.data_ora.slice(8,10)+"."+this.comandaGasita.locuri_operare_descarcari[e].pivot.data_ora.slice(5,7)+"."+this.comandaGasita.locuri_operare_descarcari[e].pivot.data_ora.slice(0,4)),this.comandaGasita.locuri_operare_descarcari[e].oras&&(this.produsGasitDenumire+=" "+this.comandaGasita.locuri_operare_descarcari[e].oras),this.comandaGasita.locuri_operare_descarcari[e].tara&&this.comandaGasita.locuri_operare_descarcari[e].tara.nume&&(this.produsGasitDenumire+=" "+this.comandaGasita.locuri_operare_descarcari[e].tara.nume),e<this.comandaGasita.locuri_operare_descarcari.length-1&&(this.produsGasitDenumire+=" / ")}else this.afisareMesajAtentionareNegasireComanda=!0})},calculeazaSumeTotale(){if(this.total_fara_tva_moneda=0,this.total_tva_moneda=0,this.total_fara_tva_lei=0,this.total_tva_lei=0,this.total_lei=0,this.produse)for(var t=0;t<this.produse.length;t++)this.total_fara_tva_moneda+=parseFloat(this.produse[t].valoare),this.total_tva_moneda+=parseFloat(this.produse[t].valoare_tva)},autocompleteDateFacturiIntocmitDeVechi(){this.dateFacturiIntocmitDeVechiListaAutocomplete=[];for(var t=0;t<this.dateFacturiIntocmitDeVechi.length;t++)this.dateFacturiIntocmitDeVechi[t].intocmit_de&&this.dateFacturiIntocmitDeVechi[t].intocmit_de.toLowerCase().includes(this.intocmit_de.toLowerCase())&&this.dateFacturiIntocmitDeVechiListaAutocomplete.push(this.dateFacturiIntocmitDeVechi[t])},autocompleteDateFacturiDelegatVechi(){this.dateFacturiDelegatVechiListaAutocomplete=[];for(var t=0;t<this.dateFacturiDelegatVechi.length;t++)this.dateFacturiDelegatVechi[t].delegat&&this.dateFacturiDelegatVechi[t].delegat.toLowerCase().includes(this.delegat.toLowerCase())&&this.dateFacturiDelegatVechiListaAutocomplete.push(this.dateFacturiDelegatVechi[t])},autocompleteDateFacturiMentiuniVechi(){this.dateFacturiMentiuniVechiListaAutocomplete=[];for(var t=0;t<this.dateFacturiMentiuniVechi.length;t++)this.dateFacturiMentiuniVechi[t].mentiuni&&this.dateFacturiMentiuniVechi[t].mentiuni.toLowerCase().includes(this.mentiuni.toLowerCase())&&this.dateFacturiMentiuniVechiListaAutocomplete.push(this.dateFacturiMentiuniVechi[t])}}});k.directive("clickOut",K);k.component("vue-datepicker-next",A);document.getElementById("creareFactura")!=null&&k.mount("#creareFactura");const lt=c({el:"#trimitereCodAutentificarePrinEmail",data(){return{email,mesajDeAfisat:"",statusMessage:"",showStatusMessage:!1,isSending:!1,flashObserver:null,hasSentRequest:!1}},mounted(){this.observeFlashMessages(),this.checkForAlerts()},beforeUnmount(){this.flashObserver&&this.flashObserver.disconnect()},methods:{trimiteEmail(){this.isSending||(this.mesajDeAfisat="",this.email?(this.isSending=!0,this.hasSentRequest=!0,this.statusMessage="Se trimite codul de autentificare…",this.showStatusMessage=!0,axios.get("/axios/trimitere-cod-autentificare-prin-email",{params:{email:this.email}}).then(t=>{this.showStatusMessage=!1,this.statusMessage="",this.mesajDeAfisat=t.data.raspuns}).catch(()=>{this.mesajDeAfisat="<span class='text-danger' style='font-size:80%'>A apărut o eroare neașteptată. Încearcă din nou.</span>",this.showStatusMessage=!1,this.statusMessage=""}).finally(()=>{this.showStatusMessage&&(this.showStatusMessage=!1,this.statusMessage=""),this.isSending=!1})):(this.mesajDeAfisat="<span class='text-danger' style='font-size:80%'>Introdu emailul.</span>",this.showStatusMessage=!1,this.statusMessage="",this.isSending=!1,this.hasSentRequest=!1))},observeFlashMessages(){typeof MutationObserver>"u"||(this.flashObserver&&this.flashObserver.disconnect(),this.flashObserver=new MutationObserver(()=>{this.checkForAlerts()}),this.$el&&this.flashObserver.observe(this.$el,{childList:!0,subtree:!0}))},checkForAlerts(){if(!this.$el)return;this.$el.querySelector(".alert")&&(this.isSending=!1,this.showStatusMessage=!1,this.statusMessage="")}}});document.getElementById("trimitereCodAutentificarePrinEmail")!=null&&lt.mount("#trimitereCodAutentificarePrinEmail");const ut=c({el:"#app1",data(){return{disableButton:!1}}});document.getElementById("disableButton1")!=null&&ut.mount("#disableButton1");const dt=c({el:"#app1",data(){return{disableButton:!1}}});document.getElementById("disableButton2")!=null&&dt.mount("#disableButton2");const mt=c({el:"#app1",data(){return{disableButton:!1}}});document.getElementById("disableButton3")!=null&&mt.mount("#disableButton3");const ht=c({el:"#app1",data(){return{disableButton:!1}}});document.getElementById("disableButton4")!=null&&ht.mount("#disableButton4");const j=c({el:"#app1",data(){return{disableButton:!1}}});j.component("TiptapEditor",at);document.getElementById("wysiwyg")!=null&&j.mount("#wysiwyg");const $=c({el:"#facturaMemento",data(){return{facturi}}});$.component("vue-datepicker-next",A);document.getElementById("facturaMemento")!=null&&$.mount("#facturaMemento");const U=c({});U.component("toggle-predat",nt);document.getElementById("tabelIntermedieri")!=null&&U.mount("#tabelIntermedieri");const z=c({data(){return{lastUpdatedKpi:null}},methods:{handleUpdateSuccess(t){this.lastUpdatedKpi=t,setTimeout(()=>{this.lastUpdatedKpi=null},5e3)}}});z.component("inline-observatii-editor",st);document.getElementById("keyPerformanceIndicatorsMainPage")!=null&&z.mount("#keyPerformanceIndicatorsMainPage");const X=c({});X.component("directory-tree",rt);document.getElementById("directoryTree")!=null&&X.mount("#directoryTree");const H=c({});H.component("jspreadsheet-component",it);document.getElementById("excel")!=null&&H.mount("#excel");document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("oferteBody");if(!t)return;const e=window.axios;if(!e){console.warn("[oferte changes] window.axios not found");return}const a=new URLSearchParams(window.location.search),u=Number(a.get("page")||"1")===1,l="/axios/oferte-changes?"+a.toString(),m=1e4;let _=null,h=null,o=null;function f(){_=setTimeout(b,m)}function g(s,r){const d=t.querySelector(`tr[data-id="${s}"]`);if(d)d.outerHTML=r;else if(u)for(t.insertAdjacentHTML("afterbegin",r);t.children.length>25;)t.removeChild(t.lastElementChild)}async function b(){try{const s=`${l}${a.toString()?"&":""}since=${encodeURIComponent(h)}`,r={"X-Requested-With":"XMLHttpRequest"};o&&(r["If-None-Match"]=o);const d=await e.get(s,{headers:r,validateStatus:y=>y===200||y===304}),I=d.headers["x-server-now"]||d.headers["X-Server-Now"];if(d.status===304)I&&(h=I);else{const{rows:y=[],deleted_ids:C=[],now:S}=d.data||{},T=L=>{const v=t.querySelector(`tr[data-id="${L}"]`);v&&v.remove()};if(y.forEach(L=>g(L.id,L.html)),Array.isArray(C)&&C.length&&C.forEach(T),u)for(;t.children.length>25;)t.removeChild(t.lastElementChild);S&&(h=S),o=d.headers.etag||d.headers.ETag||o}}catch{}finally{f()}}async function p(){try{const s=`${l}${a.toString()?"&":""}bootstrap=1`,r=await e.get(s,{headers:{"X-Requested-With":"XMLHttpRequest"}});h=r.data&&r.data.now?r.data.now:r.headers["x-server-now"]||new Date().toISOString()}catch{h=new Date().toISOString()}finally{f()}}p(),window.addEventListener("beforeunload",()=>{_&&clearTimeout(_)})});document.addEventListener("DOMContentLoaded",()=>{var e;const t=((e=document.querySelector('meta[name="csrf-token"]'))==null?void 0:e.getAttribute("content"))??null;document.querySelectorAll("[data-document-update]").forEach(a=>{const i=a.closest("[data-document-wrapper]"),u=(i==null?void 0:i.querySelector("[data-color-holder]"))??i,l=(i==null?void 0:i.dataset.baseClass)??(u==null?void 0:u.className)??"",m=(i==null?void 0:i.dataset.emptyLabel)??"—",_=(i==null?void 0:i.dataset.noExpiryLabel)??"FĂRĂ",h=a.querySelector("[data-date-text]"),o=a.querySelector("[data-edit-trigger]"),f=a.querySelector("[data-edit-controls]"),g=a.querySelector("[data-cancel-edit]"),b=a.querySelector("[data-save-trigger]"),p=a.querySelector("[data-feedback-target]"),s=a.querySelector('input[name="fara_expirare"]'),r=a.querySelector('input[name="data_expirare"]');s&&s.addEventListener("change",()=>{a.dataset.autoSubmit==="true"&&G()}),r&&a.dataset.autoSubmit==="true"&&r.addEventListener("change",()=>G());const d=()=>{p&&(p.hidden=!0,p.textContent="",p.classList.remove("text-danger","text-success"))},I=(n,D="success")=>{!p||!n||(p.hidden=!1,p.textContent=n,p.classList.toggle("text-danger",D==="error"),p.classList.toggle("text-success",D!=="error"))};let y=!1,C=!1,S=(r==null?void 0:r.value)??"",T=(s==null?void 0:s.checked)??!1;const L=()=>{S=(r==null?void 0:r.value)??"",T=(s==null?void 0:s.checked)??!1},v=n=>{y=n,f&&f.classList.toggle("visually-hidden",!n),h&&h.classList.toggle("visually-hidden",n),o&&(o.classList.toggle("d-none",n),o.setAttribute("aria-expanded",n?"true":"false"))},B=()=>{r&&(r.value=S),s&&(s.checked=T)},W=n=>{if(!u)return;const D=[l,n??""].filter(Boolean).join(" ").trim();u.className=D},G=async()=>{var D;if(C)return;C=!0;const n=new FormData(a);s&&n.set("fara_expirare",s.checked?"1":"0"),t&&!n.has("_token")&&n.set("_token",t);try{const P=await fetch(a.action,{method:"POST",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"},credentials:"same-origin",body:n});if(P.status===422){const Y=(await P.json().catch(()=>({}))).errors??{},Z=((D=Object.values(Y)[0])==null?void 0:D[0])??"Date invalide.";I(Z,"error");return}if(!P.ok)throw new Error("Request failed");const V=await P.json(),J=V.readable_date??"",Q=V.formatted_date??"",M=Boolean(V.fara_expirare);if(h){let F=J;F||(F=M?_:m),h.textContent=F}r&&(r.value=Q),s&&(s.checked=M),L(),W(V.color_class??""),V.message?I(V.message,"success"):d(),v(!1)}catch(P){console.error("Document update failed",P),I("A apărut o eroare. Reîncearcă.","error")}finally{C=!1}};a.addEventListener("submit",n=>{n.preventDefault(),G()}),b&&b.addEventListener("click",n=>{n.preventDefault(),G()}),g&&g.addEventListener("click",n=>{n.preventDefault(),!C&&(B(),d(),v(!1))}),o&&o.addEventListener("click",()=>{if(y){B(),d(),v(!1);return}if(L(),d(),v(!0),s!=null&&s.checked)s.focus();else if(r&&(r.focus(),typeof r.showPicker=="function"))try{r.showPicker()}catch{}}),v(!1)})});document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("transportator_format_documente"),e=document.getElementById("transportator_termen_plata_id");if(!t||!e)return;const a={1:["4"],2:["3"]},i=()=>{const u=t.value,l=a[u]??[];Array.from(e.options).forEach(m=>{const _=l.includes(m.value);m.disabled=_,_&&e.value===m.value&&(e.value="",e.dispatchEvent(new Event("change",{bubbles:!0})))})};t.addEventListener("change",i),i()});
