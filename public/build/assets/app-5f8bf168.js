var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},lodashExports={},lodash={get exports(){return lodashExports},set exports(t){lodashExports=t}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(t,e){(function(){var n,r="4.17.21",o=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",l="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",u=500,g="__lodash_placeholder__",C=1,v=2,m=4,S=1,T=2,w=1,N=2,D=4,k=8,L=16,H=32,R=64,B=128,Y=256,K=512,se=30,pe="...",le=800,Ee=16,Ne=1,_e=2,me=3,Ke=1/0,Ye=9007199254740991,pt=17976931348623157e292,ut=0/0,It=4294967295,te=It-1,ot=It>>>1,St=[["ary",B],["bind",w],["bindKey",N],["curry",k],["curryRight",L],["flip",K],["partial",H],["partialRight",R],["rearg",Y]],Gt="[object Arguments]",_t="[object Array]",Ze="[object AsyncFunction]",et="[object Boolean]",ht="[object Date]",Tt="[object DOMException]",jt="[object Error]",ge="[object Function]",Te="[object GeneratorFunction]",Ie="[object Map]",$e="[object Number]",Be="[object Null]",nt="[object Object]",ft="[object Promise]",st="[object Proxy]",at="[object RegExp]",Fe="[object Set]",Ct="[object String]",mt="[object Symbol]",F="[object Undefined]",V="[object WeakMap]",O="[object WeakSet]",A="[object ArrayBuffer]",J="[object DataView]",he="[object Float32Array]",be="[object Float64Array]",q="[object Int8Array]",z="[object Int16Array]",ee="[object Int32Array]",Z="[object Uint8Array]",ue="[object Uint8ClampedArray]",we="[object Uint16Array]",Ae="[object Uint32Array]",je=/\b__p \+= '';/g,ze=/\b(__p \+=) '' \+/g,it=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ct=/&(?:amp|lt|gt|quot|#39);/g,Nt=/[&<>"']/g,Ot=RegExp(ct.source),ve=RegExp(Nt.source),Le=/<%-([\s\S]+?)%>/g,Xe=/<%([\s\S]+?)%>/g,ne=/<%=([\s\S]+?)%>/g,fe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,P=/^\w*$/,G=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ce=/[\\^$.*+?()[\]{}|]/g,De=RegExp(ce.source),de=/^\s+/,Me=/\s/,He=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,lt=/\{\n\/\* \[wrapped with (.+)\] \*/,qe=/,? & /,dt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,gt=/[()=,{}\[\]\/\s]/,Ft=/\\(\\)?/g,Ce=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,We=/\w*$/,Ue=/^[-+]0x[0-9a-f]+$/i,Et=/^0b[01]+$/i,Pt=/^\[object .+?Constructor\]$/,Ht=/^0o[0-7]+$/i,ln=/^(?:0|[1-9]\d*)$/,dn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Vt=/($^)/,on=/['\n\r\u2028\u2029\\]/g,Lt="\\ud800-\\udfff",ho="\\u0300-\\u036f",Vn="\\ufe20-\\ufe2f",lr="\\u20d0-\\u20ff",Ko=ho+Vn+lr,Yo="\\u2700-\\u27bf",qo="a-z\\xdf-\\xf6\\xf8-\\xff",Ji="\\xac\\xb1\\xd7\\xf7",Vr="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Dr="\\u2000-\\u206f",Wr=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Qn="A-Z\\xc0-\\xd6\\xd8-\\xde",Gn="\\ufe0e\\ufe0f",mo=Ji+Vr+Dr+Wr,Tr="['’]",zr="["+Lt+"]",Ur="["+mo+"]",cr="["+Ko+"]",Kr="\\d+",Go="["+Yo+"]",go="["+qo+"]",bo="[^"+Lt+mo+Kr+Yo+qo+Qn+"]",Yr="\\ud83c[\\udffb-\\udfff]",Xi="(?:"+cr+"|"+Yr+")",vo="[^"+Lt+"]",Cn="(?:\\ud83c[\\udde6-\\uddff]){2}",yo="[\\ud800-\\udbff][\\udc00-\\udfff]",wr="["+Qn+"]",qr="\\u200d",gn="(?:"+go+"|"+bo+")",Eo="(?:"+wr+"|"+bo+")",Gr="(?:"+Tr+"(?:d|ll|m|re|s|t|ve))?",Jr="(?:"+Tr+"(?:D|LL|M|RE|S|T|VE))?",Zt=Xi+"?",Xr="["+Gn+"]?",Zr="(?:"+qr+"(?:"+[vo,Cn,yo].join("|")+")"+Xr+Zt+")*",Jo="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ur="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Qt=Xr+Zt+Zr,Qr="(?:"+[Go,Cn,yo].join("|")+")"+Qt,Xo="(?:"+[vo+cr+"?",cr,Cn,yo,zr].join("|")+")",Zi=RegExp(Tr,"g"),Qi=RegExp(cr,"g"),Co=RegExp(Yr+"(?="+Yr+")|"+Xo+Qt,"g"),es=RegExp([wr+"?"+go+"+"+Gr+"(?="+[Ur,wr,"$"].join("|")+")",Eo+"+"+Jr+"(?="+[Ur,wr+gn,"$"].join("|")+")",wr+"?"+gn+"+"+Gr,wr+"+"+Jr,ur,Jo,Kr,Qr].join("|"),"g"),ns=RegExp("["+qr+Lt+Ko+Gn+"]"),rs=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,is=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ss=-1,sn={};sn[he]=sn[be]=sn[q]=sn[z]=sn[ee]=sn[Z]=sn[ue]=sn[we]=sn[Ae]=!0,sn[Gt]=sn[_t]=sn[A]=sn[et]=sn[J]=sn[ht]=sn[jt]=sn[ge]=sn[Ie]=sn[$e]=sn[nt]=sn[at]=sn[Fe]=sn[Ct]=sn[V]=!1;var rn={};rn[Gt]=rn[_t]=rn[A]=rn[J]=rn[et]=rn[ht]=rn[he]=rn[be]=rn[q]=rn[z]=rn[ee]=rn[Ie]=rn[$e]=rn[nt]=rn[at]=rn[Fe]=rn[Ct]=rn[mt]=rn[Z]=rn[ue]=rn[we]=rn[Ae]=!0,rn[jt]=rn[ge]=rn[V]=!1;var as={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},ls={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},cs={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},us={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ds=parseFloat,fs=parseInt,Zo=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,ps=typeof self=="object"&&self&&self.Object===Object&&self,bn=Zo||ps||Function("return this")(),So=e&&!e.nodeType&&e,dr=So&&!0&&t&&!t.nodeType&&t,Qo=dr&&dr.exports===So,To=Qo&&Zo.process,Dn=function(){try{var Oe=dr&&dr.require&&dr.require("util").types;return Oe||To&&To.binding&&To.binding("util")}catch{}}(),ei=Dn&&Dn.isArrayBuffer,ti=Dn&&Dn.isDate,ni=Dn&&Dn.isMap,ri=Dn&&Dn.isRegExp,oi=Dn&&Dn.isSet,ii=Dn&&Dn.isTypedArray;function Nn(Oe,Ve,Pe){switch(Pe.length){case 0:return Oe.call(Ve);case 1:return Oe.call(Ve,Pe[0]);case 2:return Oe.call(Ve,Pe[0],Pe[1]);case 3:return Oe.call(Ve,Pe[0],Pe[1],Pe[2])}return Oe.apply(Ve,Pe)}function hs(Oe,Ve,Pe,wt){for(var $t=-1,en=Oe==null?0:Oe.length;++$t<en;){var vn=Oe[$t];Ve(wt,vn,Pe(vn),Oe)}return wt}function Rn(Oe,Ve){for(var Pe=-1,wt=Oe==null?0:Oe.length;++Pe<wt&&Ve(Oe[Pe],Pe,Oe)!==!1;);return Oe}function ms(Oe,Ve){for(var Pe=Oe==null?0:Oe.length;Pe--&&Ve(Oe[Pe],Pe,Oe)!==!1;);return Oe}function si(Oe,Ve){for(var Pe=-1,wt=Oe==null?0:Oe.length;++Pe<wt;)if(!Ve(Oe[Pe],Pe,Oe))return!1;return!0}function er(Oe,Ve){for(var Pe=-1,wt=Oe==null?0:Oe.length,$t=0,en=[];++Pe<wt;){var vn=Oe[Pe];Ve(vn,Pe,Oe)&&(en[$t++]=vn)}return en}function eo(Oe,Ve){var Pe=Oe==null?0:Oe.length;return!!Pe&&Ar(Oe,Ve,0)>-1}function wo(Oe,Ve,Pe){for(var wt=-1,$t=Oe==null?0:Oe.length;++wt<$t;)if(Pe(Ve,Oe[wt]))return!0;return!1}function cn(Oe,Ve){for(var Pe=-1,wt=Oe==null?0:Oe.length,$t=Array(wt);++Pe<wt;)$t[Pe]=Ve(Oe[Pe],Pe,Oe);return $t}function nr(Oe,Ve){for(var Pe=-1,wt=Ve.length,$t=Oe.length;++Pe<wt;)Oe[$t+Pe]=Ve[Pe];return Oe}function Ao(Oe,Ve,Pe,wt){var $t=-1,en=Oe==null?0:Oe.length;for(wt&&en&&(Pe=Oe[++$t]);++$t<en;)Pe=Ve(Pe,Oe[$t],$t,Oe);return Pe}function gs(Oe,Ve,Pe,wt){var $t=Oe==null?0:Oe.length;for(wt&&$t&&(Pe=Oe[--$t]);$t--;)Pe=Ve(Pe,Oe[$t],$t,Oe);return Pe}function xo(Oe,Ve){for(var Pe=-1,wt=Oe==null?0:Oe.length;++Pe<wt;)if(Ve(Oe[Pe],Pe,Oe))return!0;return!1}var bs=_o("length");function vs(Oe){return Oe.split("")}function ys(Oe){return Oe.match(dt)||[]}function ai(Oe,Ve,Pe){var wt;return Pe(Oe,function($t,en,vn){if(Ve($t,en,vn))return wt=en,!1}),wt}function to(Oe,Ve,Pe,wt){for(var $t=Oe.length,en=Pe+(wt?1:-1);wt?en--:++en<$t;)if(Ve(Oe[en],en,Oe))return en;return-1}function Ar(Oe,Ve,Pe){return Ve===Ve?Qe(Oe,Ve,Pe):to(Oe,li,Pe)}function Es(Oe,Ve,Pe,wt){for(var $t=Pe-1,en=Oe.length;++$t<en;)if(wt(Oe[$t],Ve))return $t;return-1}function li(Oe){return Oe!==Oe}function ci(Oe,Ve){var Pe=Oe==null?0:Oe.length;return Pe?jo(Oe,Ve)/Pe:ut}function _o(Oe){return function(Ve){return Ve==null?n:Ve[Oe]}}function No(Oe){return function(Ve){return Oe==null?n:Oe[Ve]}}function ui(Oe,Ve,Pe,wt,$t){return $t(Oe,function(en,vn,an){Pe=wt?(wt=!1,en):Ve(Pe,en,vn,an)}),Pe}function Cs(Oe,Ve){var Pe=Oe.length;for(Oe.sort(Ve);Pe--;)Oe[Pe]=Oe[Pe].value;return Oe}function jo(Oe,Ve){for(var Pe,wt=-1,$t=Oe.length;++wt<$t;){var en=Ve(Oe[wt]);en!==n&&(Pe=Pe===n?en:Pe+en)}return Pe}function Oo(Oe,Ve){for(var Pe=-1,wt=Array(Oe);++Pe<Oe;)wt[Pe]=Ve(Pe);return wt}function Ss(Oe,Ve){return cn(Ve,function(Pe){return[Pe,Oe[Pe]]})}function di(Oe){return Oe&&Oe.slice(0,kt(Oe)+1).replace(de,"")}function Sn(Oe){return function(Ve){return Oe(Ve)}}function wn(Oe,Ve){return cn(Ve,function(Pe){return Oe[Pe]})}function fr(Oe,Ve){return Oe.has(Ve)}function no(Oe,Ve){for(var Pe=-1,wt=Oe.length;++Pe<wt&&Ar(Ve,Oe[Pe],0)>-1;);return Pe}function rr(Oe,Ve){for(var Pe=Oe.length;Pe--&&Ar(Ve,Oe[Pe],0)>-1;);return Pe}function fi(Oe,Ve){for(var Pe=Oe.length,wt=0;Pe--;)Oe[Pe]===Ve&&++wt;return wt}var Mo=No(as),Rr=No(ls);function Ts(Oe){return"\\"+us[Oe]}function d(Oe,Ve){return Oe==null?n:Oe[Ve]}function b(Oe){return ns.test(Oe)}function j(Oe){return rs.test(Oe)}function I(Oe){for(var Ve,Pe=[];!(Ve=Oe.next()).done;)Pe.push(Ve.value);return Pe}function U(Oe){var Ve=-1,Pe=Array(Oe.size);return Oe.forEach(function(wt,$t){Pe[++Ve]=[$t,wt]}),Pe}function X(Oe,Ve){return function(Pe){return Oe(Ve(Pe))}}function oe(Oe,Ve){for(var Pe=-1,wt=Oe.length,$t=0,en=[];++Pe<wt;){var vn=Oe[Pe];(vn===Ve||vn===g)&&(Oe[Pe]=g,en[$t++]=Pe)}return en}function Se(Oe){var Ve=-1,Pe=Array(Oe.size);return Oe.forEach(function(wt){Pe[++Ve]=wt}),Pe}function ke(Oe){var Ve=-1,Pe=Array(Oe.size);return Oe.forEach(function(wt){Pe[++Ve]=[wt,wt]}),Pe}function Qe(Oe,Ve,Pe){for(var wt=Pe-1,$t=Oe.length;++wt<$t;)if(Oe[wt]===Ve)return wt;return-1}function bt(Oe,Ve,Pe){for(var wt=Pe+1;wt--;)if(Oe[wt]===Ve)return wt;return wt}function At(Oe){return b(Oe)?Xt(Oe):bs(Oe)}function vt(Oe){return b(Oe)?An(Oe):vs(Oe)}function kt(Oe){for(var Ve=Oe.length;Ve--&&Me.test(Oe.charAt(Ve)););return Ve}var Kt=No(cs);function Xt(Oe){for(var Ve=Co.lastIndex=0;Co.test(Oe);)++Ve;return Ve}function An(Oe){return Oe.match(Co)||[]}function un(Oe){return Oe.match(es)||[]}var or=function Oe(Ve){Ve=Ve==null?bn:ro.defaults(bn.Object(),Ve,ro.pick(bn,is));var Pe=Ve.Array,wt=Ve.Date,$t=Ve.Error,en=Ve.Function,vn=Ve.Math,an=Ve.Object,ws=Ve.RegExp,gc=Ve.String,Wn=Ve.TypeError,pi=Pe.prototype,bc=en.prototype,oo=an.prototype,hi=Ve["__core-js_shared__"],mi=bc.toString,nn=oo.hasOwnProperty,vc=0,Ta=function(){var f=/[^.]+$/.exec(hi&&hi.keys&&hi.keys.IE_PROTO||"");return f?"Symbol(src)_1."+f:""}(),gi=oo.toString,yc=mi.call(an),Ec=bn._,Cc=ws("^"+mi.call(nn).replace(ce,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),bi=Qo?Ve.Buffer:n,xr=Ve.Symbol,vi=Ve.Uint8Array,wa=bi?bi.allocUnsafe:n,yi=X(an.getPrototypeOf,an),Aa=an.create,xa=oo.propertyIsEnumerable,Ei=pi.splice,_a=xr?xr.isConcatSpreadable:n,Do=xr?xr.iterator:n,Ir=xr?xr.toStringTag:n,Ci=function(){try{var f=Hr(an,"defineProperty");return f({},"",{}),f}catch{}}(),Sc=Ve.clearTimeout!==bn.clearTimeout&&Ve.clearTimeout,Tc=wt&&wt.now!==bn.Date.now&&wt.now,wc=Ve.setTimeout!==bn.setTimeout&&Ve.setTimeout,Si=vn.ceil,Ti=vn.floor,As=an.getOwnPropertySymbols,Ac=bi?bi.isBuffer:n,Na=Ve.isFinite,xc=pi.join,_c=X(an.keys,an),yn=vn.max,xn=vn.min,Nc=wt.now,jc=Ve.parseInt,ja=vn.random,Oc=pi.reverse,xs=Hr(Ve,"DataView"),Ro=Hr(Ve,"Map"),_s=Hr(Ve,"Promise"),io=Hr(Ve,"Set"),Io=Hr(Ve,"WeakMap"),ko=Hr(an,"create"),wi=Io&&new Io,so={},Mc=$r(xs),Dc=$r(Ro),Rc=$r(_s),Ic=$r(io),kc=$r(Io),Ai=xr?xr.prototype:n,Lo=Ai?Ai.valueOf:n,Oa=Ai?Ai.toString:n;function re(f){if(pn(f)&&!Bt(f)&&!(f instanceof qt)){if(f instanceof zn)return f;if(nn.call(f,"__wrapped__"))return Rl(f)}return new zn(f)}var ao=function(){function f(){}return function(E){if(!fn(E))return{};if(Aa)return Aa(E);f.prototype=E;var M=new f;return f.prototype=n,M}}();function xi(){}function zn(f,E){this.__wrapped__=f,this.__actions__=[],this.__chain__=!!E,this.__index__=0,this.__values__=n}re.templateSettings={escape:Le,evaluate:Xe,interpolate:ne,variable:"",imports:{_:re}},re.prototype=xi.prototype,re.prototype.constructor=re,zn.prototype=ao(xi.prototype),zn.prototype.constructor=zn;function qt(f){this.__wrapped__=f,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=It,this.__views__=[]}function Lc(){var f=new qt(this.__wrapped__);return f.__actions__=In(this.__actions__),f.__dir__=this.__dir__,f.__filtered__=this.__filtered__,f.__iteratees__=In(this.__iteratees__),f.__takeCount__=this.__takeCount__,f.__views__=In(this.__views__),f}function Pc(){if(this.__filtered__){var f=new qt(this);f.__dir__=-1,f.__filtered__=!0}else f=this.clone(),f.__dir__*=-1;return f}function Fc(){var f=this.__wrapped__.value(),E=this.__dir__,M=Bt(f),W=E<0,Q=M?f.length:0,ae=Ju(0,Q,this.__views__),ye=ae.start,xe=ae.end,Re=xe-ye,Ge=W?xe:ye-1,Je=this.__iteratees__,rt=Je.length,yt=0,xt=xn(Re,this.__takeCount__);if(!M||!W&&Q==Re&&xt==Re)return tl(f,this.__actions__);var Dt=[];e:for(;Re--&&yt<xt;){Ge+=E;for(var zt=-1,Rt=f[Ge];++zt<rt;){var Yt=Je[zt],Jt=Yt.iteratee,$n=Yt.type,Mn=Jt(Rt);if($n==_e)Rt=Mn;else if(!Mn){if($n==Ne)continue e;break e}}Dt[yt++]=Rt}return Dt}qt.prototype=ao(xi.prototype),qt.prototype.constructor=qt;function kr(f){var E=-1,M=f==null?0:f.length;for(this.clear();++E<M;){var W=f[E];this.set(W[0],W[1])}}function Hc(){this.__data__=ko?ko(null):{},this.size=0}function $c(f){var E=this.has(f)&&delete this.__data__[f];return this.size-=E?1:0,E}function Bc(f){var E=this.__data__;if(ko){var M=E[f];return M===c?n:M}return nn.call(E,f)?E[f]:n}function Vc(f){var E=this.__data__;return ko?E[f]!==n:nn.call(E,f)}function Wc(f,E){var M=this.__data__;return this.size+=this.has(f)?0:1,M[f]=ko&&E===n?c:E,this}kr.prototype.clear=Hc,kr.prototype.delete=$c,kr.prototype.get=Bc,kr.prototype.has=Vc,kr.prototype.set=Wc;function pr(f){var E=-1,M=f==null?0:f.length;for(this.clear();++E<M;){var W=f[E];this.set(W[0],W[1])}}function zc(){this.__data__=[],this.size=0}function Uc(f){var E=this.__data__,M=_i(E,f);if(M<0)return!1;var W=E.length-1;return M==W?E.pop():Ei.call(E,M,1),--this.size,!0}function Kc(f){var E=this.__data__,M=_i(E,f);return M<0?n:E[M][1]}function Yc(f){return _i(this.__data__,f)>-1}function qc(f,E){var M=this.__data__,W=_i(M,f);return W<0?(++this.size,M.push([f,E])):M[W][1]=E,this}pr.prototype.clear=zc,pr.prototype.delete=Uc,pr.prototype.get=Kc,pr.prototype.has=Yc,pr.prototype.set=qc;function hr(f){var E=-1,M=f==null?0:f.length;for(this.clear();++E<M;){var W=f[E];this.set(W[0],W[1])}}function Gc(){this.size=0,this.__data__={hash:new kr,map:new(Ro||pr),string:new kr}}function Jc(f){var E=Hi(this,f).delete(f);return this.size-=E?1:0,E}function Xc(f){return Hi(this,f).get(f)}function Zc(f){return Hi(this,f).has(f)}function Qc(f,E){var M=Hi(this,f),W=M.size;return M.set(f,E),this.size+=M.size==W?0:1,this}hr.prototype.clear=Gc,hr.prototype.delete=Jc,hr.prototype.get=Xc,hr.prototype.has=Zc,hr.prototype.set=Qc;function Lr(f){var E=-1,M=f==null?0:f.length;for(this.__data__=new hr;++E<M;)this.add(f[E])}function eu(f){return this.__data__.set(f,c),this}function tu(f){return this.__data__.has(f)}Lr.prototype.add=Lr.prototype.push=eu,Lr.prototype.has=tu;function Jn(f){var E=this.__data__=new pr(f);this.size=E.size}function nu(){this.__data__=new pr,this.size=0}function ru(f){var E=this.__data__,M=E.delete(f);return this.size=E.size,M}function ou(f){return this.__data__.get(f)}function iu(f){return this.__data__.has(f)}function su(f,E){var M=this.__data__;if(M instanceof pr){var W=M.__data__;if(!Ro||W.length<o-1)return W.push([f,E]),this.size=++M.size,this;M=this.__data__=new hr(W)}return M.set(f,E),this.size=M.size,this}Jn.prototype.clear=nu,Jn.prototype.delete=ru,Jn.prototype.get=ou,Jn.prototype.has=iu,Jn.prototype.set=su;function Ma(f,E){var M=Bt(f),W=!M&&Br(f),Q=!M&&!W&&Mr(f),ae=!M&&!W&&!Q&&fo(f),ye=M||W||Q||ae,xe=ye?Oo(f.length,gc):[],Re=xe.length;for(var Ge in f)(E||nn.call(f,Ge))&&!(ye&&(Ge=="length"||Q&&(Ge=="offset"||Ge=="parent")||ae&&(Ge=="buffer"||Ge=="byteLength"||Ge=="byteOffset")||vr(Ge,Re)))&&xe.push(Ge);return xe}function Da(f){var E=f.length;return E?f[Fs(0,E-1)]:n}function au(f,E){return $i(In(f),Pr(E,0,f.length))}function lu(f){return $i(In(f))}function Ns(f,E,M){(M!==n&&!Xn(f[E],M)||M===n&&!(E in f))&&mr(f,E,M)}function Po(f,E,M){var W=f[E];(!(nn.call(f,E)&&Xn(W,M))||M===n&&!(E in f))&&mr(f,E,M)}function _i(f,E){for(var M=f.length;M--;)if(Xn(f[M][0],E))return M;return-1}function cu(f,E,M,W){return _r(f,function(Q,ae,ye){E(W,Q,M(Q),ye)}),W}function Ra(f,E){return f&&sr(E,En(E),f)}function uu(f,E){return f&&sr(E,Ln(E),f)}function mr(f,E,M){E=="__proto__"&&Ci?Ci(f,E,{configurable:!0,enumerable:!0,value:M,writable:!0}):f[E]=M}function js(f,E){for(var M=-1,W=E.length,Q=Pe(W),ae=f==null;++M<W;)Q[M]=ae?n:ua(f,E[M]);return Q}function Pr(f,E,M){return f===f&&(M!==n&&(f=f<=M?f:M),E!==n&&(f=f>=E?f:E)),f}function Un(f,E,M,W,Q,ae){var ye,xe=E&C,Re=E&v,Ge=E&m;if(M&&(ye=Q?M(f,W,Q,ae):M(f)),ye!==n)return ye;if(!fn(f))return f;var Je=Bt(f);if(Je){if(ye=Zu(f),!xe)return In(f,ye)}else{var rt=_n(f),yt=rt==ge||rt==Te;if(Mr(f))return ol(f,xe);if(rt==nt||rt==Gt||yt&&!Q){if(ye=Re||yt?{}:Tl(f),!xe)return Re?Bu(f,uu(ye,f)):$u(f,Ra(ye,f))}else{if(!rn[rt])return Q?f:{};ye=Qu(f,rt,xe)}}ae||(ae=new Jn);var xt=ae.get(f);if(xt)return xt;ae.set(f,ye),Ql(f)?f.forEach(function(Rt){ye.add(Un(Rt,E,M,Rt,f,ae))}):Xl(f)&&f.forEach(function(Rt,Yt){ye.set(Yt,Un(Rt,E,M,Yt,f,ae))});var Dt=Ge?Re?Gs:qs:Re?Ln:En,zt=Je?n:Dt(f);return Rn(zt||f,function(Rt,Yt){zt&&(Yt=Rt,Rt=f[Yt]),Po(ye,Yt,Un(Rt,E,M,Yt,f,ae))}),ye}function du(f){var E=En(f);return function(M){return Ia(M,f,E)}}function Ia(f,E,M){var W=M.length;if(f==null)return!W;for(f=an(f);W--;){var Q=M[W],ae=E[Q],ye=f[Q];if(ye===n&&!(Q in f)||!ae(ye))return!1}return!0}function ka(f,E,M){if(typeof f!="function")throw new Wn(a);return zo(function(){f.apply(n,M)},E)}function Fo(f,E,M,W){var Q=-1,ae=eo,ye=!0,xe=f.length,Re=[],Ge=E.length;if(!xe)return Re;M&&(E=cn(E,Sn(M))),W?(ae=wo,ye=!1):E.length>=o&&(ae=fr,ye=!1,E=new Lr(E));e:for(;++Q<xe;){var Je=f[Q],rt=M==null?Je:M(Je);if(Je=W||Je!==0?Je:0,ye&&rt===rt){for(var yt=Ge;yt--;)if(E[yt]===rt)continue e;Re.push(Je)}else ae(E,rt,W)||Re.push(Je)}return Re}var _r=cl(ir),La=cl(Ms,!0);function fu(f,E){var M=!0;return _r(f,function(W,Q,ae){return M=!!E(W,Q,ae),M}),M}function Ni(f,E,M){for(var W=-1,Q=f.length;++W<Q;){var ae=f[W],ye=E(ae);if(ye!=null&&(xe===n?ye===ye&&!Hn(ye):M(ye,xe)))var xe=ye,Re=ae}return Re}function pu(f,E,M,W){var Q=f.length;for(M=Wt(M),M<0&&(M=-M>Q?0:Q+M),W=W===n||W>Q?Q:Wt(W),W<0&&(W+=Q),W=M>W?0:tc(W);M<W;)f[M++]=E;return f}function Pa(f,E){var M=[];return _r(f,function(W,Q,ae){E(W,Q,ae)&&M.push(W)}),M}function Tn(f,E,M,W,Q){var ae=-1,ye=f.length;for(M||(M=td),Q||(Q=[]);++ae<ye;){var xe=f[ae];E>0&&M(xe)?E>1?Tn(xe,E-1,M,W,Q):nr(Q,xe):W||(Q[Q.length]=xe)}return Q}var Os=ul(),Fa=ul(!0);function ir(f,E){return f&&Os(f,E,En)}function Ms(f,E){return f&&Fa(f,E,En)}function ji(f,E){return er(E,function(M){return yr(f[M])})}function Fr(f,E){E=jr(E,f);for(var M=0,W=E.length;f!=null&&M<W;)f=f[ar(E[M++])];return M&&M==W?f:n}function Ha(f,E,M){var W=E(f);return Bt(f)?W:nr(W,M(f))}function jn(f){return f==null?f===n?F:Be:Ir&&Ir in an(f)?Gu(f):ld(f)}function Ds(f,E){return f>E}function hu(f,E){return f!=null&&nn.call(f,E)}function mu(f,E){return f!=null&&E in an(f)}function gu(f,E,M){return f>=xn(E,M)&&f<yn(E,M)}function Rs(f,E,M){for(var W=M?wo:eo,Q=f[0].length,ae=f.length,ye=ae,xe=Pe(ae),Re=1/0,Ge=[];ye--;){var Je=f[ye];ye&&E&&(Je=cn(Je,Sn(E))),Re=xn(Je.length,Re),xe[ye]=!M&&(E||Q>=120&&Je.length>=120)?new Lr(ye&&Je):n}Je=f[0];var rt=-1,yt=xe[0];e:for(;++rt<Q&&Ge.length<Re;){var xt=Je[rt],Dt=E?E(xt):xt;if(xt=M||xt!==0?xt:0,!(yt?fr(yt,Dt):W(Ge,Dt,M))){for(ye=ae;--ye;){var zt=xe[ye];if(!(zt?fr(zt,Dt):W(f[ye],Dt,M)))continue e}yt&&yt.push(Dt),Ge.push(xt)}}return Ge}function bu(f,E,M,W){return ir(f,function(Q,ae,ye){E(W,M(Q),ae,ye)}),W}function Ho(f,E,M){E=jr(E,f),f=_l(f,E);var W=f==null?f:f[ar(Yn(E))];return W==null?n:Nn(W,f,M)}function $a(f){return pn(f)&&jn(f)==Gt}function vu(f){return pn(f)&&jn(f)==A}function yu(f){return pn(f)&&jn(f)==ht}function $o(f,E,M,W,Q){return f===E?!0:f==null||E==null||!pn(f)&&!pn(E)?f!==f&&E!==E:Eu(f,E,M,W,$o,Q)}function Eu(f,E,M,W,Q,ae){var ye=Bt(f),xe=Bt(E),Re=ye?_t:_n(f),Ge=xe?_t:_n(E);Re=Re==Gt?nt:Re,Ge=Ge==Gt?nt:Ge;var Je=Re==nt,rt=Ge==nt,yt=Re==Ge;if(yt&&Mr(f)){if(!Mr(E))return!1;ye=!0,Je=!1}if(yt&&!Je)return ae||(ae=new Jn),ye||fo(f)?El(f,E,M,W,Q,ae):Yu(f,E,Re,M,W,Q,ae);if(!(M&S)){var xt=Je&&nn.call(f,"__wrapped__"),Dt=rt&&nn.call(E,"__wrapped__");if(xt||Dt){var zt=xt?f.value():f,Rt=Dt?E.value():E;return ae||(ae=new Jn),Q(zt,Rt,M,W,ae)}}return yt?(ae||(ae=new Jn),qu(f,E,M,W,Q,ae)):!1}function Cu(f){return pn(f)&&_n(f)==Ie}function Is(f,E,M,W){var Q=M.length,ae=Q,ye=!W;if(f==null)return!ae;for(f=an(f);Q--;){var xe=M[Q];if(ye&&xe[2]?xe[1]!==f[xe[0]]:!(xe[0]in f))return!1}for(;++Q<ae;){xe=M[Q];var Re=xe[0],Ge=f[Re],Je=xe[1];if(ye&&xe[2]){if(Ge===n&&!(Re in f))return!1}else{var rt=new Jn;if(W)var yt=W(Ge,Je,Re,f,E,rt);if(!(yt===n?$o(Je,Ge,S|T,W,rt):yt))return!1}}return!0}function Ba(f){if(!fn(f)||rd(f))return!1;var E=yr(f)?Cc:Pt;return E.test($r(f))}function Su(f){return pn(f)&&jn(f)==at}function Tu(f){return pn(f)&&_n(f)==Fe}function wu(f){return pn(f)&&Ki(f.length)&&!!sn[jn(f)]}function Va(f){return typeof f=="function"?f:f==null?Pn:typeof f=="object"?Bt(f)?Ua(f[0],f[1]):za(f):fc(f)}function ks(f){if(!Wo(f))return _c(f);var E=[];for(var M in an(f))nn.call(f,M)&&M!="constructor"&&E.push(M);return E}function Au(f){if(!fn(f))return ad(f);var E=Wo(f),M=[];for(var W in f)W=="constructor"&&(E||!nn.call(f,W))||M.push(W);return M}function Ls(f,E){return f<E}function Wa(f,E){var M=-1,W=kn(f)?Pe(f.length):[];return _r(f,function(Q,ae,ye){W[++M]=E(Q,ae,ye)}),W}function za(f){var E=Xs(f);return E.length==1&&E[0][2]?Al(E[0][0],E[0][1]):function(M){return M===f||Is(M,f,E)}}function Ua(f,E){return Qs(f)&&wl(E)?Al(ar(f),E):function(M){var W=ua(M,f);return W===n&&W===E?da(M,f):$o(E,W,S|T)}}function Oi(f,E,M,W,Q){f!==E&&Os(E,function(ae,ye){if(Q||(Q=new Jn),fn(ae))xu(f,E,ye,M,Oi,W,Q);else{var xe=W?W(na(f,ye),ae,ye+"",f,E,Q):n;xe===n&&(xe=ae),Ns(f,ye,xe)}},Ln)}function xu(f,E,M,W,Q,ae,ye){var xe=na(f,M),Re=na(E,M),Ge=ye.get(Re);if(Ge){Ns(f,M,Ge);return}var Je=ae?ae(xe,Re,M+"",f,E,ye):n,rt=Je===n;if(rt){var yt=Bt(Re),xt=!yt&&Mr(Re),Dt=!yt&&!xt&&fo(Re);Je=Re,yt||xt||Dt?Bt(xe)?Je=xe:hn(xe)?Je=In(xe):xt?(rt=!1,Je=ol(Re,!0)):Dt?(rt=!1,Je=il(Re,!0)):Je=[]:Uo(Re)||Br(Re)?(Je=xe,Br(xe)?Je=nc(xe):(!fn(xe)||yr(xe))&&(Je=Tl(Re))):rt=!1}rt&&(ye.set(Re,Je),Q(Je,Re,W,ae,ye),ye.delete(Re)),Ns(f,M,Je)}function Ka(f,E){var M=f.length;if(M)return E+=E<0?M:0,vr(E,M)?f[E]:n}function Ya(f,E,M){E.length?E=cn(E,function(ae){return Bt(ae)?function(ye){return Fr(ye,ae.length===1?ae[0]:ae)}:ae}):E=[Pn];var W=-1;E=cn(E,Sn(Mt()));var Q=Wa(f,function(ae,ye,xe){var Re=cn(E,function(Ge){return Ge(ae)});return{criteria:Re,index:++W,value:ae}});return Cs(Q,function(ae,ye){return Hu(ae,ye,M)})}function _u(f,E){return qa(f,E,function(M,W){return da(f,W)})}function qa(f,E,M){for(var W=-1,Q=E.length,ae={};++W<Q;){var ye=E[W],xe=Fr(f,ye);M(xe,ye)&&Bo(ae,jr(ye,f),xe)}return ae}function Nu(f){return function(E){return Fr(E,f)}}function Ps(f,E,M,W){var Q=W?Es:Ar,ae=-1,ye=E.length,xe=f;for(f===E&&(E=In(E)),M&&(xe=cn(f,Sn(M)));++ae<ye;)for(var Re=0,Ge=E[ae],Je=M?M(Ge):Ge;(Re=Q(xe,Je,Re,W))>-1;)xe!==f&&Ei.call(xe,Re,1),Ei.call(f,Re,1);return f}function Ga(f,E){for(var M=f?E.length:0,W=M-1;M--;){var Q=E[M];if(M==W||Q!==ae){var ae=Q;vr(Q)?Ei.call(f,Q,1):Bs(f,Q)}}return f}function Fs(f,E){return f+Ti(ja()*(E-f+1))}function ju(f,E,M,W){for(var Q=-1,ae=yn(Si((E-f)/(M||1)),0),ye=Pe(ae);ae--;)ye[W?ae:++Q]=f,f+=M;return ye}function Hs(f,E){var M="";if(!f||E<1||E>Ye)return M;do E%2&&(M+=f),E=Ti(E/2),E&&(f+=f);while(E);return M}function Ut(f,E){return ra(xl(f,E,Pn),f+"")}function Ou(f){return Da(po(f))}function Mu(f,E){var M=po(f);return $i(M,Pr(E,0,M.length))}function Bo(f,E,M,W){if(!fn(f))return f;E=jr(E,f);for(var Q=-1,ae=E.length,ye=ae-1,xe=f;xe!=null&&++Q<ae;){var Re=ar(E[Q]),Ge=M;if(Re==="__proto__"||Re==="constructor"||Re==="prototype")return f;if(Q!=ye){var Je=xe[Re];Ge=W?W(Je,Re,xe):n,Ge===n&&(Ge=fn(Je)?Je:vr(E[Q+1])?[]:{})}Po(xe,Re,Ge),xe=xe[Re]}return f}var Ja=wi?function(f,E){return wi.set(f,E),f}:Pn,Du=Ci?function(f,E){return Ci(f,"toString",{configurable:!0,enumerable:!1,value:pa(E),writable:!0})}:Pn;function Ru(f){return $i(po(f))}function Kn(f,E,M){var W=-1,Q=f.length;E<0&&(E=-E>Q?0:Q+E),M=M>Q?Q:M,M<0&&(M+=Q),Q=E>M?0:M-E>>>0,E>>>=0;for(var ae=Pe(Q);++W<Q;)ae[W]=f[W+E];return ae}function Iu(f,E){var M;return _r(f,function(W,Q,ae){return M=E(W,Q,ae),!M}),!!M}function Mi(f,E,M){var W=0,Q=f==null?W:f.length;if(typeof E=="number"&&E===E&&Q<=ot){for(;W<Q;){var ae=W+Q>>>1,ye=f[ae];ye!==null&&!Hn(ye)&&(M?ye<=E:ye<E)?W=ae+1:Q=ae}return Q}return $s(f,E,Pn,M)}function $s(f,E,M,W){var Q=0,ae=f==null?0:f.length;if(ae===0)return 0;E=M(E);for(var ye=E!==E,xe=E===null,Re=Hn(E),Ge=E===n;Q<ae;){var Je=Ti((Q+ae)/2),rt=M(f[Je]),yt=rt!==n,xt=rt===null,Dt=rt===rt,zt=Hn(rt);if(ye)var Rt=W||Dt;else Ge?Rt=Dt&&(W||yt):xe?Rt=Dt&&yt&&(W||!xt):Re?Rt=Dt&&yt&&!xt&&(W||!zt):xt||zt?Rt=!1:Rt=W?rt<=E:rt<E;Rt?Q=Je+1:ae=Je}return xn(ae,te)}function Xa(f,E){for(var M=-1,W=f.length,Q=0,ae=[];++M<W;){var ye=f[M],xe=E?E(ye):ye;if(!M||!Xn(xe,Re)){var Re=xe;ae[Q++]=ye===0?0:ye}}return ae}function Za(f){return typeof f=="number"?f:Hn(f)?ut:+f}function Fn(f){if(typeof f=="string")return f;if(Bt(f))return cn(f,Fn)+"";if(Hn(f))return Oa?Oa.call(f):"";var E=f+"";return E=="0"&&1/f==-Ke?"-0":E}function Nr(f,E,M){var W=-1,Q=eo,ae=f.length,ye=!0,xe=[],Re=xe;if(M)ye=!1,Q=wo;else if(ae>=o){var Ge=E?null:Uu(f);if(Ge)return Se(Ge);ye=!1,Q=fr,Re=new Lr}else Re=E?[]:xe;e:for(;++W<ae;){var Je=f[W],rt=E?E(Je):Je;if(Je=M||Je!==0?Je:0,ye&&rt===rt){for(var yt=Re.length;yt--;)if(Re[yt]===rt)continue e;E&&Re.push(rt),xe.push(Je)}else Q(Re,rt,M)||(Re!==xe&&Re.push(rt),xe.push(Je))}return xe}function Bs(f,E){return E=jr(E,f),f=_l(f,E),f==null||delete f[ar(Yn(E))]}function Qa(f,E,M,W){return Bo(f,E,M(Fr(f,E)),W)}function Di(f,E,M,W){for(var Q=f.length,ae=W?Q:-1;(W?ae--:++ae<Q)&&E(f[ae],ae,f););return M?Kn(f,W?0:ae,W?ae+1:Q):Kn(f,W?ae+1:0,W?Q:ae)}function tl(f,E){var M=f;return M instanceof qt&&(M=M.value()),Ao(E,function(W,Q){return Q.func.apply(Q.thisArg,nr([W],Q.args))},M)}function Vs(f,E,M){var W=f.length;if(W<2)return W?Nr(f[0]):[];for(var Q=-1,ae=Pe(W);++Q<W;)for(var ye=f[Q],xe=-1;++xe<W;)xe!=Q&&(ae[Q]=Fo(ae[Q]||ye,f[xe],E,M));return Nr(Tn(ae,1),E,M)}function nl(f,E,M){for(var W=-1,Q=f.length,ae=E.length,ye={};++W<Q;){var xe=W<ae?E[W]:n;M(ye,f[W],xe)}return ye}function Ws(f){return hn(f)?f:[]}function zs(f){return typeof f=="function"?f:Pn}function jr(f,E){return Bt(f)?f:Qs(f,E)?[f]:Dl(tn(f))}var ku=Ut;function Or(f,E,M){var W=f.length;return M=M===n?W:M,!E&&M>=W?f:Kn(f,E,M)}var rl=Sc||function(f){return bn.clearTimeout(f)};function ol(f,E){if(E)return f.slice();var M=f.length,W=wa?wa(M):new f.constructor(M);return f.copy(W),W}function Us(f){var E=new f.constructor(f.byteLength);return new vi(E).set(new vi(f)),E}function Lu(f,E){var M=E?Us(f.buffer):f.buffer;return new f.constructor(M,f.byteOffset,f.byteLength)}function Pu(f){var E=new f.constructor(f.source,We.exec(f));return E.lastIndex=f.lastIndex,E}function Fu(f){return Lo?an(Lo.call(f)):{}}function il(f,E){var M=E?Us(f.buffer):f.buffer;return new f.constructor(M,f.byteOffset,f.length)}function sl(f,E){if(f!==E){var M=f!==n,W=f===null,Q=f===f,ae=Hn(f),ye=E!==n,xe=E===null,Re=E===E,Ge=Hn(E);if(!xe&&!Ge&&!ae&&f>E||ae&&ye&&Re&&!xe&&!Ge||W&&ye&&Re||!M&&Re||!Q)return 1;if(!W&&!ae&&!Ge&&f<E||Ge&&M&&Q&&!W&&!ae||xe&&M&&Q||!ye&&Q||!Re)return-1}return 0}function Hu(f,E,M){for(var W=-1,Q=f.criteria,ae=E.criteria,ye=Q.length,xe=M.length;++W<ye;){var Re=sl(Q[W],ae[W]);if(Re){if(W>=xe)return Re;var Ge=M[W];return Re*(Ge=="desc"?-1:1)}}return f.index-E.index}function al(f,E,M,W){for(var Q=-1,ae=f.length,ye=M.length,xe=-1,Re=E.length,Ge=yn(ae-ye,0),Je=Pe(Re+Ge),rt=!W;++xe<Re;)Je[xe]=E[xe];for(;++Q<ye;)(rt||Q<ae)&&(Je[M[Q]]=f[Q]);for(;Ge--;)Je[xe++]=f[Q++];return Je}function ll(f,E,M,W){for(var Q=-1,ae=f.length,ye=-1,xe=M.length,Re=-1,Ge=E.length,Je=yn(ae-xe,0),rt=Pe(Je+Ge),yt=!W;++Q<Je;)rt[Q]=f[Q];for(var xt=Q;++Re<Ge;)rt[xt+Re]=E[Re];for(;++ye<xe;)(yt||Q<ae)&&(rt[xt+M[ye]]=f[Q++]);return rt}function In(f,E){var M=-1,W=f.length;for(E||(E=Pe(W));++M<W;)E[M]=f[M];return E}function sr(f,E,M,W){var Q=!M;M||(M={});for(var ae=-1,ye=E.length;++ae<ye;){var xe=E[ae],Re=W?W(M[xe],f[xe],xe,M,f):n;Re===n&&(Re=f[xe]),Q?mr(M,xe,Re):Po(M,xe,Re)}return M}function $u(f,E){return sr(f,Zs(f),E)}function Bu(f,E){return sr(f,Cl(f),E)}function Ri(f,E){return function(M,W){var Q=Bt(M)?hs:cu,ae=E?E():{};return Q(M,f,Mt(W,2),ae)}}function lo(f){return Ut(function(E,M){var W=-1,Q=M.length,ae=Q>1?M[Q-1]:n,ye=Q>2?M[2]:n;for(ae=f.length>3&&typeof ae=="function"?(Q--,ae):n,ye&&On(M[0],M[1],ye)&&(ae=Q<3?n:ae,Q=1),E=an(E);++W<Q;){var xe=M[W];xe&&f(E,xe,W,ae)}return E})}function cl(f,E){return function(M,W){if(M==null)return M;if(!kn(M))return f(M,W);for(var Q=M.length,ae=E?Q:-1,ye=an(M);(E?ae--:++ae<Q)&&W(ye[ae],ae,ye)!==!1;);return M}}function ul(f){return function(E,M,W){for(var Q=-1,ae=an(E),ye=W(E),xe=ye.length;xe--;){var Re=ye[f?xe:++Q];if(M(ae[Re],Re,ae)===!1)break}return E}}function Vu(f,E,M){var W=E&w,Q=Vo(f);function ae(){var ye=this&&this!==bn&&this instanceof ae?Q:f;return ye.apply(W?M:this,arguments)}return ae}function dl(f){return function(E){E=tn(E);var M=b(E)?vt(E):n,W=M?M[0]:E.charAt(0),Q=M?Or(M,1).join(""):E.slice(1);return W[f]()+Q}}function co(f){return function(E){return Ao(uc(cc(E).replace(Zi,"")),f,"")}}function Vo(f){return function(){var E=arguments;switch(E.length){case 0:return new f;case 1:return new f(E[0]);case 2:return new f(E[0],E[1]);case 3:return new f(E[0],E[1],E[2]);case 4:return new f(E[0],E[1],E[2],E[3]);case 5:return new f(E[0],E[1],E[2],E[3],E[4]);case 6:return new f(E[0],E[1],E[2],E[3],E[4],E[5]);case 7:return new f(E[0],E[1],E[2],E[3],E[4],E[5],E[6])}var M=ao(f.prototype),W=f.apply(M,E);return fn(W)?W:M}}function Wu(f,E,M){var W=Vo(f);function Q(){for(var ae=arguments.length,ye=Pe(ae),xe=ae,Re=uo(Q);xe--;)ye[xe]=arguments[xe];var Ge=ae<3&&ye[0]!==Re&&ye[ae-1]!==Re?[]:oe(ye,Re);if(ae-=Ge.length,ae<M)return gl(f,E,Ii,Q.placeholder,n,ye,Ge,n,n,M-ae);var Je=this&&this!==bn&&this instanceof Q?W:f;return Nn(Je,this,ye)}return Q}function fl(f){return function(E,M,W){var Q=an(E);if(!kn(E)){var ae=Mt(M,3);E=En(E),M=function(xe){return ae(Q[xe],xe,Q)}}var ye=f(E,M,W);return ye>-1?Q[ae?E[ye]:ye]:n}}function pl(f){return br(function(E){var M=E.length,W=M,Q=zn.prototype.thru;for(f&&E.reverse();W--;){var ae=E[W];if(typeof ae!="function")throw new Wn(a);if(Q&&!ye&&Fi(ae)=="wrapper")var ye=new zn([],!0)}for(W=ye?W:M;++W<M;){ae=E[W];var xe=Fi(ae),Re=xe=="wrapper"?Js(ae):n;Re&&ea(Re[0])&&Re[1]==(B|k|H|Y)&&!Re[4].length&&Re[9]==1?ye=ye[Fi(Re[0])].apply(ye,Re[3]):ye=ae.length==1&&ea(ae)?ye[xe]():ye.thru(ae)}return function(){var Ge=arguments,Je=Ge[0];if(ye&&Ge.length==1&&Bt(Je))return ye.plant(Je).value();for(var rt=0,yt=M?E[rt].apply(this,Ge):Je;++rt<M;)yt=E[rt].call(this,yt);return yt}})}function Ii(f,E,M,W,Q,ae,ye,xe,Re,Ge){var Je=E&B,rt=E&w,yt=E&N,xt=E&(k|L),Dt=E&K,zt=yt?n:Vo(f);function Rt(){for(var Yt=arguments.length,Jt=Pe(Yt),$n=Yt;$n--;)Jt[$n]=arguments[$n];if(xt)var Mn=uo(Rt),Bn=fi(Jt,Mn);if(W&&(Jt=al(Jt,W,Q,xt)),ae&&(Jt=ll(Jt,ae,ye,xt)),Yt-=Bn,xt&&Yt<Ge){var mn=oe(Jt,Mn);return gl(f,E,Ii,Rt.placeholder,M,Jt,mn,xe,Re,Ge-Yt)}var Zn=rt?M:this,Cr=yt?Zn[f]:f;return Yt=Jt.length,xe?Jt=cd(Jt,xe):Dt&&Yt>1&&Jt.reverse(),Je&&Re<Yt&&(Jt.length=Re),this&&this!==bn&&this instanceof Rt&&(Cr=zt||Vo(Cr)),Cr.apply(Zn,Jt)}return Rt}function hl(f,E){return function(M,W){return bu(M,f,E(W),{})}}function ki(f,E){return function(M,W){var Q;if(M===n&&W===n)return E;if(M!==n&&(Q=M),W!==n){if(Q===n)return W;typeof M=="string"||typeof W=="string"?(M=Fn(M),W=Fn(W)):(M=Za(M),W=Za(W)),Q=f(M,W)}return Q}}function Ks(f){return br(function(E){return E=cn(E,Sn(Mt())),Ut(function(M){var W=this;return f(E,function(Q){return Nn(Q,W,M)})})})}function Li(f,E){E=E===n?" ":Fn(E);var M=E.length;if(M<2)return M?Hs(E,f):E;var W=Hs(E,Si(f/At(E)));return b(E)?Or(vt(W),0,f).join(""):W.slice(0,f)}function zu(f,E,M,W){var Q=E&w,ae=Vo(f);function ye(){for(var xe=-1,Re=arguments.length,Ge=-1,Je=W.length,rt=Pe(Je+Re),yt=this&&this!==bn&&this instanceof ye?ae:f;++Ge<Je;)rt[Ge]=W[Ge];for(;Re--;)rt[Ge++]=arguments[++xe];return Nn(yt,Q?M:this,rt)}return ye}function ml(f){return function(E,M,W){return W&&typeof W!="number"&&On(E,M,W)&&(M=W=n),E=Er(E),M===n?(M=E,E=0):M=Er(M),W=W===n?E<M?1:-1:Er(W),ju(E,M,W,f)}}function Pi(f){return function(E,M){return typeof E=="string"&&typeof M=="string"||(E=qn(E),M=qn(M)),f(E,M)}}function gl(f,E,M,W,Q,ae,ye,xe,Re,Ge){var Je=E&k,rt=Je?ye:n,yt=Je?n:ye,xt=Je?ae:n,Dt=Je?n:ae;E|=Je?H:R,E&=~(Je?R:H),E&D||(E&=~(w|N));var zt=[f,E,Q,xt,rt,Dt,yt,xe,Re,Ge],Rt=M.apply(n,zt);return ea(f)&&jl(Rt,zt),Rt.placeholder=W,Ol(Rt,f,E)}function Ys(f){var E=vn[f];return function(M,W){if(M=qn(M),W=W==null?0:xn(Wt(W),292),W&&Na(M)){var Q=(tn(M)+"e").split("e"),ae=E(Q[0]+"e"+(+Q[1]+W));return Q=(tn(ae)+"e").split("e"),+(Q[0]+"e"+(+Q[1]-W))}return E(M)}}var Uu=io&&1/Se(new io([,-0]))[1]==Ke?function(f){return new io(f)}:ga;function bl(f){return function(E){var M=_n(E);return M==Ie?U(E):M==Fe?ke(E):Ss(E,f(E))}}function gr(f,E,M,W,Q,ae,ye,xe){var Re=E&N;if(!Re&&typeof f!="function")throw new Wn(a);var Ge=W?W.length:0;if(Ge||(E&=~(H|R),W=Q=n),ye=ye===n?ye:yn(Wt(ye),0),xe=xe===n?xe:Wt(xe),Ge-=Q?Q.length:0,E&R){var Je=W,rt=Q;W=Q=n}var yt=Re?n:Js(f),xt=[f,E,M,W,Q,Je,rt,ae,ye,xe];if(yt&&sd(xt,yt),f=xt[0],E=xt[1],M=xt[2],W=xt[3],Q=xt[4],xe=xt[9]=xt[9]===n?Re?0:f.length:yn(xt[9]-Ge,0),!xe&&E&(k|L)&&(E&=~(k|L)),!E||E==w)var Dt=Vu(f,E,M);else E==k||E==L?Dt=Wu(f,E,xe):(E==H||E==(w|H))&&!Q.length?Dt=zu(f,E,M,W):Dt=Ii.apply(n,xt);var zt=yt?Ja:jl;return Ol(zt(Dt,xt),f,E)}function vl(f,E,M,W){return f===n||Xn(f,oo[M])&&!nn.call(W,M)?E:f}function yl(f,E,M,W,Q,ae){return fn(f)&&fn(E)&&(ae.set(E,f),Oi(f,E,n,yl,ae),ae.delete(E)),f}function Ku(f){return Uo(f)?n:f}function El(f,E,M,W,Q,ae){var ye=M&S,xe=f.length,Re=E.length;if(xe!=Re&&!(ye&&Re>xe))return!1;var Ge=ae.get(f),Je=ae.get(E);if(Ge&&Je)return Ge==E&&Je==f;var rt=-1,yt=!0,xt=M&T?new Lr:n;for(ae.set(f,E),ae.set(E,f);++rt<xe;){var Dt=f[rt],zt=E[rt];if(W)var Rt=ye?W(zt,Dt,rt,E,f,ae):W(Dt,zt,rt,f,E,ae);if(Rt!==n){if(Rt)continue;yt=!1;break}if(xt){if(!xo(E,function(Yt,Jt){if(!fr(xt,Jt)&&(Dt===Yt||Q(Dt,Yt,M,W,ae)))return xt.push(Jt)})){yt=!1;break}}else if(!(Dt===zt||Q(Dt,zt,M,W,ae))){yt=!1;break}}return ae.delete(f),ae.delete(E),yt}function Yu(f,E,M,W,Q,ae,ye){switch(M){case J:if(f.byteLength!=E.byteLength||f.byteOffset!=E.byteOffset)return!1;f=f.buffer,E=E.buffer;case A:return!(f.byteLength!=E.byteLength||!ae(new vi(f),new vi(E)));case et:case ht:case $e:return Xn(+f,+E);case jt:return f.name==E.name&&f.message==E.message;case at:case Ct:return f==E+"";case Ie:var xe=U;case Fe:var Re=W&S;if(xe||(xe=Se),f.size!=E.size&&!Re)return!1;var Ge=ye.get(f);if(Ge)return Ge==E;W|=T,ye.set(f,E);var Je=El(xe(f),xe(E),W,Q,ae,ye);return ye.delete(f),Je;case mt:if(Lo)return Lo.call(f)==Lo.call(E)}return!1}function qu(f,E,M,W,Q,ae){var ye=M&S,xe=qs(f),Re=xe.length,Ge=qs(E),Je=Ge.length;if(Re!=Je&&!ye)return!1;for(var rt=Re;rt--;){var yt=xe[rt];if(!(ye?yt in E:nn.call(E,yt)))return!1}var xt=ae.get(f),Dt=ae.get(E);if(xt&&Dt)return xt==E&&Dt==f;var zt=!0;ae.set(f,E),ae.set(E,f);for(var Rt=ye;++rt<Re;){yt=xe[rt];var Yt=f[yt],Jt=E[yt];if(W)var $n=ye?W(Jt,Yt,yt,E,f,ae):W(Yt,Jt,yt,f,E,ae);if(!($n===n?Yt===Jt||Q(Yt,Jt,M,W,ae):$n)){zt=!1;break}Rt||(Rt=yt=="constructor")}if(zt&&!Rt){var Mn=f.constructor,Bn=E.constructor;Mn!=Bn&&"constructor"in f&&"constructor"in E&&!(typeof Mn=="function"&&Mn instanceof Mn&&typeof Bn=="function"&&Bn instanceof Bn)&&(zt=!1)}return ae.delete(f),ae.delete(E),zt}function br(f){return ra(xl(f,n,Ll),f+"")}function qs(f){return Ha(f,En,Zs)}function Gs(f){return Ha(f,Ln,Cl)}var Js=wi?function(f){return wi.get(f)}:ga;function Fi(f){for(var E=f.name+"",M=so[E],W=nn.call(so,E)?M.length:0;W--;){var Q=M[W],ae=Q.func;if(ae==null||ae==f)return Q.name}return E}function uo(f){var E=nn.call(re,"placeholder")?re:f;return E.placeholder}function Mt(){var f=re.iteratee||ha;return f=f===ha?Va:f,arguments.length?f(arguments[0],arguments[1]):f}function Hi(f,E){var M=f.__data__;return nd(E)?M[typeof E=="string"?"string":"hash"]:M.map}function Xs(f){for(var E=En(f),M=E.length;M--;){var W=E[M],Q=f[W];E[M]=[W,Q,wl(Q)]}return E}function Hr(f,E){var M=d(f,E);return Ba(M)?M:n}function Gu(f){var E=nn.call(f,Ir),M=f[Ir];try{f[Ir]=n;var W=!0}catch{}var Q=gi.call(f);return W&&(E?f[Ir]=M:delete f[Ir]),Q}var Zs=As?function(f){return f==null?[]:(f=an(f),er(As(f),function(E){return xa.call(f,E)}))}:ba,Cl=As?function(f){for(var E=[];f;)nr(E,Zs(f)),f=yi(f);return E}:ba,_n=jn;(xs&&_n(new xs(new ArrayBuffer(1)))!=J||Ro&&_n(new Ro)!=Ie||_s&&_n(_s.resolve())!=ft||io&&_n(new io)!=Fe||Io&&_n(new Io)!=V)&&(_n=function(f){var E=jn(f),M=E==nt?f.constructor:n,W=M?$r(M):"";if(W)switch(W){case Mc:return J;case Dc:return Ie;case Rc:return ft;case Ic:return Fe;case kc:return V}return E});function Ju(f,E,M){for(var W=-1,Q=M.length;++W<Q;){var ae=M[W],ye=ae.size;switch(ae.type){case"drop":f+=ye;break;case"dropRight":E-=ye;break;case"take":E=xn(E,f+ye);break;case"takeRight":f=yn(f,E-ye);break}}return{start:f,end:E}}function Xu(f){var E=f.match(lt);return E?E[1].split(qe):[]}function Sl(f,E,M){E=jr(E,f);for(var W=-1,Q=E.length,ae=!1;++W<Q;){var ye=ar(E[W]);if(!(ae=f!=null&&M(f,ye)))break;f=f[ye]}return ae||++W!=Q?ae:(Q=f==null?0:f.length,!!Q&&Ki(Q)&&vr(ye,Q)&&(Bt(f)||Br(f)))}function Zu(f){var E=f.length,M=new f.constructor(E);return E&&typeof f[0]=="string"&&nn.call(f,"index")&&(M.index=f.index,M.input=f.input),M}function Tl(f){return typeof f.constructor=="function"&&!Wo(f)?ao(yi(f)):{}}function Qu(f,E,M){var W=f.constructor;switch(E){case A:return Us(f);case et:case ht:return new W(+f);case J:return Lu(f,M);case he:case be:case q:case z:case ee:case Z:case ue:case we:case Ae:return il(f,M);case Ie:return new W;case $e:case Ct:return new W(f);case at:return Pu(f);case Fe:return new W;case mt:return Fu(f)}}function ed(f,E){var M=E.length;if(!M)return f;var W=M-1;return E[W]=(M>1?"& ":"")+E[W],E=E.join(M>2?", ":" "),f.replace(He,`{
/* [wrapped with `+E+`] */
`)}function td(f){return Bt(f)||Br(f)||!!(_a&&f&&f[_a])}function vr(f,E){var M=typeof f;return E=E??Ye,!!E&&(M=="number"||M!="symbol"&&ln.test(f))&&f>-1&&f%1==0&&f<E}function On(f,E,M){if(!fn(M))return!1;var W=typeof E;return(W=="number"?kn(M)&&vr(E,M.length):W=="string"&&E in M)?Xn(M[E],f):!1}function Qs(f,E){if(Bt(f))return!1;var M=typeof f;return M=="number"||M=="symbol"||M=="boolean"||f==null||Hn(f)?!0:P.test(f)||!fe.test(f)||E!=null&&f in an(E)}function nd(f){var E=typeof f;return E=="string"||E=="number"||E=="symbol"||E=="boolean"?f!=="__proto__":f===null}function ea(f){var E=Fi(f),M=re[E];if(typeof M!="function"||!(E in qt.prototype))return!1;if(f===M)return!0;var W=Js(M);return!!W&&f===W[0]}function rd(f){return!!Ta&&Ta in f}var od=hi?yr:va;function Wo(f){var E=f&&f.constructor,M=typeof E=="function"&&E.prototype||oo;return f===M}function wl(f){return f===f&&!fn(f)}function Al(f,E){return function(M){return M==null?!1:M[f]===E&&(E!==n||f in an(M))}}function id(f){var E=zi(f,function(W){return M.size===u&&M.clear(),W}),M=E.cache;return E}function sd(f,E){var M=f[1],W=E[1],Q=M|W,ae=Q<(w|N|B),ye=W==B&&M==k||W==B&&M==Y&&f[7].length<=E[8]||W==(B|Y)&&E[7].length<=E[8]&&M==k;if(!(ae||ye))return f;W&w&&(f[2]=E[2],Q|=M&w?0:D);var xe=E[3];if(xe){var Re=f[3];f[3]=Re?al(Re,xe,E[4]):xe,f[4]=Re?oe(f[3],g):E[4]}return xe=E[5],xe&&(Re=f[5],f[5]=Re?ll(Re,xe,E[6]):xe,f[6]=Re?oe(f[5],g):E[6]),xe=E[7],xe&&(f[7]=xe),W&B&&(f[8]=f[8]==null?E[8]:xn(f[8],E[8])),f[9]==null&&(f[9]=E[9]),f[0]=E[0],f[1]=Q,f}function ad(f){var E=[];if(f!=null)for(var M in an(f))E.push(M);return E}function ld(f){return gi.call(f)}function xl(f,E,M){return E=yn(E===n?f.length-1:E,0),function(){for(var W=arguments,Q=-1,ae=yn(W.length-E,0),ye=Pe(ae);++Q<ae;)ye[Q]=W[E+Q];Q=-1;for(var xe=Pe(E+1);++Q<E;)xe[Q]=W[Q];return xe[E]=M(ye),Nn(f,this,xe)}}function _l(f,E){return E.length<2?f:Fr(f,Kn(E,0,-1))}function cd(f,E){for(var M=f.length,W=xn(E.length,M),Q=In(f);W--;){var ae=E[W];f[W]=vr(ae,M)?Q[ae]:n}return f}function na(f,E){if(!(E==="constructor"&&typeof f[E]=="function")&&E!="__proto__")return f[E]}var jl=Ml(Ja),zo=wc||function(f,E){return bn.setTimeout(f,E)},ra=Ml(Du);function Ol(f,E,M){var W=E+"";return ra(f,ed(W,ud(Xu(W),M)))}function Ml(f){var E=0,M=0;return function(){var W=Nc(),Q=Ee-(W-M);if(M=W,Q>0){if(++E>=le)return arguments[0]}else E=0;return f.apply(n,arguments)}}function $i(f,E){var M=-1,W=f.length,Q=W-1;for(E=E===n?W:E;++M<E;){var ae=Fs(M,Q),ye=f[ae];f[ae]=f[M],f[M]=ye}return f.length=E,f}var Dl=id(function(f){var E=[];return f.charCodeAt(0)===46&&E.push(""),f.replace(G,function(M,W,Q,ae){E.push(Q?ae.replace(Ft,"$1"):W||M)}),E});function ar(f){if(typeof f=="string"||Hn(f))return f;var E=f+"";return E=="0"&&1/f==-Ke?"-0":E}function $r(f){if(f!=null){try{return mi.call(f)}catch{}try{return f+""}catch{}}return""}function ud(f,E){return Rn(St,function(M){var W="_."+M[0];E&M[1]&&!eo(f,W)&&f.push(W)}),f.sort()}function Rl(f){if(f instanceof qt)return f.clone();var E=new zn(f.__wrapped__,f.__chain__);return E.__actions__=In(f.__actions__),E.__index__=f.__index__,E.__values__=f.__values__,E}function dd(f,E,M){(M?On(f,E,M):E===n)?E=1:E=yn(Wt(E),0);var W=f==null?0:f.length;if(!W||E<1)return[];for(var Q=0,ae=0,ye=Pe(Si(W/E));Q<W;)ye[ae++]=Kn(f,Q,Q+=E);return ye}function fd(f){for(var E=-1,M=f==null?0:f.length,W=0,Q=[];++E<M;){var ae=f[E];ae&&(Q[W++]=ae)}return Q}function pd(){var f=arguments.length;if(!f)return[];for(var E=Pe(f-1),M=arguments[0],W=f;W--;)E[W-1]=arguments[W];return nr(Bt(M)?In(M):[M],Tn(E,1))}var hd=Ut(function(f,E){return hn(f)?Fo(f,Tn(E,1,hn,!0)):[]}),md=Ut(function(f,E){var M=Yn(E);return hn(M)&&(M=n),hn(f)?Fo(f,Tn(E,1,hn,!0),Mt(M,2)):[]}),gd=Ut(function(f,E){var M=Yn(E);return hn(M)&&(M=n),hn(f)?Fo(f,Tn(E,1,hn,!0),n,M):[]});function bd(f,E,M){var W=f==null?0:f.length;return W?(E=M||E===n?1:Wt(E),Kn(f,E<0?0:E,W)):[]}function vd(f,E,M){var W=f==null?0:f.length;return W?(E=M||E===n?1:Wt(E),E=W-E,Kn(f,0,E<0?0:E)):[]}function yd(f,E){return f&&f.length?Di(f,Mt(E,3),!0,!0):[]}function Ed(f,E){return f&&f.length?Di(f,Mt(E,3),!0):[]}function Cd(f,E,M,W){var Q=f==null?0:f.length;return Q?(M&&typeof M!="number"&&On(f,E,M)&&(M=0,W=Q),pu(f,E,M,W)):[]}function Il(f,E,M){var W=f==null?0:f.length;if(!W)return-1;var Q=M==null?0:Wt(M);return Q<0&&(Q=yn(W+Q,0)),to(f,Mt(E,3),Q)}function kl(f,E,M){var W=f==null?0:f.length;if(!W)return-1;var Q=W-1;return M!==n&&(Q=Wt(M),Q=M<0?yn(W+Q,0):xn(Q,W-1)),to(f,Mt(E,3),Q,!0)}function Ll(f){var E=f==null?0:f.length;return E?Tn(f,1):[]}function Sd(f){var E=f==null?0:f.length;return E?Tn(f,Ke):[]}function Td(f,E){var M=f==null?0:f.length;return M?(E=E===n?1:Wt(E),Tn(f,E)):[]}function wd(f){for(var E=-1,M=f==null?0:f.length,W={};++E<M;){var Q=f[E];W[Q[0]]=Q[1]}return W}function Pl(f){return f&&f.length?f[0]:n}function Ad(f,E,M){var W=f==null?0:f.length;if(!W)return-1;var Q=M==null?0:Wt(M);return Q<0&&(Q=yn(W+Q,0)),Ar(f,E,Q)}function xd(f){var E=f==null?0:f.length;return E?Kn(f,0,-1):[]}var _d=Ut(function(f){var E=cn(f,Ws);return E.length&&E[0]===f[0]?Rs(E):[]}),Nd=Ut(function(f){var E=Yn(f),M=cn(f,Ws);return E===Yn(M)?E=n:M.pop(),M.length&&M[0]===f[0]?Rs(M,Mt(E,2)):[]}),jd=Ut(function(f){var E=Yn(f),M=cn(f,Ws);return E=typeof E=="function"?E:n,E&&M.pop(),M.length&&M[0]===f[0]?Rs(M,n,E):[]});function Od(f,E){return f==null?"":xc.call(f,E)}function Yn(f){var E=f==null?0:f.length;return E?f[E-1]:n}function Md(f,E,M){var W=f==null?0:f.length;if(!W)return-1;var Q=W;return M!==n&&(Q=Wt(M),Q=Q<0?yn(W+Q,0):xn(Q,W-1)),E===E?bt(f,E,Q):to(f,li,Q,!0)}function Dd(f,E){return f&&f.length?Ka(f,Wt(E)):n}var Rd=Ut(Fl);function Fl(f,E){return f&&f.length&&E&&E.length?Ps(f,E):f}function Id(f,E,M){return f&&f.length&&E&&E.length?Ps(f,E,Mt(M,2)):f}function kd(f,E,M){return f&&f.length&&E&&E.length?Ps(f,E,n,M):f}var Ld=br(function(f,E){var M=f==null?0:f.length,W=js(f,E);return Ga(f,cn(E,function(Q){return vr(Q,M)?+Q:Q}).sort(sl)),W});function Pd(f,E){var M=[];if(!(f&&f.length))return M;var W=-1,Q=[],ae=f.length;for(E=Mt(E,3);++W<ae;){var ye=f[W];E(ye,W,f)&&(M.push(ye),Q.push(W))}return Ga(f,Q),M}function oa(f){return f==null?f:Oc.call(f)}function Fd(f,E,M){var W=f==null?0:f.length;return W?(M&&typeof M!="number"&&On(f,E,M)?(E=0,M=W):(E=E==null?0:Wt(E),M=M===n?W:Wt(M)),Kn(f,E,M)):[]}function Hd(f,E){return Mi(f,E)}function $d(f,E,M){return $s(f,E,Mt(M,2))}function Bd(f,E){var M=f==null?0:f.length;if(M){var W=Mi(f,E);if(W<M&&Xn(f[W],E))return W}return-1}function Vd(f,E){return Mi(f,E,!0)}function Wd(f,E,M){return $s(f,E,Mt(M,2),!0)}function zd(f,E){var M=f==null?0:f.length;if(M){var W=Mi(f,E,!0)-1;if(Xn(f[W],E))return W}return-1}function Ud(f){return f&&f.length?Xa(f):[]}function Kd(f,E){return f&&f.length?Xa(f,Mt(E,2)):[]}function Yd(f){var E=f==null?0:f.length;return E?Kn(f,1,E):[]}function qd(f,E,M){return f&&f.length?(E=M||E===n?1:Wt(E),Kn(f,0,E<0?0:E)):[]}function Gd(f,E,M){var W=f==null?0:f.length;return W?(E=M||E===n?1:Wt(E),E=W-E,Kn(f,E<0?0:E,W)):[]}function Jd(f,E){return f&&f.length?Di(f,Mt(E,3),!1,!0):[]}function Xd(f,E){return f&&f.length?Di(f,Mt(E,3)):[]}var Zd=Ut(function(f){return Nr(Tn(f,1,hn,!0))}),Qd=Ut(function(f){var E=Yn(f);return hn(E)&&(E=n),Nr(Tn(f,1,hn,!0),Mt(E,2))}),ef=Ut(function(f){var E=Yn(f);return E=typeof E=="function"?E:n,Nr(Tn(f,1,hn,!0),n,E)});function tf(f){return f&&f.length?Nr(f):[]}function nf(f,E){return f&&f.length?Nr(f,Mt(E,2)):[]}function rf(f,E){return E=typeof E=="function"?E:n,f&&f.length?Nr(f,n,E):[]}function ia(f){if(!(f&&f.length))return[];var E=0;return f=er(f,function(M){if(hn(M))return E=yn(M.length,E),!0}),Oo(E,function(M){return cn(f,_o(M))})}function Hl(f,E){if(!(f&&f.length))return[];var M=ia(f);return E==null?M:cn(M,function(W){return Nn(E,n,W)})}var of=Ut(function(f,E){return hn(f)?Fo(f,E):[]}),sf=Ut(function(f){return Vs(er(f,hn))}),af=Ut(function(f){var E=Yn(f);return hn(E)&&(E=n),Vs(er(f,hn),Mt(E,2))}),lf=Ut(function(f){var E=Yn(f);return E=typeof E=="function"?E:n,Vs(er(f,hn),n,E)}),cf=Ut(ia);function uf(f,E){return nl(f||[],E||[],Po)}function df(f,E){return nl(f||[],E||[],Bo)}var ff=Ut(function(f){var E=f.length,M=E>1?f[E-1]:n;return M=typeof M=="function"?(f.pop(),M):n,Hl(f,M)});function $l(f){var E=re(f);return E.__chain__=!0,E}function pf(f,E){return E(f),f}function Bi(f,E){return E(f)}var hf=br(function(f){var E=f.length,M=E?f[0]:0,W=this.__wrapped__,Q=function(ae){return js(ae,f)};return E>1||this.__actions__.length||!(W instanceof qt)||!vr(M)?this.thru(Q):(W=W.slice(M,+M+(E?1:0)),W.__actions__.push({func:Bi,args:[Q],thisArg:n}),new zn(W,this.__chain__).thru(function(ae){return E&&!ae.length&&ae.push(n),ae}))});function mf(){return $l(this)}function gf(){return new zn(this.value(),this.__chain__)}function bf(){this.__values__===n&&(this.__values__=ec(this.value()));var f=this.__index__>=this.__values__.length,E=f?n:this.__values__[this.__index__++];return{done:f,value:E}}function vf(){return this}function yf(f){for(var E,M=this;M instanceof xi;){var W=Rl(M);W.__index__=0,W.__values__=n,E?Q.__wrapped__=W:E=W;var Q=W;M=M.__wrapped__}return Q.__wrapped__=f,E}function Ef(){var f=this.__wrapped__;if(f instanceof qt){var E=f;return this.__actions__.length&&(E=new qt(this)),E=E.reverse(),E.__actions__.push({func:Bi,args:[oa],thisArg:n}),new zn(E,this.__chain__)}return this.thru(oa)}function Cf(){return tl(this.__wrapped__,this.__actions__)}var Sf=Ri(function(f,E,M){nn.call(f,M)?++f[M]:mr(f,M,1)});function Tf(f,E,M){var W=Bt(f)?si:fu;return M&&On(f,E,M)&&(E=n),W(f,Mt(E,3))}function wf(f,E){var M=Bt(f)?er:Pa;return M(f,Mt(E,3))}var Af=fl(Il),xf=fl(kl);function _f(f,E){return Tn(Vi(f,E),1)}function Nf(f,E){return Tn(Vi(f,E),Ke)}function jf(f,E,M){return M=M===n?1:Wt(M),Tn(Vi(f,E),M)}function Bl(f,E){var M=Bt(f)?Rn:_r;return M(f,Mt(E,3))}function Vl(f,E){var M=Bt(f)?ms:La;return M(f,Mt(E,3))}var Of=Ri(function(f,E,M){nn.call(f,M)?f[M].push(E):mr(f,M,[E])});function Mf(f,E,M,W){f=kn(f)?f:po(f),M=M&&!W?Wt(M):0;var Q=f.length;return M<0&&(M=yn(Q+M,0)),Yi(f)?M<=Q&&f.indexOf(E,M)>-1:!!Q&&Ar(f,E,M)>-1}var Df=Ut(function(f,E,M){var W=-1,Q=typeof E=="function",ae=kn(f)?Pe(f.length):[];return _r(f,function(ye){ae[++W]=Q?Nn(E,ye,M):Ho(ye,E,M)}),ae}),Rf=Ri(function(f,E,M){mr(f,M,E)});function Vi(f,E){var M=Bt(f)?cn:Wa;return M(f,Mt(E,3))}function If(f,E,M,W){return f==null?[]:(Bt(E)||(E=E==null?[]:[E]),M=W?n:M,Bt(M)||(M=M==null?[]:[M]),Ya(f,E,M))}var kf=Ri(function(f,E,M){f[M?0:1].push(E)},function(){return[[],[]]});function Lf(f,E,M){var W=Bt(f)?Ao:ui,Q=arguments.length<3;return W(f,Mt(E,4),M,Q,_r)}function Pf(f,E,M){var W=Bt(f)?gs:ui,Q=arguments.length<3;return W(f,Mt(E,4),M,Q,La)}function Ff(f,E){var M=Bt(f)?er:Pa;return M(f,Ui(Mt(E,3)))}function Hf(f){var E=Bt(f)?Da:Ou;return E(f)}function $f(f,E,M){(M?On(f,E,M):E===n)?E=1:E=Wt(E);var W=Bt(f)?au:Mu;return W(f,E)}function Bf(f){var E=Bt(f)?lu:Ru;return E(f)}function Vf(f){if(f==null)return 0;if(kn(f))return Yi(f)?At(f):f.length;var E=_n(f);return E==Ie||E==Fe?f.size:ks(f).length}function Wf(f,E,M){var W=Bt(f)?xo:Iu;return M&&On(f,E,M)&&(E=n),W(f,Mt(E,3))}var zf=Ut(function(f,E){if(f==null)return[];var M=E.length;return M>1&&On(f,E[0],E[1])?E=[]:M>2&&On(E[0],E[1],E[2])&&(E=[E[0]]),Ya(f,Tn(E,1),[])}),Wi=Tc||function(){return bn.Date.now()};function Uf(f,E){if(typeof E!="function")throw new Wn(a);return f=Wt(f),function(){if(--f<1)return E.apply(this,arguments)}}function Wl(f,E,M){return E=M?n:E,E=f&&E==null?f.length:E,gr(f,B,n,n,n,n,E)}function zl(f,E){var M;if(typeof E!="function")throw new Wn(a);return f=Wt(f),function(){return--f>0&&(M=E.apply(this,arguments)),f<=1&&(E=n),M}}var sa=Ut(function(f,E,M){var W=w;if(M.length){var Q=oe(M,uo(sa));W|=H}return gr(f,W,E,M,Q)}),Ul=Ut(function(f,E,M){var W=w|N;if(M.length){var Q=oe(M,uo(Ul));W|=H}return gr(E,W,f,M,Q)});function Kl(f,E,M){E=M?n:E;var W=gr(f,k,n,n,n,n,n,E);return W.placeholder=Kl.placeholder,W}function Yl(f,E,M){E=M?n:E;var W=gr(f,L,n,n,n,n,n,E);return W.placeholder=Yl.placeholder,W}function ql(f,E,M){var W,Q,ae,ye,xe,Re,Ge=0,Je=!1,rt=!1,yt=!0;if(typeof f!="function")throw new Wn(a);E=qn(E)||0,fn(M)&&(Je=!!M.leading,rt="maxWait"in M,ae=rt?yn(qn(M.maxWait)||0,E):ae,yt="trailing"in M?!!M.trailing:yt);function xt(mn){var Zn=W,Cr=Q;return W=Q=n,Ge=mn,ye=f.apply(Cr,Zn),ye}function Dt(mn){return Ge=mn,xe=zo(Yt,E),Je?xt(mn):ye}function zt(mn){var Zn=mn-Re,Cr=mn-Ge,pc=E-Zn;return rt?xn(pc,ae-Cr):pc}function Rt(mn){var Zn=mn-Re,Cr=mn-Ge;return Re===n||Zn>=E||Zn<0||rt&&Cr>=ae}function Yt(){var mn=Wi();if(Rt(mn))return Jt(mn);xe=zo(Yt,zt(mn))}function Jt(mn){return xe=n,yt&&W?xt(mn):(W=Q=n,ye)}function $n(){xe!==n&&rl(xe),Ge=0,W=Re=Q=xe=n}function Mn(){return xe===n?ye:Jt(Wi())}function Bn(){var mn=Wi(),Zn=Rt(mn);if(W=arguments,Q=this,Re=mn,Zn){if(xe===n)return Dt(Re);if(rt)return rl(xe),xe=zo(Yt,E),xt(Re)}return xe===n&&(xe=zo(Yt,E)),ye}return Bn.cancel=$n,Bn.flush=Mn,Bn}var Kf=Ut(function(f,E){return ka(f,1,E)}),Yf=Ut(function(f,E,M){return ka(f,qn(E)||0,M)});function qf(f){return gr(f,K)}function zi(f,E){if(typeof f!="function"||E!=null&&typeof E!="function")throw new Wn(a);var M=function(){var W=arguments,Q=E?E.apply(this,W):W[0],ae=M.cache;if(ae.has(Q))return ae.get(Q);var ye=f.apply(this,W);return M.cache=ae.set(Q,ye)||ae,ye};return M.cache=new(zi.Cache||hr),M}zi.Cache=hr;function Ui(f){if(typeof f!="function")throw new Wn(a);return function(){var E=arguments;switch(E.length){case 0:return!f.call(this);case 1:return!f.call(this,E[0]);case 2:return!f.call(this,E[0],E[1]);case 3:return!f.call(this,E[0],E[1],E[2])}return!f.apply(this,E)}}function Gf(f){return zl(2,f)}var Jf=ku(function(f,E){E=E.length==1&&Bt(E[0])?cn(E[0],Sn(Mt())):cn(Tn(E,1),Sn(Mt()));var M=E.length;return Ut(function(W){for(var Q=-1,ae=xn(W.length,M);++Q<ae;)W[Q]=E[Q].call(this,W[Q]);return Nn(f,this,W)})}),aa=Ut(function(f,E){var M=oe(E,uo(aa));return gr(f,H,n,E,M)}),Gl=Ut(function(f,E){var M=oe(E,uo(Gl));return gr(f,R,n,E,M)}),Xf=br(function(f,E){return gr(f,Y,n,n,n,E)});function Zf(f,E){if(typeof f!="function")throw new Wn(a);return E=E===n?E:Wt(E),Ut(f,E)}function Qf(f,E){if(typeof f!="function")throw new Wn(a);return E=E==null?0:yn(Wt(E),0),Ut(function(M){var W=M[E],Q=Or(M,0,E);return W&&nr(Q,W),Nn(f,this,Q)})}function ep(f,E,M){var W=!0,Q=!0;if(typeof f!="function")throw new Wn(a);return fn(M)&&(W="leading"in M?!!M.leading:W,Q="trailing"in M?!!M.trailing:Q),ql(f,E,{leading:W,maxWait:E,trailing:Q})}function tp(f){return Wl(f,1)}function np(f,E){return aa(zs(E),f)}function rp(){if(!arguments.length)return[];var f=arguments[0];return Bt(f)?f:[f]}function op(f){return Un(f,m)}function ip(f,E){return E=typeof E=="function"?E:n,Un(f,m,E)}function sp(f){return Un(f,C|m)}function ap(f,E){return E=typeof E=="function"?E:n,Un(f,C|m,E)}function lp(f,E){return E==null||Ia(f,E,En(E))}function Xn(f,E){return f===E||f!==f&&E!==E}var cp=Pi(Ds),up=Pi(function(f,E){return f>=E}),Br=$a(function(){return arguments}())?$a:function(f){return pn(f)&&nn.call(f,"callee")&&!xa.call(f,"callee")},Bt=Pe.isArray,dp=ei?Sn(ei):vu;function kn(f){return f!=null&&Ki(f.length)&&!yr(f)}function hn(f){return pn(f)&&kn(f)}function fp(f){return f===!0||f===!1||pn(f)&&jn(f)==et}var Mr=Ac||va,pp=ti?Sn(ti):yu;function hp(f){return pn(f)&&f.nodeType===1&&!Uo(f)}function mp(f){if(f==null)return!0;if(kn(f)&&(Bt(f)||typeof f=="string"||typeof f.splice=="function"||Mr(f)||fo(f)||Br(f)))return!f.length;var E=_n(f);if(E==Ie||E==Fe)return!f.size;if(Wo(f))return!ks(f).length;for(var M in f)if(nn.call(f,M))return!1;return!0}function gp(f,E){return $o(f,E)}function bp(f,E,M){M=typeof M=="function"?M:n;var W=M?M(f,E):n;return W===n?$o(f,E,n,M):!!W}function la(f){if(!pn(f))return!1;var E=jn(f);return E==jt||E==Tt||typeof f.message=="string"&&typeof f.name=="string"&&!Uo(f)}function vp(f){return typeof f=="number"&&Na(f)}function yr(f){if(!fn(f))return!1;var E=jn(f);return E==ge||E==Te||E==Ze||E==st}function Jl(f){return typeof f=="number"&&f==Wt(f)}function Ki(f){return typeof f=="number"&&f>-1&&f%1==0&&f<=Ye}function fn(f){var E=typeof f;return f!=null&&(E=="object"||E=="function")}function pn(f){return f!=null&&typeof f=="object"}var Xl=ni?Sn(ni):Cu;function yp(f,E){return f===E||Is(f,E,Xs(E))}function Ep(f,E,M){return M=typeof M=="function"?M:n,Is(f,E,Xs(E),M)}function Cp(f){return Zl(f)&&f!=+f}function Sp(f){if(od(f))throw new $t(s);return Ba(f)}function Tp(f){return f===null}function wp(f){return f==null}function Zl(f){return typeof f=="number"||pn(f)&&jn(f)==$e}function Uo(f){if(!pn(f)||jn(f)!=nt)return!1;var E=yi(f);if(E===null)return!0;var M=nn.call(E,"constructor")&&E.constructor;return typeof M=="function"&&M instanceof M&&mi.call(M)==yc}var ca=ri?Sn(ri):Su;function Ap(f){return Jl(f)&&f>=-Ye&&f<=Ye}var Ql=oi?Sn(oi):Tu;function Yi(f){return typeof f=="string"||!Bt(f)&&pn(f)&&jn(f)==Ct}function Hn(f){return typeof f=="symbol"||pn(f)&&jn(f)==mt}var fo=ii?Sn(ii):wu;function xp(f){return f===n}function _p(f){return pn(f)&&_n(f)==V}function Np(f){return pn(f)&&jn(f)==O}var jp=Pi(Ls),Op=Pi(function(f,E){return f<=E});function ec(f){if(!f)return[];if(kn(f))return Yi(f)?vt(f):In(f);if(Do&&f[Do])return I(f[Do]());var E=_n(f),M=E==Ie?U:E==Fe?Se:po;return M(f)}function Er(f){if(!f)return f===0?f:0;if(f=qn(f),f===Ke||f===-Ke){var E=f<0?-1:1;return E*pt}return f===f?f:0}function Wt(f){var E=Er(f),M=E%1;return E===E?M?E-M:E:0}function tc(f){return f?Pr(Wt(f),0,It):0}function qn(f){if(typeof f=="number")return f;if(Hn(f))return ut;if(fn(f)){var E=typeof f.valueOf=="function"?f.valueOf():f;f=fn(E)?E+"":E}if(typeof f!="string")return f===0?f:+f;f=di(f);var M=Et.test(f);return M||Ht.test(f)?fs(f.slice(2),M?2:8):Ue.test(f)?ut:+f}function nc(f){return sr(f,Ln(f))}function Mp(f){return f?Pr(Wt(f),-Ye,Ye):f===0?f:0}function tn(f){return f==null?"":Fn(f)}var Dp=lo(function(f,E){if(Wo(E)||kn(E)){sr(E,En(E),f);return}for(var M in E)nn.call(E,M)&&Po(f,M,E[M])}),rc=lo(function(f,E){sr(E,Ln(E),f)}),qi=lo(function(f,E,M,W){sr(E,Ln(E),f,W)}),Rp=lo(function(f,E,M,W){sr(E,En(E),f,W)}),Ip=br(js);function kp(f,E){var M=ao(f);return E==null?M:Ra(M,E)}var Lp=Ut(function(f,E){f=an(f);var M=-1,W=E.length,Q=W>2?E[2]:n;for(Q&&On(E[0],E[1],Q)&&(W=1);++M<W;)for(var ae=E[M],ye=Ln(ae),xe=-1,Re=ye.length;++xe<Re;){var Ge=ye[xe],Je=f[Ge];(Je===n||Xn(Je,oo[Ge])&&!nn.call(f,Ge))&&(f[Ge]=ae[Ge])}return f}),Pp=Ut(function(f){return f.push(n,yl),Nn(oc,n,f)});function Fp(f,E){return ai(f,Mt(E,3),ir)}function Hp(f,E){return ai(f,Mt(E,3),Ms)}function $p(f,E){return f==null?f:Os(f,Mt(E,3),Ln)}function Bp(f,E){return f==null?f:Fa(f,Mt(E,3),Ln)}function Vp(f,E){return f&&ir(f,Mt(E,3))}function Wp(f,E){return f&&Ms(f,Mt(E,3))}function zp(f){return f==null?[]:ji(f,En(f))}function Up(f){return f==null?[]:ji(f,Ln(f))}function ua(f,E,M){var W=f==null?n:Fr(f,E);return W===n?M:W}function Kp(f,E){return f!=null&&Sl(f,E,hu)}function da(f,E){return f!=null&&Sl(f,E,mu)}var Yp=hl(function(f,E,M){E!=null&&typeof E.toString!="function"&&(E=gi.call(E)),f[E]=M},pa(Pn)),qp=hl(function(f,E,M){E!=null&&typeof E.toString!="function"&&(E=gi.call(E)),nn.call(f,E)?f[E].push(M):f[E]=[M]},Mt),Gp=Ut(Ho);function En(f){return kn(f)?Ma(f):ks(f)}function Ln(f){return kn(f)?Ma(f,!0):Au(f)}function Jp(f,E){var M={};return E=Mt(E,3),ir(f,function(W,Q,ae){mr(M,E(W,Q,ae),W)}),M}function Xp(f,E){var M={};return E=Mt(E,3),ir(f,function(W,Q,ae){mr(M,Q,E(W,Q,ae))}),M}var Zp=lo(function(f,E,M){Oi(f,E,M)}),oc=lo(function(f,E,M,W){Oi(f,E,M,W)}),Qp=br(function(f,E){var M={};if(f==null)return M;var W=!1;E=cn(E,function(ae){return ae=jr(ae,f),W||(W=ae.length>1),ae}),sr(f,Gs(f),M),W&&(M=Un(M,C|v|m,Ku));for(var Q=E.length;Q--;)Bs(M,E[Q]);return M});function eh(f,E){return ic(f,Ui(Mt(E)))}var th=br(function(f,E){return f==null?{}:_u(f,E)});function ic(f,E){if(f==null)return{};var M=cn(Gs(f),function(W){return[W]});return E=Mt(E),qa(f,M,function(W,Q){return E(W,Q[0])})}function nh(f,E,M){E=jr(E,f);var W=-1,Q=E.length;for(Q||(Q=1,f=n);++W<Q;){var ae=f==null?n:f[ar(E[W])];ae===n&&(W=Q,ae=M),f=yr(ae)?ae.call(f):ae}return f}function rh(f,E,M){return f==null?f:Bo(f,E,M)}function oh(f,E,M,W){return W=typeof W=="function"?W:n,f==null?f:Bo(f,E,M,W)}var sc=bl(En),ac=bl(Ln);function ih(f,E,M){var W=Bt(f),Q=W||Mr(f)||fo(f);if(E=Mt(E,4),M==null){var ae=f&&f.constructor;Q?M=W?new ae:[]:fn(f)?M=yr(ae)?ao(yi(f)):{}:M={}}return(Q?Rn:ir)(f,function(ye,xe,Re){return E(M,ye,xe,Re)}),M}function sh(f,E){return f==null?!0:Bs(f,E)}function ah(f,E,M){return f==null?f:Qa(f,E,zs(M))}function lh(f,E,M,W){return W=typeof W=="function"?W:n,f==null?f:Qa(f,E,zs(M),W)}function po(f){return f==null?[]:wn(f,En(f))}function ch(f){return f==null?[]:wn(f,Ln(f))}function uh(f,E,M){return M===n&&(M=E,E=n),M!==n&&(M=qn(M),M=M===M?M:0),E!==n&&(E=qn(E),E=E===E?E:0),Pr(qn(f),E,M)}function dh(f,E,M){return E=Er(E),M===n?(M=E,E=0):M=Er(M),f=qn(f),gu(f,E,M)}function fh(f,E,M){if(M&&typeof M!="boolean"&&On(f,E,M)&&(E=M=n),M===n&&(typeof E=="boolean"?(M=E,E=n):typeof f=="boolean"&&(M=f,f=n)),f===n&&E===n?(f=0,E=1):(f=Er(f),E===n?(E=f,f=0):E=Er(E)),f>E){var W=f;f=E,E=W}if(M||f%1||E%1){var Q=ja();return xn(f+Q*(E-f+ds("1e-"+((Q+"").length-1))),E)}return Fs(f,E)}var ph=co(function(f,E,M){return E=E.toLowerCase(),f+(M?lc(E):E)});function lc(f){return fa(tn(f).toLowerCase())}function cc(f){return f=tn(f),f&&f.replace(dn,Mo).replace(Qi,"")}function hh(f,E,M){f=tn(f),E=Fn(E);var W=f.length;M=M===n?W:Pr(Wt(M),0,W);var Q=M;return M-=E.length,M>=0&&f.slice(M,Q)==E}function mh(f){return f=tn(f),f&&ve.test(f)?f.replace(Nt,Rr):f}function gh(f){return f=tn(f),f&&De.test(f)?f.replace(ce,"\\$&"):f}var bh=co(function(f,E,M){return f+(M?"-":"")+E.toLowerCase()}),vh=co(function(f,E,M){return f+(M?" ":"")+E.toLowerCase()}),yh=dl("toLowerCase");function Eh(f,E,M){f=tn(f),E=Wt(E);var W=E?At(f):0;if(!E||W>=E)return f;var Q=(E-W)/2;return Li(Ti(Q),M)+f+Li(Si(Q),M)}function Ch(f,E,M){f=tn(f),E=Wt(E);var W=E?At(f):0;return E&&W<E?f+Li(E-W,M):f}function Sh(f,E,M){f=tn(f),E=Wt(E);var W=E?At(f):0;return E&&W<E?Li(E-W,M)+f:f}function Th(f,E,M){return M||E==null?E=0:E&&(E=+E),jc(tn(f).replace(de,""),E||0)}function wh(f,E,M){return(M?On(f,E,M):E===n)?E=1:E=Wt(E),Hs(tn(f),E)}function Ah(){var f=arguments,E=tn(f[0]);return f.length<3?E:E.replace(f[1],f[2])}var xh=co(function(f,E,M){return f+(M?"_":"")+E.toLowerCase()});function _h(f,E,M){return M&&typeof M!="number"&&On(f,E,M)&&(E=M=n),M=M===n?It:M>>>0,M?(f=tn(f),f&&(typeof E=="string"||E!=null&&!ca(E))&&(E=Fn(E),!E&&b(f))?Or(vt(f),0,M):f.split(E,M)):[]}var Nh=co(function(f,E,M){return f+(M?" ":"")+fa(E)});function jh(f,E,M){return f=tn(f),M=M==null?0:Pr(Wt(M),0,f.length),E=Fn(E),f.slice(M,M+E.length)==E}function Oh(f,E,M){var W=re.templateSettings;M&&On(f,E,M)&&(E=n),f=tn(f),E=qi({},E,W,vl);var Q=qi({},E.imports,W.imports,vl),ae=En(Q),ye=wn(Q,ae),xe,Re,Ge=0,Je=E.interpolate||Vt,rt="__p += '",yt=ws((E.escape||Vt).source+"|"+Je.source+"|"+(Je===ne?Ce:Vt).source+"|"+(E.evaluate||Vt).source+"|$","g"),xt="//# sourceURL="+(nn.call(E,"sourceURL")?(E.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ss+"]")+`
`;f.replace(yt,function(Rt,Yt,Jt,$n,Mn,Bn){return Jt||(Jt=$n),rt+=f.slice(Ge,Bn).replace(on,Ts),Yt&&(xe=!0,rt+=`' +
__e(`+Yt+`) +
'`),Mn&&(Re=!0,rt+=`';
`+Mn+`;
__p += '`),Jt&&(rt+=`' +
((__t = (`+Jt+`)) == null ? '' : __t) +
'`),Ge=Bn+Rt.length,Rt}),rt+=`';
`;var Dt=nn.call(E,"variable")&&E.variable;if(!Dt)rt=`with (obj) {
`+rt+`
}
`;else if(gt.test(Dt))throw new $t(l);rt=(Re?rt.replace(je,""):rt).replace(ze,"$1").replace(it,"$1;"),rt="function("+(Dt||"obj")+`) {
`+(Dt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(xe?", __e = _.escape":"")+(Re?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+rt+`return __p
}`;var zt=dc(function(){return en(ae,xt+"return "+rt).apply(n,ye)});if(zt.source=rt,la(zt))throw zt;return zt}function Mh(f){return tn(f).toLowerCase()}function Dh(f){return tn(f).toUpperCase()}function Rh(f,E,M){if(f=tn(f),f&&(M||E===n))return di(f);if(!f||!(E=Fn(E)))return f;var W=vt(f),Q=vt(E),ae=no(W,Q),ye=rr(W,Q)+1;return Or(W,ae,ye).join("")}function Ih(f,E,M){if(f=tn(f),f&&(M||E===n))return f.slice(0,kt(f)+1);if(!f||!(E=Fn(E)))return f;var W=vt(f),Q=rr(W,vt(E))+1;return Or(W,0,Q).join("")}function kh(f,E,M){if(f=tn(f),f&&(M||E===n))return f.replace(de,"");if(!f||!(E=Fn(E)))return f;var W=vt(f),Q=no(W,vt(E));return Or(W,Q).join("")}function Lh(f,E){var M=se,W=pe;if(fn(E)){var Q="separator"in E?E.separator:Q;M="length"in E?Wt(E.length):M,W="omission"in E?Fn(E.omission):W}f=tn(f);var ae=f.length;if(b(f)){var ye=vt(f);ae=ye.length}if(M>=ae)return f;var xe=M-At(W);if(xe<1)return W;var Re=ye?Or(ye,0,xe).join(""):f.slice(0,xe);if(Q===n)return Re+W;if(ye&&(xe+=Re.length-xe),ca(Q)){if(f.slice(xe).search(Q)){var Ge,Je=Re;for(Q.global||(Q=ws(Q.source,tn(We.exec(Q))+"g")),Q.lastIndex=0;Ge=Q.exec(Je);)var rt=Ge.index;Re=Re.slice(0,rt===n?xe:rt)}}else if(f.indexOf(Fn(Q),xe)!=xe){var yt=Re.lastIndexOf(Q);yt>-1&&(Re=Re.slice(0,yt))}return Re+W}function Ph(f){return f=tn(f),f&&Ot.test(f)?f.replace(ct,Kt):f}var Fh=co(function(f,E,M){return f+(M?" ":"")+E.toUpperCase()}),fa=dl("toUpperCase");function uc(f,E,M){return f=tn(f),E=M?n:E,E===n?j(f)?un(f):ys(f):f.match(E)||[]}var dc=Ut(function(f,E){try{return Nn(f,n,E)}catch(M){return la(M)?M:new $t(M)}}),Hh=br(function(f,E){return Rn(E,function(M){M=ar(M),mr(f,M,sa(f[M],f))}),f});function $h(f){var E=f==null?0:f.length,M=Mt();return f=E?cn(f,function(W){if(typeof W[1]!="function")throw new Wn(a);return[M(W[0]),W[1]]}):[],Ut(function(W){for(var Q=-1;++Q<E;){var ae=f[Q];if(Nn(ae[0],this,W))return Nn(ae[1],this,W)}})}function Bh(f){return du(Un(f,C))}function pa(f){return function(){return f}}function Vh(f,E){return f==null||f!==f?E:f}var Wh=pl(),zh=pl(!0);function Pn(f){return f}function ha(f){return Va(typeof f=="function"?f:Un(f,C))}function Uh(f){return za(Un(f,C))}function Kh(f,E){return Ua(f,Un(E,C))}var Yh=Ut(function(f,E){return function(M){return Ho(M,f,E)}}),qh=Ut(function(f,E){return function(M){return Ho(f,M,E)}});function ma(f,E,M){var W=En(E),Q=ji(E,W);M==null&&!(fn(E)&&(Q.length||!W.length))&&(M=E,E=f,f=this,Q=ji(E,En(E)));var ae=!(fn(M)&&"chain"in M)||!!M.chain,ye=yr(f);return Rn(Q,function(xe){var Re=E[xe];f[xe]=Re,ye&&(f.prototype[xe]=function(){var Ge=this.__chain__;if(ae||Ge){var Je=f(this.__wrapped__),rt=Je.__actions__=In(this.__actions__);return rt.push({func:Re,args:arguments,thisArg:f}),Je.__chain__=Ge,Je}return Re.apply(f,nr([this.value()],arguments))})}),f}function Gh(){return bn._===this&&(bn._=Ec),this}function ga(){}function Jh(f){return f=Wt(f),Ut(function(E){return Ka(E,f)})}var Xh=Ks(cn),Zh=Ks(si),Qh=Ks(xo);function fc(f){return Qs(f)?_o(ar(f)):Nu(f)}function em(f){return function(E){return f==null?n:Fr(f,E)}}var tm=ml(),nm=ml(!0);function ba(){return[]}function va(){return!1}function om(){return{}}function im(){return""}function sm(){return!0}function am(f,E){if(f=Wt(f),f<1||f>Ye)return[];var M=It,W=xn(f,It);E=Mt(E),f-=It;for(var Q=Oo(W,E);++M<f;)E(M);return Q}function lm(f){return Bt(f)?cn(f,ar):Hn(f)?[f]:In(Dl(tn(f)))}function cm(f){var E=++vc;return tn(f)+E}var um=ki(function(f,E){return f+E},0),dm=Ys("ceil"),fm=ki(function(f,E){return f/E},1),pm=Ys("floor");function hm(f){return f&&f.length?Ni(f,Pn,Ds):n}function mm(f,E){return f&&f.length?Ni(f,Mt(E,2),Ds):n}function gm(f){return ci(f,Pn)}function bm(f,E){return ci(f,Mt(E,2))}function vm(f){return f&&f.length?Ni(f,Pn,Ls):n}function ym(f,E){return f&&f.length?Ni(f,Mt(E,2),Ls):n}var Em=ki(function(f,E){return f*E},1),Cm=Ys("round"),Sm=ki(function(f,E){return f-E},0);function Tm(f){return f&&f.length?jo(f,Pn):0}function wm(f,E){return f&&f.length?jo(f,Mt(E,2)):0}return re.after=Uf,re.ary=Wl,re.assign=Dp,re.assignIn=rc,re.assignInWith=qi,re.assignWith=Rp,re.at=Ip,re.before=zl,re.bind=sa,re.bindAll=Hh,re.bindKey=Ul,re.castArray=rp,re.chain=$l,re.chunk=dd,re.compact=fd,re.concat=pd,re.cond=$h,re.conforms=Bh,re.constant=pa,re.countBy=Sf,re.create=kp,re.curry=Kl,re.curryRight=Yl,re.debounce=ql,re.defaults=Lp,re.defaultsDeep=Pp,re.defer=Kf,re.delay=Yf,re.difference=hd,re.differenceBy=md,re.differenceWith=gd,re.drop=bd,re.dropRight=vd,re.dropRightWhile=yd,re.dropWhile=Ed,re.fill=Cd,re.filter=wf,re.flatMap=_f,re.flatMapDeep=Nf,re.flatMapDepth=jf,re.flatten=Ll,re.flattenDeep=Sd,re.flattenDepth=Td,re.flip=qf,re.flow=Wh,re.flowRight=zh,re.fromPairs=wd,re.functions=zp,re.functionsIn=Up,re.groupBy=Of,re.initial=xd,re.intersection=_d,re.intersectionBy=Nd,re.intersectionWith=jd,re.invert=Yp,re.invertBy=qp,re.invokeMap=Df,re.iteratee=ha,re.keyBy=Rf,re.keys=En,re.keysIn=Ln,re.map=Vi,re.mapKeys=Jp,re.mapValues=Xp,re.matches=Uh,re.matchesProperty=Kh,re.memoize=zi,re.merge=Zp,re.mergeWith=oc,re.method=Yh,re.methodOf=qh,re.mixin=ma,re.negate=Ui,re.nthArg=Jh,re.omit=Qp,re.omitBy=eh,re.once=Gf,re.orderBy=If,re.over=Xh,re.overArgs=Jf,re.overEvery=Zh,re.overSome=Qh,re.partial=aa,re.partialRight=Gl,re.partition=kf,re.pick=th,re.pickBy=ic,re.property=fc,re.propertyOf=em,re.pull=Rd,re.pullAll=Fl,re.pullAllBy=Id,re.pullAllWith=kd,re.pullAt=Ld,re.range=tm,re.rangeRight=nm,re.rearg=Xf,re.reject=Ff,re.remove=Pd,re.rest=Zf,re.reverse=oa,re.sampleSize=$f,re.set=rh,re.setWith=oh,re.shuffle=Bf,re.slice=Fd,re.sortBy=zf,re.sortedUniq=Ud,re.sortedUniqBy=Kd,re.split=_h,re.spread=Qf,re.tail=Yd,re.take=qd,re.takeRight=Gd,re.takeRightWhile=Jd,re.takeWhile=Xd,re.tap=pf,re.throttle=ep,re.thru=Bi,re.toArray=ec,re.toPairs=sc,re.toPairsIn=ac,re.toPath=lm,re.toPlainObject=nc,re.transform=ih,re.unary=tp,re.union=Zd,re.unionBy=Qd,re.unionWith=ef,re.uniq=tf,re.uniqBy=nf,re.uniqWith=rf,re.unset=sh,re.unzip=ia,re.unzipWith=Hl,re.update=ah,re.updateWith=lh,re.values=po,re.valuesIn=ch,re.without=of,re.words=uc,re.wrap=np,re.xor=sf,re.xorBy=af,re.xorWith=lf,re.zip=cf,re.zipObject=uf,re.zipObjectDeep=df,re.zipWith=ff,re.entries=sc,re.entriesIn=ac,re.extend=rc,re.extendWith=qi,ma(re,re),re.add=um,re.attempt=dc,re.camelCase=ph,re.capitalize=lc,re.ceil=dm,re.clamp=uh,re.clone=op,re.cloneDeep=sp,re.cloneDeepWith=ap,re.cloneWith=ip,re.conformsTo=lp,re.deburr=cc,re.defaultTo=Vh,re.divide=fm,re.endsWith=hh,re.eq=Xn,re.escape=mh,re.escapeRegExp=gh,re.every=Tf,re.find=Af,re.findIndex=Il,re.findKey=Fp,re.findLast=xf,re.findLastIndex=kl,re.findLastKey=Hp,re.floor=pm,re.forEach=Bl,re.forEachRight=Vl,re.forIn=$p,re.forInRight=Bp,re.forOwn=Vp,re.forOwnRight=Wp,re.get=ua,re.gt=cp,re.gte=up,re.has=Kp,re.hasIn=da,re.head=Pl,re.identity=Pn,re.includes=Mf,re.indexOf=Ad,re.inRange=dh,re.invoke=Gp,re.isArguments=Br,re.isArray=Bt,re.isArrayBuffer=dp,re.isArrayLike=kn,re.isArrayLikeObject=hn,re.isBoolean=fp,re.isBuffer=Mr,re.isDate=pp,re.isElement=hp,re.isEmpty=mp,re.isEqual=gp,re.isEqualWith=bp,re.isError=la,re.isFinite=vp,re.isFunction=yr,re.isInteger=Jl,re.isLength=Ki,re.isMap=Xl,re.isMatch=yp,re.isMatchWith=Ep,re.isNaN=Cp,re.isNative=Sp,re.isNil=wp,re.isNull=Tp,re.isNumber=Zl,re.isObject=fn,re.isObjectLike=pn,re.isPlainObject=Uo,re.isRegExp=ca,re.isSafeInteger=Ap,re.isSet=Ql,re.isString=Yi,re.isSymbol=Hn,re.isTypedArray=fo,re.isUndefined=xp,re.isWeakMap=_p,re.isWeakSet=Np,re.join=Od,re.kebabCase=bh,re.last=Yn,re.lastIndexOf=Md,re.lowerCase=vh,re.lowerFirst=yh,re.lt=jp,re.lte=Op,re.max=hm,re.maxBy=mm,re.mean=gm,re.meanBy=bm,re.min=vm,re.minBy=ym,re.stubArray=ba,re.stubFalse=va,re.stubObject=om,re.stubString=im,re.stubTrue=sm,re.multiply=Em,re.nth=Dd,re.noConflict=Gh,re.noop=ga,re.now=Wi,re.pad=Eh,re.padEnd=Ch,re.padStart=Sh,re.parseInt=Th,re.random=fh,re.reduce=Lf,re.reduceRight=Pf,re.repeat=wh,re.replace=Ah,re.result=nh,re.round=Cm,re.runInContext=Oe,re.sample=Hf,re.size=Vf,re.snakeCase=xh,re.some=Wf,re.sortedIndex=Hd,re.sortedIndexBy=$d,re.sortedIndexOf=Bd,re.sortedLastIndex=Vd,re.sortedLastIndexBy=Wd,re.sortedLastIndexOf=zd,re.startCase=Nh,re.startsWith=jh,re.subtract=Sm,re.sum=Tm,re.sumBy=wm,re.template=Oh,re.times=am,re.toFinite=Er,re.toInteger=Wt,re.toLength=tc,re.toLower=Mh,re.toNumber=qn,re.toSafeInteger=Mp,re.toString=tn,re.toUpper=Dh,re.trim=Rh,re.trimEnd=Ih,re.trimStart=kh,re.truncate=Lh,re.unescape=Ph,re.uniqueId=cm,re.upperCase=Fh,re.upperFirst=fa,re.each=Bl,re.eachRight=Vl,re.first=Pl,ma(re,function(){var f={};return ir(re,function(E,M){nn.call(re.prototype,M)||(f[M]=E)}),f}(),{chain:!1}),re.VERSION=r,Rn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(f){re[f].placeholder=re}),Rn(["drop","take"],function(f,E){qt.prototype[f]=function(M){M=M===n?1:yn(Wt(M),0);var W=this.__filtered__&&!E?new qt(this):this.clone();return W.__filtered__?W.__takeCount__=xn(M,W.__takeCount__):W.__views__.push({size:xn(M,It),type:f+(W.__dir__<0?"Right":"")}),W},qt.prototype[f+"Right"]=function(M){return this.reverse()[f](M).reverse()}}),Rn(["filter","map","takeWhile"],function(f,E){var M=E+1,W=M==Ne||M==me;qt.prototype[f]=function(Q){var ae=this.clone();return ae.__iteratees__.push({iteratee:Mt(Q,3),type:M}),ae.__filtered__=ae.__filtered__||W,ae}}),Rn(["head","last"],function(f,E){var M="take"+(E?"Right":"");qt.prototype[f]=function(){return this[M](1).value()[0]}}),Rn(["initial","tail"],function(f,E){var M="drop"+(E?"":"Right");qt.prototype[f]=function(){return this.__filtered__?new qt(this):this[M](1)}}),qt.prototype.compact=function(){return this.filter(Pn)},qt.prototype.find=function(f){return this.filter(f).head()},qt.prototype.findLast=function(f){return this.reverse().find(f)},qt.prototype.invokeMap=Ut(function(f,E){return typeof f=="function"?new qt(this):this.map(function(M){return Ho(M,f,E)})}),qt.prototype.reject=function(f){return this.filter(Ui(Mt(f)))},qt.prototype.slice=function(f,E){f=Wt(f);var M=this;return M.__filtered__&&(f>0||E<0)?new qt(M):(f<0?M=M.takeRight(-f):f&&(M=M.drop(f)),E!==n&&(E=Wt(E),M=E<0?M.dropRight(-E):M.take(E-f)),M)},qt.prototype.takeRightWhile=function(f){return this.reverse().takeWhile(f).reverse()},qt.prototype.toArray=function(){return this.take(It)},ir(qt.prototype,function(f,E){var M=/^(?:filter|find|map|reject)|While$/.test(E),W=/^(?:head|last)$/.test(E),Q=re[W?"take"+(E=="last"?"Right":""):E],ae=W||/^find/.test(E);Q&&(re.prototype[E]=function(){var ye=this.__wrapped__,xe=W?[1]:arguments,Re=ye instanceof qt,Ge=xe[0],Je=Re||Bt(ye),rt=function(Yt){var Jt=Q.apply(re,nr([Yt],xe));return W&&yt?Jt[0]:Jt};Je&&M&&typeof Ge=="function"&&Ge.length!=1&&(Re=Je=!1);var yt=this.__chain__,xt=!!this.__actions__.length,Dt=ae&&!yt,zt=Re&&!xt;if(!ae&&Je){ye=zt?ye:new qt(this);var Rt=f.apply(ye,xe);return Rt.__actions__.push({func:Bi,args:[rt],thisArg:n}),new zn(Rt,yt)}return Dt&&zt?f.apply(this,xe):(Rt=this.thru(rt),Dt?W?Rt.value()[0]:Rt.value():Rt)})}),Rn(["pop","push","shift","sort","splice","unshift"],function(f){var E=pi[f],M=/^(?:push|sort|unshift)$/.test(f)?"tap":"thru",W=/^(?:pop|shift)$/.test(f);re.prototype[f]=function(){var Q=arguments;if(W&&!this.__chain__){var ae=this.value();return E.apply(Bt(ae)?ae:[],Q)}return this[M](function(ye){return E.apply(Bt(ye)?ye:[],Q)})}}),ir(qt.prototype,function(f,E){var M=re[E];if(M){var W=M.name+"";nn.call(so,W)||(so[W]=[]),so[W].push({name:E,func:M})}}),so[Ii(n,N).name]=[{name:"wrapper",func:n}],qt.prototype.clone=Lc,qt.prototype.reverse=Pc,qt.prototype.value=Fc,re.prototype.at=hf,re.prototype.chain=mf,re.prototype.commit=gf,re.prototype.next=bf,re.prototype.plant=yf,re.prototype.reverse=Ef,re.prototype.toJSON=re.prototype.valueOf=re.prototype.value=Cf,re.prototype.first=re.prototype.head,Do&&(re.prototype[Do]=vf),re},ro=or();dr?((dr.exports=ro)._=ro,So._=ro):bn._=ro}).call(commonjsGlobal)})(lodash,lodashExports);const _=lodashExports;var top="top",bottom="bottom",right="right",left="left",auto$1="auto",basePlacements=[top,bottom,right,left],start="start",end="end",clippingParents="clippingParents",viewport="viewport",popper="popper",reference="reference",variationPlacements=basePlacements.reduce(function(t,e){return t.concat([e+"-"+start,e+"-"+end])},[]),placements=[].concat(basePlacements,[auto$1]).reduce(function(t,e){return t.concat([e,e+"-"+start,e+"-"+end])},[]),beforeRead="beforeRead",read="read",afterRead="afterRead",beforeMain="beforeMain",main="main",afterMain="afterMain",beforeWrite="beforeWrite",write="write",afterWrite="afterWrite",modifierPhases=[beforeRead,read,afterRead,beforeMain,main,afterMain,beforeWrite,write,afterWrite];function getNodeName(t){return t?(t.nodeName||"").toLowerCase():null}function getWindow(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function isElement$2(t){var e=getWindow(t).Element;return t instanceof e||t instanceof Element}function isHTMLElement(t){var e=getWindow(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function isShadowRoot(t){if(typeof ShadowRoot>"u")return!1;var e=getWindow(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function applyStyles(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},o=e.attributes[n]||{},s=e.elements[n];!isHTMLElement(s)||!getNodeName(s)||(Object.assign(s.style,r),Object.keys(o).forEach(function(a){var l=o[a];l===!1?s.removeAttribute(a):s.setAttribute(a,l===!0?"":l)}))})}function effect$3(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var o=e.elements[r],s=e.attributes[r]||{},a=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),l=a.reduce(function(c,u){return c[u]="",c},{});!isHTMLElement(o)||!getNodeName(o)||(Object.assign(o.style,l),Object.keys(s).forEach(function(c){o.removeAttribute(c)}))})}}const applyStyles$1={name:"applyStyles",enabled:!0,phase:"write",fn:applyStyles,effect:effect$3,requires:["computeStyles"]};function getBasePlacement$1(t){return t.split("-")[0]}var max=Math.max,min=Math.min,round=Math.round;function getUAString(){var t=navigator.userAgentData;return t!=null&&t.brands?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function isLayoutViewport(){return!/^((?!chrome|android).)*safari/i.test(getUAString())}function getBoundingClientRect(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),o=1,s=1;e&&isHTMLElement(t)&&(o=t.offsetWidth>0&&round(r.width)/t.offsetWidth||1,s=t.offsetHeight>0&&round(r.height)/t.offsetHeight||1);var a=isElement$2(t)?getWindow(t):window,l=a.visualViewport,c=!isLayoutViewport()&&n,u=(r.left+(c&&l?l.offsetLeft:0))/o,g=(r.top+(c&&l?l.offsetTop:0))/s,C=r.width/o,v=r.height/s;return{width:C,height:v,top:g,right:u+C,bottom:g+v,left:u,x:u,y:g}}function getLayoutRect(t){var e=getBoundingClientRect(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function contains(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&isShadowRoot(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function getComputedStyle$1(t){return getWindow(t).getComputedStyle(t)}function isTableElement(t){return["table","td","th"].indexOf(getNodeName(t))>=0}function getDocumentElement(t){return((isElement$2(t)?t.ownerDocument:t.document)||window.document).documentElement}function getParentNode(t){return getNodeName(t)==="html"?t:t.assignedSlot||t.parentNode||(isShadowRoot(t)?t.host:null)||getDocumentElement(t)}function getTrueOffsetParent(t){return!isHTMLElement(t)||getComputedStyle$1(t).position==="fixed"?null:t.offsetParent}function getContainingBlock(t){var e=/firefox/i.test(getUAString()),n=/Trident/i.test(getUAString());if(n&&isHTMLElement(t)){var r=getComputedStyle$1(t);if(r.position==="fixed")return null}var o=getParentNode(t);for(isShadowRoot(o)&&(o=o.host);isHTMLElement(o)&&["html","body"].indexOf(getNodeName(o))<0;){var s=getComputedStyle$1(o);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return o;o=o.parentNode}return null}function getOffsetParent(t){for(var e=getWindow(t),n=getTrueOffsetParent(t);n&&isTableElement(n)&&getComputedStyle$1(n).position==="static";)n=getTrueOffsetParent(n);return n&&(getNodeName(n)==="html"||getNodeName(n)==="body"&&getComputedStyle$1(n).position==="static")?e:n||getContainingBlock(t)||e}function getMainAxisFromPlacement(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function within(t,e,n){return max(t,min(e,n))}function withinMaxClamp(t,e,n){var r=within(t,e,n);return r>n?n:r}function getFreshSideObject(){return{top:0,right:0,bottom:0,left:0}}function mergePaddingObject(t){return Object.assign({},getFreshSideObject(),t)}function expandToHashMap(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var toPaddingObject=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,mergePaddingObject(typeof e!="number"?e:expandToHashMap(e,basePlacements))};function arrow$2(t){var e,n=t.state,r=t.name,o=t.options,s=n.elements.arrow,a=n.modifiersData.popperOffsets,l=getBasePlacement$1(n.placement),c=getMainAxisFromPlacement(l),u=[left,right].indexOf(l)>=0,g=u?"height":"width";if(!(!s||!a)){var C=toPaddingObject(o.padding,n),v=getLayoutRect(s),m=c==="y"?top:left,S=c==="y"?bottom:right,T=n.rects.reference[g]+n.rects.reference[c]-a[c]-n.rects.popper[g],w=a[c]-n.rects.reference[c],N=getOffsetParent(s),D=N?c==="y"?N.clientHeight||0:N.clientWidth||0:0,k=T/2-w/2,L=C[m],H=D-v[g]-C[S],R=D/2-v[g]/2+k,B=within(L,R,H),Y=c;n.modifiersData[r]=(e={},e[Y]=B,e.centerOffset=B-R,e)}}function effect$2(t){var e=t.state,n=t.options,r=n.element,o=r===void 0?"[data-popper-arrow]":r;o!=null&&(typeof o=="string"&&(o=e.elements.popper.querySelector(o),!o)||contains(e.elements.popper,o)&&(e.elements.arrow=o))}const arrow$3={name:"arrow",enabled:!0,phase:"main",fn:arrow$2,effect:effect$2,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function getVariation(t){return t.split("-")[1]}var unsetSides={top:"auto",right:"auto",bottom:"auto",left:"auto"};function roundOffsetsByDPR(t){var e=t.x,n=t.y,r=window,o=r.devicePixelRatio||1;return{x:round(e*o)/o||0,y:round(n*o)/o||0}}function mapToStyles(t){var e,n=t.popper,r=t.popperRect,o=t.placement,s=t.variation,a=t.offsets,l=t.position,c=t.gpuAcceleration,u=t.adaptive,g=t.roundOffsets,C=t.isFixed,v=a.x,m=v===void 0?0:v,S=a.y,T=S===void 0?0:S,w=typeof g=="function"?g({x:m,y:T}):{x:m,y:T};m=w.x,T=w.y;var N=a.hasOwnProperty("x"),D=a.hasOwnProperty("y"),k=left,L=top,H=window;if(u){var R=getOffsetParent(n),B="clientHeight",Y="clientWidth";if(R===getWindow(n)&&(R=getDocumentElement(n),getComputedStyle$1(R).position!=="static"&&l==="absolute"&&(B="scrollHeight",Y="scrollWidth")),R=R,o===top||(o===left||o===right)&&s===end){L=bottom;var K=C&&R===H&&H.visualViewport?H.visualViewport.height:R[B];T-=K-r.height,T*=c?1:-1}if(o===left||(o===top||o===bottom)&&s===end){k=right;var se=C&&R===H&&H.visualViewport?H.visualViewport.width:R[Y];m-=se-r.width,m*=c?1:-1}}var pe=Object.assign({position:l},u&&unsetSides),le=g===!0?roundOffsetsByDPR({x:m,y:T}):{x:m,y:T};if(m=le.x,T=le.y,c){var Ee;return Object.assign({},pe,(Ee={},Ee[L]=D?"0":"",Ee[k]=N?"0":"",Ee.transform=(H.devicePixelRatio||1)<=1?"translate("+m+"px, "+T+"px)":"translate3d("+m+"px, "+T+"px, 0)",Ee))}return Object.assign({},pe,(e={},e[L]=D?T+"px":"",e[k]=N?m+"px":"",e.transform="",e))}function computeStyles(t){var e=t.state,n=t.options,r=n.gpuAcceleration,o=r===void 0?!0:r,s=n.adaptive,a=s===void 0?!0:s,l=n.roundOffsets,c=l===void 0?!0:l,u={placement:getBasePlacement$1(e.placement),variation:getVariation(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:o,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,mapToStyles(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:a,roundOffsets:c})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,mapToStyles(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const computeStyles$1={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:computeStyles,data:{}};var passive={passive:!0};function effect$1(t){var e=t.state,n=t.instance,r=t.options,o=r.scroll,s=o===void 0?!0:o,a=r.resize,l=a===void 0?!0:a,c=getWindow(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&u.forEach(function(g){g.addEventListener("scroll",n.update,passive)}),l&&c.addEventListener("resize",n.update,passive),function(){s&&u.forEach(function(g){g.removeEventListener("scroll",n.update,passive)}),l&&c.removeEventListener("resize",n.update,passive)}}const eventListeners={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:effect$1,data:{}};var hash$1={left:"right",right:"left",bottom:"top",top:"bottom"};function getOppositePlacement(t){return t.replace(/left|right|bottom|top/g,function(e){return hash$1[e]})}var hash={start:"end",end:"start"};function getOppositeVariationPlacement(t){return t.replace(/start|end/g,function(e){return hash[e]})}function getWindowScroll(t){var e=getWindow(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function getWindowScrollBarX(t){return getBoundingClientRect(getDocumentElement(t)).left+getWindowScroll(t).scrollLeft}function getViewportRect(t,e){var n=getWindow(t),r=getDocumentElement(t),o=n.visualViewport,s=r.clientWidth,a=r.clientHeight,l=0,c=0;if(o){s=o.width,a=o.height;var u=isLayoutViewport();(u||!u&&e==="fixed")&&(l=o.offsetLeft,c=o.offsetTop)}return{width:s,height:a,x:l+getWindowScrollBarX(t),y:c}}function getDocumentRect(t){var e,n=getDocumentElement(t),r=getWindowScroll(t),o=(e=t.ownerDocument)==null?void 0:e.body,s=max(n.scrollWidth,n.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),a=max(n.scrollHeight,n.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),l=-r.scrollLeft+getWindowScrollBarX(t),c=-r.scrollTop;return getComputedStyle$1(o||n).direction==="rtl"&&(l+=max(n.clientWidth,o?o.clientWidth:0)-s),{width:s,height:a,x:l,y:c}}function isScrollParent(t){var e=getComputedStyle$1(t),n=e.overflow,r=e.overflowX,o=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+o+r)}function getScrollParent$1(t){return["html","body","#document"].indexOf(getNodeName(t))>=0?t.ownerDocument.body:isHTMLElement(t)&&isScrollParent(t)?t:getScrollParent$1(getParentNode(t))}function listScrollParents(t,e){var n;e===void 0&&(e=[]);var r=getScrollParent$1(t),o=r===((n=t.ownerDocument)==null?void 0:n.body),s=getWindow(r),a=o?[s].concat(s.visualViewport||[],isScrollParent(r)?r:[]):r,l=e.concat(a);return o?l:l.concat(listScrollParents(getParentNode(a)))}function rectToClientRect(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function getInnerBoundingClientRect(t,e){var n=getBoundingClientRect(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function getClientRectFromMixedType(t,e,n){return e===viewport?rectToClientRect(getViewportRect(t,n)):isElement$2(e)?getInnerBoundingClientRect(e,n):rectToClientRect(getDocumentRect(getDocumentElement(t)))}function getClippingParents(t){var e=listScrollParents(getParentNode(t)),n=["absolute","fixed"].indexOf(getComputedStyle$1(t).position)>=0,r=n&&isHTMLElement(t)?getOffsetParent(t):t;return isElement$2(r)?e.filter(function(o){return isElement$2(o)&&contains(o,r)&&getNodeName(o)!=="body"}):[]}function getClippingRect(t,e,n,r){var o=e==="clippingParents"?getClippingParents(t):[].concat(e),s=[].concat(o,[n]),a=s[0],l=s.reduce(function(c,u){var g=getClientRectFromMixedType(t,u,r);return c.top=max(g.top,c.top),c.right=min(g.right,c.right),c.bottom=min(g.bottom,c.bottom),c.left=max(g.left,c.left),c},getClientRectFromMixedType(t,a,r));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function computeOffsets(t){var e=t.reference,n=t.element,r=t.placement,o=r?getBasePlacement$1(r):null,s=r?getVariation(r):null,a=e.x+e.width/2-n.width/2,l=e.y+e.height/2-n.height/2,c;switch(o){case top:c={x:a,y:e.y-n.height};break;case bottom:c={x:a,y:e.y+e.height};break;case right:c={x:e.x+e.width,y:l};break;case left:c={x:e.x-n.width,y:l};break;default:c={x:e.x,y:e.y}}var u=o?getMainAxisFromPlacement(o):null;if(u!=null){var g=u==="y"?"height":"width";switch(s){case start:c[u]=c[u]-(e[g]/2-n[g]/2);break;case end:c[u]=c[u]+(e[g]/2-n[g]/2);break}}return c}function detectOverflow(t,e){e===void 0&&(e={});var n=e,r=n.placement,o=r===void 0?t.placement:r,s=n.strategy,a=s===void 0?t.strategy:s,l=n.boundary,c=l===void 0?clippingParents:l,u=n.rootBoundary,g=u===void 0?viewport:u,C=n.elementContext,v=C===void 0?popper:C,m=n.altBoundary,S=m===void 0?!1:m,T=n.padding,w=T===void 0?0:T,N=mergePaddingObject(typeof w!="number"?w:expandToHashMap(w,basePlacements)),D=v===popper?reference:popper,k=t.rects.popper,L=t.elements[S?D:v],H=getClippingRect(isElement$2(L)?L:L.contextElement||getDocumentElement(t.elements.popper),c,g,a),R=getBoundingClientRect(t.elements.reference),B=computeOffsets({reference:R,element:k,strategy:"absolute",placement:o}),Y=rectToClientRect(Object.assign({},k,B)),K=v===popper?Y:R,se={top:H.top-K.top+N.top,bottom:K.bottom-H.bottom+N.bottom,left:H.left-K.left+N.left,right:K.right-H.right+N.right},pe=t.modifiersData.offset;if(v===popper&&pe){var le=pe[o];Object.keys(se).forEach(function(Ee){var Ne=[right,bottom].indexOf(Ee)>=0?1:-1,_e=[top,bottom].indexOf(Ee)>=0?"y":"x";se[Ee]+=le[_e]*Ne})}return se}function computeAutoPlacement(t,e){e===void 0&&(e={});var n=e,r=n.placement,o=n.boundary,s=n.rootBoundary,a=n.padding,l=n.flipVariations,c=n.allowedAutoPlacements,u=c===void 0?placements:c,g=getVariation(r),C=g?l?variationPlacements:variationPlacements.filter(function(S){return getVariation(S)===g}):basePlacements,v=C.filter(function(S){return u.indexOf(S)>=0});v.length===0&&(v=C);var m=v.reduce(function(S,T){return S[T]=detectOverflow(t,{placement:T,boundary:o,rootBoundary:s,padding:a})[getBasePlacement$1(T)],S},{});return Object.keys(m).sort(function(S,T){return m[S]-m[T]})}function getExpandedFallbackPlacements(t){if(getBasePlacement$1(t)===auto$1)return[];var e=getOppositePlacement(t);return[getOppositeVariationPlacement(t),e,getOppositeVariationPlacement(e)]}function flip(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var o=n.mainAxis,s=o===void 0?!0:o,a=n.altAxis,l=a===void 0?!0:a,c=n.fallbackPlacements,u=n.padding,g=n.boundary,C=n.rootBoundary,v=n.altBoundary,m=n.flipVariations,S=m===void 0?!0:m,T=n.allowedAutoPlacements,w=e.options.placement,N=getBasePlacement$1(w),D=N===w,k=c||(D||!S?[getOppositePlacement(w)]:getExpandedFallbackPlacements(w)),L=[w].concat(k).reduce(function(St,Gt){return St.concat(getBasePlacement$1(Gt)===auto$1?computeAutoPlacement(e,{placement:Gt,boundary:g,rootBoundary:C,padding:u,flipVariations:S,allowedAutoPlacements:T}):Gt)},[]),H=e.rects.reference,R=e.rects.popper,B=new Map,Y=!0,K=L[0],se=0;se<L.length;se++){var pe=L[se],le=getBasePlacement$1(pe),Ee=getVariation(pe)===start,Ne=[top,bottom].indexOf(le)>=0,_e=Ne?"width":"height",me=detectOverflow(e,{placement:pe,boundary:g,rootBoundary:C,altBoundary:v,padding:u}),Ke=Ne?Ee?right:left:Ee?bottom:top;H[_e]>R[_e]&&(Ke=getOppositePlacement(Ke));var Ye=getOppositePlacement(Ke),pt=[];if(s&&pt.push(me[le]<=0),l&&pt.push(me[Ke]<=0,me[Ye]<=0),pt.every(function(St){return St})){K=pe,Y=!1;break}B.set(pe,pt)}if(Y)for(var ut=S?3:1,It=function(Gt){var _t=L.find(function(Ze){var et=B.get(Ze);if(et)return et.slice(0,Gt).every(function(ht){return ht})});if(_t)return K=_t,"break"},te=ut;te>0;te--){var ot=It(te);if(ot==="break")break}e.placement!==K&&(e.modifiersData[r]._skip=!0,e.placement=K,e.reset=!0)}}const flip$1={name:"flip",enabled:!0,phase:"main",fn:flip,requiresIfExists:["offset"],data:{_skip:!1}};function getSideOffsets(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function isAnySideFullyClipped(t){return[top,right,bottom,left].some(function(e){return t[e]>=0})}function hide(t){var e=t.state,n=t.name,r=e.rects.reference,o=e.rects.popper,s=e.modifiersData.preventOverflow,a=detectOverflow(e,{elementContext:"reference"}),l=detectOverflow(e,{altBoundary:!0}),c=getSideOffsets(a,r),u=getSideOffsets(l,o,s),g=isAnySideFullyClipped(c),C=isAnySideFullyClipped(u);e.modifiersData[n]={referenceClippingOffsets:c,popperEscapeOffsets:u,isReferenceHidden:g,hasPopperEscaped:C},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":g,"data-popper-escaped":C})}const hide$1={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:hide};function distanceAndSkiddingToXY(t,e,n){var r=getBasePlacement$1(t),o=[left,top].indexOf(r)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,a=s[0],l=s[1];return a=a||0,l=(l||0)*o,[left,right].indexOf(r)>=0?{x:l,y:a}:{x:a,y:l}}function offset(t){var e=t.state,n=t.options,r=t.name,o=n.offset,s=o===void 0?[0,0]:o,a=placements.reduce(function(g,C){return g[C]=distanceAndSkiddingToXY(C,e.rects,s),g},{}),l=a[e.placement],c=l.x,u=l.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=c,e.modifiersData.popperOffsets.y+=u),e.modifiersData[r]=a}const offset$1={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:offset};function popperOffsets(t){var e=t.state,n=t.name;e.modifiersData[n]=computeOffsets({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const popperOffsets$1={name:"popperOffsets",enabled:!0,phase:"read",fn:popperOffsets,data:{}};function getAltAxis(t){return t==="x"?"y":"x"}function preventOverflow(t){var e=t.state,n=t.options,r=t.name,o=n.mainAxis,s=o===void 0?!0:o,a=n.altAxis,l=a===void 0?!1:a,c=n.boundary,u=n.rootBoundary,g=n.altBoundary,C=n.padding,v=n.tether,m=v===void 0?!0:v,S=n.tetherOffset,T=S===void 0?0:S,w=detectOverflow(e,{boundary:c,rootBoundary:u,padding:C,altBoundary:g}),N=getBasePlacement$1(e.placement),D=getVariation(e.placement),k=!D,L=getMainAxisFromPlacement(N),H=getAltAxis(L),R=e.modifiersData.popperOffsets,B=e.rects.reference,Y=e.rects.popper,K=typeof T=="function"?T(Object.assign({},e.rects,{placement:e.placement})):T,se=typeof K=="number"?{mainAxis:K,altAxis:K}:Object.assign({mainAxis:0,altAxis:0},K),pe=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,le={x:0,y:0};if(R){if(s){var Ee,Ne=L==="y"?top:left,_e=L==="y"?bottom:right,me=L==="y"?"height":"width",Ke=R[L],Ye=Ke+w[Ne],pt=Ke-w[_e],ut=m?-Y[me]/2:0,It=D===start?B[me]:Y[me],te=D===start?-Y[me]:-B[me],ot=e.elements.arrow,St=m&&ot?getLayoutRect(ot):{width:0,height:0},Gt=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:getFreshSideObject(),_t=Gt[Ne],Ze=Gt[_e],et=within(0,B[me],St[me]),ht=k?B[me]/2-ut-et-_t-se.mainAxis:It-et-_t-se.mainAxis,Tt=k?-B[me]/2+ut+et+Ze+se.mainAxis:te+et+Ze+se.mainAxis,jt=e.elements.arrow&&getOffsetParent(e.elements.arrow),ge=jt?L==="y"?jt.clientTop||0:jt.clientLeft||0:0,Te=(Ee=pe==null?void 0:pe[L])!=null?Ee:0,Ie=Ke+ht-Te-ge,$e=Ke+Tt-Te,Be=within(m?min(Ye,Ie):Ye,Ke,m?max(pt,$e):pt);R[L]=Be,le[L]=Be-Ke}if(l){var nt,ft=L==="x"?top:left,st=L==="x"?bottom:right,at=R[H],Fe=H==="y"?"height":"width",Ct=at+w[ft],mt=at-w[st],F=[top,left].indexOf(N)!==-1,V=(nt=pe==null?void 0:pe[H])!=null?nt:0,O=F?Ct:at-B[Fe]-Y[Fe]-V+se.altAxis,A=F?at+B[Fe]+Y[Fe]-V-se.altAxis:mt,J=m&&F?withinMaxClamp(O,at,A):within(m?O:Ct,at,m?A:mt);R[H]=J,le[H]=J-at}e.modifiersData[r]=le}}const preventOverflow$1={name:"preventOverflow",enabled:!0,phase:"main",fn:preventOverflow,requiresIfExists:["offset"]};function getHTMLElementScroll(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function getNodeScroll(t){return t===getWindow(t)||!isHTMLElement(t)?getWindowScroll(t):getHTMLElementScroll(t)}function isElementScaled(t){var e=t.getBoundingClientRect(),n=round(e.width)/t.offsetWidth||1,r=round(e.height)/t.offsetHeight||1;return n!==1||r!==1}function getCompositeRect(t,e,n){n===void 0&&(n=!1);var r=isHTMLElement(e),o=isHTMLElement(e)&&isElementScaled(e),s=getDocumentElement(e),a=getBoundingClientRect(t,o,n),l={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(r||!r&&!n)&&((getNodeName(e)!=="body"||isScrollParent(s))&&(l=getNodeScroll(e)),isHTMLElement(e)?(c=getBoundingClientRect(e,!0),c.x+=e.clientLeft,c.y+=e.clientTop):s&&(c.x=getWindowScrollBarX(s))),{x:a.left+l.scrollLeft-c.x,y:a.top+l.scrollTop-c.y,width:a.width,height:a.height}}function order(t){var e=new Map,n=new Set,r=[];t.forEach(function(s){e.set(s.name,s)});function o(s){n.add(s.name);var a=[].concat(s.requires||[],s.requiresIfExists||[]);a.forEach(function(l){if(!n.has(l)){var c=e.get(l);c&&o(c)}}),r.push(s)}return t.forEach(function(s){n.has(s.name)||o(s)}),r}function orderModifiers(t){var e=order(t);return modifierPhases.reduce(function(n,r){return n.concat(e.filter(function(o){return o.phase===r}))},[])}function debounce$1(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function mergeByName(t){var e=t.reduce(function(n,r){var o=n[r.name];return n[r.name]=o?Object.assign({},o,r,{options:Object.assign({},o.options,r.options),data:Object.assign({},o.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var DEFAULT_OPTIONS={placement:"bottom",modifiers:[],strategy:"absolute"};function areValidElements(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function popperGenerator(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,o=e.defaultOptions,s=o===void 0?DEFAULT_OPTIONS:o;return function(l,c,u){u===void 0&&(u=s);var g={placement:"bottom",orderedModifiers:[],options:Object.assign({},DEFAULT_OPTIONS,s),modifiersData:{},elements:{reference:l,popper:c},attributes:{},styles:{}},C=[],v=!1,m={state:g,setOptions:function(N){var D=typeof N=="function"?N(g.options):N;T(),g.options=Object.assign({},s,g.options,D),g.scrollParents={reference:isElement$2(l)?listScrollParents(l):l.contextElement?listScrollParents(l.contextElement):[],popper:listScrollParents(c)};var k=orderModifiers(mergeByName([].concat(r,g.options.modifiers)));return g.orderedModifiers=k.filter(function(L){return L.enabled}),S(),m.update()},forceUpdate:function(){if(!v){var N=g.elements,D=N.reference,k=N.popper;if(areValidElements(D,k)){g.rects={reference:getCompositeRect(D,getOffsetParent(k),g.options.strategy==="fixed"),popper:getLayoutRect(k)},g.reset=!1,g.placement=g.options.placement,g.orderedModifiers.forEach(function(se){return g.modifiersData[se.name]=Object.assign({},se.data)});for(var L=0;L<g.orderedModifiers.length;L++){if(g.reset===!0){g.reset=!1,L=-1;continue}var H=g.orderedModifiers[L],R=H.fn,B=H.options,Y=B===void 0?{}:B,K=H.name;typeof R=="function"&&(g=R({state:g,options:Y,name:K,instance:m})||g)}}}},update:debounce$1(function(){return new Promise(function(w){m.forceUpdate(),w(g)})}),destroy:function(){T(),v=!0}};if(!areValidElements(l,c))return m;m.setOptions(u).then(function(w){!v&&u.onFirstUpdate&&u.onFirstUpdate(w)});function S(){g.orderedModifiers.forEach(function(w){var N=w.name,D=w.options,k=D===void 0?{}:D,L=w.effect;if(typeof L=="function"){var H=L({state:g,name:N,instance:m,options:k}),R=function(){};C.push(H||R)}})}function T(){C.forEach(function(w){return w()}),C=[]}return m}}var createPopper$2=popperGenerator(),defaultModifiers$1=[eventListeners,popperOffsets$1,computeStyles$1,applyStyles$1],createPopper$1=popperGenerator({defaultModifiers:defaultModifiers$1}),defaultModifiers=[eventListeners,popperOffsets$1,computeStyles$1,applyStyles$1,offset$1,flip$1,preventOverflow$1,arrow$3,hide$1],createPopper=popperGenerator({defaultModifiers});const Popper=Object.freeze(Object.defineProperty({__proto__:null,afterMain,afterRead,afterWrite,applyStyles:applyStyles$1,arrow:arrow$3,auto:auto$1,basePlacements,beforeMain,beforeRead,beforeWrite,bottom,clippingParents,computeStyles:computeStyles$1,createPopper,createPopperBase:createPopper$2,createPopperLite:createPopper$1,detectOverflow,end,eventListeners,flip:flip$1,hide:hide$1,left,main,modifierPhases,offset:offset$1,placements,popper,popperGenerator,popperOffsets:popperOffsets$1,preventOverflow:preventOverflow$1,read,reference,right,start,top,variationPlacements,viewport,write},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.2.3 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const MAX_UID=1e6,MILLISECONDS_MULTIPLIER=1e3,TRANSITION_END="transitionend",toType=t=>t==null?`${t}`:Object.prototype.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase(),getUID=t=>{do t+=Math.floor(Math.random()*MAX_UID);while(document.getElementById(t));return t},getSelector=t=>{let e=t.getAttribute("data-bs-target");if(!e||e==="#"){let n=t.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n=`#${n.split("#")[1]}`),e=n&&n!=="#"?n.trim():null}return e},getSelectorFromElement=t=>{const e=getSelector(t);return e&&document.querySelector(e)?e:null},getElementFromSelector=t=>{const e=getSelector(t);return e?document.querySelector(e):null},getTransitionDurationFromElement=t=>{if(!t)return 0;let{transitionDuration:e,transitionDelay:n}=window.getComputedStyle(t);const r=Number.parseFloat(e),o=Number.parseFloat(n);return!r&&!o?0:(e=e.split(",")[0],n=n.split(",")[0],(Number.parseFloat(e)+Number.parseFloat(n))*MILLISECONDS_MULTIPLIER)},triggerTransitionEnd=t=>{t.dispatchEvent(new Event(TRANSITION_END))},isElement$1=t=>!t||typeof t!="object"?!1:(typeof t.jquery<"u"&&(t=t[0]),typeof t.nodeType<"u"),getElement=t=>isElement$1(t)?t.jquery?t[0]:t:typeof t=="string"&&t.length>0?document.querySelector(t):null,isVisible=t=>{if(!isElement$1(t)||t.getClientRects().length===0)return!1;const e=getComputedStyle(t).getPropertyValue("visibility")==="visible",n=t.closest("details:not([open])");if(!n)return e;if(n!==t){const r=t.closest("summary");if(r&&r.parentNode!==n||r===null)return!1}return e},isDisabled=t=>!t||t.nodeType!==Node.ELEMENT_NODE||t.classList.contains("disabled")?!0:typeof t.disabled<"u"?t.disabled:t.hasAttribute("disabled")&&t.getAttribute("disabled")!=="false",findShadowRoot=t=>{if(!document.documentElement.attachShadow)return null;if(typeof t.getRootNode=="function"){const e=t.getRootNode();return e instanceof ShadowRoot?e:null}return t instanceof ShadowRoot?t:t.parentNode?findShadowRoot(t.parentNode):null},noop$2=()=>{},reflow=t=>{t.offsetHeight},getjQuery=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,DOMContentLoadedCallbacks=[],onDOMContentLoaded=t=>{document.readyState==="loading"?(DOMContentLoadedCallbacks.length||document.addEventListener("DOMContentLoaded",()=>{for(const e of DOMContentLoadedCallbacks)e()}),DOMContentLoadedCallbacks.push(t)):t()},isRTL=()=>document.documentElement.dir==="rtl",defineJQueryPlugin=t=>{onDOMContentLoaded(()=>{const e=getjQuery();if(e){const n=t.NAME,r=e.fn[n];e.fn[n]=t.jQueryInterface,e.fn[n].Constructor=t,e.fn[n].noConflict=()=>(e.fn[n]=r,t.jQueryInterface)}})},execute=t=>{typeof t=="function"&&t()},executeAfterTransition=(t,e,n=!0)=>{if(!n){execute(t);return}const r=5,o=getTransitionDurationFromElement(e)+r;let s=!1;const a=({target:l})=>{l===e&&(s=!0,e.removeEventListener(TRANSITION_END,a),execute(t))};e.addEventListener(TRANSITION_END,a),setTimeout(()=>{s||triggerTransitionEnd(e)},o)},getNextActiveElement=(t,e,n,r)=>{const o=t.length;let s=t.indexOf(e);return s===-1?!n&&r?t[o-1]:t[0]:(s+=n?1:-1,r&&(s=(s+o)%o),t[Math.max(0,Math.min(s,o-1))])},namespaceRegex=/[^.]*(?=\..*)\.|.*/,stripNameRegex=/\..*/,stripUidRegex=/::\d+$/,eventRegistry={};let uidEvent=1;const customEvents={mouseenter:"mouseover",mouseleave:"mouseout"},nativeEvents=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function makeEventUid(t,e){return e&&`${e}::${uidEvent++}`||t.uidEvent||uidEvent++}function getElementEvents(t){const e=makeEventUid(t);return t.uidEvent=e,eventRegistry[e]=eventRegistry[e]||{},eventRegistry[e]}function bootstrapHandler(t,e){return function n(r){return hydrateObj(r,{delegateTarget:t}),n.oneOff&&EventHandler.off(t,r.type,e),e.apply(t,[r])}}function bootstrapDelegationHandler(t,e,n){return function r(o){const s=t.querySelectorAll(e);for(let{target:a}=o;a&&a!==this;a=a.parentNode)for(const l of s)if(l===a)return hydrateObj(o,{delegateTarget:a}),r.oneOff&&EventHandler.off(t,o.type,e,n),n.apply(a,[o])}}function findHandler(t,e,n=null){return Object.values(t).find(r=>r.callable===e&&r.delegationSelector===n)}function normalizeParameters(t,e,n){const r=typeof e=="string",o=r?n:e||n;let s=getTypeEvent(t);return nativeEvents.has(s)||(s=t),[r,o,s]}function addHandler(t,e,n,r,o){if(typeof e!="string"||!t)return;let[s,a,l]=normalizeParameters(e,n,r);e in customEvents&&(a=(S=>function(T){if(!T.relatedTarget||T.relatedTarget!==T.delegateTarget&&!T.delegateTarget.contains(T.relatedTarget))return S.call(this,T)})(a));const c=getElementEvents(t),u=c[l]||(c[l]={}),g=findHandler(u,a,s?n:null);if(g){g.oneOff=g.oneOff&&o;return}const C=makeEventUid(a,e.replace(namespaceRegex,"")),v=s?bootstrapDelegationHandler(t,n,a):bootstrapHandler(t,a);v.delegationSelector=s?n:null,v.callable=a,v.oneOff=o,v.uidEvent=C,u[C]=v,t.addEventListener(l,v,s)}function removeHandler(t,e,n,r,o){const s=findHandler(e[n],r,o);s&&(t.removeEventListener(n,s,Boolean(o)),delete e[n][s.uidEvent])}function removeNamespacedHandlers(t,e,n,r){const o=e[n]||{};for(const s of Object.keys(o))if(s.includes(r)){const a=o[s];removeHandler(t,e,n,a.callable,a.delegationSelector)}}function getTypeEvent(t){return t=t.replace(stripNameRegex,""),customEvents[t]||t}const EventHandler={on(t,e,n,r){addHandler(t,e,n,r,!1)},one(t,e,n,r){addHandler(t,e,n,r,!0)},off(t,e,n,r){if(typeof e!="string"||!t)return;const[o,s,a]=normalizeParameters(e,n,r),l=a!==e,c=getElementEvents(t),u=c[a]||{},g=e.startsWith(".");if(typeof s<"u"){if(!Object.keys(u).length)return;removeHandler(t,c,a,s,o?n:null);return}if(g)for(const C of Object.keys(c))removeNamespacedHandlers(t,c,C,e.slice(1));for(const C of Object.keys(u)){const v=C.replace(stripUidRegex,"");if(!l||e.includes(v)){const m=u[C];removeHandler(t,c,a,m.callable,m.delegationSelector)}}},trigger(t,e,n){if(typeof e!="string"||!t)return null;const r=getjQuery(),o=getTypeEvent(e),s=e!==o;let a=null,l=!0,c=!0,u=!1;s&&r&&(a=r.Event(e,n),r(t).trigger(a),l=!a.isPropagationStopped(),c=!a.isImmediatePropagationStopped(),u=a.isDefaultPrevented());let g=new Event(e,{bubbles:l,cancelable:!0});return g=hydrateObj(g,n),u&&g.preventDefault(),c&&t.dispatchEvent(g),g.defaultPrevented&&a&&a.preventDefault(),g}};function hydrateObj(t,e){for(const[n,r]of Object.entries(e||{}))try{t[n]=r}catch{Object.defineProperty(t,n,{configurable:!0,get(){return r}})}return t}const elementMap=new Map,Data={set(t,e,n){elementMap.has(t)||elementMap.set(t,new Map);const r=elementMap.get(t);if(!r.has(e)&&r.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(r.keys())[0]}.`);return}r.set(e,n)},get(t,e){return elementMap.has(t)&&elementMap.get(t).get(e)||null},remove(t,e){if(!elementMap.has(t))return;const n=elementMap.get(t);n.delete(e),n.size===0&&elementMap.delete(t)}};function normalizeData(t){if(t==="true")return!0;if(t==="false")return!1;if(t===Number(t).toString())return Number(t);if(t===""||t==="null")return null;if(typeof t!="string")return t;try{return JSON.parse(decodeURIComponent(t))}catch{return t}}function normalizeDataKey(t){return t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}const Manipulator={setDataAttribute(t,e,n){t.setAttribute(`data-bs-${normalizeDataKey(e)}`,n)},removeDataAttribute(t,e){t.removeAttribute(`data-bs-${normalizeDataKey(e)}`)},getDataAttributes(t){if(!t)return{};const e={},n=Object.keys(t.dataset).filter(r=>r.startsWith("bs")&&!r.startsWith("bsConfig"));for(const r of n){let o=r.replace(/^bs/,"");o=o.charAt(0).toLowerCase()+o.slice(1,o.length),e[o]=normalizeData(t.dataset[r])}return e},getDataAttribute(t,e){return normalizeData(t.getAttribute(`data-bs-${normalizeDataKey(e)}`))}};class Config{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,n){const r=isElement$1(n)?Manipulator.getDataAttribute(n,"config"):{};return{...this.constructor.Default,...typeof r=="object"?r:{},...isElement$1(n)?Manipulator.getDataAttributes(n):{},...typeof e=="object"?e:{}}}_typeCheckConfig(e,n=this.constructor.DefaultType){for(const r of Object.keys(n)){const o=n[r],s=e[r],a=isElement$1(s)?"element":toType(s);if(!new RegExp(o).test(a))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${r}" provided type "${a}" but expected type "${o}".`)}}}const VERSION$1="5.2.3";class BaseComponent extends Config{constructor(e,n){super(),e=getElement(e),e&&(this._element=e,this._config=this._getConfig(n),Data.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Data.remove(this._element,this.constructor.DATA_KEY),EventHandler.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,n,r=!0){executeAfterTransition(e,n,r)}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return Data.get(getElement(e),this.DATA_KEY)}static getOrCreateInstance(e,n={}){return this.getInstance(e)||new this(e,typeof n=="object"?n:null)}static get VERSION(){return VERSION$1}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(e){return`${e}${this.EVENT_KEY}`}}const enableDismissTrigger=(t,e="hide")=>{const n=`click.dismiss${t.EVENT_KEY}`,r=t.NAME;EventHandler.on(document,n,`[data-bs-dismiss="${r}"]`,function(o){if(["A","AREA"].includes(this.tagName)&&o.preventDefault(),isDisabled(this))return;const s=getElementFromSelector(this)||this.closest(`.${r}`);t.getOrCreateInstance(s)[e]()})},NAME$f="alert",DATA_KEY$a="bs.alert",EVENT_KEY$b=`.${DATA_KEY$a}`,EVENT_CLOSE=`close${EVENT_KEY$b}`,EVENT_CLOSED=`closed${EVENT_KEY$b}`,CLASS_NAME_FADE$5="fade",CLASS_NAME_SHOW$8="show";class Alert extends BaseComponent{static get NAME(){return NAME$f}close(){if(EventHandler.trigger(this._element,EVENT_CLOSE).defaultPrevented)return;this._element.classList.remove(CLASS_NAME_SHOW$8);const n=this._element.classList.contains(CLASS_NAME_FADE$5);this._queueCallback(()=>this._destroyElement(),this._element,n)}_destroyElement(){this._element.remove(),EventHandler.trigger(this._element,EVENT_CLOSED),this.dispose()}static jQueryInterface(e){return this.each(function(){const n=Alert.getOrCreateInstance(this);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e](this)}})}}enableDismissTrigger(Alert,"close");defineJQueryPlugin(Alert);const NAME$e="button",DATA_KEY$9="bs.button",EVENT_KEY$a=`.${DATA_KEY$9}`,DATA_API_KEY$6=".data-api",CLASS_NAME_ACTIVE$3="active",SELECTOR_DATA_TOGGLE$5='[data-bs-toggle="button"]',EVENT_CLICK_DATA_API$6=`click${EVENT_KEY$a}${DATA_API_KEY$6}`;class Button extends BaseComponent{static get NAME(){return NAME$e}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(CLASS_NAME_ACTIVE$3))}static jQueryInterface(e){return this.each(function(){const n=Button.getOrCreateInstance(this);e==="toggle"&&n[e]()})}}EventHandler.on(document,EVENT_CLICK_DATA_API$6,SELECTOR_DATA_TOGGLE$5,t=>{t.preventDefault();const e=t.target.closest(SELECTOR_DATA_TOGGLE$5);Button.getOrCreateInstance(e).toggle()});defineJQueryPlugin(Button);const SelectorEngine={find(t,e=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(e,t))},findOne(t,e=document.documentElement){return Element.prototype.querySelector.call(e,t)},children(t,e){return[].concat(...t.children).filter(n=>n.matches(e))},parents(t,e){const n=[];let r=t.parentNode.closest(e);for(;r;)n.push(r),r=r.parentNode.closest(e);return n},prev(t,e){let n=t.previousElementSibling;for(;n;){if(n.matches(e))return[n];n=n.previousElementSibling}return[]},next(t,e){let n=t.nextElementSibling;for(;n;){if(n.matches(e))return[n];n=n.nextElementSibling}return[]},focusableChildren(t){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(n=>`${n}:not([tabindex^="-"])`).join(",");return this.find(e,t).filter(n=>!isDisabled(n)&&isVisible(n))}},NAME$d="swipe",EVENT_KEY$9=".bs.swipe",EVENT_TOUCHSTART=`touchstart${EVENT_KEY$9}`,EVENT_TOUCHMOVE=`touchmove${EVENT_KEY$9}`,EVENT_TOUCHEND=`touchend${EVENT_KEY$9}`,EVENT_POINTERDOWN=`pointerdown${EVENT_KEY$9}`,EVENT_POINTERUP=`pointerup${EVENT_KEY$9}`,POINTER_TYPE_TOUCH="touch",POINTER_TYPE_PEN="pen",CLASS_NAME_POINTER_EVENT="pointer-event",SWIPE_THRESHOLD=40,Default$c={endCallback:null,leftCallback:null,rightCallback:null},DefaultType$c={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Swipe extends Config{constructor(e,n){super(),this._element=e,!(!e||!Swipe.isSupported())&&(this._config=this._getConfig(n),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return Default$c}static get DefaultType(){return DefaultType$c}static get NAME(){return NAME$d}dispose(){EventHandler.off(this._element,EVENT_KEY$9)}_start(e){if(!this._supportPointerEvents){this._deltaX=e.touches[0].clientX;return}this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX)}_end(e){this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX-this._deltaX),this._handleSwipe(),execute(this._config.endCallback)}_move(e){this._deltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this._deltaX}_handleSwipe(){const e=Math.abs(this._deltaX);if(e<=SWIPE_THRESHOLD)return;const n=e/this._deltaX;this._deltaX=0,n&&execute(n>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(EventHandler.on(this._element,EVENT_POINTERDOWN,e=>this._start(e)),EventHandler.on(this._element,EVENT_POINTERUP,e=>this._end(e)),this._element.classList.add(CLASS_NAME_POINTER_EVENT)):(EventHandler.on(this._element,EVENT_TOUCHSTART,e=>this._start(e)),EventHandler.on(this._element,EVENT_TOUCHMOVE,e=>this._move(e)),EventHandler.on(this._element,EVENT_TOUCHEND,e=>this._end(e)))}_eventIsPointerPenTouch(e){return this._supportPointerEvents&&(e.pointerType===POINTER_TYPE_PEN||e.pointerType===POINTER_TYPE_TOUCH)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const NAME$c="carousel",DATA_KEY$8="bs.carousel",EVENT_KEY$8=`.${DATA_KEY$8}`,DATA_API_KEY$5=".data-api",ARROW_LEFT_KEY$1="ArrowLeft",ARROW_RIGHT_KEY$1="ArrowRight",TOUCHEVENT_COMPAT_WAIT=500,ORDER_NEXT="next",ORDER_PREV="prev",DIRECTION_LEFT="left",DIRECTION_RIGHT="right",EVENT_SLIDE=`slide${EVENT_KEY$8}`,EVENT_SLID=`slid${EVENT_KEY$8}`,EVENT_KEYDOWN$1=`keydown${EVENT_KEY$8}`,EVENT_MOUSEENTER$1=`mouseenter${EVENT_KEY$8}`,EVENT_MOUSELEAVE$1=`mouseleave${EVENT_KEY$8}`,EVENT_DRAG_START=`dragstart${EVENT_KEY$8}`,EVENT_LOAD_DATA_API$3=`load${EVENT_KEY$8}${DATA_API_KEY$5}`,EVENT_CLICK_DATA_API$5=`click${EVENT_KEY$8}${DATA_API_KEY$5}`,CLASS_NAME_CAROUSEL="carousel",CLASS_NAME_ACTIVE$2="active",CLASS_NAME_SLIDE="slide",CLASS_NAME_END="carousel-item-end",CLASS_NAME_START="carousel-item-start",CLASS_NAME_NEXT="carousel-item-next",CLASS_NAME_PREV="carousel-item-prev",SELECTOR_ACTIVE=".active",SELECTOR_ITEM=".carousel-item",SELECTOR_ACTIVE_ITEM=SELECTOR_ACTIVE+SELECTOR_ITEM,SELECTOR_ITEM_IMG=".carousel-item img",SELECTOR_INDICATORS=".carousel-indicators",SELECTOR_DATA_SLIDE="[data-bs-slide], [data-bs-slide-to]",SELECTOR_DATA_RIDE='[data-bs-ride="carousel"]',KEY_TO_DIRECTION={[ARROW_LEFT_KEY$1]:DIRECTION_RIGHT,[ARROW_RIGHT_KEY$1]:DIRECTION_LEFT},Default$b={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},DefaultType$b={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Carousel extends BaseComponent{constructor(e,n){super(e,n),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=SelectorEngine.findOne(SELECTOR_INDICATORS,this._element),this._addEventListeners(),this._config.ride===CLASS_NAME_CAROUSEL&&this.cycle()}static get Default(){return Default$b}static get DefaultType(){return DefaultType$b}static get NAME(){return NAME$c}next(){this._slide(ORDER_NEXT)}nextWhenVisible(){!document.hidden&&isVisible(this._element)&&this.next()}prev(){this._slide(ORDER_PREV)}pause(){this._isSliding&&triggerTransitionEnd(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){EventHandler.one(this._element,EVENT_SLID,()=>this.cycle());return}this.cycle()}}to(e){const n=this._getItems();if(e>n.length-1||e<0)return;if(this._isSliding){EventHandler.one(this._element,EVENT_SLID,()=>this.to(e));return}const r=this._getItemIndex(this._getActive());if(r===e)return;const o=e>r?ORDER_NEXT:ORDER_PREV;this._slide(o,n[e])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(e){return e.defaultInterval=e.interval,e}_addEventListeners(){this._config.keyboard&&EventHandler.on(this._element,EVENT_KEYDOWN$1,e=>this._keydown(e)),this._config.pause==="hover"&&(EventHandler.on(this._element,EVENT_MOUSEENTER$1,()=>this.pause()),EventHandler.on(this._element,EVENT_MOUSELEAVE$1,()=>this._maybeEnableCycle())),this._config.touch&&Swipe.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const r of SelectorEngine.find(SELECTOR_ITEM_IMG,this._element))EventHandler.on(r,EVENT_DRAG_START,o=>o.preventDefault());const n={leftCallback:()=>this._slide(this._directionToOrder(DIRECTION_LEFT)),rightCallback:()=>this._slide(this._directionToOrder(DIRECTION_RIGHT)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),TOUCHEVENT_COMPAT_WAIT+this._config.interval))}};this._swipeHelper=new Swipe(this._element,n)}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;const n=KEY_TO_DIRECTION[e.key];n&&(e.preventDefault(),this._slide(this._directionToOrder(n)))}_getItemIndex(e){return this._getItems().indexOf(e)}_setActiveIndicatorElement(e){if(!this._indicatorsElement)return;const n=SelectorEngine.findOne(SELECTOR_ACTIVE,this._indicatorsElement);n.classList.remove(CLASS_NAME_ACTIVE$2),n.removeAttribute("aria-current");const r=SelectorEngine.findOne(`[data-bs-slide-to="${e}"]`,this._indicatorsElement);r&&(r.classList.add(CLASS_NAME_ACTIVE$2),r.setAttribute("aria-current","true"))}_updateInterval(){const e=this._activeElement||this._getActive();if(!e)return;const n=Number.parseInt(e.getAttribute("data-bs-interval"),10);this._config.interval=n||this._config.defaultInterval}_slide(e,n=null){if(this._isSliding)return;const r=this._getActive(),o=e===ORDER_NEXT,s=n||getNextActiveElement(this._getItems(),r,o,this._config.wrap);if(s===r)return;const a=this._getItemIndex(s),l=m=>EventHandler.trigger(this._element,m,{relatedTarget:s,direction:this._orderToDirection(e),from:this._getItemIndex(r),to:a});if(l(EVENT_SLIDE).defaultPrevented||!r||!s)return;const u=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(a),this._activeElement=s;const g=o?CLASS_NAME_START:CLASS_NAME_END,C=o?CLASS_NAME_NEXT:CLASS_NAME_PREV;s.classList.add(C),reflow(s),r.classList.add(g),s.classList.add(g);const v=()=>{s.classList.remove(g,C),s.classList.add(CLASS_NAME_ACTIVE$2),r.classList.remove(CLASS_NAME_ACTIVE$2,C,g),this._isSliding=!1,l(EVENT_SLID)};this._queueCallback(v,r,this._isAnimated()),u&&this.cycle()}_isAnimated(){return this._element.classList.contains(CLASS_NAME_SLIDE)}_getActive(){return SelectorEngine.findOne(SELECTOR_ACTIVE_ITEM,this._element)}_getItems(){return SelectorEngine.find(SELECTOR_ITEM,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(e){return isRTL()?e===DIRECTION_LEFT?ORDER_PREV:ORDER_NEXT:e===DIRECTION_LEFT?ORDER_NEXT:ORDER_PREV}_orderToDirection(e){return isRTL()?e===ORDER_PREV?DIRECTION_LEFT:DIRECTION_RIGHT:e===ORDER_PREV?DIRECTION_RIGHT:DIRECTION_LEFT}static jQueryInterface(e){return this.each(function(){const n=Carousel.getOrCreateInstance(this,e);if(typeof e=="number"){n.to(e);return}if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e]()}})}}EventHandler.on(document,EVENT_CLICK_DATA_API$5,SELECTOR_DATA_SLIDE,function(t){const e=getElementFromSelector(this);if(!e||!e.classList.contains(CLASS_NAME_CAROUSEL))return;t.preventDefault();const n=Carousel.getOrCreateInstance(e),r=this.getAttribute("data-bs-slide-to");if(r){n.to(r),n._maybeEnableCycle();return}if(Manipulator.getDataAttribute(this,"slide")==="next"){n.next(),n._maybeEnableCycle();return}n.prev(),n._maybeEnableCycle()});EventHandler.on(window,EVENT_LOAD_DATA_API$3,()=>{const t=SelectorEngine.find(SELECTOR_DATA_RIDE);for(const e of t)Carousel.getOrCreateInstance(e)});defineJQueryPlugin(Carousel);const NAME$b="collapse",DATA_KEY$7="bs.collapse",EVENT_KEY$7=`.${DATA_KEY$7}`,DATA_API_KEY$4=".data-api",EVENT_SHOW$6=`show${EVENT_KEY$7}`,EVENT_SHOWN$6=`shown${EVENT_KEY$7}`,EVENT_HIDE$6=`hide${EVENT_KEY$7}`,EVENT_HIDDEN$6=`hidden${EVENT_KEY$7}`,EVENT_CLICK_DATA_API$4=`click${EVENT_KEY$7}${DATA_API_KEY$4}`,CLASS_NAME_SHOW$7="show",CLASS_NAME_COLLAPSE="collapse",CLASS_NAME_COLLAPSING="collapsing",CLASS_NAME_COLLAPSED="collapsed",CLASS_NAME_DEEPER_CHILDREN=`:scope .${CLASS_NAME_COLLAPSE} .${CLASS_NAME_COLLAPSE}`,CLASS_NAME_HORIZONTAL="collapse-horizontal",WIDTH="width",HEIGHT="height",SELECTOR_ACTIVES=".collapse.show, .collapse.collapsing",SELECTOR_DATA_TOGGLE$4='[data-bs-toggle="collapse"]',Default$a={parent:null,toggle:!0},DefaultType$a={parent:"(null|element)",toggle:"boolean"};class Collapse extends BaseComponent{constructor(e,n){super(e,n),this._isTransitioning=!1,this._triggerArray=[];const r=SelectorEngine.find(SELECTOR_DATA_TOGGLE$4);for(const o of r){const s=getSelectorFromElement(o),a=SelectorEngine.find(s).filter(l=>l===this._element);s!==null&&a.length&&this._triggerArray.push(o)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Default$a}static get DefaultType(){return DefaultType$a}static get NAME(){return NAME$b}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(SELECTOR_ACTIVES).filter(l=>l!==this._element).map(l=>Collapse.getOrCreateInstance(l,{toggle:!1}))),e.length&&e[0]._isTransitioning||EventHandler.trigger(this._element,EVENT_SHOW$6).defaultPrevented)return;for(const l of e)l.hide();const r=this._getDimension();this._element.classList.remove(CLASS_NAME_COLLAPSE),this._element.classList.add(CLASS_NAME_COLLAPSING),this._element.style[r]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const o=()=>{this._isTransitioning=!1,this._element.classList.remove(CLASS_NAME_COLLAPSING),this._element.classList.add(CLASS_NAME_COLLAPSE,CLASS_NAME_SHOW$7),this._element.style[r]="",EventHandler.trigger(this._element,EVENT_SHOWN$6)},a=`scroll${r[0].toUpperCase()+r.slice(1)}`;this._queueCallback(o,this._element,!0),this._element.style[r]=`${this._element[a]}px`}hide(){if(this._isTransitioning||!this._isShown()||EventHandler.trigger(this._element,EVENT_HIDE$6).defaultPrevented)return;const n=this._getDimension();this._element.style[n]=`${this._element.getBoundingClientRect()[n]}px`,reflow(this._element),this._element.classList.add(CLASS_NAME_COLLAPSING),this._element.classList.remove(CLASS_NAME_COLLAPSE,CLASS_NAME_SHOW$7);for(const o of this._triggerArray){const s=getElementFromSelector(o);s&&!this._isShown(s)&&this._addAriaAndCollapsedClass([o],!1)}this._isTransitioning=!0;const r=()=>{this._isTransitioning=!1,this._element.classList.remove(CLASS_NAME_COLLAPSING),this._element.classList.add(CLASS_NAME_COLLAPSE),EventHandler.trigger(this._element,EVENT_HIDDEN$6)};this._element.style[n]="",this._queueCallback(r,this._element,!0)}_isShown(e=this._element){return e.classList.contains(CLASS_NAME_SHOW$7)}_configAfterMerge(e){return e.toggle=Boolean(e.toggle),e.parent=getElement(e.parent),e}_getDimension(){return this._element.classList.contains(CLASS_NAME_HORIZONTAL)?WIDTH:HEIGHT}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(SELECTOR_DATA_TOGGLE$4);for(const n of e){const r=getElementFromSelector(n);r&&this._addAriaAndCollapsedClass([n],this._isShown(r))}}_getFirstLevelChildren(e){const n=SelectorEngine.find(CLASS_NAME_DEEPER_CHILDREN,this._config.parent);return SelectorEngine.find(e,this._config.parent).filter(r=>!n.includes(r))}_addAriaAndCollapsedClass(e,n){if(e.length)for(const r of e)r.classList.toggle(CLASS_NAME_COLLAPSED,!n),r.setAttribute("aria-expanded",n)}static jQueryInterface(e){const n={};return typeof e=="string"&&/show|hide/.test(e)&&(n.toggle=!1),this.each(function(){const r=Collapse.getOrCreateInstance(this,n);if(typeof e=="string"){if(typeof r[e]>"u")throw new TypeError(`No method named "${e}"`);r[e]()}})}}EventHandler.on(document,EVENT_CLICK_DATA_API$4,SELECTOR_DATA_TOGGLE$4,function(t){(t.target.tagName==="A"||t.delegateTarget&&t.delegateTarget.tagName==="A")&&t.preventDefault();const e=getSelectorFromElement(this),n=SelectorEngine.find(e);for(const r of n)Collapse.getOrCreateInstance(r,{toggle:!1}).toggle()});defineJQueryPlugin(Collapse);const NAME$a="dropdown",DATA_KEY$6="bs.dropdown",EVENT_KEY$6=`.${DATA_KEY$6}`,DATA_API_KEY$3=".data-api",ESCAPE_KEY$2="Escape",TAB_KEY$1="Tab",ARROW_UP_KEY$1="ArrowUp",ARROW_DOWN_KEY$1="ArrowDown",RIGHT_MOUSE_BUTTON=2,EVENT_HIDE$5=`hide${EVENT_KEY$6}`,EVENT_HIDDEN$5=`hidden${EVENT_KEY$6}`,EVENT_SHOW$5=`show${EVENT_KEY$6}`,EVENT_SHOWN$5=`shown${EVENT_KEY$6}`,EVENT_CLICK_DATA_API$3=`click${EVENT_KEY$6}${DATA_API_KEY$3}`,EVENT_KEYDOWN_DATA_API=`keydown${EVENT_KEY$6}${DATA_API_KEY$3}`,EVENT_KEYUP_DATA_API=`keyup${EVENT_KEY$6}${DATA_API_KEY$3}`,CLASS_NAME_SHOW$6="show",CLASS_NAME_DROPUP="dropup",CLASS_NAME_DROPEND="dropend",CLASS_NAME_DROPSTART="dropstart",CLASS_NAME_DROPUP_CENTER="dropup-center",CLASS_NAME_DROPDOWN_CENTER="dropdown-center",SELECTOR_DATA_TOGGLE$3='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',SELECTOR_DATA_TOGGLE_SHOWN=`${SELECTOR_DATA_TOGGLE$3}.${CLASS_NAME_SHOW$6}`,SELECTOR_MENU=".dropdown-menu",SELECTOR_NAVBAR=".navbar",SELECTOR_NAVBAR_NAV=".navbar-nav",SELECTOR_VISIBLE_ITEMS=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",PLACEMENT_TOP=isRTL()?"top-end":"top-start",PLACEMENT_TOPEND=isRTL()?"top-start":"top-end",PLACEMENT_BOTTOM=isRTL()?"bottom-end":"bottom-start",PLACEMENT_BOTTOMEND=isRTL()?"bottom-start":"bottom-end",PLACEMENT_RIGHT=isRTL()?"left-start":"right-start",PLACEMENT_LEFT=isRTL()?"right-start":"left-start",PLACEMENT_TOPCENTER="top",PLACEMENT_BOTTOMCENTER="bottom",Default$9={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},DefaultType$9={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Dropdown extends BaseComponent{constructor(e,n){super(e,n),this._popper=null,this._parent=this._element.parentNode,this._menu=SelectorEngine.next(this._element,SELECTOR_MENU)[0]||SelectorEngine.prev(this._element,SELECTOR_MENU)[0]||SelectorEngine.findOne(SELECTOR_MENU,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Default$9}static get DefaultType(){return DefaultType$9}static get NAME(){return NAME$a}toggle(){return this._isShown()?this.hide():this.show()}show(){if(isDisabled(this._element)||this._isShown())return;const e={relatedTarget:this._element};if(!EventHandler.trigger(this._element,EVENT_SHOW$5,e).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(SELECTOR_NAVBAR_NAV))for(const r of[].concat(...document.body.children))EventHandler.on(r,"mouseover",noop$2);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(CLASS_NAME_SHOW$6),this._element.classList.add(CLASS_NAME_SHOW$6),EventHandler.trigger(this._element,EVENT_SHOWN$5,e)}}hide(){if(isDisabled(this._element)||!this._isShown())return;const e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){if(!EventHandler.trigger(this._element,EVENT_HIDE$5,e).defaultPrevented){if("ontouchstart"in document.documentElement)for(const r of[].concat(...document.body.children))EventHandler.off(r,"mouseover",noop$2);this._popper&&this._popper.destroy(),this._menu.classList.remove(CLASS_NAME_SHOW$6),this._element.classList.remove(CLASS_NAME_SHOW$6),this._element.setAttribute("aria-expanded","false"),Manipulator.removeDataAttribute(this._menu,"popper"),EventHandler.trigger(this._element,EVENT_HIDDEN$5,e)}}_getConfig(e){if(e=super._getConfig(e),typeof e.reference=="object"&&!isElement$1(e.reference)&&typeof e.reference.getBoundingClientRect!="function")throw new TypeError(`${NAME$a.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_createPopper(){if(typeof Popper>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let e=this._element;this._config.reference==="parent"?e=this._parent:isElement$1(this._config.reference)?e=getElement(this._config.reference):typeof this._config.reference=="object"&&(e=this._config.reference);const n=this._getPopperConfig();this._popper=createPopper(e,this._menu,n)}_isShown(){return this._menu.classList.contains(CLASS_NAME_SHOW$6)}_getPlacement(){const e=this._parent;if(e.classList.contains(CLASS_NAME_DROPEND))return PLACEMENT_RIGHT;if(e.classList.contains(CLASS_NAME_DROPSTART))return PLACEMENT_LEFT;if(e.classList.contains(CLASS_NAME_DROPUP_CENTER))return PLACEMENT_TOPCENTER;if(e.classList.contains(CLASS_NAME_DROPDOWN_CENTER))return PLACEMENT_BOTTOMCENTER;const n=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return e.classList.contains(CLASS_NAME_DROPUP)?n?PLACEMENT_TOPEND:PLACEMENT_TOP:n?PLACEMENT_BOTTOMEND:PLACEMENT_BOTTOM}_detectNavbar(){return this._element.closest(SELECTOR_NAVBAR)!==null}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(n=>Number.parseInt(n,10)):typeof e=="function"?n=>e(n,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(Manipulator.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,...typeof this._config.popperConfig=="function"?this._config.popperConfig(e):this._config.popperConfig}}_selectMenuItem({key:e,target:n}){const r=SelectorEngine.find(SELECTOR_VISIBLE_ITEMS,this._menu).filter(o=>isVisible(o));r.length&&getNextActiveElement(r,n,e===ARROW_DOWN_KEY$1,!r.includes(n)).focus()}static jQueryInterface(e){return this.each(function(){const n=Dropdown.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e]()}})}static clearMenus(e){if(e.button===RIGHT_MOUSE_BUTTON||e.type==="keyup"&&e.key!==TAB_KEY$1)return;const n=SelectorEngine.find(SELECTOR_DATA_TOGGLE_SHOWN);for(const r of n){const o=Dropdown.getInstance(r);if(!o||o._config.autoClose===!1)continue;const s=e.composedPath(),a=s.includes(o._menu);if(s.includes(o._element)||o._config.autoClose==="inside"&&!a||o._config.autoClose==="outside"&&a||o._menu.contains(e.target)&&(e.type==="keyup"&&e.key===TAB_KEY$1||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;const l={relatedTarget:o._element};e.type==="click"&&(l.clickEvent=e),o._completeHide(l)}}static dataApiKeydownHandler(e){const n=/input|textarea/i.test(e.target.tagName),r=e.key===ESCAPE_KEY$2,o=[ARROW_UP_KEY$1,ARROW_DOWN_KEY$1].includes(e.key);if(!o&&!r||n&&!r)return;e.preventDefault();const s=this.matches(SELECTOR_DATA_TOGGLE$3)?this:SelectorEngine.prev(this,SELECTOR_DATA_TOGGLE$3)[0]||SelectorEngine.next(this,SELECTOR_DATA_TOGGLE$3)[0]||SelectorEngine.findOne(SELECTOR_DATA_TOGGLE$3,e.delegateTarget.parentNode),a=Dropdown.getOrCreateInstance(s);if(o){e.stopPropagation(),a.show(),a._selectMenuItem(e);return}a._isShown()&&(e.stopPropagation(),a.hide(),s.focus())}}EventHandler.on(document,EVENT_KEYDOWN_DATA_API,SELECTOR_DATA_TOGGLE$3,Dropdown.dataApiKeydownHandler);EventHandler.on(document,EVENT_KEYDOWN_DATA_API,SELECTOR_MENU,Dropdown.dataApiKeydownHandler);EventHandler.on(document,EVENT_CLICK_DATA_API$3,Dropdown.clearMenus);EventHandler.on(document,EVENT_KEYUP_DATA_API,Dropdown.clearMenus);EventHandler.on(document,EVENT_CLICK_DATA_API$3,SELECTOR_DATA_TOGGLE$3,function(t){t.preventDefault(),Dropdown.getOrCreateInstance(this).toggle()});defineJQueryPlugin(Dropdown);const SELECTOR_FIXED_CONTENT=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",SELECTOR_STICKY_CONTENT=".sticky-top",PROPERTY_PADDING="padding-right",PROPERTY_MARGIN="margin-right";class ScrollBarHelper{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,PROPERTY_PADDING,n=>n+e),this._setElementAttributes(SELECTOR_FIXED_CONTENT,PROPERTY_PADDING,n=>n+e),this._setElementAttributes(SELECTOR_STICKY_CONTENT,PROPERTY_MARGIN,n=>n-e)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,PROPERTY_PADDING),this._resetElementAttributes(SELECTOR_FIXED_CONTENT,PROPERTY_PADDING),this._resetElementAttributes(SELECTOR_STICKY_CONTENT,PROPERTY_MARGIN)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,n,r){const o=this.getWidth(),s=a=>{if(a!==this._element&&window.innerWidth>a.clientWidth+o)return;this._saveInitialAttribute(a,n);const l=window.getComputedStyle(a).getPropertyValue(n);a.style.setProperty(n,`${r(Number.parseFloat(l))}px`)};this._applyManipulationCallback(e,s)}_saveInitialAttribute(e,n){const r=e.style.getPropertyValue(n);r&&Manipulator.setDataAttribute(e,n,r)}_resetElementAttributes(e,n){const r=o=>{const s=Manipulator.getDataAttribute(o,n);if(s===null){o.style.removeProperty(n);return}Manipulator.removeDataAttribute(o,n),o.style.setProperty(n,s)};this._applyManipulationCallback(e,r)}_applyManipulationCallback(e,n){if(isElement$1(e)){n(e);return}for(const r of SelectorEngine.find(e,this._element))n(r)}}const NAME$9="backdrop",CLASS_NAME_FADE$4="fade",CLASS_NAME_SHOW$5="show",EVENT_MOUSEDOWN=`mousedown.bs.${NAME$9}`,Default$8={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},DefaultType$8={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Backdrop extends Config{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return Default$8}static get DefaultType(){return DefaultType$8}static get NAME(){return NAME$9}show(e){if(!this._config.isVisible){execute(e);return}this._append();const n=this._getElement();this._config.isAnimated&&reflow(n),n.classList.add(CLASS_NAME_SHOW$5),this._emulateAnimation(()=>{execute(e)})}hide(e){if(!this._config.isVisible){execute(e);return}this._getElement().classList.remove(CLASS_NAME_SHOW$5),this._emulateAnimation(()=>{this.dispose(),execute(e)})}dispose(){this._isAppended&&(EventHandler.off(this._element,EVENT_MOUSEDOWN),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add(CLASS_NAME_FADE$4),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=getElement(e.rootElement),e}_append(){if(this._isAppended)return;const e=this._getElement();this._config.rootElement.append(e),EventHandler.on(e,EVENT_MOUSEDOWN,()=>{execute(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(e){executeAfterTransition(e,this._getElement(),this._config.isAnimated)}}const NAME$8="focustrap",DATA_KEY$5="bs.focustrap",EVENT_KEY$5=`.${DATA_KEY$5}`,EVENT_FOCUSIN$2=`focusin${EVENT_KEY$5}`,EVENT_KEYDOWN_TAB=`keydown.tab${EVENT_KEY$5}`,TAB_KEY="Tab",TAB_NAV_FORWARD="forward",TAB_NAV_BACKWARD="backward",Default$7={autofocus:!0,trapElement:null},DefaultType$7={autofocus:"boolean",trapElement:"element"};class FocusTrap extends Config{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Default$7}static get DefaultType(){return DefaultType$7}static get NAME(){return NAME$8}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),EventHandler.off(document,EVENT_KEY$5),EventHandler.on(document,EVENT_FOCUSIN$2,e=>this._handleFocusin(e)),EventHandler.on(document,EVENT_KEYDOWN_TAB,e=>this._handleKeydown(e)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,EventHandler.off(document,EVENT_KEY$5))}_handleFocusin(e){const{trapElement:n}=this._config;if(e.target===document||e.target===n||n.contains(e.target))return;const r=SelectorEngine.focusableChildren(n);r.length===0?n.focus():this._lastTabNavDirection===TAB_NAV_BACKWARD?r[r.length-1].focus():r[0].focus()}_handleKeydown(e){e.key===TAB_KEY&&(this._lastTabNavDirection=e.shiftKey?TAB_NAV_BACKWARD:TAB_NAV_FORWARD)}}const NAME$7="modal",DATA_KEY$4="bs.modal",EVENT_KEY$4=`.${DATA_KEY$4}`,DATA_API_KEY$2=".data-api",ESCAPE_KEY$1="Escape",EVENT_HIDE$4=`hide${EVENT_KEY$4}`,EVENT_HIDE_PREVENTED$1=`hidePrevented${EVENT_KEY$4}`,EVENT_HIDDEN$4=`hidden${EVENT_KEY$4}`,EVENT_SHOW$4=`show${EVENT_KEY$4}`,EVENT_SHOWN$4=`shown${EVENT_KEY$4}`,EVENT_RESIZE$1=`resize${EVENT_KEY$4}`,EVENT_CLICK_DISMISS=`click.dismiss${EVENT_KEY$4}`,EVENT_MOUSEDOWN_DISMISS=`mousedown.dismiss${EVENT_KEY$4}`,EVENT_KEYDOWN_DISMISS$1=`keydown.dismiss${EVENT_KEY$4}`,EVENT_CLICK_DATA_API$2=`click${EVENT_KEY$4}${DATA_API_KEY$2}`,CLASS_NAME_OPEN="modal-open",CLASS_NAME_FADE$3="fade",CLASS_NAME_SHOW$4="show",CLASS_NAME_STATIC="modal-static",OPEN_SELECTOR$1=".modal.show",SELECTOR_DIALOG=".modal-dialog",SELECTOR_MODAL_BODY=".modal-body",SELECTOR_DATA_TOGGLE$2='[data-bs-toggle="modal"]',Default$6={backdrop:!0,focus:!0,keyboard:!0},DefaultType$6={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Modal extends BaseComponent{constructor(e,n){super(e,n),this._dialog=SelectorEngine.findOne(SELECTOR_DIALOG,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new ScrollBarHelper,this._addEventListeners()}static get Default(){return Default$6}static get DefaultType(){return DefaultType$6}static get NAME(){return NAME$7}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||EventHandler.trigger(this._element,EVENT_SHOW$4,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(CLASS_NAME_OPEN),this._adjustDialog(),this._backdrop.show(()=>this._showElement(e)))}hide(){!this._isShown||this._isTransitioning||EventHandler.trigger(this._element,EVENT_HIDE$4).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(CLASS_NAME_SHOW$4),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){for(const e of[window,this._dialog])EventHandler.off(e,EVENT_KEY$4);this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Backdrop({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new FocusTrap({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const n=SelectorEngine.findOne(SELECTOR_MODAL_BODY,this._dialog);n&&(n.scrollTop=0),reflow(this._element),this._element.classList.add(CLASS_NAME_SHOW$4);const r=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,EventHandler.trigger(this._element,EVENT_SHOWN$4,{relatedTarget:e})};this._queueCallback(r,this._dialog,this._isAnimated())}_addEventListeners(){EventHandler.on(this._element,EVENT_KEYDOWN_DISMISS$1,e=>{if(e.key===ESCAPE_KEY$1){if(this._config.keyboard){e.preventDefault(),this.hide();return}this._triggerBackdropTransition()}}),EventHandler.on(window,EVENT_RESIZE$1,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),EventHandler.on(this._element,EVENT_MOUSEDOWN_DISMISS,e=>{EventHandler.one(this._element,EVENT_CLICK_DISMISS,n=>{if(!(this._element!==e.target||this._element!==n.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(CLASS_NAME_OPEN),this._resetAdjustments(),this._scrollBar.reset(),EventHandler.trigger(this._element,EVENT_HIDDEN$4)})}_isAnimated(){return this._element.classList.contains(CLASS_NAME_FADE$3)}_triggerBackdropTransition(){if(EventHandler.trigger(this._element,EVENT_HIDE_PREVENTED$1).defaultPrevented)return;const n=this._element.scrollHeight>document.documentElement.clientHeight,r=this._element.style.overflowY;r==="hidden"||this._element.classList.contains(CLASS_NAME_STATIC)||(n||(this._element.style.overflowY="hidden"),this._element.classList.add(CLASS_NAME_STATIC),this._queueCallback(()=>{this._element.classList.remove(CLASS_NAME_STATIC),this._queueCallback(()=>{this._element.style.overflowY=r},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,n=this._scrollBar.getWidth(),r=n>0;if(r&&!e){const o=isRTL()?"paddingLeft":"paddingRight";this._element.style[o]=`${n}px`}if(!r&&e){const o=isRTL()?"paddingRight":"paddingLeft";this._element.style[o]=`${n}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,n){return this.each(function(){const r=Modal.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof r[e]>"u")throw new TypeError(`No method named "${e}"`);r[e](n)}})}}EventHandler.on(document,EVENT_CLICK_DATA_API$2,SELECTOR_DATA_TOGGLE$2,function(t){const e=getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&t.preventDefault(),EventHandler.one(e,EVENT_SHOW$4,o=>{o.defaultPrevented||EventHandler.one(e,EVENT_HIDDEN$4,()=>{isVisible(this)&&this.focus()})});const n=SelectorEngine.findOne(OPEN_SELECTOR$1);n&&Modal.getInstance(n).hide(),Modal.getOrCreateInstance(e).toggle(this)});enableDismissTrigger(Modal);defineJQueryPlugin(Modal);const NAME$6="offcanvas",DATA_KEY$3="bs.offcanvas",EVENT_KEY$3=`.${DATA_KEY$3}`,DATA_API_KEY$1=".data-api",EVENT_LOAD_DATA_API$2=`load${EVENT_KEY$3}${DATA_API_KEY$1}`,ESCAPE_KEY="Escape",CLASS_NAME_SHOW$3="show",CLASS_NAME_SHOWING$1="showing",CLASS_NAME_HIDING="hiding",CLASS_NAME_BACKDROP="offcanvas-backdrop",OPEN_SELECTOR=".offcanvas.show",EVENT_SHOW$3=`show${EVENT_KEY$3}`,EVENT_SHOWN$3=`shown${EVENT_KEY$3}`,EVENT_HIDE$3=`hide${EVENT_KEY$3}`,EVENT_HIDE_PREVENTED=`hidePrevented${EVENT_KEY$3}`,EVENT_HIDDEN$3=`hidden${EVENT_KEY$3}`,EVENT_RESIZE=`resize${EVENT_KEY$3}`,EVENT_CLICK_DATA_API$1=`click${EVENT_KEY$3}${DATA_API_KEY$1}`,EVENT_KEYDOWN_DISMISS=`keydown.dismiss${EVENT_KEY$3}`,SELECTOR_DATA_TOGGLE$1='[data-bs-toggle="offcanvas"]',Default$5={backdrop:!0,keyboard:!0,scroll:!1},DefaultType$5={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Offcanvas extends BaseComponent{constructor(e,n){super(e,n),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Default$5}static get DefaultType(){return DefaultType$5}static get NAME(){return NAME$6}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown||EventHandler.trigger(this._element,EVENT_SHOW$3,{relatedTarget:e}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new ScrollBarHelper().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(CLASS_NAME_SHOWING$1);const r=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(CLASS_NAME_SHOW$3),this._element.classList.remove(CLASS_NAME_SHOWING$1),EventHandler.trigger(this._element,EVENT_SHOWN$3,{relatedTarget:e})};this._queueCallback(r,this._element,!0)}hide(){if(!this._isShown||EventHandler.trigger(this._element,EVENT_HIDE$3).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(CLASS_NAME_HIDING),this._backdrop.hide();const n=()=>{this._element.classList.remove(CLASS_NAME_SHOW$3,CLASS_NAME_HIDING),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new ScrollBarHelper().reset(),EventHandler.trigger(this._element,EVENT_HIDDEN$3)};this._queueCallback(n,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const e=()=>{if(this._config.backdrop==="static"){EventHandler.trigger(this._element,EVENT_HIDE_PREVENTED);return}this.hide()},n=Boolean(this._config.backdrop);return new Backdrop({className:CLASS_NAME_BACKDROP,isVisible:n,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:n?e:null})}_initializeFocusTrap(){return new FocusTrap({trapElement:this._element})}_addEventListeners(){EventHandler.on(this._element,EVENT_KEYDOWN_DISMISS,e=>{if(e.key===ESCAPE_KEY){if(!this._config.keyboard){EventHandler.trigger(this._element,EVENT_HIDE_PREVENTED);return}this.hide()}})}static jQueryInterface(e){return this.each(function(){const n=Offcanvas.getOrCreateInstance(this,e);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e](this)}})}}EventHandler.on(document,EVENT_CLICK_DATA_API$1,SELECTOR_DATA_TOGGLE$1,function(t){const e=getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&t.preventDefault(),isDisabled(this))return;EventHandler.one(e,EVENT_HIDDEN$3,()=>{isVisible(this)&&this.focus()});const n=SelectorEngine.findOne(OPEN_SELECTOR);n&&n!==e&&Offcanvas.getInstance(n).hide(),Offcanvas.getOrCreateInstance(e).toggle(this)});EventHandler.on(window,EVENT_LOAD_DATA_API$2,()=>{for(const t of SelectorEngine.find(OPEN_SELECTOR))Offcanvas.getOrCreateInstance(t).show()});EventHandler.on(window,EVENT_RESIZE,()=>{for(const t of SelectorEngine.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(t).position!=="fixed"&&Offcanvas.getOrCreateInstance(t).hide()});enableDismissTrigger(Offcanvas);defineJQueryPlugin(Offcanvas);const uriAttributes=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),ARIA_ATTRIBUTE_PATTERN=/^aria-[\w-]*$/i,SAFE_URL_PATTERN=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,DATA_URL_PATTERN=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,allowedAttribute=(t,e)=>{const n=t.nodeName.toLowerCase();return e.includes(n)?uriAttributes.has(n)?Boolean(SAFE_URL_PATTERN.test(t.nodeValue)||DATA_URL_PATTERN.test(t.nodeValue)):!0:e.filter(r=>r instanceof RegExp).some(r=>r.test(n))},DefaultAllowlist={"*":["class","dir","id","lang","role",ARIA_ATTRIBUTE_PATTERN],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]};function sanitizeHtml(t,e,n){if(!t.length)return t;if(n&&typeof n=="function")return n(t);const o=new window.DOMParser().parseFromString(t,"text/html"),s=[].concat(...o.body.querySelectorAll("*"));for(const a of s){const l=a.nodeName.toLowerCase();if(!Object.keys(e).includes(l)){a.remove();continue}const c=[].concat(...a.attributes),u=[].concat(e["*"]||[],e[l]||[]);for(const g of c)allowedAttribute(g,u)||a.removeAttribute(g.nodeName)}return o.body.innerHTML}const NAME$5="TemplateFactory",Default$4={allowList:DefaultAllowlist,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},DefaultType$4={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},DefaultContentType={entry:"(string|element|function|null)",selector:"(string|element)"};class TemplateFactory extends Config{constructor(e){super(),this._config=this._getConfig(e)}static get Default(){return Default$4}static get DefaultType(){return DefaultType$4}static get NAME(){return NAME$5}getContent(){return Object.values(this._config.content).map(e=>this._resolvePossibleFunction(e)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){return this._checkContent(e),this._config.content={...this._config.content,...e},this}toHtml(){const e=document.createElement("div");e.innerHTML=this._maybeSanitize(this._config.template);for(const[o,s]of Object.entries(this._config.content))this._setContent(e,s,o);const n=e.children[0],r=this._resolvePossibleFunction(this._config.extraClass);return r&&n.classList.add(...r.split(" ")),n}_typeCheckConfig(e){super._typeCheckConfig(e),this._checkContent(e.content)}_checkContent(e){for(const[n,r]of Object.entries(e))super._typeCheckConfig({selector:n,entry:r},DefaultContentType)}_setContent(e,n,r){const o=SelectorEngine.findOne(r,e);if(o){if(n=this._resolvePossibleFunction(n),!n){o.remove();return}if(isElement$1(n)){this._putElementInTemplate(getElement(n),o);return}if(this._config.html){o.innerHTML=this._maybeSanitize(n);return}o.textContent=n}}_maybeSanitize(e){return this._config.sanitize?sanitizeHtml(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return typeof e=="function"?e(this):e}_putElementInTemplate(e,n){if(this._config.html){n.innerHTML="",n.append(e);return}n.textContent=e.textContent}}const NAME$4="tooltip",DISALLOWED_ATTRIBUTES=new Set(["sanitize","allowList","sanitizeFn"]),CLASS_NAME_FADE$2="fade",CLASS_NAME_MODAL="modal",CLASS_NAME_SHOW$2="show",SELECTOR_TOOLTIP_INNER=".tooltip-inner",SELECTOR_MODAL=`.${CLASS_NAME_MODAL}`,EVENT_MODAL_HIDE="hide.bs.modal",TRIGGER_HOVER="hover",TRIGGER_FOCUS="focus",TRIGGER_CLICK="click",TRIGGER_MANUAL="manual",EVENT_HIDE$2="hide",EVENT_HIDDEN$2="hidden",EVENT_SHOW$2="show",EVENT_SHOWN$2="shown",EVENT_INSERTED="inserted",EVENT_CLICK$1="click",EVENT_FOCUSIN$1="focusin",EVENT_FOCUSOUT$1="focusout",EVENT_MOUSEENTER="mouseenter",EVENT_MOUSELEAVE="mouseleave",AttachmentMap={AUTO:"auto",TOP:"top",RIGHT:isRTL()?"left":"right",BOTTOM:"bottom",LEFT:isRTL()?"right":"left"},Default$3={allowList:DefaultAllowlist,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,0],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},DefaultType$3={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Tooltip extends BaseComponent{constructor(e,n){if(typeof Popper>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(e,n),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Default$3}static get DefaultType(){return DefaultType$3}static get NAME(){return NAME$4}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),EventHandler.off(this._element.closest(SELECTOR_MODAL),EVENT_MODAL_HIDE,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const e=EventHandler.trigger(this._element,this.constructor.eventName(EVENT_SHOW$2)),r=(findShadowRoot(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(e.defaultPrevented||!r)return;this._disposePopper();const o=this._getTipElement();this._element.setAttribute("aria-describedby",o.getAttribute("id"));const{container:s}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(s.append(o),EventHandler.trigger(this._element,this.constructor.eventName(EVENT_INSERTED))),this._popper=this._createPopper(o),o.classList.add(CLASS_NAME_SHOW$2),"ontouchstart"in document.documentElement)for(const l of[].concat(...document.body.children))EventHandler.on(l,"mouseover",noop$2);const a=()=>{EventHandler.trigger(this._element,this.constructor.eventName(EVENT_SHOWN$2)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(a,this.tip,this._isAnimated())}hide(){if(!this._isShown()||EventHandler.trigger(this._element,this.constructor.eventName(EVENT_HIDE$2)).defaultPrevented)return;if(this._getTipElement().classList.remove(CLASS_NAME_SHOW$2),"ontouchstart"in document.documentElement)for(const o of[].concat(...document.body.children))EventHandler.off(o,"mouseover",noop$2);this._activeTrigger[TRIGGER_CLICK]=!1,this._activeTrigger[TRIGGER_FOCUS]=!1,this._activeTrigger[TRIGGER_HOVER]=!1,this._isHovered=null;const r=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),EventHandler.trigger(this._element,this.constructor.eventName(EVENT_HIDDEN$2)))};this._queueCallback(r,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(e){const n=this._getTemplateFactory(e).toHtml();if(!n)return null;n.classList.remove(CLASS_NAME_FADE$2,CLASS_NAME_SHOW$2),n.classList.add(`bs-${this.constructor.NAME}-auto`);const r=getUID(this.constructor.NAME).toString();return n.setAttribute("id",r),this._isAnimated()&&n.classList.add(CLASS_NAME_FADE$2),n}setContent(e){this._newContent=e,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(e){return this._templateFactory?this._templateFactory.changeContent(e):this._templateFactory=new TemplateFactory({...this._config,content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[SELECTOR_TOOLTIP_INNER]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(CLASS_NAME_FADE$2)}_isShown(){return this.tip&&this.tip.classList.contains(CLASS_NAME_SHOW$2)}_createPopper(e){const n=typeof this._config.placement=="function"?this._config.placement.call(this,e,this._element):this._config.placement,r=AttachmentMap[n.toUpperCase()];return createPopper(this._element,e,this._getPopperConfig(r))}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(n=>Number.parseInt(n,10)):typeof e=="function"?n=>e(n,this._element):e}_resolvePossibleFunction(e){return typeof e=="function"?e.call(this._element):e}_getPopperConfig(e){const n={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:r=>{this._getTipElement().setAttribute("data-popper-placement",r.state.placement)}}]};return{...n,...typeof this._config.popperConfig=="function"?this._config.popperConfig(n):this._config.popperConfig}}_setListeners(){const e=this._config.trigger.split(" ");for(const n of e)if(n==="click")EventHandler.on(this._element,this.constructor.eventName(EVENT_CLICK$1),this._config.selector,r=>{this._initializeOnDelegatedTarget(r).toggle()});else if(n!==TRIGGER_MANUAL){const r=n===TRIGGER_HOVER?this.constructor.eventName(EVENT_MOUSEENTER):this.constructor.eventName(EVENT_FOCUSIN$1),o=n===TRIGGER_HOVER?this.constructor.eventName(EVENT_MOUSELEAVE):this.constructor.eventName(EVENT_FOCUSOUT$1);EventHandler.on(this._element,r,this._config.selector,s=>{const a=this._initializeOnDelegatedTarget(s);a._activeTrigger[s.type==="focusin"?TRIGGER_FOCUS:TRIGGER_HOVER]=!0,a._enter()}),EventHandler.on(this._element,o,this._config.selector,s=>{const a=this._initializeOnDelegatedTarget(s);a._activeTrigger[s.type==="focusout"?TRIGGER_FOCUS:TRIGGER_HOVER]=a._element.contains(s.relatedTarget),a._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},EventHandler.on(this._element.closest(SELECTOR_MODAL),EVENT_MODAL_HIDE,this._hideModalHandler)}_fixTitle(){const e=this._element.getAttribute("title");e&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",e),this._element.setAttribute("data-bs-original-title",e),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(e,n){clearTimeout(this._timeout),this._timeout=setTimeout(e,n)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(e){const n=Manipulator.getDataAttributes(this._element);for(const r of Object.keys(n))DISALLOWED_ATTRIBUTES.has(r)&&delete n[r];return e={...n,...typeof e=="object"&&e?e:{}},e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e.container=e.container===!1?document.body:getElement(e.container),typeof e.delay=="number"&&(e.delay={show:e.delay,hide:e.delay}),typeof e.title=="number"&&(e.title=e.title.toString()),typeof e.content=="number"&&(e.content=e.content.toString()),e}_getDelegateConfig(){const e={};for(const n in this._config)this.constructor.Default[n]!==this._config[n]&&(e[n]=this._config[n]);return e.selector=!1,e.trigger="manual",e}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(e){return this.each(function(){const n=Tooltip.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e]()}})}}defineJQueryPlugin(Tooltip);const NAME$3="popover",SELECTOR_TITLE=".popover-header",SELECTOR_CONTENT=".popover-body",Default$2={...Tooltip.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},DefaultType$2={...Tooltip.DefaultType,content:"(null|string|element|function)"};class Popover extends Tooltip{static get Default(){return Default$2}static get DefaultType(){return DefaultType$2}static get NAME(){return NAME$3}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[SELECTOR_TITLE]:this._getTitle(),[SELECTOR_CONTENT]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each(function(){const n=Popover.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e]()}})}}defineJQueryPlugin(Popover);const NAME$2="scrollspy",DATA_KEY$2="bs.scrollspy",EVENT_KEY$2=`.${DATA_KEY$2}`,DATA_API_KEY=".data-api",EVENT_ACTIVATE=`activate${EVENT_KEY$2}`,EVENT_CLICK=`click${EVENT_KEY$2}`,EVENT_LOAD_DATA_API$1=`load${EVENT_KEY$2}${DATA_API_KEY}`,CLASS_NAME_DROPDOWN_ITEM="dropdown-item",CLASS_NAME_ACTIVE$1="active",SELECTOR_DATA_SPY='[data-bs-spy="scroll"]',SELECTOR_TARGET_LINKS="[href]",SELECTOR_NAV_LIST_GROUP=".nav, .list-group",SELECTOR_NAV_LINKS=".nav-link",SELECTOR_NAV_ITEMS=".nav-item",SELECTOR_LIST_ITEMS=".list-group-item",SELECTOR_LINK_ITEMS=`${SELECTOR_NAV_LINKS}, ${SELECTOR_NAV_ITEMS} > ${SELECTOR_NAV_LINKS}, ${SELECTOR_LIST_ITEMS}`,SELECTOR_DROPDOWN=".dropdown",SELECTOR_DROPDOWN_TOGGLE$1=".dropdown-toggle",Default$1={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},DefaultType$1={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class ScrollSpy extends BaseComponent{constructor(e,n){super(e,n),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return Default$1}static get DefaultType(){return DefaultType$1}static get NAME(){return NAME$2}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const e of this._observableSections.values())this._observer.observe(e)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(e){return e.target=getElement(e.target)||document.body,e.rootMargin=e.offset?`${e.offset}px 0px -30%`:e.rootMargin,typeof e.threshold=="string"&&(e.threshold=e.threshold.split(",").map(n=>Number.parseFloat(n))),e}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(EventHandler.off(this._config.target,EVENT_CLICK),EventHandler.on(this._config.target,EVENT_CLICK,SELECTOR_TARGET_LINKS,e=>{const n=this._observableSections.get(e.target.hash);if(n){e.preventDefault();const r=this._rootElement||window,o=n.offsetTop-this._element.offsetTop;if(r.scrollTo){r.scrollTo({top:o,behavior:"smooth"});return}r.scrollTop=o}}))}_getNewObserver(){const e={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(n=>this._observerCallback(n),e)}_observerCallback(e){const n=a=>this._targetLinks.get(`#${a.target.id}`),r=a=>{this._previousScrollData.visibleEntryTop=a.target.offsetTop,this._process(n(a))},o=(this._rootElement||document.documentElement).scrollTop,s=o>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=o;for(const a of e){if(!a.isIntersecting){this._activeTarget=null,this._clearActiveClass(n(a));continue}const l=a.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(s&&l){if(r(a),!o)return;continue}!s&&!l&&r(a)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const e=SelectorEngine.find(SELECTOR_TARGET_LINKS,this._config.target);for(const n of e){if(!n.hash||isDisabled(n))continue;const r=SelectorEngine.findOne(n.hash,this._element);isVisible(r)&&(this._targetLinks.set(n.hash,n),this._observableSections.set(n.hash,r))}}_process(e){this._activeTarget!==e&&(this._clearActiveClass(this._config.target),this._activeTarget=e,e.classList.add(CLASS_NAME_ACTIVE$1),this._activateParents(e),EventHandler.trigger(this._element,EVENT_ACTIVATE,{relatedTarget:e}))}_activateParents(e){if(e.classList.contains(CLASS_NAME_DROPDOWN_ITEM)){SelectorEngine.findOne(SELECTOR_DROPDOWN_TOGGLE$1,e.closest(SELECTOR_DROPDOWN)).classList.add(CLASS_NAME_ACTIVE$1);return}for(const n of SelectorEngine.parents(e,SELECTOR_NAV_LIST_GROUP))for(const r of SelectorEngine.prev(n,SELECTOR_LINK_ITEMS))r.classList.add(CLASS_NAME_ACTIVE$1)}_clearActiveClass(e){e.classList.remove(CLASS_NAME_ACTIVE$1);const n=SelectorEngine.find(`${SELECTOR_TARGET_LINKS}.${CLASS_NAME_ACTIVE$1}`,e);for(const r of n)r.classList.remove(CLASS_NAME_ACTIVE$1)}static jQueryInterface(e){return this.each(function(){const n=ScrollSpy.getOrCreateInstance(this,e);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e]()}})}}EventHandler.on(window,EVENT_LOAD_DATA_API$1,()=>{for(const t of SelectorEngine.find(SELECTOR_DATA_SPY))ScrollSpy.getOrCreateInstance(t)});defineJQueryPlugin(ScrollSpy);const NAME$1="tab",DATA_KEY$1="bs.tab",EVENT_KEY$1=`.${DATA_KEY$1}`,EVENT_HIDE$1=`hide${EVENT_KEY$1}`,EVENT_HIDDEN$1=`hidden${EVENT_KEY$1}`,EVENT_SHOW$1=`show${EVENT_KEY$1}`,EVENT_SHOWN$1=`shown${EVENT_KEY$1}`,EVENT_CLICK_DATA_API=`click${EVENT_KEY$1}`,EVENT_KEYDOWN=`keydown${EVENT_KEY$1}`,EVENT_LOAD_DATA_API=`load${EVENT_KEY$1}`,ARROW_LEFT_KEY="ArrowLeft",ARROW_RIGHT_KEY="ArrowRight",ARROW_UP_KEY="ArrowUp",ARROW_DOWN_KEY="ArrowDown",CLASS_NAME_ACTIVE="active",CLASS_NAME_FADE$1="fade",CLASS_NAME_SHOW$1="show",CLASS_DROPDOWN="dropdown",SELECTOR_DROPDOWN_TOGGLE=".dropdown-toggle",SELECTOR_DROPDOWN_MENU=".dropdown-menu",NOT_SELECTOR_DROPDOWN_TOGGLE=":not(.dropdown-toggle)",SELECTOR_TAB_PANEL='.list-group, .nav, [role="tablist"]',SELECTOR_OUTER=".nav-item, .list-group-item",SELECTOR_INNER=`.nav-link${NOT_SELECTOR_DROPDOWN_TOGGLE}, .list-group-item${NOT_SELECTOR_DROPDOWN_TOGGLE}, [role="tab"]${NOT_SELECTOR_DROPDOWN_TOGGLE}`,SELECTOR_DATA_TOGGLE='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',SELECTOR_INNER_ELEM=`${SELECTOR_INNER}, ${SELECTOR_DATA_TOGGLE}`,SELECTOR_DATA_TOGGLE_ACTIVE=`.${CLASS_NAME_ACTIVE}[data-bs-toggle="tab"], .${CLASS_NAME_ACTIVE}[data-bs-toggle="pill"], .${CLASS_NAME_ACTIVE}[data-bs-toggle="list"]`;class Tab extends BaseComponent{constructor(e){super(e),this._parent=this._element.closest(SELECTOR_TAB_PANEL),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),EventHandler.on(this._element,EVENT_KEYDOWN,n=>this._keydown(n)))}static get NAME(){return NAME$1}show(){const e=this._element;if(this._elemIsActive(e))return;const n=this._getActiveElem(),r=n?EventHandler.trigger(n,EVENT_HIDE$1,{relatedTarget:e}):null;EventHandler.trigger(e,EVENT_SHOW$1,{relatedTarget:n}).defaultPrevented||r&&r.defaultPrevented||(this._deactivate(n,e),this._activate(e,n))}_activate(e,n){if(!e)return;e.classList.add(CLASS_NAME_ACTIVE),this._activate(getElementFromSelector(e));const r=()=>{if(e.getAttribute("role")!=="tab"){e.classList.add(CLASS_NAME_SHOW$1);return}e.removeAttribute("tabindex"),e.setAttribute("aria-selected",!0),this._toggleDropDown(e,!0),EventHandler.trigger(e,EVENT_SHOWN$1,{relatedTarget:n})};this._queueCallback(r,e,e.classList.contains(CLASS_NAME_FADE$1))}_deactivate(e,n){if(!e)return;e.classList.remove(CLASS_NAME_ACTIVE),e.blur(),this._deactivate(getElementFromSelector(e));const r=()=>{if(e.getAttribute("role")!=="tab"){e.classList.remove(CLASS_NAME_SHOW$1);return}e.setAttribute("aria-selected",!1),e.setAttribute("tabindex","-1"),this._toggleDropDown(e,!1),EventHandler.trigger(e,EVENT_HIDDEN$1,{relatedTarget:n})};this._queueCallback(r,e,e.classList.contains(CLASS_NAME_FADE$1))}_keydown(e){if(![ARROW_LEFT_KEY,ARROW_RIGHT_KEY,ARROW_UP_KEY,ARROW_DOWN_KEY].includes(e.key))return;e.stopPropagation(),e.preventDefault();const n=[ARROW_RIGHT_KEY,ARROW_DOWN_KEY].includes(e.key),r=getNextActiveElement(this._getChildren().filter(o=>!isDisabled(o)),e.target,n,!0);r&&(r.focus({preventScroll:!0}),Tab.getOrCreateInstance(r).show())}_getChildren(){return SelectorEngine.find(SELECTOR_INNER_ELEM,this._parent)}_getActiveElem(){return this._getChildren().find(e=>this._elemIsActive(e))||null}_setInitialAttributes(e,n){this._setAttributeIfNotExists(e,"role","tablist");for(const r of n)this._setInitialAttributesOnChild(r)}_setInitialAttributesOnChild(e){e=this._getInnerElement(e);const n=this._elemIsActive(e),r=this._getOuterElement(e);e.setAttribute("aria-selected",n),r!==e&&this._setAttributeIfNotExists(r,"role","presentation"),n||e.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(e,"role","tab"),this._setInitialAttributesOnTargetPanel(e)}_setInitialAttributesOnTargetPanel(e){const n=getElementFromSelector(e);n&&(this._setAttributeIfNotExists(n,"role","tabpanel"),e.id&&this._setAttributeIfNotExists(n,"aria-labelledby",`#${e.id}`))}_toggleDropDown(e,n){const r=this._getOuterElement(e);if(!r.classList.contains(CLASS_DROPDOWN))return;const o=(s,a)=>{const l=SelectorEngine.findOne(s,r);l&&l.classList.toggle(a,n)};o(SELECTOR_DROPDOWN_TOGGLE,CLASS_NAME_ACTIVE),o(SELECTOR_DROPDOWN_MENU,CLASS_NAME_SHOW$1),r.setAttribute("aria-expanded",n)}_setAttributeIfNotExists(e,n,r){e.hasAttribute(n)||e.setAttribute(n,r)}_elemIsActive(e){return e.classList.contains(CLASS_NAME_ACTIVE)}_getInnerElement(e){return e.matches(SELECTOR_INNER_ELEM)?e:SelectorEngine.findOne(SELECTOR_INNER_ELEM,e)}_getOuterElement(e){return e.closest(SELECTOR_OUTER)||e}static jQueryInterface(e){return this.each(function(){const n=Tab.getOrCreateInstance(this);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e]()}})}}EventHandler.on(document,EVENT_CLICK_DATA_API,SELECTOR_DATA_TOGGLE,function(t){["A","AREA"].includes(this.tagName)&&t.preventDefault(),!isDisabled(this)&&Tab.getOrCreateInstance(this).show()});EventHandler.on(window,EVENT_LOAD_DATA_API,()=>{for(const t of SelectorEngine.find(SELECTOR_DATA_TOGGLE_ACTIVE))Tab.getOrCreateInstance(t)});defineJQueryPlugin(Tab);const NAME="toast",DATA_KEY="bs.toast",EVENT_KEY=`.${DATA_KEY}`,EVENT_MOUSEOVER=`mouseover${EVENT_KEY}`,EVENT_MOUSEOUT=`mouseout${EVENT_KEY}`,EVENT_FOCUSIN=`focusin${EVENT_KEY}`,EVENT_FOCUSOUT=`focusout${EVENT_KEY}`,EVENT_HIDE=`hide${EVENT_KEY}`,EVENT_HIDDEN=`hidden${EVENT_KEY}`,EVENT_SHOW=`show${EVENT_KEY}`,EVENT_SHOWN=`shown${EVENT_KEY}`,CLASS_NAME_FADE="fade",CLASS_NAME_HIDE="hide",CLASS_NAME_SHOW="show",CLASS_NAME_SHOWING="showing",DefaultType={animation:"boolean",autohide:"boolean",delay:"number"},Default={animation:!0,autohide:!0,delay:5e3};class Toast extends BaseComponent{constructor(e,n){super(e,n),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Default}static get DefaultType(){return DefaultType}static get NAME(){return NAME}show(){if(EventHandler.trigger(this._element,EVENT_SHOW).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(CLASS_NAME_FADE);const n=()=>{this._element.classList.remove(CLASS_NAME_SHOWING),EventHandler.trigger(this._element,EVENT_SHOWN),this._maybeScheduleHide()};this._element.classList.remove(CLASS_NAME_HIDE),reflow(this._element),this._element.classList.add(CLASS_NAME_SHOW,CLASS_NAME_SHOWING),this._queueCallback(n,this._element,this._config.animation)}hide(){if(!this.isShown()||EventHandler.trigger(this._element,EVENT_HIDE).defaultPrevented)return;const n=()=>{this._element.classList.add(CLASS_NAME_HIDE),this._element.classList.remove(CLASS_NAME_SHOWING,CLASS_NAME_SHOW),EventHandler.trigger(this._element,EVENT_HIDDEN)};this._element.classList.add(CLASS_NAME_SHOWING),this._queueCallback(n,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(CLASS_NAME_SHOW),super.dispose()}isShown(){return this._element.classList.contains(CLASS_NAME_SHOW)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(e,n){switch(e.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=n;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=n;break}}if(n){this._clearTimeout();return}const r=e.relatedTarget;this._element===r||this._element.contains(r)||this._maybeScheduleHide()}_setListeners(){EventHandler.on(this._element,EVENT_MOUSEOVER,e=>this._onInteraction(e,!0)),EventHandler.on(this._element,EVENT_MOUSEOUT,e=>this._onInteraction(e,!1)),EventHandler.on(this._element,EVENT_FOCUSIN,e=>this._onInteraction(e,!0)),EventHandler.on(this._element,EVENT_FOCUSOUT,e=>this._onInteraction(e,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each(function(){const n=Toast.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e](this)}})}}enableDismissTrigger(Toast);defineJQueryPlugin(Toast);const bootstrap=Object.freeze(Object.defineProperty({__proto__:null,Alert,Button,Carousel,Collapse,Dropdown,Modal,Offcanvas,Popover,ScrollSpy,Tab,Toast,Tooltip},Symbol.toStringTag,{value:"Module"}));function bind$1(t,e){return function(){return t.apply(e,arguments)}}const{toString}=Object.prototype,{getPrototypeOf}=Object,kindOf=(t=>e=>{const n=toString.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=t=>(t=t.toLowerCase(),e=>kindOf(e)===t),typeOfTest=t=>e=>typeof e===t,{isArray:isArray$1}=Array,isUndefined=typeOfTest("undefined");function isBuffer(t){return t!==null&&!isUndefined(t)&&t.constructor!==null&&!isUndefined(t.constructor)&&isFunction$2(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&isArrayBuffer(t.buffer),e}const isString$1=typeOfTest("string"),isFunction$2=typeOfTest("function"),isNumber$1=typeOfTest("number"),isObject$1=t=>t!==null&&typeof t=="object",isBoolean=t=>t===!0||t===!1,isPlainObject$3=t=>{if(kindOf(t)!=="object")return!1;const e=getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},isDate$2=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=t=>isObject$1(t)&&isFunction$2(t.pipe),isFormData=t=>{const e="[object FormData]";return t&&(typeof FormData=="function"&&t instanceof FormData||toString.call(t)===e||isFunction$2(t.toString)&&t.toString()===e)},isURLSearchParams=kindOfTest("URLSearchParams"),trim=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach$1(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,o;if(typeof t!="object"&&(t=[t]),isArray$1(t))for(r=0,o=t.length;r<o;r++)e.call(null,t[r],r,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),a=s.length;let l;for(r=0;r<a;r++)l=s[r],e.call(null,t[l],l,t)}}function findKey(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,o;for(;r-- >0;)if(o=n[r],e===o.toLowerCase())return o;return null}const _global=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),isContextDefined=t=>!isUndefined(t)&&t!==_global;function merge(){const{caseless:t}=isContextDefined(this)&&this||{},e={},n=(r,o)=>{const s=t&&findKey(e,o)||o;isPlainObject$3(e[s])&&isPlainObject$3(r)?e[s]=merge(e[s],r):isPlainObject$3(r)?e[s]=merge({},r):isArray$1(r)?e[s]=r.slice():e[s]=r};for(let r=0,o=arguments.length;r<o;r++)arguments[r]&&forEach$1(arguments[r],n);return e}const extend$1=(t,e,n,{allOwnKeys:r}={})=>(forEach$1(e,(o,s)=>{n&&isFunction$2(o)?t[s]=bind$1(o,n):t[s]=o},{allOwnKeys:r}),t),stripBOM=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),inherits=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},toFlatObject=(t,e,n,r)=>{let o,s,a;const l={};if(e=e||{},t==null)return e;do{for(o=Object.getOwnPropertyNames(t),s=o.length;s-- >0;)a=o[s],(!r||r(a,t,e))&&!l[a]&&(e[a]=t[a],l[a]=!0);t=n!==!1&&getPrototypeOf(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},endsWith=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},toArray=t=>{if(!t)return null;if(isArray$1(t))return t;let e=t.length;if(!isNumber$1(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},isTypedArray=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let o;for(;(o=r.next())&&!o.done;){const s=o.value;e.call(t,s[0],s[1])}},matchAll=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,o){return r.toUpperCase()+o}),hasOwnProperty$2=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),isRegExp$2=kindOfTest("RegExp"),reduceDescriptors=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};forEach$1(n,(o,s)=>{e(o,s,t)!==!1&&(r[s]=o)}),Object.defineProperties(t,r)},freezeMethods=t=>{reduceDescriptors(t,(e,n)=>{if(isFunction$2(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(isFunction$2(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},toObjectSet=(t,e)=>{const n={},r=o=>{o.forEach(s=>{n[s]=!0})};return isArray$1(t)?r(t):r(String(t).split(e)),n},noop$1=()=>{},toFiniteNumber=(t,e)=>(t=+t,Number.isFinite(t)?t:e),ALPHA="abcdefghijklmnopqrstuvwxyz",DIGIT$1="0123456789",ALPHABET={DIGIT:DIGIT$1,ALPHA,ALPHA_DIGIT:ALPHA+ALPHA.toUpperCase()+DIGIT$1},generateString=(t=16,e=ALPHABET.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function isSpecCompliantForm(t){return!!(t&&isFunction$2(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const toJSONObject=t=>{const e=new Array(10),n=(r,o)=>{if(isObject$1(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[o]=r;const s=isArray$1(r)?[]:{};return forEach$1(r,(a,l)=>{const c=n(a,o+1);!isUndefined(c)&&(s[l]=c)}),e[o]=void 0,s}}return r};return n(t,0)},utils={isArray:isArray$1,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString:isString$1,isNumber:isNumber$1,isBoolean,isObject:isObject$1,isPlainObject:isPlainObject$3,isUndefined,isDate:isDate$2,isFile,isBlob,isRegExp:isRegExp$2,isFunction:isFunction$2,isStream,isURLSearchParams,isTypedArray,isFileList,forEach:forEach$1,merge,extend:extend$1,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,forEachEntry,matchAll,isHTMLForm,hasOwnProperty:hasOwnProperty$2,hasOwnProp:hasOwnProperty$2,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop:noop$1,toFiniteNumber,findKey,global:_global,isContextDefined,ALPHABET,generateString,isSpecCompliantForm,toJSONObject};function AxiosError(t,e,n,r,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),o&&(this.response=o)}utils.inherits(AxiosError,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const prototype$1=AxiosError.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{descriptors[t]={value:t}});Object.defineProperties(AxiosError,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError.from=(t,e,n,r,o,s)=>{const a=Object.create(prototype$1);return utils.toFlatObject(t,a,function(c){return c!==Error.prototype},l=>l!=="isAxiosError"),AxiosError.call(a,t.message,e,n,r,o),a.cause=t,a.name=t.name,s&&Object.assign(a,s),a};const httpAdapter=null;function isVisitable(t){return utils.isPlainObject(t)||utils.isArray(t)}function removeBrackets(t){return utils.endsWith(t,"[]")?t.slice(0,-2):t}function renderKey(t,e,n){return t?t.concat(e).map(function(o,s){return o=removeBrackets(o),!n&&s?"["+o+"]":o}).join(n?".":""):e}function isFlatArray(t){return utils.isArray(t)&&!t.some(isVisitable)}const predicates=utils.toFlatObject(utils,{},null,function(e){return/^is[A-Z]/.test(e)});function toFormData(t,e,n){if(!utils.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=utils.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(T,w){return!utils.isUndefined(w[T])});const r=n.metaTokens,o=n.visitor||g,s=n.dots,a=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&utils.isSpecCompliantForm(e);if(!utils.isFunction(o))throw new TypeError("visitor must be a function");function u(S){if(S===null)return"";if(utils.isDate(S))return S.toISOString();if(!c&&utils.isBlob(S))throw new AxiosError("Blob is not supported. Use a Buffer instead.");return utils.isArrayBuffer(S)||utils.isTypedArray(S)?c&&typeof Blob=="function"?new Blob([S]):Buffer.from(S):S}function g(S,T,w){let N=S;if(S&&!w&&typeof S=="object"){if(utils.endsWith(T,"{}"))T=r?T:T.slice(0,-2),S=JSON.stringify(S);else if(utils.isArray(S)&&isFlatArray(S)||(utils.isFileList(S)||utils.endsWith(T,"[]"))&&(N=utils.toArray(S)))return T=removeBrackets(T),N.forEach(function(k,L){!(utils.isUndefined(k)||k===null)&&e.append(a===!0?renderKey([T],L,s):a===null?T:T+"[]",u(k))}),!1}return isVisitable(S)?!0:(e.append(renderKey(w,T,s),u(S)),!1)}const C=[],v=Object.assign(predicates,{defaultVisitor:g,convertValue:u,isVisitable});function m(S,T){if(!utils.isUndefined(S)){if(C.indexOf(S)!==-1)throw Error("Circular reference detected in "+T.join("."));C.push(S),utils.forEach(S,function(N,D){(!(utils.isUndefined(N)||N===null)&&o.call(e,N,utils.isString(D)?D.trim():D,T,v))===!0&&m(N,T?T.concat(D):[D])}),C.pop()}}if(!utils.isObject(t))throw new TypeError("data must be an object");return m(t),e}function encode$1(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function AxiosURLSearchParams(t,e){this._pairs=[],t&&toFormData(t,this,e)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function(e,n){this._pairs.push([e,n])};prototype.toString=function(e){const n=e?function(r){return e.call(this,r,encode$1)}:encode$1;return this._pairs.map(function(o){return n(o[0])+"="+n(o[1])},"").join("&")};function encode(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(t,e,n){if(!e)return t;const r=n&&n.encode||encode,o=n&&n.serialize;let s;if(o?s=o(e,n):s=utils.isURLSearchParams(e)?e.toString():new AxiosURLSearchParams(e,n).toString(r),s){const a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class InterceptorManager{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){utils.forEach(this.handlers,function(r){r!==null&&e(r)})}}const InterceptorManager$1=InterceptorManager,transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=FormData,isStandardBrowserEnv=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),isStandardBrowserWebWorkerEnv=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),platform={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob},isStandardBrowserEnv,isStandardBrowserWebWorkerEnv,protocols:["http","https","file","blob","url","data"]};function toURLEncodedForm(t,e){return toFormData(t,new platform.classes.URLSearchParams,Object.assign({visitor:function(n,r,o,s){return platform.isNode&&utils.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function parsePropPath(t){return utils.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function arrayToObject(t){const e={},n=Object.keys(t);let r;const o=n.length;let s;for(r=0;r<o;r++)s=n[r],e[s]=t[s];return e}function formDataToJSON(t){function e(n,r,o,s){let a=n[s++];const l=Number.isFinite(+a),c=s>=n.length;return a=!a&&utils.isArray(o)?o.length:a,c?(utils.hasOwnProp(o,a)?o[a]=[o[a],r]:o[a]=r,!l):((!o[a]||!utils.isObject(o[a]))&&(o[a]=[]),e(n,r,o[a],s)&&utils.isArray(o[a])&&(o[a]=arrayToObject(o[a])),!l)}if(utils.isFormData(t)&&utils.isFunction(t.entries)){const n={};return utils.forEachEntry(t,(r,o)=>{e(parsePropPath(r),o,n,0)}),n}return null}const DEFAULT_CONTENT_TYPE={"Content-Type":void 0};function stringifySafely(t,e,n){if(utils.isString(t))try{return(e||JSON.parse)(t),utils.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const defaults$1={transitional:transitionalDefaults,adapter:["xhr","http"],transformRequest:[function(e,n){const r=n.getContentType()||"",o=r.indexOf("application/json")>-1,s=utils.isObject(e);if(s&&utils.isHTMLForm(e)&&(e=new FormData(e)),utils.isFormData(e))return o&&o?JSON.stringify(formDataToJSON(e)):e;if(utils.isArrayBuffer(e)||utils.isBuffer(e)||utils.isStream(e)||utils.isFile(e)||utils.isBlob(e))return e;if(utils.isArrayBufferView(e))return e.buffer;if(utils.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(e,this.formSerializer).toString();if((l=utils.isFileList(e))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return toFormData(l?{"files[]":e}:e,c&&new c,this.formSerializer)}}return s||o?(n.setContentType("application/json",!1),stringifySafely(e)):e}],transformResponse:[function(e){const n=this.transitional||defaults$1.transitional,r=n&&n.forcedJSONParsing,o=this.responseType==="json";if(e&&utils.isString(e)&&(r&&!this.responseType||o)){const a=!(n&&n.silentJSONParsing)&&o;try{return JSON.parse(e)}catch(l){if(a)throw l.name==="SyntaxError"?AxiosError.from(l,AxiosError.ERR_BAD_RESPONSE,this,null,this.response):l}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};utils.forEach(["delete","get","head"],function(e){defaults$1.headers[e]={}});utils.forEach(["post","put","patch"],function(e){defaults$1.headers[e]=utils.merge(DEFAULT_CONTENT_TYPE)});const defaults$2=defaults$1,ignoreDuplicateOf=utils.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=t=>{const e={};let n,r,o;return t&&t.split(`
`).forEach(function(a){o=a.indexOf(":"),n=a.substring(0,o).trim().toLowerCase(),r=a.substring(o+1).trim(),!(!n||e[n]&&ignoreDuplicateOf[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},$internals=Symbol("internals");function normalizeHeader(t){return t&&String(t).trim().toLowerCase()}function normalizeValue(t){return t===!1||t==null?t:utils.isArray(t)?t.map(normalizeValue):String(t)}function parseTokens(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}function isValidHeaderName(t){return/^[-_a-zA-Z]+$/.test(t.trim())}function matchHeaderValue(t,e,n,r){if(utils.isFunction(r))return r.call(this,e,n);if(utils.isString(e)){if(utils.isString(r))return e.indexOf(r)!==-1;if(utils.isRegExp(r))return r.test(e)}}function formatHeader(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function buildAccessors(t,e){const n=utils.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(o,s,a){return this[r].call(this,e,o,s,a)},configurable:!0})})}class AxiosHeaders{constructor(e){e&&this.set(e)}set(e,n,r){const o=this;function s(l,c,u){const g=normalizeHeader(c);if(!g)throw new Error("header name must be a non-empty string");const C=utils.findKey(o,g);(!C||o[C]===void 0||u===!0||u===void 0&&o[C]!==!1)&&(o[C||c]=normalizeValue(l))}const a=(l,c)=>utils.forEach(l,(u,g)=>s(u,g,c));return utils.isPlainObject(e)||e instanceof this.constructor?a(e,n):utils.isString(e)&&(e=e.trim())&&!isValidHeaderName(e)?a(parseHeaders(e),n):e!=null&&s(n,e,r),this}get(e,n){if(e=normalizeHeader(e),e){const r=utils.findKey(this,e);if(r){const o=this[r];if(!n)return o;if(n===!0)return parseTokens(o);if(utils.isFunction(n))return n.call(this,o,r);if(utils.isRegExp(n))return n.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=normalizeHeader(e),e){const r=utils.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||matchHeaderValue(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let o=!1;function s(a){if(a=normalizeHeader(a),a){const l=utils.findKey(r,a);l&&(!n||matchHeaderValue(r,r[l],l,n))&&(delete r[l],o=!0)}}return utils.isArray(e)?e.forEach(s):s(e),o}clear(e){const n=Object.keys(this);let r=n.length,o=!1;for(;r--;){const s=n[r];(!e||matchHeaderValue(this,this[s],s,e))&&(delete this[s],o=!0)}return o}normalize(e){const n=this,r={};return utils.forEach(this,(o,s)=>{const a=utils.findKey(r,s);if(a){n[a]=normalizeValue(o),delete n[s];return}const l=e?formatHeader(s):String(s).trim();l!==s&&delete n[s],n[l]=normalizeValue(o),r[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return utils.forEach(this,(r,o)=>{r!=null&&r!==!1&&(n[o]=e&&utils.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(o=>r.set(o)),r}static accessor(e){const r=(this[$internals]=this[$internals]={accessors:{}}).accessors,o=this.prototype;function s(a){const l=normalizeHeader(a);r[l]||(buildAccessors(o,a),r[l]=!0)}return utils.isArray(e)?e.forEach(s):s(e),this}}AxiosHeaders.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils.freezeMethods(AxiosHeaders.prototype);utils.freezeMethods(AxiosHeaders);const AxiosHeaders$1=AxiosHeaders;function transformData(t,e){const n=this||defaults$2,r=e||n,o=AxiosHeaders$1.from(r.headers);let s=r.data;return utils.forEach(t,function(l){s=l.call(n,s,o.normalize(),e?e.status:void 0)}),o.normalize(),s}function isCancel(t){return!!(t&&t.__CANCEL__)}function CanceledError(t,e,n){AxiosError.call(this,t??"canceled",AxiosError.ERR_CANCELED,e,n),this.name="CanceledError"}utils.inherits(CanceledError,AxiosError,{__CANCEL__:!0});function settle(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new AxiosError("Request failed with status code "+n.status,[AxiosError.ERR_BAD_REQUEST,AxiosError.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const cookies=platform.isStandardBrowserEnv?function(){return{write:function(n,r,o,s,a,l){const c=[];c.push(n+"="+encodeURIComponent(r)),utils.isNumber(o)&&c.push("expires="+new Date(o).toGMTString()),utils.isString(s)&&c.push("path="+s),utils.isString(a)&&c.push("domain="+a),l===!0&&c.push("secure"),document.cookie=c.join("; ")},read:function(n){const r=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function isAbsoluteURL(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function combineURLs(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function buildFullPath(t,e){return t&&!isAbsoluteURL(e)?combineURLs(t,e):e}const isURLSameOrigin=platform.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function o(s){let a=s;return e&&(n.setAttribute("href",a),a=n.href),n.setAttribute("href",a),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=o(window.location.href),function(a){const l=utils.isString(a)?o(a):a;return l.protocol===r.protocol&&l.host===r.host}}():function(){return function(){return!0}}();function parseProtocol(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function speedometer(t,e){t=t||10;const n=new Array(t),r=new Array(t);let o=0,s=0,a;return e=e!==void 0?e:1e3,function(c){const u=Date.now(),g=r[s];a||(a=u),n[o]=c,r[o]=u;let C=s,v=0;for(;C!==o;)v+=n[C++],C=C%t;if(o=(o+1)%t,o===s&&(s=(s+1)%t),u-a<e)return;const m=g&&u-g;return m?Math.round(v*1e3/m):void 0}}function progressEventReducer(t,e){let n=0;const r=speedometer(50,250);return o=>{const s=o.loaded,a=o.lengthComputable?o.total:void 0,l=s-n,c=r(l),u=s<=a;n=s;const g={loaded:s,total:a,progress:a?s/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&u?(a-s)/c:void 0,event:o};g[e?"download":"upload"]=!0,t(g)}}const isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(t){return new Promise(function(n,r){let o=t.data;const s=AxiosHeaders$1.from(t.headers).normalize(),a=t.responseType;let l;function c(){t.cancelToken&&t.cancelToken.unsubscribe(l),t.signal&&t.signal.removeEventListener("abort",l)}utils.isFormData(o)&&(platform.isStandardBrowserEnv||platform.isStandardBrowserWebWorkerEnv)&&s.setContentType(!1);let u=new XMLHttpRequest;if(t.auth){const m=t.auth.username||"",S=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";s.set("Authorization","Basic "+btoa(m+":"+S))}const g=buildFullPath(t.baseURL,t.url);u.open(t.method.toUpperCase(),buildURL(g,t.params,t.paramsSerializer),!0),u.timeout=t.timeout;function C(){if(!u)return;const m=AxiosHeaders$1.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders()),T={data:!a||a==="text"||a==="json"?u.responseText:u.response,status:u.status,statusText:u.statusText,headers:m,config:t,request:u};settle(function(N){n(N),c()},function(N){r(N),c()},T),u=null}if("onloadend"in u?u.onloadend=C:u.onreadystatechange=function(){!u||u.readyState!==4||u.status===0&&!(u.responseURL&&u.responseURL.indexOf("file:")===0)||setTimeout(C)},u.onabort=function(){u&&(r(new AxiosError("Request aborted",AxiosError.ECONNABORTED,t,u)),u=null)},u.onerror=function(){r(new AxiosError("Network Error",AxiosError.ERR_NETWORK,t,u)),u=null},u.ontimeout=function(){let S=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const T=t.transitional||transitionalDefaults;t.timeoutErrorMessage&&(S=t.timeoutErrorMessage),r(new AxiosError(S,T.clarifyTimeoutError?AxiosError.ETIMEDOUT:AxiosError.ECONNABORTED,t,u)),u=null},platform.isStandardBrowserEnv){const m=(t.withCredentials||isURLSameOrigin(g))&&t.xsrfCookieName&&cookies.read(t.xsrfCookieName);m&&s.set(t.xsrfHeaderName,m)}o===void 0&&s.setContentType(null),"setRequestHeader"in u&&utils.forEach(s.toJSON(),function(S,T){u.setRequestHeader(T,S)}),utils.isUndefined(t.withCredentials)||(u.withCredentials=!!t.withCredentials),a&&a!=="json"&&(u.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&u.addEventListener("progress",progressEventReducer(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&u.upload&&u.upload.addEventListener("progress",progressEventReducer(t.onUploadProgress)),(t.cancelToken||t.signal)&&(l=m=>{u&&(r(!m||m.type?new CanceledError(null,t,u):m),u.abort(),u=null)},t.cancelToken&&t.cancelToken.subscribe(l),t.signal&&(t.signal.aborted?l():t.signal.addEventListener("abort",l)));const v=parseProtocol(g);if(v&&platform.protocols.indexOf(v)===-1){r(new AxiosError("Unsupported protocol "+v+":",AxiosError.ERR_BAD_REQUEST,t));return}u.send(o||null)})},knownAdapters={http:httpAdapter,xhr:xhrAdapter};utils.forEach(knownAdapters,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const adapters={getAdapter:t=>{t=utils.isArray(t)?t:[t];const{length:e}=t;let n,r;for(let o=0;o<e&&(n=t[o],!(r=utils.isString(n)?knownAdapters[n.toLowerCase()]:n));o++);if(!r)throw r===!1?new AxiosError(`Adapter ${n} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(utils.hasOwnProp(knownAdapters,n)?`Adapter '${n}' is not available in the build`:`Unknown adapter '${n}'`);if(!utils.isFunction(r))throw new TypeError("adapter is not a function");return r},adapters:knownAdapters};function throwIfCancellationRequested(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new CanceledError(null,t)}function dispatchRequest(t){return throwIfCancellationRequested(t),t.headers=AxiosHeaders$1.from(t.headers),t.data=transformData.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(t.adapter||defaults$2.adapter)(t).then(function(r){return throwIfCancellationRequested(t),r.data=transformData.call(t,t.transformResponse,r),r.headers=AxiosHeaders$1.from(r.headers),r},function(r){return isCancel(r)||(throwIfCancellationRequested(t),r&&r.response&&(r.response.data=transformData.call(t,t.transformResponse,r.response),r.response.headers=AxiosHeaders$1.from(r.response.headers))),Promise.reject(r)})}const headersToObject=t=>t instanceof AxiosHeaders$1?t.toJSON():t;function mergeConfig(t,e){e=e||{};const n={};function r(u,g,C){return utils.isPlainObject(u)&&utils.isPlainObject(g)?utils.merge.call({caseless:C},u,g):utils.isPlainObject(g)?utils.merge({},g):utils.isArray(g)?g.slice():g}function o(u,g,C){if(utils.isUndefined(g)){if(!utils.isUndefined(u))return r(void 0,u,C)}else return r(u,g,C)}function s(u,g){if(!utils.isUndefined(g))return r(void 0,g)}function a(u,g){if(utils.isUndefined(g)){if(!utils.isUndefined(u))return r(void 0,u)}else return r(void 0,g)}function l(u,g,C){if(C in e)return r(u,g);if(C in t)return r(void 0,u)}const c={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:l,headers:(u,g)=>o(headersToObject(u),headersToObject(g),!0)};return utils.forEach(Object.keys(t).concat(Object.keys(e)),function(g){const C=c[g]||o,v=C(t[g],e[g],g);utils.isUndefined(v)&&C!==l||(n[g]=v)}),n}const VERSION="1.3.2",validators$1={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{validators$1[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const deprecatedWarnings={};validators$1.transitional=function(e,n,r){function o(s,a){return"[Axios v"+VERSION+"] Transitional option '"+s+"'"+a+(r?". "+r:"")}return(s,a,l)=>{if(e===!1)throw new AxiosError(o(a," has been removed"+(n?" in "+n:"")),AxiosError.ERR_DEPRECATED);return n&&!deprecatedWarnings[a]&&(deprecatedWarnings[a]=!0,console.warn(o(a," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,a,l):!0}};function assertOptions(t,e,n){if(typeof t!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let o=r.length;for(;o-- >0;){const s=r[o],a=e[s];if(a){const l=t[s],c=l===void 0||a(l,s,t);if(c!==!0)throw new AxiosError("option "+s+" must be "+c,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new AxiosError("Unknown option "+s,AxiosError.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;class Axios{constructor(e){this.defaults=e,this.interceptors={request:new InterceptorManager$1,response:new InterceptorManager$1}}request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=mergeConfig(this.defaults,n);const{transitional:r,paramsSerializer:o,headers:s}=n;r!==void 0&&validator.assertOptions(r,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),o!==void 0&&validator.assertOptions(o,{encode:validators.function,serialize:validators.function},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let a;a=s&&utils.merge(s.common,s[n.method]),a&&utils.forEach(["delete","get","head","post","put","patch","common"],S=>{delete s[S]}),n.headers=AxiosHeaders$1.concat(a,s);const l=[];let c=!0;this.interceptors.request.forEach(function(T){typeof T.runWhen=="function"&&T.runWhen(n)===!1||(c=c&&T.synchronous,l.unshift(T.fulfilled,T.rejected))});const u=[];this.interceptors.response.forEach(function(T){u.push(T.fulfilled,T.rejected)});let g,C=0,v;if(!c){const S=[dispatchRequest.bind(this),void 0];for(S.unshift.apply(S,l),S.push.apply(S,u),v=S.length,g=Promise.resolve(n);C<v;)g=g.then(S[C++],S[C++]);return g}v=l.length;let m=n;for(C=0;C<v;){const S=l[C++],T=l[C++];try{m=S(m)}catch(w){T.call(this,w);break}}try{g=dispatchRequest.call(this,m)}catch(S){return Promise.reject(S)}for(C=0,v=u.length;C<v;)g=g.then(u[C++],u[C++]);return g}getUri(e){e=mergeConfig(this.defaults,e);const n=buildFullPath(e.baseURL,e.url);return buildURL(n,e.params,e.paramsSerializer)}}utils.forEach(["delete","get","head","options"],function(e){Axios.prototype[e]=function(n,r){return this.request(mergeConfig(r||{},{method:e,url:n,data:(r||{}).data}))}});utils.forEach(["post","put","patch"],function(e){function n(r){return function(s,a,l){return this.request(mergeConfig(l||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:a}))}}Axios.prototype[e]=n(),Axios.prototype[e+"Form"]=n(!0)});const Axios$1=Axios;class CancelToken{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(o=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](o);r._listeners=null}),this.promise.then=o=>{let s;const a=new Promise(l=>{r.subscribe(l),s=l}).then(o);return a.cancel=function(){r.unsubscribe(s)},a},e(function(s,a,l){r.reason||(r.reason=new CanceledError(s,a,l),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new CancelToken(function(o){e=o}),cancel:e}}}const CancelToken$1=CancelToken;function spread(t){return function(n){return t.apply(null,n)}}function isAxiosError(t){return utils.isObject(t)&&t.isAxiosError===!0}const HttpStatusCode={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode).forEach(([t,e])=>{HttpStatusCode[e]=t});const HttpStatusCode$1=HttpStatusCode;function createInstance(t){const e=new Axios$1(t),n=bind$1(Axios$1.prototype.request,e);return utils.extend(n,Axios$1.prototype,e,{allOwnKeys:!0}),utils.extend(n,e,null,{allOwnKeys:!0}),n.create=function(o){return createInstance(mergeConfig(t,o))},n}const axios$1=createInstance(defaults$2);axios$1.Axios=Axios$1;axios$1.CanceledError=CanceledError;axios$1.CancelToken=CancelToken$1;axios$1.isCancel=isCancel;axios$1.VERSION=VERSION;axios$1.toFormData=toFormData;axios$1.AxiosError=AxiosError;axios$1.Cancel=axios$1.CanceledError;axios$1.all=function(e){return Promise.all(e)};axios$1.spread=spread;axios$1.isAxiosError=isAxiosError;axios$1.mergeConfig=mergeConfig;axios$1.AxiosHeaders=AxiosHeaders$1;axios$1.formToJSON=t=>formDataToJSON(utils.isHTMLForm(t)?new FormData(t):t);axios$1.HttpStatusCode=HttpStatusCode$1;axios$1.default=axios$1;const axios$2=axios$1;window._=_;window.bootstrap=bootstrap;window.axios=axios$2;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";const app$1="",andrei="";function makeMap(t,e){const n=Object.create(null),r=t.split(",");for(let o=0;o<r.length;o++)n[r[o]]=!0;return e?o=>!!n[o.toLowerCase()]:o=>!!n[o]}const GLOBALS_WHITE_LISTED="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt",isGloballyWhitelisted=makeMap(GLOBALS_WHITE_LISTED);function normalizeStyle(t){if(isArray(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],o=isString(r)?parseStringStyle(r):normalizeStyle(r);if(o)for(const s in o)e[s]=o[s]}return e}else{if(isString(t))return t;if(isObject(t))return t}}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*.*?\*\//gs;function parseStringStyle(t){const e={};return t.replace(styleCommentRE,"").split(listDelimiterRE).forEach(n=>{if(n){const r=n.split(propertyDelimiterRE);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function normalizeClass(t){let e="";if(isString(t))e=t;else if(isArray(t))for(let n=0;n<t.length;n++){const r=normalizeClass(t[n]);r&&(e+=r+" ")}else if(isObject(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function normalizeProps(t){if(!t)return null;let{class:e,style:n}=t;return e&&!isString(e)&&(t.class=normalizeClass(e)),n&&(t.style=normalizeStyle(n)),t}const HTML_TAGS="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,hgroup,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",SVG_TAGS="svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistantLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view",VOID_TAGS="area,base,br,col,embed,hr,img,input,link,meta,param,source,track,wbr",isHTMLTag=makeMap(HTML_TAGS),isSVGTag=makeMap(SVG_TAGS),isVoidTag=makeMap(VOID_TAGS),specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(t){return!!t||t===""}function looseCompareArrays(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=looseEqual(t[r],e[r]);return n}function looseEqual(t,e){if(t===e)return!0;let n=isDate$1(t),r=isDate$1(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=isSymbol(t),r=isSymbol(e),n||r)return t===e;if(n=isArray(t),r=isArray(e),n||r)return n&&r?looseCompareArrays(t,e):!1;if(n=isObject(t),r=isObject(e),n||r){if(!n||!r)return!1;const o=Object.keys(t).length,s=Object.keys(e).length;if(o!==s)return!1;for(const a in t){const l=t.hasOwnProperty(a),c=e.hasOwnProperty(a);if(l&&!c||!l&&c||!looseEqual(t[a],e[a]))return!1}}return String(t)===String(e)}function looseIndexOf(t,e){return t.findIndex(n=>looseEqual(n,e))}const toDisplayString=t=>isString(t)?t:t==null?"":isArray(t)||isObject(t)&&(t.toString===objectToString||!isFunction$1(t.toString))?JSON.stringify(t,replacer,2):String(t),replacer=(t,e)=>e&&e.__v_isRef?replacer(t,e.value):isMap(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,o])=>(n[`${r} =>`]=o,n),{})}:isSet(e)?{[`Set(${e.size})`]:[...e.values()]}:isObject(e)&&!isArray(e)&&!isPlainObject$2(e)?String(e):e,EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,onRE=/^on[^a-z]/,isOn=t=>onRE.test(t),isModelListener=t=>t.startsWith("onUpdate:"),extend=Object.assign,remove=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},hasOwnProperty$1=Object.prototype.hasOwnProperty,hasOwn=(t,e)=>hasOwnProperty$1.call(t,e),isArray=Array.isArray,isMap=t=>toTypeString(t)==="[object Map]",isSet=t=>toTypeString(t)==="[object Set]",isDate$1=t=>toTypeString(t)==="[object Date]",isRegExp$1=t=>toTypeString(t)==="[object RegExp]",isFunction$1=t=>typeof t=="function",isString=t=>typeof t=="string",isSymbol=t=>typeof t=="symbol",isObject=t=>t!==null&&typeof t=="object",isPromise=t=>isObject(t)&&isFunction$1(t.then)&&isFunction$1(t.catch),objectToString=Object.prototype.toString,toTypeString=t=>objectToString.call(t),toRawType=t=>toTypeString(t).slice(8,-1),isPlainObject$2=t=>toTypeString(t)==="[object Object]",isIntegerKey=t=>isString(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),isBuiltInDirective=makeMap("bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo"),cacheStringFunction$1=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},camelizeRE$1=/-(\w)/g,camelize$1=cacheStringFunction$1(t=>t.replace(camelizeRE$1,(e,n)=>n?n.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction$1(t=>t.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction$1(t=>t.charAt(0).toUpperCase()+t.slice(1)),toHandlerKey=cacheStringFunction$1(t=>t?`on${capitalize(t)}`:""),hasChanged=(t,e)=>!Object.is(t,e),invokeArrayFns=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},def=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},looseToNumber=t=>{const e=parseFloat(t);return isNaN(e)?t:e},toNumber=t=>{const e=isString(t)?Number(t):NaN;return isNaN(e)?t:e};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let activeEffectScope;class EffectScope{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=activeEffectScope,!e&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=activeEffectScope;try{return activeEffectScope=this,e()}finally{activeEffectScope=n}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(e){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0,this._active=!1}}}function effectScope(t){return new EffectScope(t)}function recordEffectScope(t,e=activeEffectScope){e&&e.active&&e.effects.push(t)}function getCurrentScope(){return activeEffectScope}function onScopeDispose(t){activeEffectScope&&activeEffectScope.cleanups.push(t)}const createDep=t=>{const e=new Set(t);return e.w=0,e.n=0,e},wasTracked=t=>(t.w&trackOpBit)>0,newTracked=t=>(t.n&trackOpBit)>0,initDepMarkers=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=trackOpBit},finalizeDepMarkers=t=>{const{deps:e}=t;if(e.length){let n=0;for(let r=0;r<e.length;r++){const o=e[r];wasTracked(o)&&!newTracked(o)?o.delete(t):e[n++]=o,o.w&=~trackOpBit,o.n&=~trackOpBit}e.length=n}},targetMap=new WeakMap;let effectTrackDepth=0,trackOpBit=1;const maxMarkerBits=30;let activeEffect;const ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");class ReactiveEffect{constructor(e,n=null,r){this.fn=e,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,recordEffectScope(this,r)}run(){if(!this.active)return this.fn();let e=activeEffect,n=shouldTrack;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=activeEffect,activeEffect=this,shouldTrack=!0,trackOpBit=1<<++effectTrackDepth,effectTrackDepth<=maxMarkerBits?initDepMarkers(this):cleanupEffect(this),this.fn()}finally{effectTrackDepth<=maxMarkerBits&&finalizeDepMarkers(this),trackOpBit=1<<--effectTrackDepth,activeEffect=this.parent,shouldTrack=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){activeEffect===this?this.deferStop=!0:this.active&&(cleanupEffect(this),this.onStop&&this.onStop(),this.active=!1)}}function cleanupEffect(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}function effect(t,e){t.effect&&(t=t.effect.fn);const n=new ReactiveEffect(t);e&&(extend(n,e),e.scope&&recordEffectScope(n,e.scope)),(!e||!e.lazy)&&n.run();const r=n.run.bind(n);return r.effect=n,r}function stop(t){t.effect.stop()}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const t=trackStack.pop();shouldTrack=t===void 0?!0:t}function track(t,e,n){if(shouldTrack&&activeEffect){let r=targetMap.get(t);r||targetMap.set(t,r=new Map);let o=r.get(n);o||r.set(n,o=createDep()),trackEffects(o)}}function trackEffects(t,e){let n=!1;effectTrackDepth<=maxMarkerBits?newTracked(t)||(t.n|=trackOpBit,n=!wasTracked(t)):n=!t.has(activeEffect),n&&(t.add(activeEffect),activeEffect.deps.push(t))}function trigger(t,e,n,r,o,s){const a=targetMap.get(t);if(!a)return;let l=[];if(e==="clear")l=[...a.values()];else if(n==="length"&&isArray(t)){const c=Number(r);a.forEach((u,g)=>{(g==="length"||g>=c)&&l.push(u)})}else switch(n!==void 0&&l.push(a.get(n)),e){case"add":isArray(t)?isIntegerKey(n)&&l.push(a.get("length")):(l.push(a.get(ITERATE_KEY)),isMap(t)&&l.push(a.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray(t)||(l.push(a.get(ITERATE_KEY)),isMap(t)&&l.push(a.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(t)&&l.push(a.get(ITERATE_KEY));break}if(l.length===1)l[0]&&triggerEffects(l[0]);else{const c=[];for(const u of l)u&&c.push(...u);triggerEffects(createDep(c))}}function triggerEffects(t,e){const n=isArray(t)?t:[...t];for(const r of n)r.computed&&triggerEffect(r);for(const r of n)r.computed||triggerEffect(r)}function triggerEffect(t,e){(t!==activeEffect||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}function getDepFromReactive(t,e){var n;return(n=targetMap.get(t))===null||n===void 0?void 0:n.get(e)}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(isSymbol)),get$1=createGetter(),shallowGet=createGetter(!1,!0),readonlyGet=createGetter(!0),shallowReadonlyGet=createGetter(!0,!0),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const r=toRaw(this);for(let s=0,a=this.length;s<a;s++)track(r,"get",s+"");const o=r[e](...n);return o===-1||o===!1?r[e](...n.map(toRaw)):o}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){pauseTracking();const r=toRaw(this)[e].apply(this,n);return resetTracking(),r}}),t}function hasOwnProperty(t){const e=toRaw(this);return track(e,"has",t),e.hasOwnProperty(t)}function createGetter(t=!1,e=!1){return function(r,o,s){if(o==="__v_isReactive")return!t;if(o==="__v_isReadonly")return t;if(o==="__v_isShallow")return e;if(o==="__v_raw"&&s===(t?e?shallowReadonlyMap:readonlyMap:e?shallowReactiveMap:reactiveMap).get(r))return r;const a=isArray(r);if(!t){if(a&&hasOwn(arrayInstrumentations,o))return Reflect.get(arrayInstrumentations,o,s);if(o==="hasOwnProperty")return hasOwnProperty}const l=Reflect.get(r,o,s);return(isSymbol(o)?builtInSymbols.has(o):isNonTrackableKeys(o))||(t||track(r,"get",o),e)?l:isRef(l)?a&&isIntegerKey(o)?l:l.value:isObject(l)?t?readonly(l):reactive(l):l}}const set$1=createSetter(),shallowSet=createSetter(!0);function createSetter(t=!1){return function(n,r,o,s){let a=n[r];if(isReadonly(a)&&isRef(a)&&!isRef(o))return!1;if(!t&&(!isShallow(o)&&!isReadonly(o)&&(a=toRaw(a),o=toRaw(o)),!isArray(n)&&isRef(a)&&!isRef(o)))return a.value=o,!0;const l=isArray(n)&&isIntegerKey(r)?Number(r)<n.length:hasOwn(n,r),c=Reflect.set(n,r,o,s);return n===toRaw(s)&&(l?hasChanged(o,a)&&trigger(n,"set",r,o):trigger(n,"add",r,o)),c}}function deleteProperty(t,e){const n=hasOwn(t,e);t[e];const r=Reflect.deleteProperty(t,e);return r&&n&&trigger(t,"delete",e,void 0),r}function has$1(t,e){const n=Reflect.has(t,e);return(!isSymbol(e)||!builtInSymbols.has(e))&&track(t,"has",e),n}function ownKeys$1(t){return track(t,"iterate",isArray(t)?"length":ITERATE_KEY),Reflect.ownKeys(t)}const mutableHandlers={get:get$1,set:set$1,deleteProperty,has:has$1,ownKeys:ownKeys$1},readonlyHandlers={get:readonlyGet,set(t,e){return!0},deleteProperty(t,e){return!0}},shallowReactiveHandlers=extend({},mutableHandlers,{get:shallowGet,set:shallowSet}),shallowReadonlyHandlers=extend({},readonlyHandlers,{get:shallowReadonlyGet}),toShallow=t=>t,getProto=t=>Reflect.getPrototypeOf(t);function get(t,e,n=!1,r=!1){t=t.__v_raw;const o=toRaw(t),s=toRaw(e);n||(e!==s&&track(o,"get",e),track(o,"get",s));const{has:a}=getProto(o),l=r?toShallow:n?toReadonly:toReactive;if(a.call(o,e))return l(t.get(e));if(a.call(o,s))return l(t.get(s));t!==o&&t.get(e)}function has(t,e=!1){const n=this.__v_raw,r=toRaw(n),o=toRaw(t);return e||(t!==o&&track(r,"has",t),track(r,"has",o)),t===o?n.has(t):n.has(t)||n.has(o)}function size(t,e=!1){return t=t.__v_raw,!e&&track(toRaw(t),"iterate",ITERATE_KEY),Reflect.get(t,"size",t)}function add(t){t=toRaw(t);const e=toRaw(this);return getProto(e).has.call(e,t)||(e.add(t),trigger(e,"add",t,t)),this}function set(t,e){e=toRaw(e);const n=toRaw(this),{has:r,get:o}=getProto(n);let s=r.call(n,t);s||(t=toRaw(t),s=r.call(n,t));const a=o.call(n,t);return n.set(t,e),s?hasChanged(e,a)&&trigger(n,"set",t,e):trigger(n,"add",t,e),this}function deleteEntry(t){const e=toRaw(this),{has:n,get:r}=getProto(e);let o=n.call(e,t);o||(t=toRaw(t),o=n.call(e,t)),r&&r.call(e,t);const s=e.delete(t);return o&&trigger(e,"delete",t,void 0),s}function clear(){const t=toRaw(this),e=t.size!==0,n=t.clear();return e&&trigger(t,"clear",void 0,void 0),n}function createForEach(t,e){return function(r,o){const s=this,a=s.__v_raw,l=toRaw(a),c=e?toShallow:t?toReadonly:toReactive;return!t&&track(l,"iterate",ITERATE_KEY),a.forEach((u,g)=>r.call(o,c(u),c(g),s))}}function createIterableMethod(t,e,n){return function(...r){const o=this.__v_raw,s=toRaw(o),a=isMap(s),l=t==="entries"||t===Symbol.iterator&&a,c=t==="keys"&&a,u=o[t](...r),g=n?toShallow:e?toReadonly:toReactive;return!e&&track(s,"iterate",c?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:C,done:v}=u.next();return v?{value:C,done:v}:{value:l?[g(C[0]),g(C[1])]:g(C),done:v}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(t){return function(...e){return t==="delete"?!1:this}}function createInstrumentations(){const t={get(s){return get(this,s)},get size(){return size(this)},has,add,set,delete:deleteEntry,clear,forEach:createForEach(!1,!1)},e={get(s){return get(this,s,!1,!0)},get size(){return size(this)},has,add,set,delete:deleteEntry,clear,forEach:createForEach(!1,!0)},n={get(s){return get(this,s,!0)},get size(){return size(this,!0)},has(s){return has.call(this,s,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},r={get(s){return get(this,s,!0,!0)},get size(){return size(this,!0)},has(s){return has.call(this,s,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{t[s]=createIterableMethod(s,!1,!1),n[s]=createIterableMethod(s,!0,!1),e[s]=createIterableMethod(s,!1,!0),r[s]=createIterableMethod(s,!0,!0)}),[t,n,e,r]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(t,e){const n=e?t?shallowReadonlyInstrumentations:shallowInstrumentations:t?readonlyInstrumentations:mutableInstrumentations;return(r,o,s)=>o==="__v_isReactive"?!t:o==="__v_isReadonly"?t:o==="__v_raw"?r:Reflect.get(hasOwn(n,o)&&o in r?n:r,o,s)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},shallowReadonlyCollectionHandlers={get:createInstrumentationGetter(!0,!0)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(t){return t.__v_skip||!Object.isExtensible(t)?0:targetTypeMap(toRawType(t))}function reactive(t){return isReadonly(t)?t:createReactiveObject(t,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(t){return createReactiveObject(t,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(t){return createReactiveObject(t,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function shallowReadonly(t){return createReactiveObject(t,!0,shallowReadonlyHandlers,shallowReadonlyCollectionHandlers,shallowReadonlyMap)}function createReactiveObject(t,e,n,r,o){if(!isObject(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=o.get(t);if(s)return s;const a=getTargetType(t);if(a===0)return t;const l=new Proxy(t,a===2?r:n);return o.set(t,l),l}function isReactive(t){return isReadonly(t)?isReactive(t.__v_raw):!!(t&&t.__v_isReactive)}function isReadonly(t){return!!(t&&t.__v_isReadonly)}function isShallow(t){return!!(t&&t.__v_isShallow)}function isProxy(t){return isReactive(t)||isReadonly(t)}function toRaw(t){const e=t&&t.__v_raw;return e?toRaw(e):t}function markRaw(t){return def(t,"__v_skip",!0),t}const toReactive=t=>isObject(t)?reactive(t):t,toReadonly=t=>isObject(t)?readonly(t):t;function trackRefValue(t){shouldTrack&&activeEffect&&(t=toRaw(t),trackEffects(t.dep||(t.dep=createDep())))}function triggerRefValue(t,e){t=toRaw(t);const n=t.dep;n&&triggerEffects(n)}function isRef(t){return!!(t&&t.__v_isRef===!0)}function ref(t){return createRef(t,!1)}function shallowRef(t){return createRef(t,!0)}function createRef(t,e){return isRef(t)?t:new RefImpl(t,e)}class RefImpl{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:toRaw(e),this._value=n?e:toReactive(e)}get value(){return trackRefValue(this),this._value}set value(e){const n=this.__v_isShallow||isShallow(e)||isReadonly(e);e=n?e:toRaw(e),hasChanged(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:toReactive(e),triggerRefValue(this))}}function triggerRef(t){triggerRefValue(t)}function unref(t){return isRef(t)?t.value:t}const shallowUnwrapHandlers={get:(t,e,n)=>unref(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const o=t[e];return isRef(o)&&!isRef(n)?(o.value=n,!0):Reflect.set(t,e,n,r)}};function proxyRefs(t){return isReactive(t)?t:new Proxy(t,shallowUnwrapHandlers)}class CustomRefImpl{constructor(e){this.dep=void 0,this.__v_isRef=!0;const{get:n,set:r}=e(()=>trackRefValue(this),()=>triggerRefValue(this));this._get=n,this._set=r}get value(){return this._get()}set value(e){this._set(e)}}function customRef(t){return new CustomRefImpl(t)}function toRefs(t){const e=isArray(t)?new Array(t.length):{};for(const n in t)e[n]=toRef(t,n);return e}class ObjectRefImpl{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return getDepFromReactive(toRaw(this._object),this._key)}}function toRef(t,e,n){const r=t[e];return isRef(r)?r:new ObjectRefImpl(t,e,n)}var _a$1;class ComputedRefImpl{constructor(e,n,r,o){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this[_a$1]=!1,this._dirty=!0,this.effect=new ReactiveEffect(e,()=>{this._dirty||(this._dirty=!0,triggerRefValue(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!o,this.__v_isReadonly=r}get value(){const e=toRaw(this);return trackRefValue(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}_a$1="__v_isReadonly";function computed$1(t,e,n=!1){let r,o;const s=isFunction$1(t);return s?(r=t,o=NOOP):(r=t.get,o=t.set),new ComputedRefImpl(r,o,s||!o,n)}function warn$1(t,...e){}function assertNumber(t,e){}function callWithErrorHandling(t,e,n,r){let o;try{o=r?t(...r):t()}catch(s){handleError(s,e,n)}return o}function callWithAsyncErrorHandling(t,e,n,r){if(isFunction$1(t)){const s=callWithErrorHandling(t,e,n,r);return s&&isPromise(s)&&s.catch(a=>{handleError(a,e,n)}),s}const o=[];for(let s=0;s<t.length;s++)o.push(callWithAsyncErrorHandling(t[s],e,n,r));return o}function handleError(t,e,n,r=!0){const o=e?e.vnode:null;if(e){let s=e.parent;const a=e.proxy,l=n;for(;s;){const u=s.ec;if(u){for(let g=0;g<u.length;g++)if(u[g](t,a,l)===!1)return}s=s.parent}const c=e.appContext.config.errorHandler;if(c){callWithErrorHandling(c,null,10,[t,a,l]);return}}logError(t,n,o,r)}function logError(t,e,n,r=!0){console.error(t)}let isFlushing=!1,isFlushPending=!1;const queue=[];let flushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(t){const e=currentFlushPromise||resolvedPromise;return t?e.then(this?t.bind(this):t):e}function findInsertionIndex(t){let e=flushIndex+1,n=queue.length;for(;e<n;){const r=e+n>>>1;getId(queue[r])<t?e=r+1:n=r}return e}function queueJob(t){(!queue.length||!queue.includes(t,isFlushing&&t.allowRecurse?flushIndex+1:flushIndex))&&(t.id==null?queue.push(t):queue.splice(findInsertionIndex(t.id),0,t),queueFlush())}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(t){const e=queue.indexOf(t);e>flushIndex&&queue.splice(e,1)}function queuePostFlushCb(t){isArray(t)?pendingPostFlushCbs.push(...t):(!activePostFlushCbs||!activePostFlushCbs.includes(t,t.allowRecurse?postFlushIndex+1:postFlushIndex))&&pendingPostFlushCbs.push(t),queueFlush()}function flushPreFlushCbs(t,e=isFlushing?flushIndex+1:0){for(;e<queue.length;e++){const n=queue[e];n&&n.pre&&(queue.splice(e,1),e--,n())}}function flushPostFlushCbs(t){if(pendingPostFlushCbs.length){const e=[...new Set(pendingPostFlushCbs)];if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...e);return}for(activePostFlushCbs=e,activePostFlushCbs.sort((n,r)=>getId(n)-getId(r)),postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId=t=>t.id==null?1/0:t.id,comparator=(t,e)=>{const n=getId(t)-getId(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function flushJobs(t){isFlushPending=!1,isFlushing=!0,queue.sort(comparator);const e=NOOP;try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const n=queue[flushIndex];n&&n.active!==!1&&callWithErrorHandling(n,null,14)}}finally{flushIndex=0,queue.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}let devtools,buffer=[];function setDevtoolsHook(t,e){var n,r;devtools=t,devtools?(devtools.enabled=!0,buffer.forEach(({event:o,args:s})=>devtools.emit(o,...s)),buffer=[]):typeof window<"u"&&window.HTMLElement&&!(!((r=(n=window.navigator)===null||n===void 0?void 0:n.userAgent)===null||r===void 0)&&r.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(s=>{setDevtoolsHook(s,e)}),setTimeout(()=>{devtools||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,buffer=[])},3e3)):buffer=[]}function emit(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||EMPTY_OBJ;let o=n;const s=e.startsWith("update:"),a=s&&e.slice(7);if(a&&a in r){const g=`${a==="modelValue"?"model":a}Modifiers`,{number:C,trim:v}=r[g]||EMPTY_OBJ;v&&(o=n.map(m=>isString(m)?m.trim():m)),C&&(o=n.map(looseToNumber))}let l,c=r[l=toHandlerKey(e)]||r[l=toHandlerKey(camelize$1(e))];!c&&s&&(c=r[l=toHandlerKey(hyphenate(e))]),c&&callWithAsyncErrorHandling(c,t,6,o);const u=r[l+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[l])return;t.emitted[l]=!0,callWithAsyncErrorHandling(u,t,6,o)}}function normalizeEmitsOptions(t,e,n=!1){const r=e.emitsCache,o=r.get(t);if(o!==void 0)return o;const s=t.emits;let a={},l=!1;if(!isFunction$1(t)){const c=u=>{const g=normalizeEmitsOptions(u,e,!0);g&&(l=!0,extend(a,g))};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!s&&!l?(isObject(t)&&r.set(t,null),null):(isArray(s)?s.forEach(c=>a[c]=null):extend(a,s),isObject(t)&&r.set(t,a),a)}function isEmitListener(t,e){return!t||!isOn(e)?!1:(e=e.slice(2).replace(/Once$/,""),hasOwn(t,e[0].toLowerCase()+e.slice(1))||hasOwn(t,hyphenate(e))||hasOwn(t,e))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(t){const e=currentRenderingInstance;return currentRenderingInstance=t,currentScopeId=t&&t.type.__scopeId||null,e}function pushScopeId(t){currentScopeId=t}function popScopeId(){currentScopeId=null}const withScopeId=t=>withCtx;function withCtx(t,e=currentRenderingInstance,n){if(!e||t._n)return t;const r=(...o)=>{r._d&&setBlockTracking(-1);const s=setCurrentRenderingInstance(e);let a;try{a=t(...o)}finally{setCurrentRenderingInstance(s),r._d&&setBlockTracking(1)}return a};return r._n=!0,r._c=!0,r._d=!0,r}function markAttrsAccessed(){}function renderComponentRoot(t){const{type:e,vnode:n,proxy:r,withProxy:o,props:s,propsOptions:[a],slots:l,attrs:c,emit:u,render:g,renderCache:C,data:v,setupState:m,ctx:S,inheritAttrs:T}=t;let w,N;const D=setCurrentRenderingInstance(t);try{if(n.shapeFlag&4){const L=o||r;w=normalizeVNode(g.call(L,L,C,s,m,v,S)),N=c}else{const L=e;w=normalizeVNode(L.length>1?L(s,{attrs:c,slots:l,emit:u}):L(s,null)),N=e.props?c:getFunctionalFallthrough(c)}}catch(L){blockStack.length=0,handleError(L,t,1),w=createVNode(Comment)}let k=w;if(N&&T!==!1){const L=Object.keys(N),{shapeFlag:H}=k;L.length&&H&7&&(a&&L.some(isModelListener)&&(N=filterModelListeners(N,a)),k=cloneVNode(k,N))}return n.dirs&&(k=cloneVNode(k),k.dirs=k.dirs?k.dirs.concat(n.dirs):n.dirs),n.transition&&(k.transition=n.transition),w=k,setCurrentRenderingInstance(D),w}function filterSingleRoot(t){let e;for(let n=0;n<t.length;n++){const r=t[n];if(isVNode(r)){if(r.type!==Comment||r.children==="v-if"){if(e)return;e=r}}else return}return e}const getFunctionalFallthrough=t=>{let e;for(const n in t)(n==="class"||n==="style"||isOn(n))&&((e||(e={}))[n]=t[n]);return e},filterModelListeners=(t,e)=>{const n={};for(const r in t)(!isModelListener(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function shouldUpdateComponent(t,e,n){const{props:r,children:o,component:s}=t,{props:a,children:l,patchFlag:c}=e,u=s.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return r?hasPropsChanged(r,a,u):!!a;if(c&8){const g=e.dynamicProps;for(let C=0;C<g.length;C++){const v=g[C];if(a[v]!==r[v]&&!isEmitListener(u,v))return!0}}}else return(o||l)&&(!l||!l.$stable)?!0:r===a?!1:r?a?hasPropsChanged(r,a,u):!0:!!a;return!1}function hasPropsChanged(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let o=0;o<r.length;o++){const s=r[o];if(e[s]!==t[s]&&!isEmitListener(n,s))return!0}return!1}function updateHOCHostEl({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}const isSuspense=t=>t.__isSuspense,SuspenseImpl={name:"Suspense",__isSuspense:!0,process(t,e,n,r,o,s,a,l,c,u){t==null?mountSuspense(e,n,r,o,s,a,l,c,u):patchSuspense(t,e,n,r,o,a,l,c,u)},hydrate:hydrateSuspense,create:createSuspenseBoundary,normalize:normalizeSuspenseChildren},Suspense=SuspenseImpl;function triggerEvent(t,e){const n=t.props&&t.props[e];isFunction$1(n)&&n()}function mountSuspense(t,e,n,r,o,s,a,l,c){const{p:u,o:{createElement:g}}=c,C=g("div"),v=t.suspense=createSuspenseBoundary(t,o,r,e,C,n,s,a,l,c);u(null,v.pendingBranch=t.ssContent,C,null,r,v,s,a),v.deps>0?(triggerEvent(t,"onPending"),triggerEvent(t,"onFallback"),u(null,t.ssFallback,e,n,r,null,s,a),setActiveBranch(v,t.ssFallback)):v.resolve()}function patchSuspense(t,e,n,r,o,s,a,l,{p:c,um:u,o:{createElement:g}}){const C=e.suspense=t.suspense;C.vnode=e,e.el=t.el;const v=e.ssContent,m=e.ssFallback,{activeBranch:S,pendingBranch:T,isInFallback:w,isHydrating:N}=C;if(T)C.pendingBranch=v,isSameVNodeType(v,T)?(c(T,v,C.hiddenContainer,null,o,C,s,a,l),C.deps<=0?C.resolve():w&&(c(S,m,n,r,o,null,s,a,l),setActiveBranch(C,m))):(C.pendingId++,N?(C.isHydrating=!1,C.activeBranch=T):u(T,o,C),C.deps=0,C.effects.length=0,C.hiddenContainer=g("div"),w?(c(null,v,C.hiddenContainer,null,o,C,s,a,l),C.deps<=0?C.resolve():(c(S,m,n,r,o,null,s,a,l),setActiveBranch(C,m))):S&&isSameVNodeType(v,S)?(c(S,v,n,r,o,C,s,a,l),C.resolve(!0)):(c(null,v,C.hiddenContainer,null,o,C,s,a,l),C.deps<=0&&C.resolve()));else if(S&&isSameVNodeType(v,S))c(S,v,n,r,o,C,s,a,l),setActiveBranch(C,v);else if(triggerEvent(e,"onPending"),C.pendingBranch=v,C.pendingId++,c(null,v,C.hiddenContainer,null,o,C,s,a,l),C.deps<=0)C.resolve();else{const{timeout:D,pendingId:k}=C;D>0?setTimeout(()=>{C.pendingId===k&&C.fallback(m)},D):D===0&&C.fallback(m)}}function createSuspenseBoundary(t,e,n,r,o,s,a,l,c,u,g=!1){const{p:C,m:v,um:m,n:S,o:{parentNode:T,remove:w}}=u,N=t.props?toNumber(t.props.timeout):void 0,D={vnode:t,parent:e,parentComponent:n,isSVG:a,container:r,hiddenContainer:o,anchor:s,deps:0,pendingId:0,timeout:typeof N=="number"?N:-1,activeBranch:null,pendingBranch:null,isInFallback:!0,isHydrating:g,isUnmounted:!1,effects:[],resolve(k=!1){const{vnode:L,activeBranch:H,pendingBranch:R,pendingId:B,effects:Y,parentComponent:K,container:se}=D;if(D.isHydrating)D.isHydrating=!1;else if(!k){const Ee=H&&R.transition&&R.transition.mode==="out-in";Ee&&(H.transition.afterLeave=()=>{B===D.pendingId&&v(R,se,Ne,0)});let{anchor:Ne}=D;H&&(Ne=S(H),m(H,K,D,!0)),Ee||v(R,se,Ne,0)}setActiveBranch(D,R),D.pendingBranch=null,D.isInFallback=!1;let pe=D.parent,le=!1;for(;pe;){if(pe.pendingBranch){pe.effects.push(...Y),le=!0;break}pe=pe.parent}le||queuePostFlushCb(Y),D.effects=[],triggerEvent(L,"onResolve")},fallback(k){if(!D.pendingBranch)return;const{vnode:L,activeBranch:H,parentComponent:R,container:B,isSVG:Y}=D;triggerEvent(L,"onFallback");const K=S(H),se=()=>{D.isInFallback&&(C(null,k,B,K,R,null,Y,l,c),setActiveBranch(D,k))},pe=k.transition&&k.transition.mode==="out-in";pe&&(H.transition.afterLeave=se),D.isInFallback=!0,m(H,R,null,!0),pe||se()},move(k,L,H){D.activeBranch&&v(D.activeBranch,k,L,H),D.container=k},next(){return D.activeBranch&&S(D.activeBranch)},registerDep(k,L){const H=!!D.pendingBranch;H&&D.deps++;const R=k.vnode.el;k.asyncDep.catch(B=>{handleError(B,k,0)}).then(B=>{if(k.isUnmounted||D.isUnmounted||D.pendingId!==k.suspenseId)return;k.asyncResolved=!0;const{vnode:Y}=k;handleSetupResult(k,B,!1),R&&(Y.el=R);const K=!R&&k.subTree.el;L(k,Y,T(R||k.subTree.el),R?null:S(k.subTree),D,a,c),K&&w(K),updateHOCHostEl(k,Y.el),H&&--D.deps===0&&D.resolve()})},unmount(k,L){D.isUnmounted=!0,D.activeBranch&&m(D.activeBranch,n,k,L),D.pendingBranch&&m(D.pendingBranch,n,k,L)}};return D}function hydrateSuspense(t,e,n,r,o,s,a,l,c){const u=e.suspense=createSuspenseBoundary(e,r,n,t.parentNode,document.createElement("div"),null,o,s,a,l,!0),g=c(t,u.pendingBranch=e.ssContent,n,u,s,a);return u.deps===0&&u.resolve(),g}function normalizeSuspenseChildren(t){const{shapeFlag:e,children:n}=t,r=e&32;t.ssContent=normalizeSuspenseSlot(r?n.default:n),t.ssFallback=r?normalizeSuspenseSlot(n.fallback):createVNode(Comment)}function normalizeSuspenseSlot(t){let e;if(isFunction$1(t)){const n=isBlockTreeEnabled&&t._c;n&&(t._d=!1,openBlock()),t=t(),n&&(t._d=!0,e=currentBlock,closeBlock())}return isArray(t)&&(t=filterSingleRoot(t)),t=normalizeVNode(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(n=>n!==t)),t}function queueEffectWithSuspense(t,e){e&&e.pendingBranch?isArray(t)?e.effects.push(...t):e.effects.push(t):queuePostFlushCb(t)}function setActiveBranch(t,e){t.activeBranch=e;const{vnode:n,parentComponent:r}=t,o=n.el=e.el;r&&r.subTree===n&&(r.vnode.el=o,updateHOCHostEl(r,o))}function provide(t,e){if(currentInstance){let n=currentInstance.provides;const r=currentInstance.parent&&currentInstance.parent.provides;r===n&&(n=currentInstance.provides=Object.create(r)),n[t]=e}}function inject(t,e,n=!1){const r=currentInstance||currentRenderingInstance;if(r){const o=r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(o&&t in o)return o[t];if(arguments.length>1)return n&&isFunction$1(e)?e.call(r.proxy):e}}function watchEffect(t,e){return doWatch(t,null,e)}function watchPostEffect(t,e){return doWatch(t,null,{flush:"post"})}function watchSyncEffect(t,e){return doWatch(t,null,{flush:"sync"})}const INITIAL_WATCHER_VALUE={};function watch(t,e,n){return doWatch(t,e,n)}function doWatch(t,e,{immediate:n,deep:r,flush:o,onTrack:s,onTrigger:a}=EMPTY_OBJ){const l=getCurrentScope()===(currentInstance==null?void 0:currentInstance.scope)?currentInstance:null;let c,u=!1,g=!1;if(isRef(t)?(c=()=>t.value,u=isShallow(t)):isReactive(t)?(c=()=>t,r=!0):isArray(t)?(g=!0,u=t.some(k=>isReactive(k)||isShallow(k)),c=()=>t.map(k=>{if(isRef(k))return k.value;if(isReactive(k))return traverse(k);if(isFunction$1(k))return callWithErrorHandling(k,l,2)})):isFunction$1(t)?e?c=()=>callWithErrorHandling(t,l,2):c=()=>{if(!(l&&l.isUnmounted))return C&&C(),callWithAsyncErrorHandling(t,l,3,[v])}:c=NOOP,e&&r){const k=c;c=()=>traverse(k())}let C,v=k=>{C=N.onStop=()=>{callWithErrorHandling(k,l,4)}},m;if(isInSSRComponentSetup)if(v=NOOP,e?n&&callWithAsyncErrorHandling(e,l,3,[c(),g?[]:void 0,v]):c(),o==="sync"){const k=useSSRContext();m=k.__watcherHandles||(k.__watcherHandles=[])}else return NOOP;let S=g?new Array(t.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const T=()=>{if(N.active)if(e){const k=N.run();(r||u||(g?k.some((L,H)=>hasChanged(L,S[H])):hasChanged(k,S)))&&(C&&C(),callWithAsyncErrorHandling(e,l,3,[k,S===INITIAL_WATCHER_VALUE?void 0:g&&S[0]===INITIAL_WATCHER_VALUE?[]:S,v]),S=k)}else N.run()};T.allowRecurse=!!e;let w;o==="sync"?w=T:o==="post"?w=()=>queuePostRenderEffect(T,l&&l.suspense):(T.pre=!0,l&&(T.id=l.uid),w=()=>queueJob(T));const N=new ReactiveEffect(c,w);e?n?T():S=N.run():o==="post"?queuePostRenderEffect(N.run.bind(N),l&&l.suspense):N.run();const D=()=>{N.stop(),l&&l.scope&&remove(l.scope.effects,N)};return m&&m.push(D),D}function instanceWatch(t,e,n){const r=this.proxy,o=isString(t)?t.includes(".")?createPathGetter(r,t):()=>r[t]:t.bind(r,r);let s;isFunction$1(e)?s=e:(s=e.handler,n=e);const a=currentInstance;setCurrentInstance(this);const l=doWatch(o,s.bind(r),n);return a?setCurrentInstance(a):unsetCurrentInstance(),l}function createPathGetter(t,e){const n=e.split(".");return()=>{let r=t;for(let o=0;o<n.length&&r;o++)r=r[n[o]];return r}}function traverse(t,e){if(!isObject(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),isRef(t))traverse(t.value,e);else if(isArray(t))for(let n=0;n<t.length;n++)traverse(t[n],e);else if(isSet(t)||isMap(t))t.forEach(n=>{traverse(n,e)});else if(isPlainObject$2(t))for(const n in t)traverse(t[n],e);return t}function useTransitionState(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{t.isMounted=!0}),onBeforeUnmount(()=>{t.isUnmounting=!0}),t}const TransitionHookValidator=[Function,Array],BaseTransitionImpl={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},setup(t,{slots:e}){const n=getCurrentInstance(),r=useTransitionState();let o;return()=>{const s=e.default&&getTransitionRawChildren(e.default(),!0);if(!s||!s.length)return;let a=s[0];if(s.length>1){for(const T of s)if(T.type!==Comment){a=T;break}}const l=toRaw(t),{mode:c}=l;if(r.isLeaving)return emptyPlaceholder(a);const u=getKeepAliveChild(a);if(!u)return emptyPlaceholder(a);const g=resolveTransitionHooks(u,l,r,n);setTransitionHooks(u,g);const C=n.subTree,v=C&&getKeepAliveChild(C);let m=!1;const{getTransitionKey:S}=u.type;if(S){const T=S();o===void 0?o=T:T!==o&&(o=T,m=!0)}if(v&&v.type!==Comment&&(!isSameVNodeType(u,v)||m)){const T=resolveTransitionHooks(v,l,r,n);if(setTransitionHooks(v,T),c==="out-in")return r.isLeaving=!0,T.afterLeave=()=>{r.isLeaving=!1,n.update.active!==!1&&n.update()},emptyPlaceholder(a);c==="in-out"&&u.type!==Comment&&(T.delayLeave=(w,N,D)=>{const k=getLeavingNodesForType(r,v);k[String(v.key)]=v,w._leaveCb=()=>{N(),w._leaveCb=void 0,delete g.delayedLeave},g.delayedLeave=D})}return a}}},BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function resolveTransitionHooks(t,e,n,r){const{appear:o,mode:s,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:u,onEnterCancelled:g,onBeforeLeave:C,onLeave:v,onAfterLeave:m,onLeaveCancelled:S,onBeforeAppear:T,onAppear:w,onAfterAppear:N,onAppearCancelled:D}=e,k=String(t.key),L=getLeavingNodesForType(n,t),H=(Y,K)=>{Y&&callWithAsyncErrorHandling(Y,r,9,K)},R=(Y,K)=>{const se=K[1];H(Y,K),isArray(Y)?Y.every(pe=>pe.length<=1)&&se():Y.length<=1&&se()},B={mode:s,persisted:a,beforeEnter(Y){let K=l;if(!n.isMounted)if(o)K=T||l;else return;Y._leaveCb&&Y._leaveCb(!0);const se=L[k];se&&isSameVNodeType(t,se)&&se.el._leaveCb&&se.el._leaveCb(),H(K,[Y])},enter(Y){let K=c,se=u,pe=g;if(!n.isMounted)if(o)K=w||c,se=N||u,pe=D||g;else return;let le=!1;const Ee=Y._enterCb=Ne=>{le||(le=!0,Ne?H(pe,[Y]):H(se,[Y]),B.delayedLeave&&B.delayedLeave(),Y._enterCb=void 0)};K?R(K,[Y,Ee]):Ee()},leave(Y,K){const se=String(t.key);if(Y._enterCb&&Y._enterCb(!0),n.isUnmounting)return K();H(C,[Y]);let pe=!1;const le=Y._leaveCb=Ee=>{pe||(pe=!0,K(),Ee?H(S,[Y]):H(m,[Y]),Y._leaveCb=void 0,L[se]===t&&delete L[se])};L[se]=t,v?R(v,[Y,le]):le()},clone(Y){return resolveTransitionHooks(Y,e,n,r)}};return B}function emptyPlaceholder(t){if(isKeepAlive(t))return t=cloneVNode(t),t.children=null,t}function getKeepAliveChild(t){return isKeepAlive(t)?t.children?t.children[0]:void 0:t}function setTransitionHooks(t,e){t.shapeFlag&6&&t.component?setTransitionHooks(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function getTransitionRawChildren(t,e=!1,n){let r=[],o=0;for(let s=0;s<t.length;s++){let a=t[s];const l=n==null?a.key:String(n)+String(a.key!=null?a.key:s);a.type===Fragment$1?(a.patchFlag&128&&o++,r=r.concat(getTransitionRawChildren(a.children,e,l))):(e||a.type!==Comment)&&r.push(l!=null?cloneVNode(a,{key:l}):a)}if(o>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}function defineComponent(t){return isFunction$1(t)?{setup:t,name:t.name}:t}const isAsyncWrapper=t=>!!t.type.__asyncLoader;function defineAsyncComponent(t){isFunction$1(t)&&(t={loader:t});const{loader:e,loadingComponent:n,errorComponent:r,delay:o=200,timeout:s,suspensible:a=!0,onError:l}=t;let c=null,u,g=0;const C=()=>(g++,c=null,v()),v=()=>{let m;return c||(m=c=e().catch(S=>{if(S=S instanceof Error?S:new Error(String(S)),l)return new Promise((T,w)=>{l(S,()=>T(C()),()=>w(S),g+1)});throw S}).then(S=>m!==c&&c?c:(S&&(S.__esModule||S[Symbol.toStringTag]==="Module")&&(S=S.default),u=S,S)))};return defineComponent({name:"AsyncComponentWrapper",__asyncLoader:v,get __asyncResolved(){return u},setup(){const m=currentInstance;if(u)return()=>createInnerComp(u,m);const S=D=>{c=null,handleError(D,m,13,!r)};if(a&&m.suspense||isInSSRComponentSetup)return v().then(D=>()=>createInnerComp(D,m)).catch(D=>(S(D),()=>r?createVNode(r,{error:D}):null));const T=ref(!1),w=ref(),N=ref(!!o);return o&&setTimeout(()=>{N.value=!1},o),s!=null&&setTimeout(()=>{if(!T.value&&!w.value){const D=new Error(`Async component timed out after ${s}ms.`);S(D),w.value=D}},s),v().then(()=>{T.value=!0,m.parent&&isKeepAlive(m.parent.vnode)&&queueJob(m.parent.update)}).catch(D=>{S(D),w.value=D}),()=>{if(T.value&&u)return createInnerComp(u,m);if(w.value&&r)return createVNode(r,{error:w.value});if(n&&!N.value)return createVNode(n)}}})}function createInnerComp(t,e){const{ref:n,props:r,children:o,ce:s}=e.vnode,a=createVNode(t,r,o);return a.ref=n,a.ce=s,delete e.vnode.ce,a}const isKeepAlive=t=>t.type.__isKeepAlive,KeepAliveImpl={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const n=getCurrentInstance(),r=n.ctx;if(!r.renderer)return()=>{const D=e.default&&e.default();return D&&D.length===1?D[0]:D};const o=new Map,s=new Set;let a=null;const l=n.suspense,{renderer:{p:c,m:u,um:g,o:{createElement:C}}}=r,v=C("div");r.activate=(D,k,L,H,R)=>{const B=D.component;u(D,k,L,0,l),c(B.vnode,D,k,L,B,l,H,D.slotScopeIds,R),queuePostRenderEffect(()=>{B.isDeactivated=!1,B.a&&invokeArrayFns(B.a);const Y=D.props&&D.props.onVnodeMounted;Y&&invokeVNodeHook(Y,B.parent,D)},l)},r.deactivate=D=>{const k=D.component;u(D,v,null,1,l),queuePostRenderEffect(()=>{k.da&&invokeArrayFns(k.da);const L=D.props&&D.props.onVnodeUnmounted;L&&invokeVNodeHook(L,k.parent,D),k.isDeactivated=!0},l)};function m(D){resetShapeFlag(D),g(D,n,l,!0)}function S(D){o.forEach((k,L)=>{const H=getComponentName(k.type);H&&(!D||!D(H))&&T(L)})}function T(D){const k=o.get(D);!a||!isSameVNodeType(k,a)?m(k):a&&resetShapeFlag(a),o.delete(D),s.delete(D)}watch(()=>[t.include,t.exclude],([D,k])=>{D&&S(L=>matches$1(D,L)),k&&S(L=>!matches$1(k,L))},{flush:"post",deep:!0});let w=null;const N=()=>{w!=null&&o.set(w,getInnerChild(n.subTree))};return onMounted(N),onUpdated(N),onBeforeUnmount(()=>{o.forEach(D=>{const{subTree:k,suspense:L}=n,H=getInnerChild(k);if(D.type===H.type&&D.key===H.key){resetShapeFlag(H);const R=H.component.da;R&&queuePostRenderEffect(R,L);return}m(D)})}),()=>{if(w=null,!e.default)return null;const D=e.default(),k=D[0];if(D.length>1)return a=null,D;if(!isVNode(k)||!(k.shapeFlag&4)&&!(k.shapeFlag&128))return a=null,k;let L=getInnerChild(k);const H=L.type,R=getComponentName(isAsyncWrapper(L)?L.type.__asyncResolved||{}:H),{include:B,exclude:Y,max:K}=t;if(B&&(!R||!matches$1(B,R))||Y&&R&&matches$1(Y,R))return a=L,k;const se=L.key==null?H:L.key,pe=o.get(se);return L.el&&(L=cloneVNode(L),k.shapeFlag&128&&(k.ssContent=L)),w=se,pe?(L.el=pe.el,L.component=pe.component,L.transition&&setTransitionHooks(L,L.transition),L.shapeFlag|=512,s.delete(se),s.add(se)):(s.add(se),K&&s.size>parseInt(K,10)&&T(s.values().next().value)),L.shapeFlag|=256,a=L,isSuspense(k.type)?k:L}}},KeepAlive=KeepAliveImpl;function matches$1(t,e){return isArray(t)?t.some(n=>matches$1(n,e)):isString(t)?t.split(",").includes(e):isRegExp$1(t)?t.test(e):!1}function onActivated(t,e){registerKeepAliveHook(t,"a",e)}function onDeactivated(t,e){registerKeepAliveHook(t,"da",e)}function registerKeepAliveHook(t,e,n=currentInstance){const r=t.__wdc||(t.__wdc=()=>{let o=n;for(;o;){if(o.isDeactivated)return;o=o.parent}return t()});if(injectHook(e,r,n),n){let o=n.parent;for(;o&&o.parent;)isKeepAlive(o.parent.vnode)&&injectToKeepAliveRoot(r,e,n,o),o=o.parent}}function injectToKeepAliveRoot(t,e,n,r){const o=injectHook(e,t,r,!0);onUnmounted(()=>{remove(r[e],o)},n)}function resetShapeFlag(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function getInnerChild(t){return t.shapeFlag&128?t.ssContent:t}function injectHook(t,e,n=currentInstance,r=!1){if(n){const o=n[t]||(n[t]=[]),s=e.__weh||(e.__weh=(...a)=>{if(n.isUnmounted)return;pauseTracking(),setCurrentInstance(n);const l=callWithAsyncErrorHandling(e,n,t,a);return unsetCurrentInstance(),resetTracking(),l});return r?o.unshift(s):o.push(s),s}}const createHook=t=>(e,n=currentInstance)=>(!isInSSRComponentSetup||t==="sp")&&injectHook(t,(...r)=>e(...r),n),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(t,e=currentInstance){injectHook("ec",t,e)}function withDirectives(t,e){const n=currentRenderingInstance;if(n===null)return t;const r=getExposeProxy(n)||n.proxy,o=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[a,l,c,u=EMPTY_OBJ]=e[s];a&&(isFunction$1(a)&&(a={mounted:a,updated:a}),a.deep&&traverse(l),o.push({dir:a,instance:r,value:l,oldValue:void 0,arg:c,modifiers:u}))}return t}function invokeDirectiveHook(t,e,n,r){const o=t.dirs,s=e&&e.dirs;for(let a=0;a<o.length;a++){const l=o[a];s&&(l.oldValue=s[a].value);let c=l.dir[r];c&&(pauseTracking(),callWithAsyncErrorHandling(c,n,8,[t.el,l,t,e]),resetTracking())}}const COMPONENTS="components",DIRECTIVES="directives";function resolveComponent(t,e){return resolveAsset(COMPONENTS,t,!0,e)||t}const NULL_DYNAMIC_COMPONENT=Symbol();function resolveDynamicComponent(t){return isString(t)?resolveAsset(COMPONENTS,t,!1)||t:t||NULL_DYNAMIC_COMPONENT}function resolveDirective(t){return resolveAsset(DIRECTIVES,t)}function resolveAsset(t,e,n=!0,r=!1){const o=currentRenderingInstance||currentInstance;if(o){const s=o.type;if(t===COMPONENTS){const l=getComponentName(s,!1);if(l&&(l===e||l===camelize$1(e)||l===capitalize(camelize$1(e))))return s}const a=resolve(o[t]||s[t],e)||resolve(o.appContext[t],e);return!a&&r?s:a}}function resolve(t,e){return t&&(t[e]||t[camelize$1(e)]||t[capitalize(camelize$1(e))])}function renderList(t,e,n,r){let o;const s=n&&n[r];if(isArray(t)||isString(t)){o=new Array(t.length);for(let a=0,l=t.length;a<l;a++)o[a]=e(t[a],a,void 0,s&&s[a])}else if(typeof t=="number"){o=new Array(t);for(let a=0;a<t;a++)o[a]=e(a+1,a,void 0,s&&s[a])}else if(isObject(t))if(t[Symbol.iterator])o=Array.from(t,(a,l)=>e(a,l,void 0,s&&s[l]));else{const a=Object.keys(t);o=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const u=a[l];o[l]=e(t[u],u,l,s&&s[l])}}else o=[];return n&&(n[r]=o),o}function createSlots(t,e){for(let n=0;n<e.length;n++){const r=e[n];if(isArray(r))for(let o=0;o<r.length;o++)t[r[o].name]=r[o].fn;else r&&(t[r.name]=r.key?(...o)=>{const s=r.fn(...o);return s&&(s.key=r.key),s}:r.fn)}return t}function renderSlot(t,e,n={},r,o){if(currentRenderingInstance.isCE||currentRenderingInstance.parent&&isAsyncWrapper(currentRenderingInstance.parent)&&currentRenderingInstance.parent.isCE)return e!=="default"&&(n.name=e),createVNode("slot",n,r&&r());let s=t[e];s&&s._c&&(s._d=!1),openBlock();const a=s&&ensureValidVNode(s(n)),l=createBlock(Fragment$1,{key:n.key||a&&a.key||`_${e}`},a||(r?r():[]),a&&t._===1?64:-2);return!o&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),s&&s._c&&(s._d=!0),l}function ensureValidVNode(t){return t.some(e=>isVNode(e)?!(e.type===Comment||e.type===Fragment$1&&!ensureValidVNode(e.children)):!0)?t:null}function toHandlers(t,e){const n={};for(const r in t)n[e&&/[A-Z]/.test(r)?`on:${r}`:toHandlerKey(r)]=t[r];return n}const getPublicInstance=t=>t?isStatefulComponent(t)?getExposeProxy(t)||t.proxy:getPublicInstance(t.parent):null,publicPropertiesMap=extend(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>getPublicInstance(t.parent),$root:t=>getPublicInstance(t.root),$emit:t=>t.emit,$options:t=>resolveMergedOptions(t),$forceUpdate:t=>t.f||(t.f=()=>queueJob(t.update)),$nextTick:t=>t.n||(t.n=nextTick.bind(t.proxy)),$watch:t=>instanceWatch.bind(t)}),hasSetupBinding=(t,e)=>t!==EMPTY_OBJ&&!t.__isScriptSetup&&hasOwn(t,e),PublicInstanceProxyHandlers={get({_:t},e){const{ctx:n,setupState:r,data:o,props:s,accessCache:a,type:l,appContext:c}=t;let u;if(e[0]!=="$"){const m=a[e];if(m!==void 0)switch(m){case 1:return r[e];case 2:return o[e];case 4:return n[e];case 3:return s[e]}else{if(hasSetupBinding(r,e))return a[e]=1,r[e];if(o!==EMPTY_OBJ&&hasOwn(o,e))return a[e]=2,o[e];if((u=t.propsOptions[0])&&hasOwn(u,e))return a[e]=3,s[e];if(n!==EMPTY_OBJ&&hasOwn(n,e))return a[e]=4,n[e];shouldCacheAccess&&(a[e]=0)}}const g=publicPropertiesMap[e];let C,v;if(g)return e==="$attrs"&&track(t,"get",e),g(t);if((C=l.__cssModules)&&(C=C[e]))return C;if(n!==EMPTY_OBJ&&hasOwn(n,e))return a[e]=4,n[e];if(v=c.config.globalProperties,hasOwn(v,e))return v[e]},set({_:t},e,n){const{data:r,setupState:o,ctx:s}=t;return hasSetupBinding(o,e)?(o[e]=n,!0):r!==EMPTY_OBJ&&hasOwn(r,e)?(r[e]=n,!0):hasOwn(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:o,propsOptions:s}},a){let l;return!!n[a]||t!==EMPTY_OBJ&&hasOwn(t,a)||hasSetupBinding(e,a)||(l=s[0])&&hasOwn(l,a)||hasOwn(r,a)||hasOwn(publicPropertiesMap,a)||hasOwn(o.config.globalProperties,a)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:hasOwn(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}},RuntimeCompiledPublicInstanceProxyHandlers=extend({},PublicInstanceProxyHandlers,{get(t,e){if(e!==Symbol.unscopables)return PublicInstanceProxyHandlers.get(t,e,t)},has(t,e){return e[0]!=="_"&&!isGloballyWhitelisted(e)}});let shouldCacheAccess=!0;function applyOptions(t){const e=resolveMergedOptions(t),n=t.proxy,r=t.ctx;shouldCacheAccess=!1,e.beforeCreate&&callHook$1(e.beforeCreate,t,"bc");const{data:o,computed:s,methods:a,watch:l,provide:c,inject:u,created:g,beforeMount:C,mounted:v,beforeUpdate:m,updated:S,activated:T,deactivated:w,beforeDestroy:N,beforeUnmount:D,destroyed:k,unmounted:L,render:H,renderTracked:R,renderTriggered:B,errorCaptured:Y,serverPrefetch:K,expose:se,inheritAttrs:pe,components:le,directives:Ee,filters:Ne}=e;if(u&&resolveInjections(u,r,null,t.appContext.config.unwrapInjectedRef),a)for(const Ke in a){const Ye=a[Ke];isFunction$1(Ye)&&(r[Ke]=Ye.bind(n))}if(o){const Ke=o.call(n,n);isObject(Ke)&&(t.data=reactive(Ke))}if(shouldCacheAccess=!0,s)for(const Ke in s){const Ye=s[Ke],pt=isFunction$1(Ye)?Ye.bind(n,n):isFunction$1(Ye.get)?Ye.get.bind(n,n):NOOP,ut=!isFunction$1(Ye)&&isFunction$1(Ye.set)?Ye.set.bind(n):NOOP,It=computed({get:pt,set:ut});Object.defineProperty(r,Ke,{enumerable:!0,configurable:!0,get:()=>It.value,set:te=>It.value=te})}if(l)for(const Ke in l)createWatcher(l[Ke],r,n,Ke);if(c){const Ke=isFunction$1(c)?c.call(n):c;Reflect.ownKeys(Ke).forEach(Ye=>{provide(Ye,Ke[Ye])})}g&&callHook$1(g,t,"c");function me(Ke,Ye){isArray(Ye)?Ye.forEach(pt=>Ke(pt.bind(n))):Ye&&Ke(Ye.bind(n))}if(me(onBeforeMount,C),me(onMounted,v),me(onBeforeUpdate,m),me(onUpdated,S),me(onActivated,T),me(onDeactivated,w),me(onErrorCaptured,Y),me(onRenderTracked,R),me(onRenderTriggered,B),me(onBeforeUnmount,D),me(onUnmounted,L),me(onServerPrefetch,K),isArray(se))if(se.length){const Ke=t.exposed||(t.exposed={});se.forEach(Ye=>{Object.defineProperty(Ke,Ye,{get:()=>n[Ye],set:pt=>n[Ye]=pt})})}else t.exposed||(t.exposed={});H&&t.render===NOOP&&(t.render=H),pe!=null&&(t.inheritAttrs=pe),le&&(t.components=le),Ee&&(t.directives=Ee)}function resolveInjections(t,e,n=NOOP,r=!1){isArray(t)&&(t=normalizeInject(t));for(const o in t){const s=t[o];let a;isObject(s)?"default"in s?a=inject(s.from||o,s.default,!0):a=inject(s.from||o):a=inject(s),isRef(a)&&r?Object.defineProperty(e,o,{enumerable:!0,configurable:!0,get:()=>a.value,set:l=>a.value=l}):e[o]=a}}function callHook$1(t,e,n){callWithAsyncErrorHandling(isArray(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function createWatcher(t,e,n,r){const o=r.includes(".")?createPathGetter(n,r):()=>n[r];if(isString(t)){const s=e[t];isFunction$1(s)&&watch(o,s)}else if(isFunction$1(t))watch(o,t.bind(n));else if(isObject(t))if(isArray(t))t.forEach(s=>createWatcher(s,e,n,r));else{const s=isFunction$1(t.handler)?t.handler.bind(n):e[t.handler];isFunction$1(s)&&watch(o,s,t)}}function resolveMergedOptions(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:o,optionsCache:s,config:{optionMergeStrategies:a}}=t.appContext,l=s.get(e);let c;return l?c=l:!o.length&&!n&&!r?c=e:(c={},o.length&&o.forEach(u=>mergeOptions(c,u,a,!0)),mergeOptions(c,e,a)),isObject(e)&&s.set(e,c),c}function mergeOptions(t,e,n,r=!1){const{mixins:o,extends:s}=e;s&&mergeOptions(t,s,n,!0),o&&o.forEach(a=>mergeOptions(t,a,n,!0));for(const a in e)if(!(r&&a==="expose")){const l=internalOptionMergeStrats[a]||n&&n[a];t[a]=l?l(t[a],e[a]):e[a]}return t}const internalOptionMergeStrats={data:mergeDataFn,props:mergeObjectOptions,emits:mergeObjectOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray$1,created:mergeAsArray$1,beforeMount:mergeAsArray$1,mounted:mergeAsArray$1,beforeUpdate:mergeAsArray$1,updated:mergeAsArray$1,beforeDestroy:mergeAsArray$1,beforeUnmount:mergeAsArray$1,destroyed:mergeAsArray$1,unmounted:mergeAsArray$1,activated:mergeAsArray$1,deactivated:mergeAsArray$1,errorCaptured:mergeAsArray$1,serverPrefetch:mergeAsArray$1,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(t,e){return e?t?function(){return extend(isFunction$1(t)?t.call(this,this):t,isFunction$1(e)?e.call(this,this):e)}:e:t}function mergeInject(t,e){return mergeObjectOptions(normalizeInject(t),normalizeInject(e))}function normalizeInject(t){if(isArray(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function mergeAsArray$1(t,e){return t?[...new Set([].concat(t,e))]:e}function mergeObjectOptions(t,e){return t?extend(extend(Object.create(null),t),e):e}function mergeWatchOptions(t,e){if(!t)return e;if(!e)return t;const n=extend(Object.create(null),t);for(const r in e)n[r]=mergeAsArray$1(t[r],e[r]);return n}function initProps(t,e,n,r=!1){const o={},s={};def(s,InternalObjectKey,1),t.propsDefaults=Object.create(null),setFullProps(t,e,o,s);for(const a in t.propsOptions[0])a in o||(o[a]=void 0);n?t.props=r?o:shallowReactive(o):t.type.props?t.props=o:t.props=s,t.attrs=s}function updateProps(t,e,n,r){const{props:o,attrs:s,vnode:{patchFlag:a}}=t,l=toRaw(o),[c]=t.propsOptions;let u=!1;if((r||a>0)&&!(a&16)){if(a&8){const g=t.vnode.dynamicProps;for(let C=0;C<g.length;C++){let v=g[C];if(isEmitListener(t.emitsOptions,v))continue;const m=e[v];if(c)if(hasOwn(s,v))m!==s[v]&&(s[v]=m,u=!0);else{const S=camelize$1(v);o[S]=resolvePropValue(c,l,S,m,t,!1)}else m!==s[v]&&(s[v]=m,u=!0)}}}else{setFullProps(t,e,o,s)&&(u=!0);let g;for(const C in l)(!e||!hasOwn(e,C)&&((g=hyphenate(C))===C||!hasOwn(e,g)))&&(c?n&&(n[C]!==void 0||n[g]!==void 0)&&(o[C]=resolvePropValue(c,l,C,void 0,t,!0)):delete o[C]);if(s!==l)for(const C in s)(!e||!hasOwn(e,C))&&(delete s[C],u=!0)}u&&trigger(t,"set","$attrs")}function setFullProps(t,e,n,r){const[o,s]=t.propsOptions;let a=!1,l;if(e)for(let c in e){if(isReservedProp(c))continue;const u=e[c];let g;o&&hasOwn(o,g=camelize$1(c))?!s||!s.includes(g)?n[g]=u:(l||(l={}))[g]=u:isEmitListener(t.emitsOptions,c)||(!(c in r)||u!==r[c])&&(r[c]=u,a=!0)}if(s){const c=toRaw(n),u=l||EMPTY_OBJ;for(let g=0;g<s.length;g++){const C=s[g];n[C]=resolvePropValue(o,c,C,u[C],t,!hasOwn(u,C))}}return a}function resolvePropValue(t,e,n,r,o,s){const a=t[n];if(a!=null){const l=hasOwn(a,"default");if(l&&r===void 0){const c=a.default;if(a.type!==Function&&isFunction$1(c)){const{propsDefaults:u}=o;n in u?r=u[n]:(setCurrentInstance(o),r=u[n]=c.call(null,e),unsetCurrentInstance())}else r=c}a[0]&&(s&&!l?r=!1:a[1]&&(r===""||r===hyphenate(n))&&(r=!0))}return r}function normalizePropsOptions(t,e,n=!1){const r=e.propsCache,o=r.get(t);if(o)return o;const s=t.props,a={},l=[];let c=!1;if(!isFunction$1(t)){const g=C=>{c=!0;const[v,m]=normalizePropsOptions(C,e,!0);extend(a,v),m&&l.push(...m)};!n&&e.mixins.length&&e.mixins.forEach(g),t.extends&&g(t.extends),t.mixins&&t.mixins.forEach(g)}if(!s&&!c)return isObject(t)&&r.set(t,EMPTY_ARR),EMPTY_ARR;if(isArray(s))for(let g=0;g<s.length;g++){const C=camelize$1(s[g]);validatePropName(C)&&(a[C]=EMPTY_OBJ)}else if(s)for(const g in s){const C=camelize$1(g);if(validatePropName(C)){const v=s[g],m=a[C]=isArray(v)||isFunction$1(v)?{type:v}:Object.assign({},v);if(m){const S=getTypeIndex(Boolean,m.type),T=getTypeIndex(String,m.type);m[0]=S>-1,m[1]=T<0||S<T,(S>-1||hasOwn(m,"default"))&&l.push(C)}}}const u=[a,l];return isObject(t)&&r.set(t,u),u}function validatePropName(t){return t[0]!=="$"}function getType$1(t){const e=t&&t.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:t===null?"null":""}function isSameType(t,e){return getType$1(t)===getType$1(e)}function getTypeIndex(t,e){return isArray(e)?e.findIndex(n=>isSameType(n,t)):isFunction$1(e)&&isSameType(e,t)?0:-1}const isInternalKey=t=>t[0]==="_"||t==="$stable",normalizeSlotValue=t=>isArray(t)?t.map(normalizeVNode):[normalizeVNode(t)],normalizeSlot=(t,e,n)=>{if(e._n)return e;const r=withCtx((...o)=>normalizeSlotValue(e(...o)),n);return r._c=!1,r},normalizeObjectSlots=(t,e,n)=>{const r=t._ctx;for(const o in t){if(isInternalKey(o))continue;const s=t[o];if(isFunction$1(s))e[o]=normalizeSlot(o,s,r);else if(s!=null){const a=normalizeSlotValue(s);e[o]=()=>a}}},normalizeVNodeSlots=(t,e)=>{const n=normalizeSlotValue(e);t.slots.default=()=>n},initSlots=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=toRaw(e),def(e,"_",n)):normalizeObjectSlots(e,t.slots={})}else t.slots={},e&&normalizeVNodeSlots(t,e);def(t.slots,InternalObjectKey,1)},updateSlots=(t,e,n)=>{const{vnode:r,slots:o}=t;let s=!0,a=EMPTY_OBJ;if(r.shapeFlag&32){const l=e._;l?n&&l===1?s=!1:(extend(o,e),!n&&l===1&&delete o._):(s=!e.$stable,normalizeObjectSlots(e,o)),a=e}else e&&(normalizeVNodeSlots(t,e),a={default:1});if(s)for(const l in o)!isInternalKey(l)&&!(l in a)&&delete o[l]};function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(t,e){return function(r,o=null){isFunction$1(r)||(r=Object.assign({},r)),o!=null&&!isObject(o)&&(o=null);const s=createAppContext(),a=new Set;let l=!1;const c=s.app={_uid:uid$1++,_component:r,_props:o,_container:null,_context:s,_instance:null,version,get config(){return s.config},set config(u){},use(u,...g){return a.has(u)||(u&&isFunction$1(u.install)?(a.add(u),u.install(c,...g)):isFunction$1(u)&&(a.add(u),u(c,...g))),c},mixin(u){return s.mixins.includes(u)||s.mixins.push(u),c},component(u,g){return g?(s.components[u]=g,c):s.components[u]},directive(u,g){return g?(s.directives[u]=g,c):s.directives[u]},mount(u,g,C){if(!l){const v=createVNode(r,o);return v.appContext=s,g&&e?e(v,u):t(v,u,C),l=!0,c._container=u,u.__vue_app__=c,getExposeProxy(v.component)||v.component.proxy}},unmount(){l&&(t(null,c._container),delete c._container.__vue_app__)},provide(u,g){return s.provides[u]=g,c}};return c}}function setRef(t,e,n,r,o=!1){if(isArray(t)){t.forEach((v,m)=>setRef(v,e&&(isArray(e)?e[m]:e),n,r,o));return}if(isAsyncWrapper(r)&&!o)return;const s=r.shapeFlag&4?getExposeProxy(r.component)||r.component.proxy:r.el,a=o?null:s,{i:l,r:c}=t,u=e&&e.r,g=l.refs===EMPTY_OBJ?l.refs={}:l.refs,C=l.setupState;if(u!=null&&u!==c&&(isString(u)?(g[u]=null,hasOwn(C,u)&&(C[u]=null)):isRef(u)&&(u.value=null)),isFunction$1(c))callWithErrorHandling(c,l,12,[a,g]);else{const v=isString(c),m=isRef(c);if(v||m){const S=()=>{if(t.f){const T=v?hasOwn(C,c)?C[c]:g[c]:c.value;o?isArray(T)&&remove(T,s):isArray(T)?T.includes(s)||T.push(s):v?(g[c]=[s],hasOwn(C,c)&&(C[c]=g[c])):(c.value=[s],t.k&&(g[t.k]=c.value))}else v?(g[c]=a,hasOwn(C,c)&&(C[c]=a)):m&&(c.value=a,t.k&&(g[t.k]=a))};a?(S.id=-1,queuePostRenderEffect(S,n)):S()}}}let hasMismatch=!1;const isSVGContainer=t=>/svg/.test(t.namespaceURI)&&t.tagName!=="foreignObject",isComment=t=>t.nodeType===8;function createHydrationFunctions(t){const{mt:e,p:n,o:{patchProp:r,createText:o,nextSibling:s,parentNode:a,remove:l,insert:c,createComment:u}}=t,g=(N,D)=>{if(!D.hasChildNodes()){n(null,N,D),flushPostFlushCbs(),D._vnode=N;return}hasMismatch=!1,C(D.firstChild,N,null,null,null),flushPostFlushCbs(),D._vnode=N,hasMismatch&&console.error("Hydration completed but contains mismatches.")},C=(N,D,k,L,H,R=!1)=>{const B=isComment(N)&&N.data==="[",Y=()=>T(N,D,k,L,H,B),{type:K,ref:se,shapeFlag:pe,patchFlag:le}=D;let Ee=N.nodeType;D.el=N,le===-2&&(R=!1,D.dynamicChildren=null);let Ne=null;switch(K){case Text$2:Ee!==3?D.children===""?(c(D.el=o(""),a(N),N),Ne=N):Ne=Y():(N.data!==D.children&&(hasMismatch=!0,N.data=D.children),Ne=s(N));break;case Comment:Ee!==8||B?Ne=Y():Ne=s(N);break;case Static:if(B&&(N=s(N),Ee=N.nodeType),Ee===1||Ee===3){Ne=N;const _e=!D.children.length;for(let me=0;me<D.staticCount;me++)_e&&(D.children+=Ne.nodeType===1?Ne.outerHTML:Ne.data),me===D.staticCount-1&&(D.anchor=Ne),Ne=s(Ne);return B?s(Ne):Ne}else Y();break;case Fragment$1:B?Ne=S(N,D,k,L,H,R):Ne=Y();break;default:if(pe&1)Ee!==1||D.type.toLowerCase()!==N.tagName.toLowerCase()?Ne=Y():Ne=v(N,D,k,L,H,R);else if(pe&6){D.slotScopeIds=H;const _e=a(N);if(e(D,_e,null,k,L,isSVGContainer(_e),R),Ne=B?w(N):s(N),Ne&&isComment(Ne)&&Ne.data==="teleport end"&&(Ne=s(Ne)),isAsyncWrapper(D)){let me;B?(me=createVNode(Fragment$1),me.anchor=Ne?Ne.previousSibling:_e.lastChild):me=N.nodeType===3?createTextVNode(""):createVNode("div"),me.el=N,D.component.subTree=me}}else pe&64?Ee!==8?Ne=Y():Ne=D.type.hydrate(N,D,k,L,H,R,t,m):pe&128&&(Ne=D.type.hydrate(N,D,k,L,isSVGContainer(a(N)),H,R,t,C))}return se!=null&&setRef(se,null,L,D),Ne},v=(N,D,k,L,H,R)=>{R=R||!!D.dynamicChildren;const{type:B,props:Y,patchFlag:K,shapeFlag:se,dirs:pe}=D,le=B==="input"&&pe||B==="option";if(le||K!==-1){if(pe&&invokeDirectiveHook(D,null,k,"created"),Y)if(le||!R||K&48)for(const Ne in Y)(le&&Ne.endsWith("value")||isOn(Ne)&&!isReservedProp(Ne))&&r(N,Ne,null,Y[Ne],!1,void 0,k);else Y.onClick&&r(N,"onClick",null,Y.onClick,!1,void 0,k);let Ee;if((Ee=Y&&Y.onVnodeBeforeMount)&&invokeVNodeHook(Ee,k,D),pe&&invokeDirectiveHook(D,null,k,"beforeMount"),((Ee=Y&&Y.onVnodeMounted)||pe)&&queueEffectWithSuspense(()=>{Ee&&invokeVNodeHook(Ee,k,D),pe&&invokeDirectiveHook(D,null,k,"mounted")},L),se&16&&!(Y&&(Y.innerHTML||Y.textContent))){let Ne=m(N.firstChild,D,N,k,L,H,R);for(;Ne;){hasMismatch=!0;const _e=Ne;Ne=Ne.nextSibling,l(_e)}}else se&8&&N.textContent!==D.children&&(hasMismatch=!0,N.textContent=D.children)}return N.nextSibling},m=(N,D,k,L,H,R,B)=>{B=B||!!D.dynamicChildren;const Y=D.children,K=Y.length;for(let se=0;se<K;se++){const pe=B?Y[se]:Y[se]=normalizeVNode(Y[se]);if(N)N=C(N,pe,L,H,R,B);else{if(pe.type===Text$2&&!pe.children)continue;hasMismatch=!0,n(null,pe,k,null,L,H,isSVGContainer(k),R)}}return N},S=(N,D,k,L,H,R)=>{const{slotScopeIds:B}=D;B&&(H=H?H.concat(B):B);const Y=a(N),K=m(s(N),D,Y,k,L,H,R);return K&&isComment(K)&&K.data==="]"?s(D.anchor=K):(hasMismatch=!0,c(D.anchor=u("]"),Y,K),K)},T=(N,D,k,L,H,R)=>{if(hasMismatch=!0,D.el=null,R){const K=w(N);for(;;){const se=s(N);if(se&&se!==K)l(se);else break}}const B=s(N),Y=a(N);return l(N),n(null,D,Y,B,k,L,isSVGContainer(Y),H),B},w=N=>{let D=0;for(;N;)if(N=s(N),N&&isComment(N)&&(N.data==="["&&D++,N.data==="]")){if(D===0)return s(N);D--}return N};return[g,C]}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(t){return baseCreateRenderer(t)}function createHydrationRenderer(t){return baseCreateRenderer(t,createHydrationFunctions)}function baseCreateRenderer(t,e){const n=getGlobalThis();n.__VUE__=!0;const{insert:r,remove:o,patchProp:s,createElement:a,createText:l,createComment:c,setText:u,setElementText:g,parentNode:C,nextSibling:v,setScopeId:m=NOOP,insertStaticContent:S}=t,T=(ge,Te,Ie,$e=null,Be=null,nt=null,ft=!1,st=null,at=!!Te.dynamicChildren)=>{if(ge===Te)return;ge&&!isSameVNodeType(ge,Te)&&($e=Ze(ge),te(ge,Be,nt,!0),ge=null),Te.patchFlag===-2&&(at=!1,Te.dynamicChildren=null);const{type:Fe,ref:Ct,shapeFlag:mt}=Te;switch(Fe){case Text$2:w(ge,Te,Ie,$e);break;case Comment:N(ge,Te,Ie,$e);break;case Static:ge==null&&D(Te,Ie,$e,ft);break;case Fragment$1:le(ge,Te,Ie,$e,Be,nt,ft,st,at);break;default:mt&1?H(ge,Te,Ie,$e,Be,nt,ft,st,at):mt&6?Ee(ge,Te,Ie,$e,Be,nt,ft,st,at):(mt&64||mt&128)&&Fe.process(ge,Te,Ie,$e,Be,nt,ft,st,at,ht)}Ct!=null&&Be&&setRef(Ct,ge&&ge.ref,nt,Te||ge,!Te)},w=(ge,Te,Ie,$e)=>{if(ge==null)r(Te.el=l(Te.children),Ie,$e);else{const Be=Te.el=ge.el;Te.children!==ge.children&&u(Be,Te.children)}},N=(ge,Te,Ie,$e)=>{ge==null?r(Te.el=c(Te.children||""),Ie,$e):Te.el=ge.el},D=(ge,Te,Ie,$e)=>{[ge.el,ge.anchor]=S(ge.children,Te,Ie,$e,ge.el,ge.anchor)},k=({el:ge,anchor:Te},Ie,$e)=>{let Be;for(;ge&&ge!==Te;)Be=v(ge),r(ge,Ie,$e),ge=Be;r(Te,Ie,$e)},L=({el:ge,anchor:Te})=>{let Ie;for(;ge&&ge!==Te;)Ie=v(ge),o(ge),ge=Ie;o(Te)},H=(ge,Te,Ie,$e,Be,nt,ft,st,at)=>{ft=ft||Te.type==="svg",ge==null?R(Te,Ie,$e,Be,nt,ft,st,at):K(ge,Te,Be,nt,ft,st,at)},R=(ge,Te,Ie,$e,Be,nt,ft,st)=>{let at,Fe;const{type:Ct,props:mt,shapeFlag:F,transition:V,dirs:O}=ge;if(at=ge.el=a(ge.type,nt,mt&&mt.is,mt),F&8?g(at,ge.children):F&16&&Y(ge.children,at,null,$e,Be,nt&&Ct!=="foreignObject",ft,st),O&&invokeDirectiveHook(ge,null,$e,"created"),B(at,ge,ge.scopeId,ft,$e),mt){for(const J in mt)J!=="value"&&!isReservedProp(J)&&s(at,J,null,mt[J],nt,ge.children,$e,Be,_t);"value"in mt&&s(at,"value",null,mt.value),(Fe=mt.onVnodeBeforeMount)&&invokeVNodeHook(Fe,$e,ge)}O&&invokeDirectiveHook(ge,null,$e,"beforeMount");const A=(!Be||Be&&!Be.pendingBranch)&&V&&!V.persisted;A&&V.beforeEnter(at),r(at,Te,Ie),((Fe=mt&&mt.onVnodeMounted)||A||O)&&queuePostRenderEffect(()=>{Fe&&invokeVNodeHook(Fe,$e,ge),A&&V.enter(at),O&&invokeDirectiveHook(ge,null,$e,"mounted")},Be)},B=(ge,Te,Ie,$e,Be)=>{if(Ie&&m(ge,Ie),$e)for(let nt=0;nt<$e.length;nt++)m(ge,$e[nt]);if(Be){let nt=Be.subTree;if(Te===nt){const ft=Be.vnode;B(ge,ft,ft.scopeId,ft.slotScopeIds,Be.parent)}}},Y=(ge,Te,Ie,$e,Be,nt,ft,st,at=0)=>{for(let Fe=at;Fe<ge.length;Fe++){const Ct=ge[Fe]=st?cloneIfMounted(ge[Fe]):normalizeVNode(ge[Fe]);T(null,Ct,Te,Ie,$e,Be,nt,ft,st)}},K=(ge,Te,Ie,$e,Be,nt,ft)=>{const st=Te.el=ge.el;let{patchFlag:at,dynamicChildren:Fe,dirs:Ct}=Te;at|=ge.patchFlag&16;const mt=ge.props||EMPTY_OBJ,F=Te.props||EMPTY_OBJ;let V;Ie&&toggleRecurse(Ie,!1),(V=F.onVnodeBeforeUpdate)&&invokeVNodeHook(V,Ie,Te,ge),Ct&&invokeDirectiveHook(Te,ge,Ie,"beforeUpdate"),Ie&&toggleRecurse(Ie,!0);const O=Be&&Te.type!=="foreignObject";if(Fe?se(ge.dynamicChildren,Fe,st,Ie,$e,O,nt):ft||Ye(ge,Te,st,null,Ie,$e,O,nt,!1),at>0){if(at&16)pe(st,Te,mt,F,Ie,$e,Be);else if(at&2&&mt.class!==F.class&&s(st,"class",null,F.class,Be),at&4&&s(st,"style",mt.style,F.style,Be),at&8){const A=Te.dynamicProps;for(let J=0;J<A.length;J++){const he=A[J],be=mt[he],q=F[he];(q!==be||he==="value")&&s(st,he,be,q,Be,ge.children,Ie,$e,_t)}}at&1&&ge.children!==Te.children&&g(st,Te.children)}else!ft&&Fe==null&&pe(st,Te,mt,F,Ie,$e,Be);((V=F.onVnodeUpdated)||Ct)&&queuePostRenderEffect(()=>{V&&invokeVNodeHook(V,Ie,Te,ge),Ct&&invokeDirectiveHook(Te,ge,Ie,"updated")},$e)},se=(ge,Te,Ie,$e,Be,nt,ft)=>{for(let st=0;st<Te.length;st++){const at=ge[st],Fe=Te[st],Ct=at.el&&(at.type===Fragment$1||!isSameVNodeType(at,Fe)||at.shapeFlag&70)?C(at.el):Ie;T(at,Fe,Ct,null,$e,Be,nt,ft,!0)}},pe=(ge,Te,Ie,$e,Be,nt,ft)=>{if(Ie!==$e){if(Ie!==EMPTY_OBJ)for(const st in Ie)!isReservedProp(st)&&!(st in $e)&&s(ge,st,Ie[st],null,ft,Te.children,Be,nt,_t);for(const st in $e){if(isReservedProp(st))continue;const at=$e[st],Fe=Ie[st];at!==Fe&&st!=="value"&&s(ge,st,Fe,at,ft,Te.children,Be,nt,_t)}"value"in $e&&s(ge,"value",Ie.value,$e.value)}},le=(ge,Te,Ie,$e,Be,nt,ft,st,at)=>{const Fe=Te.el=ge?ge.el:l(""),Ct=Te.anchor=ge?ge.anchor:l("");let{patchFlag:mt,dynamicChildren:F,slotScopeIds:V}=Te;V&&(st=st?st.concat(V):V),ge==null?(r(Fe,Ie,$e),r(Ct,Ie,$e),Y(Te.children,Ie,Ct,Be,nt,ft,st,at)):mt>0&&mt&64&&F&&ge.dynamicChildren?(se(ge.dynamicChildren,F,Ie,Be,nt,ft,st),(Te.key!=null||Be&&Te===Be.subTree)&&traverseStaticChildren(ge,Te,!0)):Ye(ge,Te,Ie,Ct,Be,nt,ft,st,at)},Ee=(ge,Te,Ie,$e,Be,nt,ft,st,at)=>{Te.slotScopeIds=st,ge==null?Te.shapeFlag&512?Be.ctx.activate(Te,Ie,$e,ft,at):Ne(Te,Ie,$e,Be,nt,ft,at):_e(ge,Te,at)},Ne=(ge,Te,Ie,$e,Be,nt,ft)=>{const st=ge.component=createComponentInstance(ge,$e,Be);if(isKeepAlive(ge)&&(st.ctx.renderer=ht),setupComponent(st),st.asyncDep){if(Be&&Be.registerDep(st,me),!ge.el){const at=st.subTree=createVNode(Comment);N(null,at,Te,Ie)}return}me(st,ge,Te,Ie,Be,nt,ft)},_e=(ge,Te,Ie)=>{const $e=Te.component=ge.component;if(shouldUpdateComponent(ge,Te,Ie))if($e.asyncDep&&!$e.asyncResolved){Ke($e,Te,Ie);return}else $e.next=Te,invalidateJob($e.update),$e.update();else Te.el=ge.el,$e.vnode=Te},me=(ge,Te,Ie,$e,Be,nt,ft)=>{const st=()=>{if(ge.isMounted){let{next:Ct,bu:mt,u:F,parent:V,vnode:O}=ge,A=Ct,J;toggleRecurse(ge,!1),Ct?(Ct.el=O.el,Ke(ge,Ct,ft)):Ct=O,mt&&invokeArrayFns(mt),(J=Ct.props&&Ct.props.onVnodeBeforeUpdate)&&invokeVNodeHook(J,V,Ct,O),toggleRecurse(ge,!0);const he=renderComponentRoot(ge),be=ge.subTree;ge.subTree=he,T(be,he,C(be.el),Ze(be),ge,Be,nt),Ct.el=he.el,A===null&&updateHOCHostEl(ge,he.el),F&&queuePostRenderEffect(F,Be),(J=Ct.props&&Ct.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(J,V,Ct,O),Be)}else{let Ct;const{el:mt,props:F}=Te,{bm:V,m:O,parent:A}=ge,J=isAsyncWrapper(Te);if(toggleRecurse(ge,!1),V&&invokeArrayFns(V),!J&&(Ct=F&&F.onVnodeBeforeMount)&&invokeVNodeHook(Ct,A,Te),toggleRecurse(ge,!0),mt&&jt){const he=()=>{ge.subTree=renderComponentRoot(ge),jt(mt,ge.subTree,ge,Be,null)};J?Te.type.__asyncLoader().then(()=>!ge.isUnmounted&&he()):he()}else{const he=ge.subTree=renderComponentRoot(ge);T(null,he,Ie,$e,ge,Be,nt),Te.el=he.el}if(O&&queuePostRenderEffect(O,Be),!J&&(Ct=F&&F.onVnodeMounted)){const he=Te;queuePostRenderEffect(()=>invokeVNodeHook(Ct,A,he),Be)}(Te.shapeFlag&256||A&&isAsyncWrapper(A.vnode)&&A.vnode.shapeFlag&256)&&ge.a&&queuePostRenderEffect(ge.a,Be),ge.isMounted=!0,Te=Ie=$e=null}},at=ge.effect=new ReactiveEffect(st,()=>queueJob(Fe),ge.scope),Fe=ge.update=()=>at.run();Fe.id=ge.uid,toggleRecurse(ge,!0),Fe()},Ke=(ge,Te,Ie)=>{Te.component=ge;const $e=ge.vnode.props;ge.vnode=Te,ge.next=null,updateProps(ge,Te.props,$e,Ie),updateSlots(ge,Te.children,Ie),pauseTracking(),flushPreFlushCbs(),resetTracking()},Ye=(ge,Te,Ie,$e,Be,nt,ft,st,at=!1)=>{const Fe=ge&&ge.children,Ct=ge?ge.shapeFlag:0,mt=Te.children,{patchFlag:F,shapeFlag:V}=Te;if(F>0){if(F&128){ut(Fe,mt,Ie,$e,Be,nt,ft,st,at);return}else if(F&256){pt(Fe,mt,Ie,$e,Be,nt,ft,st,at);return}}V&8?(Ct&16&&_t(Fe,Be,nt),mt!==Fe&&g(Ie,mt)):Ct&16?V&16?ut(Fe,mt,Ie,$e,Be,nt,ft,st,at):_t(Fe,Be,nt,!0):(Ct&8&&g(Ie,""),V&16&&Y(mt,Ie,$e,Be,nt,ft,st,at))},pt=(ge,Te,Ie,$e,Be,nt,ft,st,at)=>{ge=ge||EMPTY_ARR,Te=Te||EMPTY_ARR;const Fe=ge.length,Ct=Te.length,mt=Math.min(Fe,Ct);let F;for(F=0;F<mt;F++){const V=Te[F]=at?cloneIfMounted(Te[F]):normalizeVNode(Te[F]);T(ge[F],V,Ie,null,Be,nt,ft,st,at)}Fe>Ct?_t(ge,Be,nt,!0,!1,mt):Y(Te,Ie,$e,Be,nt,ft,st,at,mt)},ut=(ge,Te,Ie,$e,Be,nt,ft,st,at)=>{let Fe=0;const Ct=Te.length;let mt=ge.length-1,F=Ct-1;for(;Fe<=mt&&Fe<=F;){const V=ge[Fe],O=Te[Fe]=at?cloneIfMounted(Te[Fe]):normalizeVNode(Te[Fe]);if(isSameVNodeType(V,O))T(V,O,Ie,null,Be,nt,ft,st,at);else break;Fe++}for(;Fe<=mt&&Fe<=F;){const V=ge[mt],O=Te[F]=at?cloneIfMounted(Te[F]):normalizeVNode(Te[F]);if(isSameVNodeType(V,O))T(V,O,Ie,null,Be,nt,ft,st,at);else break;mt--,F--}if(Fe>mt){if(Fe<=F){const V=F+1,O=V<Ct?Te[V].el:$e;for(;Fe<=F;)T(null,Te[Fe]=at?cloneIfMounted(Te[Fe]):normalizeVNode(Te[Fe]),Ie,O,Be,nt,ft,st,at),Fe++}}else if(Fe>F)for(;Fe<=mt;)te(ge[Fe],Be,nt,!0),Fe++;else{const V=Fe,O=Fe,A=new Map;for(Fe=O;Fe<=F;Fe++){const ue=Te[Fe]=at?cloneIfMounted(Te[Fe]):normalizeVNode(Te[Fe]);ue.key!=null&&A.set(ue.key,Fe)}let J,he=0;const be=F-O+1;let q=!1,z=0;const ee=new Array(be);for(Fe=0;Fe<be;Fe++)ee[Fe]=0;for(Fe=V;Fe<=mt;Fe++){const ue=ge[Fe];if(he>=be){te(ue,Be,nt,!0);continue}let we;if(ue.key!=null)we=A.get(ue.key);else for(J=O;J<=F;J++)if(ee[J-O]===0&&isSameVNodeType(ue,Te[J])){we=J;break}we===void 0?te(ue,Be,nt,!0):(ee[we-O]=Fe+1,we>=z?z=we:q=!0,T(ue,Te[we],Ie,null,Be,nt,ft,st,at),he++)}const Z=q?getSequence(ee):EMPTY_ARR;for(J=Z.length-1,Fe=be-1;Fe>=0;Fe--){const ue=O+Fe,we=Te[ue],Ae=ue+1<Ct?Te[ue+1].el:$e;ee[Fe]===0?T(null,we,Ie,Ae,Be,nt,ft,st,at):q&&(J<0||Fe!==Z[J]?It(we,Ie,Ae,2):J--)}}},It=(ge,Te,Ie,$e,Be=null)=>{const{el:nt,type:ft,transition:st,children:at,shapeFlag:Fe}=ge;if(Fe&6){It(ge.component.subTree,Te,Ie,$e);return}if(Fe&128){ge.suspense.move(Te,Ie,$e);return}if(Fe&64){ft.move(ge,Te,Ie,ht);return}if(ft===Fragment$1){r(nt,Te,Ie);for(let mt=0;mt<at.length;mt++)It(at[mt],Te,Ie,$e);r(ge.anchor,Te,Ie);return}if(ft===Static){k(ge,Te,Ie);return}if($e!==2&&Fe&1&&st)if($e===0)st.beforeEnter(nt),r(nt,Te,Ie),queuePostRenderEffect(()=>st.enter(nt),Be);else{const{leave:mt,delayLeave:F,afterLeave:V}=st,O=()=>r(nt,Te,Ie),A=()=>{mt(nt,()=>{O(),V&&V()})};F?F(nt,O,A):A()}else r(nt,Te,Ie)},te=(ge,Te,Ie,$e=!1,Be=!1)=>{const{type:nt,props:ft,ref:st,children:at,dynamicChildren:Fe,shapeFlag:Ct,patchFlag:mt,dirs:F}=ge;if(st!=null&&setRef(st,null,Ie,ge,!0),Ct&256){Te.ctx.deactivate(ge);return}const V=Ct&1&&F,O=!isAsyncWrapper(ge);let A;if(O&&(A=ft&&ft.onVnodeBeforeUnmount)&&invokeVNodeHook(A,Te,ge),Ct&6)Gt(ge.component,Ie,$e);else{if(Ct&128){ge.suspense.unmount(Ie,$e);return}V&&invokeDirectiveHook(ge,null,Te,"beforeUnmount"),Ct&64?ge.type.remove(ge,Te,Ie,Be,ht,$e):Fe&&(nt!==Fragment$1||mt>0&&mt&64)?_t(Fe,Te,Ie,!1,!0):(nt===Fragment$1&&mt&384||!Be&&Ct&16)&&_t(at,Te,Ie),$e&&ot(ge)}(O&&(A=ft&&ft.onVnodeUnmounted)||V)&&queuePostRenderEffect(()=>{A&&invokeVNodeHook(A,Te,ge),V&&invokeDirectiveHook(ge,null,Te,"unmounted")},Ie)},ot=ge=>{const{type:Te,el:Ie,anchor:$e,transition:Be}=ge;if(Te===Fragment$1){St(Ie,$e);return}if(Te===Static){L(ge);return}const nt=()=>{o(Ie),Be&&!Be.persisted&&Be.afterLeave&&Be.afterLeave()};if(ge.shapeFlag&1&&Be&&!Be.persisted){const{leave:ft,delayLeave:st}=Be,at=()=>ft(Ie,nt);st?st(ge.el,nt,at):at()}else nt()},St=(ge,Te)=>{let Ie;for(;ge!==Te;)Ie=v(ge),o(ge),ge=Ie;o(Te)},Gt=(ge,Te,Ie)=>{const{bum:$e,scope:Be,update:nt,subTree:ft,um:st}=ge;$e&&invokeArrayFns($e),Be.stop(),nt&&(nt.active=!1,te(ft,ge,Te,Ie)),st&&queuePostRenderEffect(st,Te),queuePostRenderEffect(()=>{ge.isUnmounted=!0},Te),Te&&Te.pendingBranch&&!Te.isUnmounted&&ge.asyncDep&&!ge.asyncResolved&&ge.suspenseId===Te.pendingId&&(Te.deps--,Te.deps===0&&Te.resolve())},_t=(ge,Te,Ie,$e=!1,Be=!1,nt=0)=>{for(let ft=nt;ft<ge.length;ft++)te(ge[ft],Te,Ie,$e,Be)},Ze=ge=>ge.shapeFlag&6?Ze(ge.component.subTree):ge.shapeFlag&128?ge.suspense.next():v(ge.anchor||ge.el),et=(ge,Te,Ie)=>{ge==null?Te._vnode&&te(Te._vnode,null,null,!0):T(Te._vnode||null,ge,Te,null,null,null,Ie),flushPreFlushCbs(),flushPostFlushCbs(),Te._vnode=ge},ht={p:T,um:te,m:It,r:ot,mt:Ne,mc:Y,pc:Ye,pbc:se,n:Ze,o:t};let Tt,jt;return e&&([Tt,jt]=e(ht)),{render:et,hydrate:Tt,createApp:createAppAPI(et,Tt)}}function toggleRecurse({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function traverseStaticChildren(t,e,n=!1){const r=t.children,o=e.children;if(isArray(r)&&isArray(o))for(let s=0;s<r.length;s++){const a=r[s];let l=o[s];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=o[s]=cloneIfMounted(o[s]),l.el=a.el),n||traverseStaticChildren(a,l)),l.type===Text$2&&(l.el=a.el)}}function getSequence(t){const e=t.slice(),n=[0];let r,o,s,a,l;const c=t.length;for(r=0;r<c;r++){const u=t[r];if(u!==0){if(o=n[n.length-1],t[o]<u){e[r]=o,n.push(r);continue}for(s=0,a=n.length-1;s<a;)l=s+a>>1,t[n[l]]<u?s=l+1:a=l;u<t[n[s]]&&(s>0&&(e[r]=n[s-1]),n[s]=r)}}for(s=n.length,a=n[s-1];s-- >0;)n[s]=a,a=e[a];return n}const isTeleport=t=>t.__isTeleport,isTeleportDisabled=t=>t&&(t.disabled||t.disabled===""),isTargetSVG=t=>typeof SVGElement<"u"&&t instanceof SVGElement,resolveTarget=(t,e)=>{const n=t&&t.to;return isString(n)?e?e(n):null:n},TeleportImpl={__isTeleport:!0,process(t,e,n,r,o,s,a,l,c,u){const{mc:g,pc:C,pbc:v,o:{insert:m,querySelector:S,createText:T,createComment:w}}=u,N=isTeleportDisabled(e.props);let{shapeFlag:D,children:k,dynamicChildren:L}=e;if(t==null){const H=e.el=T(""),R=e.anchor=T("");m(H,n,r),m(R,n,r);const B=e.target=resolveTarget(e.props,S),Y=e.targetAnchor=T("");B&&(m(Y,B),a=a||isTargetSVG(B));const K=(se,pe)=>{D&16&&g(k,se,pe,o,s,a,l,c)};N?K(n,R):B&&K(B,Y)}else{e.el=t.el;const H=e.anchor=t.anchor,R=e.target=t.target,B=e.targetAnchor=t.targetAnchor,Y=isTeleportDisabled(t.props),K=Y?n:R,se=Y?H:B;if(a=a||isTargetSVG(R),L?(v(t.dynamicChildren,L,K,o,s,a,l),traverseStaticChildren(t,e,!0)):c||C(t,e,K,se,o,s,a,l,!1),N)Y||moveTeleport(e,n,H,u,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const pe=e.target=resolveTarget(e.props,S);pe&&moveTeleport(e,pe,null,u,0)}else Y&&moveTeleport(e,R,B,u,1)}updateCssVars(e)},remove(t,e,n,r,{um:o,o:{remove:s}},a){const{shapeFlag:l,children:c,anchor:u,targetAnchor:g,target:C,props:v}=t;if(C&&s(g),(a||!isTeleportDisabled(v))&&(s(u),l&16))for(let m=0;m<c.length;m++){const S=c[m];o(S,e,n,!0,!!S.dynamicChildren)}},move:moveTeleport,hydrate:hydrateTeleport};function moveTeleport(t,e,n,{o:{insert:r},m:o},s=2){s===0&&r(t.targetAnchor,e,n);const{el:a,anchor:l,shapeFlag:c,children:u,props:g}=t,C=s===2;if(C&&r(a,e,n),(!C||isTeleportDisabled(g))&&c&16)for(let v=0;v<u.length;v++)o(u[v],e,n,2);C&&r(l,e,n)}function hydrateTeleport(t,e,n,r,o,s,{o:{nextSibling:a,parentNode:l,querySelector:c}},u){const g=e.target=resolveTarget(e.props,c);if(g){const C=g._lpa||g.firstChild;if(e.shapeFlag&16)if(isTeleportDisabled(e.props))e.anchor=u(a(t),e,l(t),n,r,o,s),e.targetAnchor=C;else{e.anchor=a(t);let v=C;for(;v;)if(v=a(v),v&&v.nodeType===8&&v.data==="teleport anchor"){e.targetAnchor=v,g._lpa=e.targetAnchor&&a(e.targetAnchor);break}u(C,e,g,n,r,o,s)}updateCssVars(e)}return e.anchor&&a(e.anchor)}const Teleport=TeleportImpl;function updateCssVars(t){const e=t.ctx;if(e&&e.ut){let n=t.children[0].el;for(;n!==t.targetAnchor;)n.nodeType===1&&n.setAttribute("data-v-owner",e.uid),n=n.nextSibling;e.ut()}}const Fragment$1=Symbol(void 0),Text$2=Symbol(void 0),Comment=Symbol(void 0),Static=Symbol(void 0),blockStack=[];let currentBlock=null;function openBlock(t=!1){blockStack.push(currentBlock=t?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(t){isBlockTreeEnabled+=t}function setupBlock(t){return t.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(t),t}function createElementBlock(t,e,n,r,o,s){return setupBlock(createBaseVNode(t,e,n,r,o,s,!0))}function createBlock(t,e,n,r,o){return setupBlock(createVNode(t,e,n,r,o,!0))}function isVNode(t){return t?t.__v_isVNode===!0:!1}function isSameVNodeType(t,e){return t.type===e.type&&t.key===e.key}function transformVNodeArgs(t){}const InternalObjectKey="__vInternal",normalizeKey=({key:t})=>t??null,normalizeRef=({ref:t,ref_key:e,ref_for:n})=>t!=null?isString(t)||isRef(t)||isFunction$1(t)?{i:currentRenderingInstance,r:t,k:e,f:!!n}:t:null;function createBaseVNode(t,e=null,n=null,r=0,o=null,s=t===Fragment$1?0:1,a=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&normalizeKey(e),ref:e&&normalizeRef(e),scopeId:currentScopeId,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return l?(normalizeChildren(c,n),s&128&&t.normalize(c)):n&&(c.shapeFlag|=isString(n)?8:16),isBlockTreeEnabled>0&&!a&&currentBlock&&(c.patchFlag>0||s&6)&&c.patchFlag!==32&&currentBlock.push(c),c}const createVNode=_createVNode;function _createVNode(t,e=null,n=null,r=0,o=null,s=!1){if((!t||t===NULL_DYNAMIC_COMPONENT)&&(t=Comment),isVNode(t)){const l=cloneVNode(t,e,!0);return n&&normalizeChildren(l,n),isBlockTreeEnabled>0&&!s&&currentBlock&&(l.shapeFlag&6?currentBlock[currentBlock.indexOf(t)]=l:currentBlock.push(l)),l.patchFlag|=-2,l}if(isClassComponent(t)&&(t=t.__vccOpts),e){e=guardReactiveProps(e);let{class:l,style:c}=e;l&&!isString(l)&&(e.class=normalizeClass(l)),isObject(c)&&(isProxy(c)&&!isArray(c)&&(c=extend({},c)),e.style=normalizeStyle(c))}const a=isString(t)?1:isSuspense(t)?128:isTeleport(t)?64:isObject(t)?4:isFunction$1(t)?2:0;return createBaseVNode(t,e,n,r,o,a,s,!0)}function guardReactiveProps(t){return t?isProxy(t)||InternalObjectKey in t?extend({},t):t:null}function cloneVNode(t,e,n=!1){const{props:r,ref:o,patchFlag:s,children:a}=t,l=e?mergeProps(r||{},e):r;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:l,key:l&&normalizeKey(l),ref:e&&e.ref?n&&o?isArray(o)?o.concat(normalizeRef(e)):[o,normalizeRef(e)]:normalizeRef(e):o,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Fragment$1?s===-1?16:s|16:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&cloneVNode(t.ssContent),ssFallback:t.ssFallback&&cloneVNode(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function createTextVNode(t=" ",e=0){return createVNode(Text$2,null,t,e)}function createStaticVNode(t,e){const n=createVNode(Static,null,t);return n.staticCount=e,n}function createCommentVNode(t="",e=!1){return e?(openBlock(),createBlock(Comment,null,t)):createVNode(Comment,null,t)}function normalizeVNode(t){return t==null||typeof t=="boolean"?createVNode(Comment):isArray(t)?createVNode(Fragment$1,null,t.slice()):typeof t=="object"?cloneIfMounted(t):createVNode(Text$2,null,String(t))}function cloneIfMounted(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:cloneVNode(t)}function normalizeChildren(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(isArray(e))n=16;else if(typeof e=="object")if(r&65){const o=e.default;o&&(o._c&&(o._d=!1),normalizeChildren(t,o()),o._c&&(o._d=!0));return}else{n=32;const o=e._;!o&&!(InternalObjectKey in e)?e._ctx=currentRenderingInstance:o===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else isFunction$1(e)?(e={default:e,_ctx:currentRenderingInstance},n=32):(e=String(e),r&64?(n=16,e=[createTextVNode(e)]):n=8);t.children=e,t.shapeFlag|=n}function mergeProps(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const o in r)if(o==="class")e.class!==r.class&&(e.class=normalizeClass([e.class,r.class]));else if(o==="style")e.style=normalizeStyle([e.style,r.style]);else if(isOn(o)){const s=e[o],a=r[o];a&&s!==a&&!(isArray(s)&&s.includes(a))&&(e[o]=s?[].concat(s,a):a)}else o!==""&&(e[o]=r[o])}return e}function invokeVNodeHook(t,e,n,r=null){callWithAsyncErrorHandling(t,e,7,[n,r])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(t,e,n){const r=t.type,o=(e?e.appContext:t.appContext)||emptyAppContext,s={uid:uid++,vnode:t,type:r,parent:e,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(o.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(r,o),emitsOptions:normalizeEmitsOptions(r,o),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:r.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=emit.bind(null,s),t.ce&&t.ce(s),s}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance,setCurrentInstance=t=>{currentInstance=t,t.scope.on()},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),currentInstance=null};function isStatefulComponent(t){return t.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(t,e=!1){isInSSRComponentSetup=e;const{props:n,children:r}=t.vnode,o=isStatefulComponent(t);initProps(t,n,o,e),initSlots(t,r);const s=o?setupStatefulComponent(t,e):void 0;return isInSSRComponentSetup=!1,s}function setupStatefulComponent(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=markRaw(new Proxy(t.ctx,PublicInstanceProxyHandlers));const{setup:r}=n;if(r){const o=t.setupContext=r.length>1?createSetupContext(t):null;setCurrentInstance(t),pauseTracking();const s=callWithErrorHandling(r,t,0,[t.props,o]);if(resetTracking(),unsetCurrentInstance(),isPromise(s)){if(s.then(unsetCurrentInstance,unsetCurrentInstance),e)return s.then(a=>{handleSetupResult(t,a,e)}).catch(a=>{handleError(a,t,0)});t.asyncDep=s}else handleSetupResult(t,s,e)}else finishComponentSetup(t,e)}function handleSetupResult(t,e,n){isFunction$1(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:isObject(e)&&(t.setupState=proxyRefs(e)),finishComponentSetup(t,n)}let compile$1,installWithProxy;function registerRuntimeCompiler(t){compile$1=t,installWithProxy=e=>{e.render._rc&&(e.withProxy=new Proxy(e.ctx,RuntimeCompiledPublicInstanceProxyHandlers))}}const isRuntimeOnly=()=>!compile$1;function finishComponentSetup(t,e,n){const r=t.type;if(!t.render){if(!e&&compile$1&&!r.render){const o=r.template||resolveMergedOptions(t).template;if(o){const{isCustomElement:s,compilerOptions:a}=t.appContext.config,{delimiters:l,compilerOptions:c}=r,u=extend(extend({isCustomElement:s,delimiters:l},a),c);r.render=compile$1(o,u)}}t.render=r.render||NOOP,installWithProxy&&installWithProxy(t)}setCurrentInstance(t),pauseTracking(),applyOptions(t),resetTracking(),unsetCurrentInstance()}function createAttrsProxy(t){return new Proxy(t.attrs,{get(e,n){return track(t,"get","$attrs"),e[n]}})}function createSetupContext(t){const e=r=>{t.exposed=r||{}};let n;return{get attrs(){return n||(n=createAttrsProxy(t))},slots:t.slots,emit:t.emit,expose:e}}function getExposeProxy(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(proxyRefs(markRaw(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in publicPropertiesMap)return publicPropertiesMap[n](t)},has(e,n){return n in e||n in publicPropertiesMap}}))}function getComponentName(t,e=!0){return isFunction$1(t)?t.displayName||t.name:t.name||e&&t.__name}function isClassComponent(t){return isFunction$1(t)&&"__vccOpts"in t}const computed=(t,e)=>computed$1(t,e,isInSSRComponentSetup);function defineProps(){return null}function defineEmits(){return null}function defineExpose(t){}function withDefaults(t,e){return null}function useSlots(){return getContext().slots}function useAttrs(){return getContext().attrs}function getContext(){const t=getCurrentInstance();return t.setupContext||(t.setupContext=createSetupContext(t))}function mergeDefaults(t,e){const n=isArray(t)?t.reduce((r,o)=>(r[o]={},r),{}):t;for(const r in e){const o=n[r];o?isArray(o)||isFunction$1(o)?n[r]={type:o,default:e[r]}:o.default=e[r]:o===null&&(n[r]={default:e[r]})}return n}function createPropsRestProxy(t,e){const n={};for(const r in t)e.includes(r)||Object.defineProperty(n,r,{enumerable:!0,get:()=>t[r]});return n}function withAsyncContext(t){const e=getCurrentInstance();let n=t();return unsetCurrentInstance(),isPromise(n)&&(n=n.catch(r=>{throw setCurrentInstance(e),r})),[n,()=>setCurrentInstance(e)]}function h(t,e,n){const r=arguments.length;return r===2?isObject(e)&&!isArray(e)?isVNode(e)?createVNode(t,null,[e]):createVNode(t,e):createVNode(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&isVNode(n)&&(n=[n]),createVNode(t,e,n))}const ssrContextKey=Symbol(""),useSSRContext=()=>inject(ssrContextKey);function initCustomFormatter(){}function withMemo(t,e,n,r){const o=n[r];if(o&&isMemoSame(o,t))return o;const s=e();return s.memo=t.slice(),n[r]=s}function isMemoSame(t,e){const n=t.memo;if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(hasChanged(n[r],e[r]))return!1;return isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(t),!0}const version="3.2.47",_ssrUtils={createComponentInstance,setupComponent,renderComponentRoot,setCurrentRenderingInstance,isVNode,normalizeVNode},ssrUtils=_ssrUtils,resolveFilter=null,compatUtils=null,svgNS="http://www.w3.org/2000/svg",doc$2=typeof document<"u"?document:null,templateContainer=doc$2&&doc$2.createElement("template"),nodeOps={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const o=e?doc$2.createElementNS(svgNS,t):doc$2.createElement(t,n?{is:n}:void 0);return t==="select"&&r&&r.multiple!=null&&o.setAttribute("multiple",r.multiple),o},createText:t=>doc$2.createTextNode(t),createComment:t=>doc$2.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>doc$2.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,o,s){const a=n?n.previousSibling:e.lastChild;if(o&&(o===s||o.nextSibling))for(;e.insertBefore(o.cloneNode(!0),n),!(o===s||!(o=o.nextSibling)););else{templateContainer.innerHTML=r?`<svg>${t}</svg>`:t;const l=templateContainer.content;if(r){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}e.insertBefore(l,n)}return[a?a.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function patchClass(t,e,n){const r=t._vtc;r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function patchStyle(t,e,n){const r=t.style,o=isString(n);if(n&&!o){if(e&&!isString(e))for(const s in e)n[s]==null&&setStyle(r,s,"");for(const s in n)setStyle(r,s,n[s])}else{const s=r.display;o?e!==n&&(r.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(r.display=s)}}const importantRE=/\s*!important$/;function setStyle(t,e,n){if(isArray(n))n.forEach(r=>setStyle(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=autoPrefix(t,e);importantRE.test(n)?t.setProperty(hyphenate(r),n.replace(importantRE,""),"important"):t[r]=n}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(t,e){const n=prefixCache[e];if(n)return n;let r=camelize$1(e);if(r!=="filter"&&r in t)return prefixCache[e]=r;r=capitalize(r);for(let o=0;o<prefixes.length;o++){const s=prefixes[o]+r;if(s in t)return prefixCache[e]=s}return e}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(t,e,n,r,o){if(r&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(xlinkNS,e.slice(6,e.length)):t.setAttributeNS(xlinkNS,e,n);else{const s=isSpecialBooleanAttr(e);n==null||s&&!includeBooleanAttr(n)?t.removeAttribute(e):t.setAttribute(e,s?"":n)}}function patchDOMProp(t,e,n,r,o,s,a){if(e==="innerHTML"||e==="textContent"){r&&a(r,o,s),t[e]=n??"";return}if(e==="value"&&t.tagName!=="PROGRESS"&&!t.tagName.includes("-")){t._value=n;const c=n??"";(t.value!==c||t.tagName==="OPTION")&&(t.value=c),n==null&&t.removeAttribute(e);return}let l=!1;if(n===""||n==null){const c=typeof t[e];c==="boolean"?n=includeBooleanAttr(n):n==null&&c==="string"?(n="",l=!0):c==="number"&&(n=0,l=!0)}try{t[e]=n}catch{}l&&t.removeAttribute(e)}function addEventListener(t,e,n,r){t.addEventListener(e,n,r)}function removeEventListener(t,e,n,r){t.removeEventListener(e,n,r)}function patchEvent(t,e,n,r,o=null){const s=t._vei||(t._vei={}),a=s[e];if(r&&a)a.value=r;else{const[l,c]=parseName(e);if(r){const u=s[e]=createInvoker(r,o);addEventListener(t,l,u,c)}else a&&(removeEventListener(t,l,a,c),s[e]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(t){let e;if(optionsModifierRE.test(t)){e={};let r;for(;r=t.match(optionsModifierRE);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):hyphenate(t.slice(2)),e]}let cachedNow=0;const p=Promise.resolve(),getNow=()=>cachedNow||(p.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(r,n.value),e,5,[r])};return n.value=t,n.attached=getNow(),n}function patchStopImmediatePropagation(t,e){if(isArray(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>o=>!o._stopped&&r&&r(o))}else return e}const nativeOnRE=/^on[a-z]/,patchProp=(t,e,n,r,o=!1,s,a,l,c)=>{e==="class"?patchClass(t,r,o):e==="style"?patchStyle(t,n,r):isOn(e)?isModelListener(e)||patchEvent(t,e,n,r,a):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):shouldSetAsProp(t,e,r,o))?patchDOMProp(t,e,r,s,a,l,c):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),patchAttr(t,e,r,o))};function shouldSetAsProp(t,e,n,r){return r?!!(e==="innerHTML"||e==="textContent"||e in t&&nativeOnRE.test(e)&&isFunction$1(n)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||nativeOnRE.test(e)&&isString(n)?!1:e in t}function defineCustomElement(t,e){const n=defineComponent(t);class r extends VueElement{constructor(s){super(n,s,e)}}return r.def=n,r}const defineSSRCustomElement=t=>defineCustomElement(t,hydrate),BaseClass=typeof HTMLElement<"u"?HTMLElement:class{};class VueElement extends BaseClass{constructor(e,n={},r){super(),this._def=e,this._props=n,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this.shadowRoot&&r?r(this._createVNode(),this.shadowRoot):(this.attachShadow({mode:"open"}),this._def.__asyncLoader||this._resolveProps(this._def))}connectedCallback(){this._connected=!0,this._instance||(this._resolved?this._update():this._resolveDef())}disconnectedCallback(){this._connected=!1,nextTick(()=>{this._connected||(render$4(null,this.shadowRoot),this._instance=null)})}_resolveDef(){this._resolved=!0;for(let r=0;r<this.attributes.length;r++)this._setAttr(this.attributes[r].name);new MutationObserver(r=>{for(const o of r)this._setAttr(o.attributeName)}).observe(this,{attributes:!0});const e=(r,o=!1)=>{const{props:s,styles:a}=r;let l;if(s&&!isArray(s))for(const c in s){const u=s[c];(u===Number||u&&u.type===Number)&&(c in this._props&&(this._props[c]=toNumber(this._props[c])),(l||(l=Object.create(null)))[camelize$1(c)]=!0)}this._numberProps=l,o&&this._resolveProps(r),this._applyStyles(a),this._update()},n=this._def.__asyncLoader;n?n().then(r=>e(r,!0)):e(this._def)}_resolveProps(e){const{props:n}=e,r=isArray(n)?n:Object.keys(n||{});for(const o of Object.keys(this))o[0]!=="_"&&r.includes(o)&&this._setProp(o,this[o],!0,!1);for(const o of r.map(camelize$1))Object.defineProperty(this,o,{get(){return this._getProp(o)},set(s){this._setProp(o,s)}})}_setAttr(e){let n=this.getAttribute(e);const r=camelize$1(e);this._numberProps&&this._numberProps[r]&&(n=toNumber(n)),this._setProp(r,n,!1)}_getProp(e){return this._props[e]}_setProp(e,n,r=!0,o=!0){n!==this._props[e]&&(this._props[e]=n,o&&this._instance&&this._update(),r&&(n===!0?this.setAttribute(hyphenate(e),""):typeof n=="string"||typeof n=="number"?this.setAttribute(hyphenate(e),n+""):n||this.removeAttribute(hyphenate(e))))}_update(){render$4(this._createVNode(),this.shadowRoot)}_createVNode(){const e=createVNode(this._def,extend({},this._props));return this._instance||(e.ce=n=>{this._instance=n,n.isCE=!0;const r=(s,a)=>{this.dispatchEvent(new CustomEvent(s,{detail:a}))};n.emit=(s,...a)=>{r(s,a),hyphenate(s)!==s&&r(hyphenate(s),a)};let o=this;for(;o=o&&(o.parentNode||o.host);)if(o instanceof VueElement){n.parent=o._instance,n.provides=o._instance.provides;break}}),e}_applyStyles(e){e&&e.forEach(n=>{const r=document.createElement("style");r.textContent=n,this.shadowRoot.appendChild(r)})}}function useCssModule(t="$style"){{const e=getCurrentInstance();if(!e)return EMPTY_OBJ;const n=e.type.__cssModules;if(!n)return EMPTY_OBJ;const r=n[t];return r||EMPTY_OBJ}}function useCssVars(t){const e=getCurrentInstance();if(!e)return;const n=e.ut=(o=t(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach(s=>setVarsOnNode(s,o))},r=()=>{const o=t(e.proxy);setVarsOnVNode(e.subTree,o),n(o)};watchPostEffect(r),onMounted(()=>{const o=new MutationObserver(r);o.observe(e.subTree.el.parentNode,{childList:!0}),onUnmounted(()=>o.disconnect())})}function setVarsOnVNode(t,e){if(t.shapeFlag&128){const n=t.suspense;t=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push(()=>{setVarsOnVNode(n.activeBranch,e)})}for(;t.component;)t=t.component.subTree;if(t.shapeFlag&1&&t.el)setVarsOnNode(t.el,e);else if(t.type===Fragment$1)t.children.forEach(n=>setVarsOnVNode(n,e));else if(t.type===Static){let{el:n,anchor:r}=t;for(;n&&(setVarsOnNode(n,e),n!==r);)n=n.nextSibling}}function setVarsOnNode(t,e){if(t.nodeType===1){const n=t.style;for(const r in e)n.setProperty(`--${r}`,e[r])}}const TRANSITION$1="transition",ANIMATION="animation",Transition=(t,{slots:e})=>h(BaseTransition,resolveTransitionProps(t),e);Transition.displayName="Transition";const DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},TransitionPropsValidators=Transition.props=extend({},BaseTransition.props,DOMTransitionPropsValidators),callHook=(t,e=[])=>{isArray(t)?t.forEach(n=>n(...e)):t&&t(...e)},hasExplicitCallback=t=>t?isArray(t)?t.some(e=>e.length>1):t.length>1:!1;function resolveTransitionProps(t){const e={};for(const le in t)le in DOMTransitionPropsValidators||(e[le]=t[le]);if(t.css===!1)return e;const{name:n="v",type:r,duration:o,enterFromClass:s=`${n}-enter-from`,enterActiveClass:a=`${n}-enter-active`,enterToClass:l=`${n}-enter-to`,appearFromClass:c=s,appearActiveClass:u=a,appearToClass:g=l,leaveFromClass:C=`${n}-leave-from`,leaveActiveClass:v=`${n}-leave-active`,leaveToClass:m=`${n}-leave-to`}=t,S=normalizeDuration(o),T=S&&S[0],w=S&&S[1],{onBeforeEnter:N,onEnter:D,onEnterCancelled:k,onLeave:L,onLeaveCancelled:H,onBeforeAppear:R=N,onAppear:B=D,onAppearCancelled:Y=k}=e,K=(le,Ee,Ne)=>{removeTransitionClass(le,Ee?g:l),removeTransitionClass(le,Ee?u:a),Ne&&Ne()},se=(le,Ee)=>{le._isLeaving=!1,removeTransitionClass(le,C),removeTransitionClass(le,m),removeTransitionClass(le,v),Ee&&Ee()},pe=le=>(Ee,Ne)=>{const _e=le?B:D,me=()=>K(Ee,le,Ne);callHook(_e,[Ee,me]),nextFrame(()=>{removeTransitionClass(Ee,le?c:s),addTransitionClass(Ee,le?g:l),hasExplicitCallback(_e)||whenTransitionEnds(Ee,r,T,me)})};return extend(e,{onBeforeEnter(le){callHook(N,[le]),addTransitionClass(le,s),addTransitionClass(le,a)},onBeforeAppear(le){callHook(R,[le]),addTransitionClass(le,c),addTransitionClass(le,u)},onEnter:pe(!1),onAppear:pe(!0),onLeave(le,Ee){le._isLeaving=!0;const Ne=()=>se(le,Ee);addTransitionClass(le,C),forceReflow(),addTransitionClass(le,v),nextFrame(()=>{le._isLeaving&&(removeTransitionClass(le,C),addTransitionClass(le,m),hasExplicitCallback(L)||whenTransitionEnds(le,r,w,Ne))}),callHook(L,[le,Ne])},onEnterCancelled(le){K(le,!1),callHook(k,[le])},onAppearCancelled(le){K(le,!0),callHook(Y,[le])},onLeaveCancelled(le){se(le),callHook(H,[le])}})}function normalizeDuration(t){if(t==null)return null;if(isObject(t))return[NumberOf(t.enter),NumberOf(t.leave)];{const e=NumberOf(t);return[e,e]}}function NumberOf(t){return toNumber(t)}function addTransitionClass(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t._vtc||(t._vtc=new Set)).add(e)}function removeTransitionClass(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const{_vtc:n}=t;n&&(n.delete(e),n.size||(t._vtc=void 0))}function nextFrame(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let endId=0;function whenTransitionEnds(t,e,n,r){const o=t._endId=++endId,s=()=>{o===t._endId&&r()};if(n)return setTimeout(s,n);const{type:a,timeout:l,propCount:c}=getTransitionInfo(t,e);if(!a)return r();const u=a+"end";let g=0;const C=()=>{t.removeEventListener(u,v),s()},v=m=>{m.target===t&&++g>=c&&C()};setTimeout(()=>{g<c&&C()},l+1),t.addEventListener(u,v)}function getTransitionInfo(t,e){const n=window.getComputedStyle(t),r=S=>(n[S]||"").split(", "),o=r(`${TRANSITION$1}Delay`),s=r(`${TRANSITION$1}Duration`),a=getTimeout(o,s),l=r(`${ANIMATION}Delay`),c=r(`${ANIMATION}Duration`),u=getTimeout(l,c);let g=null,C=0,v=0;e===TRANSITION$1?a>0&&(g=TRANSITION$1,C=a,v=s.length):e===ANIMATION?u>0&&(g=ANIMATION,C=u,v=c.length):(C=Math.max(a,u),g=C>0?a>u?TRANSITION$1:ANIMATION:null,v=g?g===TRANSITION$1?s.length:c.length:0);const m=g===TRANSITION$1&&/\b(transform|all)(,|$)/.test(r(`${TRANSITION$1}Property`).toString());return{type:g,timeout:C,propCount:v,hasTransform:m}}function getTimeout(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>toMs(n)+toMs(t[r])))}function toMs(t){return Number(t.slice(0,-1).replace(",","."))*1e3}function forceReflow(){return document.body.offsetHeight}const positionMap=new WeakMap,newPositionMap=new WeakMap,TransitionGroupImpl={name:"TransitionGroup",props:extend({},TransitionPropsValidators,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=getCurrentInstance(),r=useTransitionState();let o,s;return onUpdated(()=>{if(!o.length)return;const a=t.moveClass||`${t.name||"v"}-move`;if(!hasCSSTransform(o[0].el,n.vnode.el,a))return;o.forEach(callPendingCbs),o.forEach(recordPosition);const l=o.filter(applyTranslation);forceReflow(),l.forEach(c=>{const u=c.el,g=u.style;addTransitionClass(u,a),g.transform=g.webkitTransform=g.transitionDuration="";const C=u._moveCb=v=>{v&&v.target!==u||(!v||/transform$/.test(v.propertyName))&&(u.removeEventListener("transitionend",C),u._moveCb=null,removeTransitionClass(u,a))};u.addEventListener("transitionend",C)})}),()=>{const a=toRaw(t),l=resolveTransitionProps(a);let c=a.tag||Fragment$1;o=s,s=e.default?getTransitionRawChildren(e.default()):[];for(let u=0;u<s.length;u++){const g=s[u];g.key!=null&&setTransitionHooks(g,resolveTransitionHooks(g,l,r,n))}if(o)for(let u=0;u<o.length;u++){const g=o[u];setTransitionHooks(g,resolveTransitionHooks(g,l,r,n)),positionMap.set(g,g.el.getBoundingClientRect())}return createVNode(c,null,s)}}},removeMode=t=>delete t.mode;TransitionGroupImpl.props;const TransitionGroup=TransitionGroupImpl;function callPendingCbs(t){const e=t.el;e._moveCb&&e._moveCb(),e._enterCb&&e._enterCb()}function recordPosition(t){newPositionMap.set(t,t.el.getBoundingClientRect())}function applyTranslation(t){const e=positionMap.get(t),n=newPositionMap.get(t),r=e.left-n.left,o=e.top-n.top;if(r||o){const s=t.el.style;return s.transform=s.webkitTransform=`translate(${r}px,${o}px)`,s.transitionDuration="0s",t}}function hasCSSTransform(t,e,n){const r=t.cloneNode();t._vtc&&t._vtc.forEach(a=>{a.split(/\s+/).forEach(l=>l&&r.classList.remove(l))}),n.split(/\s+/).forEach(a=>a&&r.classList.add(a)),r.style.display="none";const o=e.nodeType===1?e:e.parentNode;o.appendChild(r);const{hasTransform:s}=getTransitionInfo(r);return o.removeChild(r),s}const getModelAssigner=t=>{const e=t.props["onUpdate:modelValue"]||!1;return isArray(e)?n=>invokeArrayFns(e,n):e};function onCompositionStart(t){t.target.composing=!0}function onCompositionEnd(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const vModelText={created(t,{modifiers:{lazy:e,trim:n,number:r}},o){t._assign=getModelAssigner(o);const s=r||o.props&&o.props.type==="number";addEventListener(t,e?"change":"input",a=>{if(a.target.composing)return;let l=t.value;n&&(l=l.trim()),s&&(l=looseToNumber(l)),t._assign(l)}),n&&addEventListener(t,"change",()=>{t.value=t.value.trim()}),e||(addEventListener(t,"compositionstart",onCompositionStart),addEventListener(t,"compositionend",onCompositionEnd),addEventListener(t,"change",onCompositionEnd))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:r,number:o}},s){if(t._assign=getModelAssigner(s),t.composing||document.activeElement===t&&t.type!=="range"&&(n||r&&t.value.trim()===e||(o||t.type==="number")&&looseToNumber(t.value)===e))return;const a=e??"";t.value!==a&&(t.value=a)}},vModelCheckbox={deep:!0,created(t,e,n){t._assign=getModelAssigner(n),addEventListener(t,"change",()=>{const r=t._modelValue,o=getValue(t),s=t.checked,a=t._assign;if(isArray(r)){const l=looseIndexOf(r,o),c=l!==-1;if(s&&!c)a(r.concat(o));else if(!s&&c){const u=[...r];u.splice(l,1),a(u)}}else if(isSet(r)){const l=new Set(r);s?l.add(o):l.delete(o),a(l)}else a(getCheckboxValue(t,s))})},mounted:setChecked,beforeUpdate(t,e,n){t._assign=getModelAssigner(n),setChecked(t,e,n)}};function setChecked(t,{value:e,oldValue:n},r){t._modelValue=e,isArray(e)?t.checked=looseIndexOf(e,r.props.value)>-1:isSet(e)?t.checked=e.has(r.props.value):e!==n&&(t.checked=looseEqual(e,getCheckboxValue(t,!0)))}const vModelRadio={created(t,{value:e},n){t.checked=looseEqual(e,n.props.value),t._assign=getModelAssigner(n),addEventListener(t,"change",()=>{t._assign(getValue(t))})},beforeUpdate(t,{value:e,oldValue:n},r){t._assign=getModelAssigner(r),e!==n&&(t.checked=looseEqual(e,r.props.value))}},vModelSelect={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const o=isSet(e);addEventListener(t,"change",()=>{const s=Array.prototype.filter.call(t.options,a=>a.selected).map(a=>n?looseToNumber(getValue(a)):getValue(a));t._assign(t.multiple?o?new Set(s):s:s[0])}),t._assign=getModelAssigner(r)},mounted(t,{value:e}){setSelected(t,e)},beforeUpdate(t,e,n){t._assign=getModelAssigner(n)},updated(t,{value:e}){setSelected(t,e)}};function setSelected(t,e){const n=t.multiple;if(!(n&&!isArray(e)&&!isSet(e))){for(let r=0,o=t.options.length;r<o;r++){const s=t.options[r],a=getValue(s);if(n)isArray(e)?s.selected=looseIndexOf(e,a)>-1:s.selected=e.has(a);else if(looseEqual(getValue(s),e)){t.selectedIndex!==r&&(t.selectedIndex=r);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function getValue(t){return"_value"in t?t._value:t.value}function getCheckboxValue(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const vModelDynamic={created(t,e,n){callModelHook(t,e,n,null,"created")},mounted(t,e,n){callModelHook(t,e,n,null,"mounted")},beforeUpdate(t,e,n,r){callModelHook(t,e,n,r,"beforeUpdate")},updated(t,e,n,r){callModelHook(t,e,n,r,"updated")}};function resolveDynamicModel(t,e){switch(t){case"SELECT":return vModelSelect;case"TEXTAREA":return vModelText;default:switch(e){case"checkbox":return vModelCheckbox;case"radio":return vModelRadio;default:return vModelText}}}function callModelHook(t,e,n,r,o){const a=resolveDynamicModel(t.tagName,n.props&&n.props.type)[o];a&&a(t,e,n,r)}function initVModelForSSR(){vModelText.getSSRProps=({value:t})=>({value:t}),vModelRadio.getSSRProps=({value:t},e)=>{if(e.props&&looseEqual(e.props.value,t))return{checked:!0}},vModelCheckbox.getSSRProps=({value:t},e)=>{if(isArray(t)){if(e.props&&looseIndexOf(t,e.props.value)>-1)return{checked:!0}}else if(isSet(t)){if(e.props&&t.has(e.props.value))return{checked:!0}}else if(t)return{checked:!0}},vModelDynamic.getSSRProps=(t,e)=>{if(typeof e.type!="string")return;const n=resolveDynamicModel(e.type.toUpperCase(),e.props&&e.props.type);if(n.getSSRProps)return n.getSSRProps(t,e)}}const systemModifiers=["ctrl","shift","alt","meta"],modifierGuards={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>systemModifiers.some(n=>t[`${n}Key`]&&!e.includes(n))},withModifiers=(t,e)=>(n,...r)=>{for(let o=0;o<e.length;o++){const s=modifierGuards[e[o]];if(s&&s(n,e))return}return t(n,...r)},keyNames={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},withKeys=(t,e)=>n=>{if(!("key"in n))return;const r=hyphenate(n.key);if(e.some(o=>o===r||keyNames[o]===r))return t(n)},vShow={beforeMount(t,{value:e},{transition:n}){t._vod=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):setDisplay(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),setDisplay(t,!0),r.enter(t)):r.leave(t,()=>{setDisplay(t,!1)}):setDisplay(t,e))},beforeUnmount(t,{value:e}){setDisplay(t,e)}};function setDisplay(t,e){t.style.display=e?t._vod:"none"}function initVShowForSSR(){vShow.getSSRProps=({value:t})=>{if(!t)return{style:{display:"none"}}}}const rendererOptions=extend({patchProp},nodeOps);let renderer,enabledHydration=!1;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}function ensureHydrationRenderer(){return renderer=enabledHydration?renderer:createHydrationRenderer(rendererOptions),enabledHydration=!0,renderer}const render$4=(...t)=>{ensureRenderer().render(...t)},hydrate=(...t)=>{ensureHydrationRenderer().hydrate(...t)},createApp=(...t)=>{const e=ensureRenderer().createApp(...t),{mount:n}=e;return e.mount=r=>{const o=normalizeContainer(r);if(!o)return;const s=e._component;!isFunction$1(s)&&!s.render&&!s.template&&(s.template=o.innerHTML),o.innerHTML="";const a=n(o,!1,o instanceof SVGElement);return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),a},e},createSSRApp=(...t)=>{const e=ensureHydrationRenderer().createApp(...t),{mount:n}=e;return e.mount=r=>{const o=normalizeContainer(r);if(o)return n(o,!0,o instanceof SVGElement)},e};function normalizeContainer(t){return isString(t)?document.querySelector(t):t}let ssrDirectiveInitialized=!1;const initDirectivesForSSR=()=>{ssrDirectiveInitialized||(ssrDirectiveInitialized=!0,initVModelForSSR(),initVShowForSSR())},runtimeDom=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition,Comment,EffectScope,Fragment:Fragment$1,KeepAlive,ReactiveEffect,Static,Suspense,Teleport,Text:Text$2,Transition,TransitionGroup,VueElement,assertNumber,callWithAsyncErrorHandling,callWithErrorHandling,camelize:camelize$1,capitalize,cloneVNode,compatUtils,computed,createApp,createBlock,createCommentVNode,createElementBlock,createElementVNode:createBaseVNode,createHydrationRenderer,createPropsRestProxy,createRenderer,createSSRApp,createSlots,createStaticVNode,createTextVNode,createVNode,customRef,defineAsyncComponent,defineComponent,defineCustomElement,defineEmits,defineExpose,defineProps,defineSSRCustomElement,get devtools(){return devtools},effect,effectScope,getCurrentInstance,getCurrentScope,getTransitionRawChildren,guardReactiveProps,h,handleError,hydrate,initCustomFormatter,initDirectivesForSSR,inject,isMemoSame,isProxy,isReactive,isReadonly,isRef,isRuntimeOnly,isShallow,isVNode,markRaw,mergeDefaults,mergeProps,nextTick,normalizeClass,normalizeProps,normalizeStyle,onActivated,onBeforeMount,onBeforeUnmount,onBeforeUpdate,onDeactivated,onErrorCaptured,onMounted,onRenderTracked,onRenderTriggered,onScopeDispose,onServerPrefetch,onUnmounted,onUpdated,openBlock,popScopeId,provide,proxyRefs,pushScopeId,queuePostFlushCb,reactive,readonly,ref,registerRuntimeCompiler,render:render$4,renderList,renderSlot,resolveComponent,resolveDirective,resolveDynamicComponent,resolveFilter,resolveTransitionHooks,setBlockTracking,setDevtoolsHook,setTransitionHooks,shallowReactive,shallowReadonly,shallowRef,ssrContextKey,ssrUtils,stop,toDisplayString,toHandlerKey,toHandlers,toRaw,toRef,toRefs,transformVNodeArgs,triggerRef,unref,useAttrs,useCssModule,useCssVars,useSSRContext,useSlots,useTransitionState,vModelCheckbox,vModelDynamic,vModelRadio,vModelSelect,vModelText,vShow,version,warn:warn$1,watch,watchEffect,watchPostEffect,watchSyncEffect,withAsyncContext,withCtx,withDefaults,withDirectives,withKeys,withMemo,withModifiers,withScopeId},Symbol.toStringTag,{value:"Module"}));function defaultOnError(t){throw t}function defaultOnWarn(t){}function createCompilerError(t,e,n,r){const o=t,s=new SyntaxError(String(o));return s.code=t,s.loc=e,s}const FRAGMENT=Symbol(""),TELEPORT=Symbol(""),SUSPENSE=Symbol(""),KEEP_ALIVE=Symbol(""),BASE_TRANSITION=Symbol(""),OPEN_BLOCK=Symbol(""),CREATE_BLOCK=Symbol(""),CREATE_ELEMENT_BLOCK=Symbol(""),CREATE_VNODE=Symbol(""),CREATE_ELEMENT_VNODE=Symbol(""),CREATE_COMMENT=Symbol(""),CREATE_TEXT=Symbol(""),CREATE_STATIC=Symbol(""),RESOLVE_COMPONENT=Symbol(""),RESOLVE_DYNAMIC_COMPONENT=Symbol(""),RESOLVE_DIRECTIVE=Symbol(""),RESOLVE_FILTER=Symbol(""),WITH_DIRECTIVES=Symbol(""),RENDER_LIST=Symbol(""),RENDER_SLOT=Symbol(""),CREATE_SLOTS=Symbol(""),TO_DISPLAY_STRING=Symbol(""),MERGE_PROPS=Symbol(""),NORMALIZE_CLASS=Symbol(""),NORMALIZE_STYLE=Symbol(""),NORMALIZE_PROPS=Symbol(""),GUARD_REACTIVE_PROPS=Symbol(""),TO_HANDLERS=Symbol(""),CAMELIZE=Symbol(""),CAPITALIZE=Symbol(""),TO_HANDLER_KEY=Symbol(""),SET_BLOCK_TRACKING=Symbol(""),PUSH_SCOPE_ID=Symbol(""),POP_SCOPE_ID=Symbol(""),WITH_CTX=Symbol(""),UNREF=Symbol(""),IS_REF=Symbol(""),WITH_MEMO=Symbol(""),IS_MEMO_SAME=Symbol(""),helperNameMap={[FRAGMENT]:"Fragment",[TELEPORT]:"Teleport",[SUSPENSE]:"Suspense",[KEEP_ALIVE]:"KeepAlive",[BASE_TRANSITION]:"BaseTransition",[OPEN_BLOCK]:"openBlock",[CREATE_BLOCK]:"createBlock",[CREATE_ELEMENT_BLOCK]:"createElementBlock",[CREATE_VNODE]:"createVNode",[CREATE_ELEMENT_VNODE]:"createElementVNode",[CREATE_COMMENT]:"createCommentVNode",[CREATE_TEXT]:"createTextVNode",[CREATE_STATIC]:"createStaticVNode",[RESOLVE_COMPONENT]:"resolveComponent",[RESOLVE_DYNAMIC_COMPONENT]:"resolveDynamicComponent",[RESOLVE_DIRECTIVE]:"resolveDirective",[RESOLVE_FILTER]:"resolveFilter",[WITH_DIRECTIVES]:"withDirectives",[RENDER_LIST]:"renderList",[RENDER_SLOT]:"renderSlot",[CREATE_SLOTS]:"createSlots",[TO_DISPLAY_STRING]:"toDisplayString",[MERGE_PROPS]:"mergeProps",[NORMALIZE_CLASS]:"normalizeClass",[NORMALIZE_STYLE]:"normalizeStyle",[NORMALIZE_PROPS]:"normalizeProps",[GUARD_REACTIVE_PROPS]:"guardReactiveProps",[TO_HANDLERS]:"toHandlers",[CAMELIZE]:"camelize",[CAPITALIZE]:"capitalize",[TO_HANDLER_KEY]:"toHandlerKey",[SET_BLOCK_TRACKING]:"setBlockTracking",[PUSH_SCOPE_ID]:"pushScopeId",[POP_SCOPE_ID]:"popScopeId",[WITH_CTX]:"withCtx",[UNREF]:"unref",[IS_REF]:"isRef",[WITH_MEMO]:"withMemo",[IS_MEMO_SAME]:"isMemoSame"};function registerRuntimeHelpers(t){Object.getOwnPropertySymbols(t).forEach(e=>{helperNameMap[e]=t[e]})}const locStub={source:"",start:{line:1,column:1,offset:0},end:{line:1,column:1,offset:0}};function createRoot(t,e=locStub){return{type:0,children:t,helpers:new Set,components:[],directives:[],hoists:[],imports:[],cached:0,temps:0,codegenNode:void 0,loc:e}}function createVNodeCall(t,e,n,r,o,s,a,l=!1,c=!1,u=!1,g=locStub){return t&&(l?(t.helper(OPEN_BLOCK),t.helper(getVNodeBlockHelper(t.inSSR,u))):t.helper(getVNodeHelper(t.inSSR,u)),a&&t.helper(WITH_DIRECTIVES)),{type:13,tag:e,props:n,children:r,patchFlag:o,dynamicProps:s,directives:a,isBlock:l,disableTracking:c,isComponent:u,loc:g}}function createArrayExpression(t,e=locStub){return{type:17,loc:e,elements:t}}function createObjectExpression(t,e=locStub){return{type:15,loc:e,properties:t}}function createObjectProperty(t,e){return{type:16,loc:locStub,key:isString(t)?createSimpleExpression(t,!0):t,value:e}}function createSimpleExpression(t,e=!1,n=locStub,r=0){return{type:4,loc:n,content:t,isStatic:e,constType:e?3:r}}function createCompoundExpression(t,e=locStub){return{type:8,loc:e,children:t}}function createCallExpression(t,e=[],n=locStub){return{type:14,loc:n,callee:t,arguments:e}}function createFunctionExpression(t,e=void 0,n=!1,r=!1,o=locStub){return{type:18,params:t,returns:e,newline:n,isSlot:r,loc:o}}function createConditionalExpression(t,e,n,r=!0){return{type:19,test:t,consequent:e,alternate:n,newline:r,loc:locStub}}function createCacheExpression(t,e,n=!1){return{type:20,index:t,value:e,isVNode:n,loc:locStub}}function createBlockStatement(t){return{type:21,body:t,loc:locStub}}const isStaticExp=t=>t.type===4&&t.isStatic,isBuiltInType=(t,e)=>t===e||t===hyphenate(e);function isCoreComponent(t){if(isBuiltInType(t,"Teleport"))return TELEPORT;if(isBuiltInType(t,"Suspense"))return SUSPENSE;if(isBuiltInType(t,"KeepAlive"))return KEEP_ALIVE;if(isBuiltInType(t,"BaseTransition"))return BASE_TRANSITION}const nonIdentifierRE=/^\d|[^\$\w]/,isSimpleIdentifier=t=>!nonIdentifierRE.test(t),validFirstIdentCharRE=/[A-Za-z_$\xA0-\uFFFF]/,validIdentCharRE=/[\.\?\w$\xA0-\uFFFF]/,whitespaceRE=/\s+[.[]\s*|\s*[.[]\s+/g,isMemberExpressionBrowser=t=>{t=t.trim().replace(whitespaceRE,a=>a.trim());let e=0,n=[],r=0,o=0,s=null;for(let a=0;a<t.length;a++){const l=t.charAt(a);switch(e){case 0:if(l==="[")n.push(e),e=1,r++;else if(l==="(")n.push(e),e=2,o++;else if(!(a===0?validFirstIdentCharRE:validIdentCharRE).test(l))return!1;break;case 1:l==="'"||l==='"'||l==="`"?(n.push(e),e=3,s=l):l==="["?r++:l==="]"&&(--r||(e=n.pop()));break;case 2:if(l==="'"||l==='"'||l==="`")n.push(e),e=3,s=l;else if(l==="(")o++;else if(l===")"){if(a===t.length-1)return!1;--o||(e=n.pop())}break;case 3:l===s&&(e=n.pop(),s=null);break}}return!r&&!o},isMemberExpression=isMemberExpressionBrowser;function getInnerRange(t,e,n){const o={source:t.source.slice(e,e+n),start:advancePositionWithClone(t.start,t.source,e),end:t.end};return n!=null&&(o.end=advancePositionWithClone(t.start,t.source,e+n)),o}function advancePositionWithClone(t,e,n=e.length){return advancePositionWithMutation(extend({},t),e,n)}function advancePositionWithMutation(t,e,n=e.length){let r=0,o=-1;for(let s=0;s<n;s++)e.charCodeAt(s)===10&&(r++,o=s);return t.offset+=n,t.line+=r,t.column=o===-1?t.column+n:n-o,t}function findDir(t,e,n=!1){for(let r=0;r<t.props.length;r++){const o=t.props[r];if(o.type===7&&(n||o.exp)&&(isString(e)?o.name===e:e.test(o.name)))return o}}function findProp(t,e,n=!1,r=!1){for(let o=0;o<t.props.length;o++){const s=t.props[o];if(s.type===6){if(n)continue;if(s.name===e&&(s.value||r))return s}else if(s.name==="bind"&&(s.exp||r)&&isStaticArgOf(s.arg,e))return s}}function isStaticArgOf(t,e){return!!(t&&isStaticExp(t)&&t.content===e)}function hasDynamicKeyVBind(t){return t.props.some(e=>e.type===7&&e.name==="bind"&&(!e.arg||e.arg.type!==4||!e.arg.isStatic))}function isText$1(t){return t.type===5||t.type===2}function isVSlot(t){return t.type===7&&t.name==="slot"}function isTemplateNode(t){return t.type===1&&t.tagType===3}function isSlotOutlet(t){return t.type===1&&t.tagType===2}function getVNodeHelper(t,e){return t||e?CREATE_VNODE:CREATE_ELEMENT_VNODE}function getVNodeBlockHelper(t,e){return t||e?CREATE_BLOCK:CREATE_ELEMENT_BLOCK}const propsHelperSet=new Set([NORMALIZE_PROPS,GUARD_REACTIVE_PROPS]);function getUnnormalizedProps(t,e=[]){if(t&&!isString(t)&&t.type===14){const n=t.callee;if(!isString(n)&&propsHelperSet.has(n))return getUnnormalizedProps(t.arguments[0],e.concat(t))}return[t,e]}function injectProp(t,e,n){let r,o=t.type===13?t.props:t.arguments[2],s=[],a;if(o&&!isString(o)&&o.type===14){const l=getUnnormalizedProps(o);o=l[0],s=l[1],a=s[s.length-1]}if(o==null||isString(o))r=createObjectExpression([e]);else if(o.type===14){const l=o.arguments[0];!isString(l)&&l.type===15?hasProp(e,l)||l.properties.unshift(e):o.callee===TO_HANDLERS?r=createCallExpression(n.helper(MERGE_PROPS),[createObjectExpression([e]),o]):o.arguments.unshift(createObjectExpression([e])),!r&&(r=o)}else o.type===15?(hasProp(e,o)||o.properties.unshift(e),r=o):(r=createCallExpression(n.helper(MERGE_PROPS),[createObjectExpression([e]),o]),a&&a.callee===GUARD_REACTIVE_PROPS&&(a=s[s.length-2]));t.type===13?a?a.arguments[0]=r:t.props=r:a?a.arguments[0]=r:t.arguments[2]=r}function hasProp(t,e){let n=!1;if(t.key.type===4){const r=t.key.content;n=e.properties.some(o=>o.key.type===4&&o.key.content===r)}return n}function toValidAssetId(t,e){return`_${e}_${t.replace(/[^\w]/g,(n,r)=>n==="-"?"_":t.charCodeAt(r).toString())}`}function getMemoedVNodeCall(t){return t.type===14&&t.callee===WITH_MEMO?t.arguments[1].returns:t}function makeBlock(t,{helper:e,removeHelper:n,inSSR:r}){t.isBlock||(t.isBlock=!0,n(getVNodeHelper(r,t.isComponent)),e(OPEN_BLOCK),e(getVNodeBlockHelper(r,t.isComponent)))}function getCompatValue(t,e){const n=e.options?e.options.compatConfig:e.compatConfig,r=n&&n[t];return t==="MODE"?r||3:r}function isCompatEnabled(t,e){const n=getCompatValue("MODE",e),r=getCompatValue(t,e);return n===3?r===!0:r!==!1}function checkCompatEnabled(t,e,n,...r){return isCompatEnabled(t,e)}const decodeRE=/&(gt|lt|amp|apos|quot);/g,decodeMap={gt:">",lt:"<",amp:"&",apos:"'",quot:'"'},defaultParserOptions={delimiters:["{{","}}"],getNamespace:()=>0,getTextMode:()=>0,isVoidTag:NO,isPreTag:NO,isCustomElement:NO,decodeEntities:t=>t.replace(decodeRE,(e,n)=>decodeMap[n]),onError:defaultOnError,onWarn:defaultOnWarn,comments:!1};function baseParse(t,e={}){const n=createParserContext(t,e),r=getCursor(n);return createRoot(parseChildren(n,0,[]),getSelection$1(n,r))}function createParserContext(t,e){const n=extend({},defaultParserOptions);let r;for(r in e)n[r]=e[r]===void 0?defaultParserOptions[r]:e[r];return{options:n,column:1,line:1,offset:0,originalSource:t,source:t,inPre:!1,inVPre:!1,onWarn:n.onWarn}}function parseChildren(t,e,n){const r=last$1(n),o=r?r.ns:0,s=[];for(;!isEnd(t,e,n);){const l=t.source;let c;if(e===0||e===1){if(!t.inVPre&&startsWith(l,t.options.delimiters[0]))c=parseInterpolation(t,e);else if(e===0&&l[0]==="<")if(l.length===1)emitError(t,5,1);else if(l[1]==="!")startsWith(l,"<!--")?c=parseComment(t):startsWith(l,"<!DOCTYPE")?c=parseBogusComment(t):startsWith(l,"<![CDATA[")?o!==0?c=parseCDATA(t,n):(emitError(t,1),c=parseBogusComment(t)):(emitError(t,11),c=parseBogusComment(t));else if(l[1]==="/")if(l.length===2)emitError(t,5,2);else if(l[2]===">"){emitError(t,14,2),advanceBy(t,3);continue}else if(/[a-z]/i.test(l[2])){emitError(t,23),parseTag(t,1,r);continue}else emitError(t,12,2),c=parseBogusComment(t);else/[a-z]/i.test(l[1])?(c=parseElement(t,n),isCompatEnabled("COMPILER_NATIVE_TEMPLATE",t)&&c&&c.tag==="template"&&!c.props.some(u=>u.type===7&&isSpecialTemplateDirective(u.name))&&(c=c.children)):l[1]==="?"?(emitError(t,21,1),c=parseBogusComment(t)):emitError(t,12,1)}if(c||(c=parseText(t,e)),isArray(c))for(let u=0;u<c.length;u++)pushNode(s,c[u]);else pushNode(s,c)}let a=!1;if(e!==2&&e!==1){const l=t.options.whitespace!=="preserve";for(let c=0;c<s.length;c++){const u=s[c];if(u.type===2)if(t.inPre)u.content=u.content.replace(/\r\n/g,`
`);else if(/[^\t\r\n\f ]/.test(u.content))l&&(u.content=u.content.replace(/[\t\r\n\f ]+/g," "));else{const g=s[c-1],C=s[c+1];!g||!C||l&&(g.type===3&&C.type===3||g.type===3&&C.type===1||g.type===1&&C.type===3||g.type===1&&C.type===1&&/[\r\n]/.test(u.content))?(a=!0,s[c]=null):u.content=" "}else u.type===3&&!t.options.comments&&(a=!0,s[c]=null)}if(t.inPre&&r&&t.options.isPreTag(r.tag)){const c=s[0];c&&c.type===2&&(c.content=c.content.replace(/^\r?\n/,""))}}return a?s.filter(Boolean):s}function pushNode(t,e){if(e.type===2){const n=last$1(t);if(n&&n.type===2&&n.loc.end.offset===e.loc.start.offset){n.content+=e.content,n.loc.end=e.loc.end,n.loc.source+=e.loc.source;return}}t.push(e)}function parseCDATA(t,e){advanceBy(t,9);const n=parseChildren(t,3,e);return t.source.length===0?emitError(t,6):advanceBy(t,3),n}function parseComment(t){const e=getCursor(t);let n;const r=/--(\!)?>/.exec(t.source);if(!r)n=t.source.slice(4),advanceBy(t,t.source.length),emitError(t,7);else{r.index<=3&&emitError(t,0),r[1]&&emitError(t,10),n=t.source.slice(4,r.index);const o=t.source.slice(0,r.index);let s=1,a=0;for(;(a=o.indexOf("<!--",s))!==-1;)advanceBy(t,a-s+1),a+4<o.length&&emitError(t,16),s=a+1;advanceBy(t,r.index+r[0].length-s+1)}return{type:3,content:n,loc:getSelection$1(t,e)}}function parseBogusComment(t){const e=getCursor(t),n=t.source[1]==="?"?1:2;let r;const o=t.source.indexOf(">");return o===-1?(r=t.source.slice(n),advanceBy(t,t.source.length)):(r=t.source.slice(n,o),advanceBy(t,o+1)),{type:3,content:r,loc:getSelection$1(t,e)}}function parseElement(t,e){const n=t.inPre,r=t.inVPre,o=last$1(e),s=parseTag(t,0,o),a=t.inPre&&!n,l=t.inVPre&&!r;if(s.isSelfClosing||t.options.isVoidTag(s.tag))return a&&(t.inPre=!1),l&&(t.inVPre=!1),s;e.push(s);const c=t.options.getTextMode(s,o),u=parseChildren(t,c,e);e.pop();{const g=s.props.find(C=>C.type===6&&C.name==="inline-template");if(g&&checkCompatEnabled("COMPILER_INLINE_TEMPLATE",t,g.loc)){const C=getSelection$1(t,s.loc.end);g.value={type:2,content:C.source,loc:C}}}if(s.children=u,startsWithEndTagOpen(t.source,s.tag))parseTag(t,1,o);else if(emitError(t,24,0,s.loc.start),t.source.length===0&&s.tag.toLowerCase()==="script"){const g=u[0];g&&startsWith(g.loc.source,"<!--")&&emitError(t,8)}return s.loc=getSelection$1(t,s.loc.start),a&&(t.inPre=!1),l&&(t.inVPre=!1),s}const isSpecialTemplateDirective=makeMap("if,else,else-if,for,slot");function parseTag(t,e,n){const r=getCursor(t),o=/^<\/?([a-z][^\t\r\n\f />]*)/i.exec(t.source),s=o[1],a=t.options.getNamespace(s,n);advanceBy(t,o[0].length),advanceSpaces(t);const l=getCursor(t),c=t.source;t.options.isPreTag(s)&&(t.inPre=!0);let u=parseAttributes(t,e);e===0&&!t.inVPre&&u.some(v=>v.type===7&&v.name==="pre")&&(t.inVPre=!0,extend(t,l),t.source=c,u=parseAttributes(t,e).filter(v=>v.name!=="v-pre"));let g=!1;if(t.source.length===0?emitError(t,9):(g=startsWith(t.source,"/>"),e===1&&g&&emitError(t,4),advanceBy(t,g?2:1)),e===1)return;let C=0;return t.inVPre||(s==="slot"?C=2:s==="template"?u.some(v=>v.type===7&&isSpecialTemplateDirective(v.name))&&(C=3):isComponent(s,u,t)&&(C=1)),{type:1,ns:a,tag:s,tagType:C,props:u,isSelfClosing:g,children:[],loc:getSelection$1(t,r),codegenNode:void 0}}function isComponent(t,e,n){const r=n.options;if(r.isCustomElement(t))return!1;if(t==="component"||/^[A-Z]/.test(t)||isCoreComponent(t)||r.isBuiltInComponent&&r.isBuiltInComponent(t)||r.isNativeTag&&!r.isNativeTag(t))return!0;for(let o=0;o<e.length;o++){const s=e[o];if(s.type===6){if(s.name==="is"&&s.value){if(s.value.content.startsWith("vue:"))return!0;if(checkCompatEnabled("COMPILER_IS_ON_ELEMENT",n,s.loc))return!0}}else{if(s.name==="is")return!0;if(s.name==="bind"&&isStaticArgOf(s.arg,"is")&&checkCompatEnabled("COMPILER_IS_ON_ELEMENT",n,s.loc))return!0}}}function parseAttributes(t,e){const n=[],r=new Set;for(;t.source.length>0&&!startsWith(t.source,">")&&!startsWith(t.source,"/>");){if(startsWith(t.source,"/")){emitError(t,22),advanceBy(t,1),advanceSpaces(t);continue}e===1&&emitError(t,3);const o=parseAttribute(t,r);o.type===6&&o.value&&o.name==="class"&&(o.value.content=o.value.content.replace(/\s+/g," ").trim()),e===0&&n.push(o),/^[^\t\r\n\f />]/.test(t.source)&&emitError(t,15),advanceSpaces(t)}return n}function parseAttribute(t,e){const n=getCursor(t),o=/^[^\t\r\n\f />][^\t\r\n\f />=]*/.exec(t.source)[0];e.has(o)&&emitError(t,2),e.add(o),o[0]==="="&&emitError(t,19);{const l=/["'<]/g;let c;for(;c=l.exec(o);)emitError(t,17,c.index)}advanceBy(t,o.length);let s;/^[\t\r\n\f ]*=/.test(t.source)&&(advanceSpaces(t),advanceBy(t,1),advanceSpaces(t),s=parseAttributeValue(t),s||emitError(t,13));const a=getSelection$1(t,n);if(!t.inVPre&&/^(v-[A-Za-z0-9-]|:|\.|@|#)/.test(o)){const l=/(?:^v-([a-z0-9-]+))?(?:(?::|^\.|^@|^#)(\[[^\]]+\]|[^\.]+))?(.+)?$/i.exec(o);let c=startsWith(o,"."),u=l[1]||(c||startsWith(o,":")?"bind":startsWith(o,"@")?"on":"slot"),g;if(l[2]){const v=u==="slot",m=o.lastIndexOf(l[2]),S=getSelection$1(t,getNewPosition(t,n,m),getNewPosition(t,n,m+l[2].length+(v&&l[3]||"").length));let T=l[2],w=!0;T.startsWith("[")?(w=!1,T.endsWith("]")?T=T.slice(1,T.length-1):(emitError(t,27),T=T.slice(1))):v&&(T+=l[3]||""),g={type:4,content:T,isStatic:w,constType:w?3:0,loc:S}}if(s&&s.isQuoted){const v=s.loc;v.start.offset++,v.start.column++,v.end=advancePositionWithClone(v.start,s.content),v.source=v.source.slice(1,-1)}const C=l[3]?l[3].slice(1).split("."):[];return c&&C.push("prop"),u==="bind"&&g&&C.includes("sync")&&checkCompatEnabled("COMPILER_V_BIND_SYNC",t,a,g.loc.source)&&(u="model",C.splice(C.indexOf("sync"),1)),{type:7,name:u,exp:s&&{type:4,content:s.content,isStatic:!1,constType:0,loc:s.loc},arg:g,modifiers:C,loc:a}}return!t.inVPre&&startsWith(o,"v-")&&emitError(t,26),{type:6,name:o,value:s&&{type:2,content:s.content,loc:s.loc},loc:a}}function parseAttributeValue(t){const e=getCursor(t);let n;const r=t.source[0],o=r==='"'||r==="'";if(o){advanceBy(t,1);const s=t.source.indexOf(r);s===-1?n=parseTextData(t,t.source.length,4):(n=parseTextData(t,s,4),advanceBy(t,1))}else{const s=/^[^\t\r\n\f >]+/.exec(t.source);if(!s)return;const a=/["'<=`]/g;let l;for(;l=a.exec(s[0]);)emitError(t,18,l.index);n=parseTextData(t,s[0].length,4)}return{content:n,isQuoted:o,loc:getSelection$1(t,e)}}function parseInterpolation(t,e){const[n,r]=t.options.delimiters,o=t.source.indexOf(r,n.length);if(o===-1){emitError(t,25);return}const s=getCursor(t);advanceBy(t,n.length);const a=getCursor(t),l=getCursor(t),c=o-n.length,u=t.source.slice(0,c),g=parseTextData(t,c,e),C=g.trim(),v=g.indexOf(C);v>0&&advancePositionWithMutation(a,u,v);const m=c-(g.length-C.length-v);return advancePositionWithMutation(l,u,m),advanceBy(t,r.length),{type:5,content:{type:4,isStatic:!1,constType:0,content:C,loc:getSelection$1(t,a,l)},loc:getSelection$1(t,s)}}function parseText(t,e){const n=e===3?["]]>"]:["<",t.options.delimiters[0]];let r=t.source.length;for(let a=0;a<n.length;a++){const l=t.source.indexOf(n[a],1);l!==-1&&r>l&&(r=l)}const o=getCursor(t);return{type:2,content:parseTextData(t,r,e),loc:getSelection$1(t,o)}}function parseTextData(t,e,n){const r=t.source.slice(0,e);return advanceBy(t,e),n===2||n===3||!r.includes("&")?r:t.options.decodeEntities(r,n===4)}function getCursor(t){const{column:e,line:n,offset:r}=t;return{column:e,line:n,offset:r}}function getSelection$1(t,e,n){return n=n||getCursor(t),{start:e,end:n,source:t.originalSource.slice(e.offset,n.offset)}}function last$1(t){return t[t.length-1]}function startsWith(t,e){return t.startsWith(e)}function advanceBy(t,e){const{source:n}=t;advancePositionWithMutation(t,n,e),t.source=n.slice(e)}function advanceSpaces(t){const e=/^[\t\r\n\f ]+/.exec(t.source);e&&advanceBy(t,e[0].length)}function getNewPosition(t,e,n){return advancePositionWithClone(e,t.originalSource.slice(e.offset,n),n)}function emitError(t,e,n,r=getCursor(t)){n&&(r.offset+=n,r.column+=n),t.options.onError(createCompilerError(e,{start:r,end:r,source:""}))}function isEnd(t,e,n){const r=t.source;switch(e){case 0:if(startsWith(r,"</")){for(let o=n.length-1;o>=0;--o)if(startsWithEndTagOpen(r,n[o].tag))return!0}break;case 1:case 2:{const o=last$1(n);if(o&&startsWithEndTagOpen(r,o.tag))return!0;break}case 3:if(startsWith(r,"]]>"))return!0;break}return!r}function startsWithEndTagOpen(t,e){return startsWith(t,"</")&&t.slice(2,2+e.length).toLowerCase()===e.toLowerCase()&&/[\t\r\n\f />]/.test(t[2+e.length]||">")}function hoistStatic(t,e){walk(t,e,isSingleElementRoot(t,t.children[0]))}function isSingleElementRoot(t,e){const{children:n}=t;return n.length===1&&e.type===1&&!isSlotOutlet(e)}function walk(t,e,n=!1){const{children:r}=t,o=r.length;let s=0;for(let a=0;a<r.length;a++){const l=r[a];if(l.type===1&&l.tagType===0){const c=n?0:getConstantType(l,e);if(c>0){if(c>=2){l.codegenNode.patchFlag=-1+"",l.codegenNode=e.hoist(l.codegenNode),s++;continue}}else{const u=l.codegenNode;if(u.type===13){const g=getPatchFlag(u);if((!g||g===512||g===1)&&getGeneratedPropsConstantType(l,e)>=2){const C=getNodeProps(l);C&&(u.props=e.hoist(C))}u.dynamicProps&&(u.dynamicProps=e.hoist(u.dynamicProps))}}}if(l.type===1){const c=l.tagType===1;c&&e.scopes.vSlot++,walk(l,e),c&&e.scopes.vSlot--}else if(l.type===11)walk(l,e,l.children.length===1);else if(l.type===9)for(let c=0;c<l.branches.length;c++)walk(l.branches[c],e,l.branches[c].children.length===1)}s&&e.transformHoist&&e.transformHoist(r,e,t),s&&s===o&&t.type===1&&t.tagType===0&&t.codegenNode&&t.codegenNode.type===13&&isArray(t.codegenNode.children)&&(t.codegenNode.children=e.hoist(createArrayExpression(t.codegenNode.children)))}function getConstantType(t,e){const{constantCache:n}=e;switch(t.type){case 1:if(t.tagType!==0)return 0;const r=n.get(t);if(r!==void 0)return r;const o=t.codegenNode;if(o.type!==13||o.isBlock&&t.tag!=="svg"&&t.tag!=="foreignObject")return 0;if(getPatchFlag(o))return n.set(t,0),0;{let l=3;const c=getGeneratedPropsConstantType(t,e);if(c===0)return n.set(t,0),0;c<l&&(l=c);for(let u=0;u<t.children.length;u++){const g=getConstantType(t.children[u],e);if(g===0)return n.set(t,0),0;g<l&&(l=g)}if(l>1)for(let u=0;u<t.props.length;u++){const g=t.props[u];if(g.type===7&&g.name==="bind"&&g.exp){const C=getConstantType(g.exp,e);if(C===0)return n.set(t,0),0;C<l&&(l=C)}}if(o.isBlock){for(let u=0;u<t.props.length;u++)if(t.props[u].type===7)return n.set(t,0),0;e.removeHelper(OPEN_BLOCK),e.removeHelper(getVNodeBlockHelper(e.inSSR,o.isComponent)),o.isBlock=!1,e.helper(getVNodeHelper(e.inSSR,o.isComponent))}return n.set(t,l),l}case 2:case 3:return 3;case 9:case 11:case 10:return 0;case 5:case 12:return getConstantType(t.content,e);case 4:return t.constType;case 8:let a=3;for(let l=0;l<t.children.length;l++){const c=t.children[l];if(isString(c)||isSymbol(c))continue;const u=getConstantType(c,e);if(u===0)return 0;u<a&&(a=u)}return a;default:return 0}}const allowHoistedHelperSet=new Set([NORMALIZE_CLASS,NORMALIZE_STYLE,NORMALIZE_PROPS,GUARD_REACTIVE_PROPS]);function getConstantTypeOfHelperCall(t,e){if(t.type===14&&!isString(t.callee)&&allowHoistedHelperSet.has(t.callee)){const n=t.arguments[0];if(n.type===4)return getConstantType(n,e);if(n.type===14)return getConstantTypeOfHelperCall(n,e)}return 0}function getGeneratedPropsConstantType(t,e){let n=3;const r=getNodeProps(t);if(r&&r.type===15){const{properties:o}=r;for(let s=0;s<o.length;s++){const{key:a,value:l}=o[s],c=getConstantType(a,e);if(c===0)return c;c<n&&(n=c);let u;if(l.type===4?u=getConstantType(l,e):l.type===14?u=getConstantTypeOfHelperCall(l,e):u=0,u===0)return u;u<n&&(n=u)}}return n}function getNodeProps(t){const e=t.codegenNode;if(e.type===13)return e.props}function getPatchFlag(t){const e=t.patchFlag;return e?parseInt(e,10):void 0}function createTransformContext(t,{filename:e="",prefixIdentifiers:n=!1,hoistStatic:r=!1,cacheHandlers:o=!1,nodeTransforms:s=[],directiveTransforms:a={},transformHoist:l=null,isBuiltInComponent:c=NOOP,isCustomElement:u=NOOP,expressionPlugins:g=[],scopeId:C=null,slotted:v=!0,ssr:m=!1,inSSR:S=!1,ssrCssVars:T="",bindingMetadata:w=EMPTY_OBJ,inline:N=!1,isTS:D=!1,onError:k=defaultOnError,onWarn:L=defaultOnWarn,compatConfig:H}){const R=e.replace(/\?.*$/,"").match(/([^/\\]+)\.\w+$/),B={selfName:R&&capitalize(camelize$1(R[1])),prefixIdentifiers:n,hoistStatic:r,cacheHandlers:o,nodeTransforms:s,directiveTransforms:a,transformHoist:l,isBuiltInComponent:c,isCustomElement:u,expressionPlugins:g,scopeId:C,slotted:v,ssr:m,inSSR:S,ssrCssVars:T,bindingMetadata:w,inline:N,isTS:D,onError:k,onWarn:L,compatConfig:H,root:t,helpers:new Map,components:new Set,directives:new Set,hoists:[],imports:[],constantCache:new Map,temps:0,cached:0,identifiers:Object.create(null),scopes:{vFor:0,vSlot:0,vPre:0,vOnce:0},parent:null,currentNode:t,childIndex:0,inVOnce:!1,helper(Y){const K=B.helpers.get(Y)||0;return B.helpers.set(Y,K+1),Y},removeHelper(Y){const K=B.helpers.get(Y);if(K){const se=K-1;se?B.helpers.set(Y,se):B.helpers.delete(Y)}},helperString(Y){return`_${helperNameMap[B.helper(Y)]}`},replaceNode(Y){B.parent.children[B.childIndex]=B.currentNode=Y},removeNode(Y){const K=B.parent.children,se=Y?K.indexOf(Y):B.currentNode?B.childIndex:-1;!Y||Y===B.currentNode?(B.currentNode=null,B.onNodeRemoved()):B.childIndex>se&&(B.childIndex--,B.onNodeRemoved()),B.parent.children.splice(se,1)},onNodeRemoved:()=>{},addIdentifiers(Y){},removeIdentifiers(Y){},hoist(Y){isString(Y)&&(Y=createSimpleExpression(Y)),B.hoists.push(Y);const K=createSimpleExpression(`_hoisted_${B.hoists.length}`,!1,Y.loc,2);return K.hoisted=Y,K},cache(Y,K=!1){return createCacheExpression(B.cached++,Y,K)}};return B.filters=new Set,B}function transform(t,e){const n=createTransformContext(t,e);traverseNode(t,n),e.hoistStatic&&hoistStatic(t,n),e.ssr||createRootCodegen(t,n),t.helpers=new Set([...n.helpers.keys()]),t.components=[...n.components],t.directives=[...n.directives],t.imports=n.imports,t.hoists=n.hoists,t.temps=n.temps,t.cached=n.cached,t.filters=[...n.filters]}function createRootCodegen(t,e){const{helper:n}=e,{children:r}=t;if(r.length===1){const o=r[0];if(isSingleElementRoot(t,o)&&o.codegenNode){const s=o.codegenNode;s.type===13&&makeBlock(s,e),t.codegenNode=s}else t.codegenNode=o}else if(r.length>1){let o=64;t.codegenNode=createVNodeCall(e,n(FRAGMENT),void 0,t.children,o+"",void 0,void 0,!0,void 0,!1)}}function traverseChildren(t,e){let n=0;const r=()=>{n--};for(;n<t.children.length;n++){const o=t.children[n];isString(o)||(e.parent=t,e.childIndex=n,e.onNodeRemoved=r,traverseNode(o,e))}}function traverseNode(t,e){e.currentNode=t;const{nodeTransforms:n}=e,r=[];for(let s=0;s<n.length;s++){const a=n[s](t,e);if(a&&(isArray(a)?r.push(...a):r.push(a)),e.currentNode)t=e.currentNode;else return}switch(t.type){case 3:e.ssr||e.helper(CREATE_COMMENT);break;case 5:e.ssr||e.helper(TO_DISPLAY_STRING);break;case 9:for(let s=0;s<t.branches.length;s++)traverseNode(t.branches[s],e);break;case 10:case 11:case 1:case 0:traverseChildren(t,e);break}e.currentNode=t;let o=r.length;for(;o--;)r[o]()}function createStructuralDirectiveTransform(t,e){const n=isString(t)?r=>r===t:r=>t.test(r);return(r,o)=>{if(r.type===1){const{props:s}=r;if(r.tagType===3&&s.some(isVSlot))return;const a=[];for(let l=0;l<s.length;l++){const c=s[l];if(c.type===7&&n(c.name)){s.splice(l,1),l--;const u=e(r,c,o);u&&a.push(u)}}return a}}}const PURE_ANNOTATION="/*#__PURE__*/",aliasHelper=t=>`${helperNameMap[t]}: _${helperNameMap[t]}`;function createCodegenContext(t,{mode:e="function",prefixIdentifiers:n=e==="module",sourceMap:r=!1,filename:o="template.vue.html",scopeId:s=null,optimizeImports:a=!1,runtimeGlobalName:l="Vue",runtimeModuleName:c="vue",ssrRuntimeModuleName:u="vue/server-renderer",ssr:g=!1,isTS:C=!1,inSSR:v=!1}){const m={mode:e,prefixIdentifiers:n,sourceMap:r,filename:o,scopeId:s,optimizeImports:a,runtimeGlobalName:l,runtimeModuleName:c,ssrRuntimeModuleName:u,ssr:g,isTS:C,inSSR:v,source:t.loc.source,code:"",column:1,line:1,offset:0,indentLevel:0,pure:!1,map:void 0,helper(T){return`_${helperNameMap[T]}`},push(T,w){m.code+=T},indent(){S(++m.indentLevel)},deindent(T=!1){T?--m.indentLevel:S(--m.indentLevel)},newline(){S(m.indentLevel)}};function S(T){m.push(`
`+"  ".repeat(T))}return m}function generate(t,e={}){const n=createCodegenContext(t,e);e.onContextCreated&&e.onContextCreated(n);const{mode:r,push:o,prefixIdentifiers:s,indent:a,deindent:l,newline:c,scopeId:u,ssr:g}=n,C=Array.from(t.helpers),v=C.length>0,m=!s&&r!=="module",S=!1,T=S?createCodegenContext(t,e):n;genFunctionPreamble(t,T);const w=g?"ssrRender":"render",D=(g?["_ctx","_push","_parent","_attrs"]:["_ctx","_cache"]).join(", ");if(o(`function ${w}(${D}) {`),a(),m&&(o("with (_ctx) {"),a(),v&&(o(`const { ${C.map(aliasHelper).join(", ")} } = _Vue`),o(`
`),c())),t.components.length&&(genAssets(t.components,"component",n),(t.directives.length||t.temps>0)&&c()),t.directives.length&&(genAssets(t.directives,"directive",n),t.temps>0&&c()),t.filters&&t.filters.length&&(c(),genAssets(t.filters,"filter",n),c()),t.temps>0){o("let ");for(let k=0;k<t.temps;k++)o(`${k>0?", ":""}_temp${k}`)}return(t.components.length||t.directives.length||t.temps)&&(o(`
`),c()),g||o("return "),t.codegenNode?genNode(t.codegenNode,n):o("null"),m&&(l(),o("}")),l(),o("}"),{ast:t,code:n.code,preamble:S?T.code:"",map:n.map?n.map.toJSON():void 0}}function genFunctionPreamble(t,e){const{ssr:n,prefixIdentifiers:r,push:o,newline:s,runtimeModuleName:a,runtimeGlobalName:l,ssrRuntimeModuleName:c}=e,u=l,g=Array.from(t.helpers);if(g.length>0&&(o(`const _Vue = ${u}
`),t.hoists.length)){const C=[CREATE_VNODE,CREATE_ELEMENT_VNODE,CREATE_COMMENT,CREATE_TEXT,CREATE_STATIC].filter(v=>g.includes(v)).map(aliasHelper).join(", ");o(`const { ${C} } = _Vue
`)}genHoists(t.hoists,e),s(),o("return ")}function genAssets(t,e,{helper:n,push:r,newline:o,isTS:s}){const a=n(e==="filter"?RESOLVE_FILTER:e==="component"?RESOLVE_COMPONENT:RESOLVE_DIRECTIVE);for(let l=0;l<t.length;l++){let c=t[l];const u=c.endsWith("__self");u&&(c=c.slice(0,-6)),r(`const ${toValidAssetId(c,e)} = ${a}(${JSON.stringify(c)}${u?", true":""})${s?"!":""}`),l<t.length-1&&o()}}function genHoists(t,e){if(!t.length)return;e.pure=!0;const{push:n,newline:r,helper:o,scopeId:s,mode:a}=e;r();for(let l=0;l<t.length;l++){const c=t[l];c&&(n(`const _hoisted_${l+1} = `),genNode(c,e),r())}e.pure=!1}function genNodeListAsArray(t,e){const n=t.length>3||!1;e.push("["),n&&e.indent(),genNodeList(t,e,n),n&&e.deindent(),e.push("]")}function genNodeList(t,e,n=!1,r=!0){const{push:o,newline:s}=e;for(let a=0;a<t.length;a++){const l=t[a];isString(l)?o(l):isArray(l)?genNodeListAsArray(l,e):genNode(l,e),a<t.length-1&&(n?(r&&o(","),s()):r&&o(", "))}}function genNode(t,e){if(isString(t)){e.push(t);return}if(isSymbol(t)){e.push(e.helper(t));return}switch(t.type){case 1:case 9:case 11:genNode(t.codegenNode,e);break;case 2:genText(t,e);break;case 4:genExpression(t,e);break;case 5:genInterpolation(t,e);break;case 12:genNode(t.codegenNode,e);break;case 8:genCompoundExpression(t,e);break;case 3:genComment(t,e);break;case 13:genVNodeCall(t,e);break;case 14:genCallExpression(t,e);break;case 15:genObjectExpression(t,e);break;case 17:genArrayExpression(t,e);break;case 18:genFunctionExpression(t,e);break;case 19:genConditionalExpression(t,e);break;case 20:genCacheExpression(t,e);break;case 21:genNodeList(t.body,e,!0,!1);break}}function genText(t,e){e.push(JSON.stringify(t.content),t)}function genExpression(t,e){const{content:n,isStatic:r}=t;e.push(r?JSON.stringify(n):n,t)}function genInterpolation(t,e){const{push:n,helper:r,pure:o}=e;o&&n(PURE_ANNOTATION),n(`${r(TO_DISPLAY_STRING)}(`),genNode(t.content,e),n(")")}function genCompoundExpression(t,e){for(let n=0;n<t.children.length;n++){const r=t.children[n];isString(r)?e.push(r):genNode(r,e)}}function genExpressionAsPropertyKey(t,e){const{push:n}=e;if(t.type===8)n("["),genCompoundExpression(t,e),n("]");else if(t.isStatic){const r=isSimpleIdentifier(t.content)?t.content:JSON.stringify(t.content);n(r,t)}else n(`[${t.content}]`,t)}function genComment(t,e){const{push:n,helper:r,pure:o}=e;o&&n(PURE_ANNOTATION),n(`${r(CREATE_COMMENT)}(${JSON.stringify(t.content)})`,t)}function genVNodeCall(t,e){const{push:n,helper:r,pure:o}=e,{tag:s,props:a,children:l,patchFlag:c,dynamicProps:u,directives:g,isBlock:C,disableTracking:v,isComponent:m}=t;g&&n(r(WITH_DIRECTIVES)+"("),C&&n(`(${r(OPEN_BLOCK)}(${v?"true":""}), `),o&&n(PURE_ANNOTATION);const S=C?getVNodeBlockHelper(e.inSSR,m):getVNodeHelper(e.inSSR,m);n(r(S)+"(",t),genNodeList(genNullableArgs([s,a,l,c,u]),e),n(")"),C&&n(")"),g&&(n(", "),genNode(g,e),n(")"))}function genNullableArgs(t){let e=t.length;for(;e--&&t[e]==null;);return t.slice(0,e+1).map(n=>n||"null")}function genCallExpression(t,e){const{push:n,helper:r,pure:o}=e,s=isString(t.callee)?t.callee:r(t.callee);o&&n(PURE_ANNOTATION),n(s+"(",t),genNodeList(t.arguments,e),n(")")}function genObjectExpression(t,e){const{push:n,indent:r,deindent:o,newline:s}=e,{properties:a}=t;if(!a.length){n("{}",t);return}const l=a.length>1||!1;n(l?"{":"{ "),l&&r();for(let c=0;c<a.length;c++){const{key:u,value:g}=a[c];genExpressionAsPropertyKey(u,e),n(": "),genNode(g,e),c<a.length-1&&(n(","),s())}l&&o(),n(l?"}":" }")}function genArrayExpression(t,e){genNodeListAsArray(t.elements,e)}function genFunctionExpression(t,e){const{push:n,indent:r,deindent:o}=e,{params:s,returns:a,body:l,newline:c,isSlot:u}=t;u&&n(`_${helperNameMap[WITH_CTX]}(`),n("(",t),isArray(s)?genNodeList(s,e):s&&genNode(s,e),n(") => "),(c||l)&&(n("{"),r()),a?(c&&n("return "),isArray(a)?genNodeListAsArray(a,e):genNode(a,e)):l&&genNode(l,e),(c||l)&&(o(),n("}")),u&&(t.isNonScopedSlot&&n(", undefined, true"),n(")"))}function genConditionalExpression(t,e){const{test:n,consequent:r,alternate:o,newline:s}=t,{push:a,indent:l,deindent:c,newline:u}=e;if(n.type===4){const C=!isSimpleIdentifier(n.content);C&&a("("),genExpression(n,e),C&&a(")")}else a("("),genNode(n,e),a(")");s&&l(),e.indentLevel++,s||a(" "),a("? "),genNode(r,e),e.indentLevel--,s&&u(),s||a(" "),a(": ");const g=o.type===19;g||e.indentLevel++,genNode(o,e),g||e.indentLevel--,s&&c(!0)}function genCacheExpression(t,e){const{push:n,helper:r,indent:o,deindent:s,newline:a}=e;n(`_cache[${t.index}] || (`),t.isVNode&&(o(),n(`${r(SET_BLOCK_TRACKING)}(-1),`),a()),n(`_cache[${t.index}] = `),genNode(t.value,e),t.isVNode&&(n(","),a(),n(`${r(SET_BLOCK_TRACKING)}(1),`),a(),n(`_cache[${t.index}]`),s()),n(")")}new RegExp("\\b"+"arguments,await,break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,let,new,return,super,switch,throw,try,var,void,while,with,yield".split(",").join("\\b|\\b")+"\\b");const transformIf=createStructuralDirectiveTransform(/^(if|else|else-if)$/,(t,e,n)=>processIf(t,e,n,(r,o,s)=>{const a=n.parent.children;let l=a.indexOf(r),c=0;for(;l-->=0;){const u=a[l];u&&u.type===9&&(c+=u.branches.length)}return()=>{if(s)r.codegenNode=createCodegenNodeForBranch(o,c,n);else{const u=getParentCondition(r.codegenNode);u.alternate=createCodegenNodeForBranch(o,c+r.branches.length-1,n)}}}));function processIf(t,e,n,r){if(e.name!=="else"&&(!e.exp||!e.exp.content.trim())){const o=e.exp?e.exp.loc:t.loc;n.onError(createCompilerError(28,e.loc)),e.exp=createSimpleExpression("true",!1,o)}if(e.name==="if"){const o=createIfBranch(t,e),s={type:9,loc:t.loc,branches:[o]};if(n.replaceNode(s),r)return r(s,o,!0)}else{const o=n.parent.children;let s=o.indexOf(t);for(;s-->=-1;){const a=o[s];if(a&&a.type===3){n.removeNode(a);continue}if(a&&a.type===2&&!a.content.trim().length){n.removeNode(a);continue}if(a&&a.type===9){e.name==="else-if"&&a.branches[a.branches.length-1].condition===void 0&&n.onError(createCompilerError(30,t.loc)),n.removeNode();const l=createIfBranch(t,e);a.branches.push(l);const c=r&&r(a,l,!1);traverseNode(l,n),c&&c(),n.currentNode=null}else n.onError(createCompilerError(30,t.loc));break}}}function createIfBranch(t,e){const n=t.tagType===3;return{type:10,loc:t.loc,condition:e.name==="else"?void 0:e.exp,children:n&&!findDir(t,"for")?t.children:[t],userKey:findProp(t,"key"),isTemplateIf:n}}function createCodegenNodeForBranch(t,e,n){return t.condition?createConditionalExpression(t.condition,createChildrenCodegenNode(t,e,n),createCallExpression(n.helper(CREATE_COMMENT),['""',"true"])):createChildrenCodegenNode(t,e,n)}function createChildrenCodegenNode(t,e,n){const{helper:r}=n,o=createObjectProperty("key",createSimpleExpression(`${e}`,!1,locStub,2)),{children:s}=t,a=s[0];if(s.length!==1||a.type!==1)if(s.length===1&&a.type===11){const c=a.codegenNode;return injectProp(c,o,n),c}else{let c=64;return createVNodeCall(n,r(FRAGMENT),createObjectExpression([o]),s,c+"",void 0,void 0,!0,!1,!1,t.loc)}else{const c=a.codegenNode,u=getMemoedVNodeCall(c);return u.type===13&&makeBlock(u,n),injectProp(u,o,n),c}}function getParentCondition(t){for(;;)if(t.type===19)if(t.alternate.type===19)t=t.alternate;else return t;else t.type===20&&(t=t.value)}const transformFor=createStructuralDirectiveTransform("for",(t,e,n)=>{const{helper:r,removeHelper:o}=n;return processFor(t,e,n,s=>{const a=createCallExpression(r(RENDER_LIST),[s.source]),l=isTemplateNode(t),c=findDir(t,"memo"),u=findProp(t,"key"),g=u&&(u.type===6?createSimpleExpression(u.value.content,!0):u.exp),C=u?createObjectProperty("key",g):null,v=s.source.type===4&&s.source.constType>0,m=v?64:u?128:256;return s.codegenNode=createVNodeCall(n,r(FRAGMENT),void 0,a,m+"",void 0,void 0,!0,!v,!1,t.loc),()=>{let S;const{children:T}=s,w=T.length!==1||T[0].type!==1,N=isSlotOutlet(t)?t:l&&t.children.length===1&&isSlotOutlet(t.children[0])?t.children[0]:null;if(N?(S=N.codegenNode,l&&C&&injectProp(S,C,n)):w?S=createVNodeCall(n,r(FRAGMENT),C?createObjectExpression([C]):void 0,t.children,64+"",void 0,void 0,!0,void 0,!1):(S=T[0].codegenNode,l&&C&&injectProp(S,C,n),S.isBlock!==!v&&(S.isBlock?(o(OPEN_BLOCK),o(getVNodeBlockHelper(n.inSSR,S.isComponent))):o(getVNodeHelper(n.inSSR,S.isComponent))),S.isBlock=!v,S.isBlock?(r(OPEN_BLOCK),r(getVNodeBlockHelper(n.inSSR,S.isComponent))):r(getVNodeHelper(n.inSSR,S.isComponent))),c){const D=createFunctionExpression(createForLoopParams(s.parseResult,[createSimpleExpression("_cached")]));D.body=createBlockStatement([createCompoundExpression(["const _memo = (",c.exp,")"]),createCompoundExpression(["if (_cached",...g?[" && _cached.key === ",g]:[],` && ${n.helperString(IS_MEMO_SAME)}(_cached, _memo)) return _cached`]),createCompoundExpression(["const _item = ",S]),createSimpleExpression("_item.memo = _memo"),createSimpleExpression("return _item")]),a.arguments.push(D,createSimpleExpression("_cache"),createSimpleExpression(String(n.cached++)))}else a.arguments.push(createFunctionExpression(createForLoopParams(s.parseResult),S,!0))}})});function processFor(t,e,n,r){if(!e.exp){n.onError(createCompilerError(31,e.loc));return}const o=parseForExpression(e.exp);if(!o){n.onError(createCompilerError(32,e.loc));return}const{addIdentifiers:s,removeIdentifiers:a,scopes:l}=n,{source:c,value:u,key:g,index:C}=o,v={type:11,loc:e.loc,source:c,valueAlias:u,keyAlias:g,objectIndexAlias:C,parseResult:o,children:isTemplateNode(t)?t.children:[t]};n.replaceNode(v),l.vFor++;const m=r&&r(v);return()=>{l.vFor--,m&&m()}}const forAliasRE=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,forIteratorRE=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,stripParensRE=/^\(|\)$/g;function parseForExpression(t,e){const n=t.loc,r=t.content,o=r.match(forAliasRE);if(!o)return;const[,s,a]=o,l={source:createAliasExpression(n,a.trim(),r.indexOf(a,s.length)),value:void 0,key:void 0,index:void 0};let c=s.trim().replace(stripParensRE,"").trim();const u=s.indexOf(c),g=c.match(forIteratorRE);if(g){c=c.replace(forIteratorRE,"").trim();const C=g[1].trim();let v;if(C&&(v=r.indexOf(C,u+c.length),l.key=createAliasExpression(n,C,v)),g[2]){const m=g[2].trim();m&&(l.index=createAliasExpression(n,m,r.indexOf(m,l.key?v+C.length:u+c.length)))}}return c&&(l.value=createAliasExpression(n,c,u)),l}function createAliasExpression(t,e,n){return createSimpleExpression(e,!1,getInnerRange(t,n,e.length))}function createForLoopParams({value:t,key:e,index:n},r=[]){return createParamsList([t,e,n,...r])}function createParamsList(t){let e=t.length;for(;e--&&!t[e];);return t.slice(0,e+1).map((n,r)=>n||createSimpleExpression("_".repeat(r+1),!1))}const defaultFallback=createSimpleExpression("undefined",!1),trackSlotScopes=(t,e)=>{if(t.type===1&&(t.tagType===1||t.tagType===3)){const n=findDir(t,"slot");if(n)return n.exp,e.scopes.vSlot++,()=>{e.scopes.vSlot--}}},buildClientSlotFn=(t,e,n)=>createFunctionExpression(t,e,!1,!0,e.length?e[0].loc:n);function buildSlots(t,e,n=buildClientSlotFn){e.helper(WITH_CTX);const{children:r,loc:o}=t,s=[],a=[];let l=e.scopes.vSlot>0||e.scopes.vFor>0;const c=findDir(t,"slot",!0);if(c){const{arg:w,exp:N}=c;w&&!isStaticExp(w)&&(l=!0),s.push(createObjectProperty(w||createSimpleExpression("default",!0),n(N,r,o)))}let u=!1,g=!1;const C=[],v=new Set;let m=0;for(let w=0;w<r.length;w++){const N=r[w];let D;if(!isTemplateNode(N)||!(D=findDir(N,"slot",!0))){N.type!==3&&C.push(N);continue}if(c){e.onError(createCompilerError(37,D.loc));break}u=!0;const{children:k,loc:L}=N,{arg:H=createSimpleExpression("default",!0),exp:R,loc:B}=D;let Y;isStaticExp(H)?Y=H?H.content:"default":l=!0;const K=n(R,k,L);let se,pe,le;if(se=findDir(N,"if"))l=!0,a.push(createConditionalExpression(se.exp,buildDynamicSlot(H,K,m++),defaultFallback));else if(pe=findDir(N,/^else(-if)?$/,!0)){let Ee=w,Ne;for(;Ee--&&(Ne=r[Ee],Ne.type===3););if(Ne&&isTemplateNode(Ne)&&findDir(Ne,"if")){r.splice(w,1),w--;let _e=a[a.length-1];for(;_e.alternate.type===19;)_e=_e.alternate;_e.alternate=pe.exp?createConditionalExpression(pe.exp,buildDynamicSlot(H,K,m++),defaultFallback):buildDynamicSlot(H,K,m++)}else e.onError(createCompilerError(30,pe.loc))}else if(le=findDir(N,"for")){l=!0;const Ee=le.parseResult||parseForExpression(le.exp);Ee?a.push(createCallExpression(e.helper(RENDER_LIST),[Ee.source,createFunctionExpression(createForLoopParams(Ee),buildDynamicSlot(H,K),!0)])):e.onError(createCompilerError(32,le.loc))}else{if(Y){if(v.has(Y)){e.onError(createCompilerError(38,B));continue}v.add(Y),Y==="default"&&(g=!0)}s.push(createObjectProperty(H,K))}}if(!c){const w=(N,D)=>{const k=n(N,D,o);return e.compatConfig&&(k.isNonScopedSlot=!0),createObjectProperty("default",k)};u?C.length&&C.some(N=>isNonWhitespaceContent(N))&&(g?e.onError(createCompilerError(39,C[0].loc)):s.push(w(void 0,C))):s.push(w(void 0,r))}const S=l?2:hasForwardedSlots(t.children)?3:1;let T=createObjectExpression(s.concat(createObjectProperty("_",createSimpleExpression(S+"",!1))),o);return a.length&&(T=createCallExpression(e.helper(CREATE_SLOTS),[T,createArrayExpression(a)])),{slots:T,hasDynamicSlots:l}}function buildDynamicSlot(t,e,n){const r=[createObjectProperty("name",t),createObjectProperty("fn",e)];return n!=null&&r.push(createObjectProperty("key",createSimpleExpression(String(n),!0))),createObjectExpression(r)}function hasForwardedSlots(t){for(let e=0;e<t.length;e++){const n=t[e];switch(n.type){case 1:if(n.tagType===2||hasForwardedSlots(n.children))return!0;break;case 9:if(hasForwardedSlots(n.branches))return!0;break;case 10:case 11:if(hasForwardedSlots(n.children))return!0;break}}return!1}function isNonWhitespaceContent(t){return t.type!==2&&t.type!==12?!0:t.type===2?!!t.content.trim():isNonWhitespaceContent(t.content)}const directiveImportMap=new WeakMap,transformElement=(t,e)=>function(){if(t=e.currentNode,!(t.type===1&&(t.tagType===0||t.tagType===1)))return;const{tag:r,props:o}=t,s=t.tagType===1;let a=s?resolveComponentType(t,e):`"${r}"`;const l=isObject(a)&&a.callee===RESOLVE_DYNAMIC_COMPONENT;let c,u,g,C=0,v,m,S,T=l||a===TELEPORT||a===SUSPENSE||!s&&(r==="svg"||r==="foreignObject");if(o.length>0){const w=buildProps(t,e,void 0,s,l);c=w.props,C=w.patchFlag,m=w.dynamicPropNames;const N=w.directives;S=N&&N.length?createArrayExpression(N.map(D=>buildDirectiveArgs(D,e))):void 0,w.shouldUseBlock&&(T=!0)}if(t.children.length>0)if(a===KEEP_ALIVE&&(T=!0,C|=1024),s&&a!==TELEPORT&&a!==KEEP_ALIVE){const{slots:N,hasDynamicSlots:D}=buildSlots(t,e);u=N,D&&(C|=1024)}else if(t.children.length===1&&a!==TELEPORT){const N=t.children[0],D=N.type,k=D===5||D===8;k&&getConstantType(N,e)===0&&(C|=1),k||D===2?u=N:u=t.children}else u=t.children;C!==0&&(g=String(C),m&&m.length&&(v=stringifyDynamicPropNames(m))),t.codegenNode=createVNodeCall(e,a,c,u,g,v,S,!!T,!1,s,t.loc)};function resolveComponentType(t,e,n=!1){let{tag:r}=t;const o=isComponentTag(r),s=findProp(t,"is");if(s)if(o||isCompatEnabled("COMPILER_IS_ON_ELEMENT",e)){const c=s.type===6?s.value&&createSimpleExpression(s.value.content,!0):s.exp;if(c)return createCallExpression(e.helper(RESOLVE_DYNAMIC_COMPONENT),[c])}else s.type===6&&s.value.content.startsWith("vue:")&&(r=s.value.content.slice(4));const a=!o&&findDir(t,"is");if(a&&a.exp)return createCallExpression(e.helper(RESOLVE_DYNAMIC_COMPONENT),[a.exp]);const l=isCoreComponent(r)||e.isBuiltInComponent(r);return l?(n||e.helper(l),l):(e.helper(RESOLVE_COMPONENT),e.components.add(r),toValidAssetId(r,"component"))}function buildProps(t,e,n=t.props,r,o,s=!1){const{tag:a,loc:l,children:c}=t;let u=[];const g=[],C=[],v=c.length>0;let m=!1,S=0,T=!1,w=!1,N=!1,D=!1,k=!1,L=!1;const H=[],R=K=>{u.length&&(g.push(createObjectExpression(dedupeProperties(u),l)),u=[]),K&&g.push(K)},B=({key:K,value:se})=>{if(isStaticExp(K)){const pe=K.content,le=isOn(pe);if(le&&(!r||o)&&pe.toLowerCase()!=="onclick"&&pe!=="onUpdate:modelValue"&&!isReservedProp(pe)&&(D=!0),le&&isReservedProp(pe)&&(L=!0),se.type===20||(se.type===4||se.type===8)&&getConstantType(se,e)>0)return;pe==="ref"?T=!0:pe==="class"?w=!0:pe==="style"?N=!0:pe!=="key"&&!H.includes(pe)&&H.push(pe),r&&(pe==="class"||pe==="style")&&!H.includes(pe)&&H.push(pe)}else k=!0};for(let K=0;K<n.length;K++){const se=n[K];if(se.type===6){const{loc:pe,name:le,value:Ee}=se;let Ne=!0;if(le==="ref"&&(T=!0,e.scopes.vFor>0&&u.push(createObjectProperty(createSimpleExpression("ref_for",!0),createSimpleExpression("true")))),le==="is"&&(isComponentTag(a)||Ee&&Ee.content.startsWith("vue:")||isCompatEnabled("COMPILER_IS_ON_ELEMENT",e)))continue;u.push(createObjectProperty(createSimpleExpression(le,!0,getInnerRange(pe,0,le.length)),createSimpleExpression(Ee?Ee.content:"",Ne,Ee?Ee.loc:pe)))}else{const{name:pe,arg:le,exp:Ee,loc:Ne}=se,_e=pe==="bind",me=pe==="on";if(pe==="slot"){r||e.onError(createCompilerError(40,Ne));continue}if(pe==="once"||pe==="memo"||pe==="is"||_e&&isStaticArgOf(le,"is")&&(isComponentTag(a)||isCompatEnabled("COMPILER_IS_ON_ELEMENT",e))||me&&s)continue;if((_e&&isStaticArgOf(le,"key")||me&&v&&isStaticArgOf(le,"vue:before-update"))&&(m=!0),_e&&isStaticArgOf(le,"ref")&&e.scopes.vFor>0&&u.push(createObjectProperty(createSimpleExpression("ref_for",!0),createSimpleExpression("true"))),!le&&(_e||me)){if(k=!0,Ee)if(_e){if(R(),isCompatEnabled("COMPILER_V_BIND_OBJECT_ORDER",e)){g.unshift(Ee);continue}g.push(Ee)}else R({type:14,loc:Ne,callee:e.helper(TO_HANDLERS),arguments:r?[Ee]:[Ee,"true"]});else e.onError(createCompilerError(_e?34:35,Ne));continue}const Ke=e.directiveTransforms[pe];if(Ke){const{props:Ye,needRuntime:pt}=Ke(se,t,e);!s&&Ye.forEach(B),me&&le&&!isStaticExp(le)?R(createObjectExpression(Ye,l)):u.push(...Ye),pt&&(C.push(se),isSymbol(pt)&&directiveImportMap.set(se,pt))}else isBuiltInDirective(pe)||(C.push(se),v&&(m=!0))}}let Y;if(g.length?(R(),g.length>1?Y=createCallExpression(e.helper(MERGE_PROPS),g,l):Y=g[0]):u.length&&(Y=createObjectExpression(dedupeProperties(u),l)),k?S|=16:(w&&!r&&(S|=2),N&&!r&&(S|=4),H.length&&(S|=8),D&&(S|=32)),!m&&(S===0||S===32)&&(T||L||C.length>0)&&(S|=512),!e.inSSR&&Y)switch(Y.type){case 15:let K=-1,se=-1,pe=!1;for(let Ne=0;Ne<Y.properties.length;Ne++){const _e=Y.properties[Ne].key;isStaticExp(_e)?_e.content==="class"?K=Ne:_e.content==="style"&&(se=Ne):_e.isHandlerKey||(pe=!0)}const le=Y.properties[K],Ee=Y.properties[se];pe?Y=createCallExpression(e.helper(NORMALIZE_PROPS),[Y]):(le&&!isStaticExp(le.value)&&(le.value=createCallExpression(e.helper(NORMALIZE_CLASS),[le.value])),Ee&&(N||Ee.value.type===4&&Ee.value.content.trim()[0]==="["||Ee.value.type===17)&&(Ee.value=createCallExpression(e.helper(NORMALIZE_STYLE),[Ee.value])));break;case 14:break;default:Y=createCallExpression(e.helper(NORMALIZE_PROPS),[createCallExpression(e.helper(GUARD_REACTIVE_PROPS),[Y])]);break}return{props:Y,directives:C,patchFlag:S,dynamicPropNames:H,shouldUseBlock:m}}function dedupeProperties(t){const e=new Map,n=[];for(let r=0;r<t.length;r++){const o=t[r];if(o.key.type===8||!o.key.isStatic){n.push(o);continue}const s=o.key.content,a=e.get(s);a?(s==="style"||s==="class"||isOn(s))&&mergeAsArray(a,o):(e.set(s,o),n.push(o))}return n}function mergeAsArray(t,e){t.value.type===17?t.value.elements.push(e.value):t.value=createArrayExpression([t.value,e.value],t.loc)}function buildDirectiveArgs(t,e){const n=[],r=directiveImportMap.get(t);r?n.push(e.helperString(r)):(e.helper(RESOLVE_DIRECTIVE),e.directives.add(t.name),n.push(toValidAssetId(t.name,"directive")));const{loc:o}=t;if(t.exp&&n.push(t.exp),t.arg&&(t.exp||n.push("void 0"),n.push(t.arg)),Object.keys(t.modifiers).length){t.arg||(t.exp||n.push("void 0"),n.push("void 0"));const s=createSimpleExpression("true",!1,o);n.push(createObjectExpression(t.modifiers.map(a=>createObjectProperty(a,s)),o))}return createArrayExpression(n,t.loc)}function stringifyDynamicPropNames(t){let e="[";for(let n=0,r=t.length;n<r;n++)e+=JSON.stringify(t[n]),n<r-1&&(e+=", ");return e+"]"}function isComponentTag(t){return t==="component"||t==="Component"}const cacheStringFunction=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(t=>t.replace(camelizeRE,(e,n)=>n?n.toUpperCase():"")),transformSlotOutlet=(t,e)=>{if(isSlotOutlet(t)){const{children:n,loc:r}=t,{slotName:o,slotProps:s}=processSlotOutlet(t,e),a=[e.prefixIdentifiers?"_ctx.$slots":"$slots",o,"{}","undefined","true"];let l=2;s&&(a[2]=s,l=3),n.length&&(a[3]=createFunctionExpression([],n,!1,!1,r),l=4),e.scopeId&&!e.slotted&&(l=5),a.splice(l),t.codegenNode=createCallExpression(e.helper(RENDER_SLOT),a,r)}};function processSlotOutlet(t,e){let n='"default"',r;const o=[];for(let s=0;s<t.props.length;s++){const a=t.props[s];a.type===6?a.value&&(a.name==="name"?n=JSON.stringify(a.value.content):(a.name=camelize(a.name),o.push(a))):a.name==="bind"&&isStaticArgOf(a.arg,"name")?a.exp&&(n=a.exp):(a.name==="bind"&&a.arg&&isStaticExp(a.arg)&&(a.arg.content=camelize(a.arg.content)),o.push(a))}if(o.length>0){const{props:s,directives:a}=buildProps(t,e,o,!1,!1);r=s,a.length&&e.onError(createCompilerError(36,a[0].loc))}return{slotName:n,slotProps:r}}const fnExpRE=/^\s*([\w$_]+|(async\s*)?\([^)]*?\))\s*(:[^=]+)?=>|^\s*(async\s+)?function(?:\s+[\w$]+)?\s*\(/,transformOn$1=(t,e,n,r)=>{const{loc:o,modifiers:s,arg:a}=t;!t.exp&&!s.length&&n.onError(createCompilerError(35,o));let l;if(a.type===4)if(a.isStatic){let C=a.content;C.startsWith("vue:")&&(C=`vnode-${C.slice(4)}`);const v=e.tagType!==0||C.startsWith("vnode")||!/[A-Z]/.test(C)?toHandlerKey(camelize$1(C)):`on:${C}`;l=createSimpleExpression(v,!0,a.loc)}else l=createCompoundExpression([`${n.helperString(TO_HANDLER_KEY)}(`,a,")"]);else l=a,l.children.unshift(`${n.helperString(TO_HANDLER_KEY)}(`),l.children.push(")");let c=t.exp;c&&!c.content.trim()&&(c=void 0);let u=n.cacheHandlers&&!c&&!n.inVOnce;if(c){const C=isMemberExpression(c.content),v=!(C||fnExpRE.test(c.content)),m=c.content.includes(";");(v||u&&C)&&(c=createCompoundExpression([`${v?"$event":"(...args)"} => ${m?"{":"("}`,c,m?"}":")"]))}let g={props:[createObjectProperty(l,c||createSimpleExpression("() => {}",!1,o))]};return r&&(g=r(g)),u&&(g.props[0].value=n.cache(g.props[0].value)),g.props.forEach(C=>C.key.isHandlerKey=!0),g},transformBind=(t,e,n)=>{const{exp:r,modifiers:o,loc:s}=t,a=t.arg;return a.type!==4?(a.children.unshift("("),a.children.push(') || ""')):a.isStatic||(a.content=`${a.content} || ""`),o.includes("camel")&&(a.type===4?a.isStatic?a.content=camelize$1(a.content):a.content=`${n.helperString(CAMELIZE)}(${a.content})`:(a.children.unshift(`${n.helperString(CAMELIZE)}(`),a.children.push(")"))),n.inSSR||(o.includes("prop")&&injectPrefix(a,"."),o.includes("attr")&&injectPrefix(a,"^")),!r||r.type===4&&!r.content.trim()?(n.onError(createCompilerError(34,s)),{props:[createObjectProperty(a,createSimpleExpression("",!0,s))]}):{props:[createObjectProperty(a,r)]}},injectPrefix=(t,e)=>{t.type===4?t.isStatic?t.content=e+t.content:t.content=`\`${e}\${${t.content}}\``:(t.children.unshift(`'${e}' + (`),t.children.push(")"))},transformText=(t,e)=>{if(t.type===0||t.type===1||t.type===11||t.type===10)return()=>{const n=t.children;let r,o=!1;for(let s=0;s<n.length;s++){const a=n[s];if(isText$1(a)){o=!0;for(let l=s+1;l<n.length;l++){const c=n[l];if(isText$1(c))r||(r=n[s]=createCompoundExpression([a],a.loc)),r.children.push(" + ",c),n.splice(l,1),l--;else{r=void 0;break}}}}if(!(!o||n.length===1&&(t.type===0||t.type===1&&t.tagType===0&&!t.props.find(s=>s.type===7&&!e.directiveTransforms[s.name])&&t.tag!=="template")))for(let s=0;s<n.length;s++){const a=n[s];if(isText$1(a)||a.type===8){const l=[];(a.type!==2||a.content!==" ")&&l.push(a),!e.ssr&&getConstantType(a,e)===0&&l.push(1+""),n[s]={type:12,content:a,loc:a.loc,codegenNode:createCallExpression(e.helper(CREATE_TEXT),l)}}}}},seen$1=new WeakSet,transformOnce=(t,e)=>{if(t.type===1&&findDir(t,"once",!0))return seen$1.has(t)||e.inVOnce?void 0:(seen$1.add(t),e.inVOnce=!0,e.helper(SET_BLOCK_TRACKING),()=>{e.inVOnce=!1;const n=e.currentNode;n.codegenNode&&(n.codegenNode=e.cache(n.codegenNode,!0))})},transformModel$1=(t,e,n)=>{const{exp:r,arg:o}=t;if(!r)return n.onError(createCompilerError(41,t.loc)),createTransformProps();const s=r.loc.source,a=r.type===4?r.content:s,l=n.bindingMetadata[s];if(l==="props"||l==="props-aliased")return n.onError(createCompilerError(44,r.loc)),createTransformProps();const c=!1;if(!a.trim()||!isMemberExpression(a)&&!c)return n.onError(createCompilerError(42,r.loc)),createTransformProps();const u=o||createSimpleExpression("modelValue",!0),g=o?isStaticExp(o)?`onUpdate:${camelize$1(o.content)}`:createCompoundExpression(['"onUpdate:" + ',o]):"onUpdate:modelValue";let C;const v=n.isTS?"($event: any)":"$event";C=createCompoundExpression([`${v} => ((`,r,") = $event)"]);const m=[createObjectProperty(u,t.exp),createObjectProperty(g,C)];if(t.modifiers.length&&e.tagType===1){const S=t.modifiers.map(w=>(isSimpleIdentifier(w)?w:JSON.stringify(w))+": true").join(", "),T=o?isStaticExp(o)?`${o.content}Modifiers`:createCompoundExpression([o,' + "Modifiers"']):"modelModifiers";m.push(createObjectProperty(T,createSimpleExpression(`{ ${S} }`,!1,t.loc,2)))}return createTransformProps(m)};function createTransformProps(t=[]){return{props:t}}const validDivisionCharRE=/[\w).+\-_$\]]/,transformFilter=(t,e)=>{isCompatEnabled("COMPILER_FILTER",e)&&(t.type===5&&rewriteFilter(t.content,e),t.type===1&&t.props.forEach(n=>{n.type===7&&n.name!=="for"&&n.exp&&rewriteFilter(n.exp,e)}))};function rewriteFilter(t,e){if(t.type===4)parseFilter(t,e);else for(let n=0;n<t.children.length;n++){const r=t.children[n];typeof r=="object"&&(r.type===4?parseFilter(r,e):r.type===8?rewriteFilter(t,e):r.type===5&&rewriteFilter(r.content,e))}}function parseFilter(t,e){const n=t.content;let r=!1,o=!1,s=!1,a=!1,l=0,c=0,u=0,g=0,C,v,m,S,T=[];for(m=0;m<n.length;m++)if(v=C,C=n.charCodeAt(m),r)C===39&&v!==92&&(r=!1);else if(o)C===34&&v!==92&&(o=!1);else if(s)C===96&&v!==92&&(s=!1);else if(a)C===47&&v!==92&&(a=!1);else if(C===124&&n.charCodeAt(m+1)!==124&&n.charCodeAt(m-1)!==124&&!l&&!c&&!u)S===void 0?(g=m+1,S=n.slice(0,m).trim()):w();else{switch(C){case 34:o=!0;break;case 39:r=!0;break;case 96:s=!0;break;case 40:u++;break;case 41:u--;break;case 91:c++;break;case 93:c--;break;case 123:l++;break;case 125:l--;break}if(C===47){let N=m-1,D;for(;N>=0&&(D=n.charAt(N),D===" ");N--);(!D||!validDivisionCharRE.test(D))&&(a=!0)}}S===void 0?S=n.slice(0,m).trim():g!==0&&w();function w(){T.push(n.slice(g,m).trim()),g=m+1}if(T.length){for(m=0;m<T.length;m++)S=wrapFilter(S,T[m],e);t.content=S}}function wrapFilter(t,e,n){n.helper(RESOLVE_FILTER);const r=e.indexOf("(");if(r<0)return n.filters.add(e),`${toValidAssetId(e,"filter")}(${t})`;{const o=e.slice(0,r),s=e.slice(r+1);return n.filters.add(o),`${toValidAssetId(o,"filter")}(${t}${s!==")"?","+s:s}`}}const seen=new WeakSet,transformMemo=(t,e)=>{if(t.type===1){const n=findDir(t,"memo");return!n||seen.has(t)?void 0:(seen.add(t),()=>{const r=t.codegenNode||e.currentNode.codegenNode;r&&r.type===13&&(t.tagType!==1&&makeBlock(r,e),t.codegenNode=createCallExpression(e.helper(WITH_MEMO),[n.exp,createFunctionExpression(void 0,r),"_cache",String(e.cached++)]))})}};function getBaseTransformPreset(t){return[[transformOnce,transformIf,transformMemo,transformFor,transformFilter,transformSlotOutlet,transformElement,trackSlotScopes,transformText],{on:transformOn$1,bind:transformBind,model:transformModel$1}]}function baseCompile(t,e={}){const n=e.onError||defaultOnError,r=e.mode==="module";e.prefixIdentifiers===!0?n(createCompilerError(47)):r&&n(createCompilerError(48));const o=!1;e.cacheHandlers&&n(createCompilerError(49)),e.scopeId&&!r&&n(createCompilerError(50));const s=isString(t)?baseParse(t,e):t,[a,l]=getBaseTransformPreset();return transform(s,extend({},e,{prefixIdentifiers:o,nodeTransforms:[...a,...e.nodeTransforms||[]],directiveTransforms:extend({},l,e.directiveTransforms||{})})),generate(s,extend({},e,{prefixIdentifiers:o}))}const noopDirectiveTransform=()=>({props:[]}),V_MODEL_RADIO=Symbol(""),V_MODEL_CHECKBOX=Symbol(""),V_MODEL_TEXT=Symbol(""),V_MODEL_SELECT=Symbol(""),V_MODEL_DYNAMIC=Symbol(""),V_ON_WITH_MODIFIERS=Symbol(""),V_ON_WITH_KEYS=Symbol(""),V_SHOW=Symbol(""),TRANSITION=Symbol(""),TRANSITION_GROUP=Symbol("");registerRuntimeHelpers({[V_MODEL_RADIO]:"vModelRadio",[V_MODEL_CHECKBOX]:"vModelCheckbox",[V_MODEL_TEXT]:"vModelText",[V_MODEL_SELECT]:"vModelSelect",[V_MODEL_DYNAMIC]:"vModelDynamic",[V_ON_WITH_MODIFIERS]:"withModifiers",[V_ON_WITH_KEYS]:"withKeys",[V_SHOW]:"vShow",[TRANSITION]:"Transition",[TRANSITION_GROUP]:"TransitionGroup"});let decoder;function decodeHtmlBrowser(t,e=!1){return decoder||(decoder=document.createElement("div")),e?(decoder.innerHTML=`<div foo="${t.replace(/"/g,"&quot;")}">`,decoder.children[0].getAttribute("foo")):(decoder.innerHTML=t,decoder.textContent)}const isRawTextContainer=makeMap("style,iframe,script,noscript",!0),parserOptions={isVoidTag,isNativeTag:t=>isHTMLTag(t)||isSVGTag(t),isPreTag:t=>t==="pre",decodeEntities:decodeHtmlBrowser,isBuiltInComponent:t=>{if(isBuiltInType(t,"Transition"))return TRANSITION;if(isBuiltInType(t,"TransitionGroup"))return TRANSITION_GROUP},getNamespace(t,e){let n=e?e.ns:0;if(e&&n===2)if(e.tag==="annotation-xml"){if(t==="svg")return 1;e.props.some(r=>r.type===6&&r.name==="encoding"&&r.value!=null&&(r.value.content==="text/html"||r.value.content==="application/xhtml+xml"))&&(n=0)}else/^m(?:[ions]|text)$/.test(e.tag)&&t!=="mglyph"&&t!=="malignmark"&&(n=0);else e&&n===1&&(e.tag==="foreignObject"||e.tag==="desc"||e.tag==="title")&&(n=0);if(n===0){if(t==="svg")return 1;if(t==="math")return 2}return n},getTextMode({tag:t,ns:e}){if(e===0){if(t==="textarea"||t==="title")return 1;if(isRawTextContainer(t))return 2}return 0}},transformStyle=t=>{t.type===1&&t.props.forEach((e,n)=>{e.type===6&&e.name==="style"&&e.value&&(t.props[n]={type:7,name:"bind",arg:createSimpleExpression("style",!0,e.loc),exp:parseInlineCSS(e.value.content,e.loc),modifiers:[],loc:e.loc})})},parseInlineCSS=(t,e)=>{const n=parseStringStyle(t);return createSimpleExpression(JSON.stringify(n),!1,e,3)};function createDOMCompilerError(t,e){return createCompilerError(t,e)}const transformVHtml=(t,e,n)=>{const{exp:r,loc:o}=t;return r||n.onError(createDOMCompilerError(51,o)),e.children.length&&(n.onError(createDOMCompilerError(52,o)),e.children.length=0),{props:[createObjectProperty(createSimpleExpression("innerHTML",!0,o),r||createSimpleExpression("",!0))]}},transformVText=(t,e,n)=>{const{exp:r,loc:o}=t;return r||n.onError(createDOMCompilerError(53,o)),e.children.length&&(n.onError(createDOMCompilerError(54,o)),e.children.length=0),{props:[createObjectProperty(createSimpleExpression("textContent",!0),r?getConstantType(r,n)>0?r:createCallExpression(n.helperString(TO_DISPLAY_STRING),[r],o):createSimpleExpression("",!0))]}},transformModel=(t,e,n)=>{const r=transformModel$1(t,e,n);if(!r.props.length||e.tagType===1)return r;t.arg&&n.onError(createDOMCompilerError(56,t.arg.loc));const{tag:o}=e,s=n.isCustomElement(o);if(o==="input"||o==="textarea"||o==="select"||s){let a=V_MODEL_TEXT,l=!1;if(o==="input"||s){const c=findProp(e,"type");if(c){if(c.type===7)a=V_MODEL_DYNAMIC;else if(c.value)switch(c.value.content){case"radio":a=V_MODEL_RADIO;break;case"checkbox":a=V_MODEL_CHECKBOX;break;case"file":l=!0,n.onError(createDOMCompilerError(57,t.loc));break}}else hasDynamicKeyVBind(e)&&(a=V_MODEL_DYNAMIC)}else o==="select"&&(a=V_MODEL_SELECT);l||(r.needRuntime=n.helper(a))}else n.onError(createDOMCompilerError(55,t.loc));return r.props=r.props.filter(a=>!(a.key.type===4&&a.key.content==="modelValue")),r},isEventOptionModifier=makeMap("passive,once,capture"),isNonKeyModifier=makeMap("stop,prevent,self,ctrl,shift,alt,meta,exact,middle"),maybeKeyModifier=makeMap("left,right"),isKeyboardEvent=makeMap("onkeyup,onkeydown,onkeypress",!0),resolveModifiers=(t,e,n,r)=>{const o=[],s=[],a=[];for(let l=0;l<e.length;l++){const c=e[l];c==="native"&&checkCompatEnabled("COMPILER_V_ON_NATIVE",n)||isEventOptionModifier(c)?a.push(c):maybeKeyModifier(c)?isStaticExp(t)?isKeyboardEvent(t.content)?o.push(c):s.push(c):(o.push(c),s.push(c)):isNonKeyModifier(c)?s.push(c):o.push(c)}return{keyModifiers:o,nonKeyModifiers:s,eventOptionModifiers:a}},transformClick=(t,e)=>isStaticExp(t)&&t.content.toLowerCase()==="onclick"?createSimpleExpression(e,!0):t.type!==4?createCompoundExpression(["(",t,`) === "onClick" ? "${e}" : (`,t,")"]):t,transformOn=(t,e,n)=>transformOn$1(t,e,n,r=>{const{modifiers:o}=t;if(!o.length)return r;let{key:s,value:a}=r.props[0];const{keyModifiers:l,nonKeyModifiers:c,eventOptionModifiers:u}=resolveModifiers(s,o,n,t.loc);if(c.includes("right")&&(s=transformClick(s,"onContextmenu")),c.includes("middle")&&(s=transformClick(s,"onMouseup")),c.length&&(a=createCallExpression(n.helper(V_ON_WITH_MODIFIERS),[a,JSON.stringify(c)])),l.length&&(!isStaticExp(s)||isKeyboardEvent(s.content))&&(a=createCallExpression(n.helper(V_ON_WITH_KEYS),[a,JSON.stringify(l)])),u.length){const g=u.map(capitalize).join("");s=isStaticExp(s)?createSimpleExpression(`${s.content}${g}`,!0):createCompoundExpression(["(",s,`) + "${g}"`])}return{props:[createObjectProperty(s,a)]}}),transformShow=(t,e,n)=>{const{exp:r,loc:o}=t;return r||n.onError(createDOMCompilerError(59,o)),{props:[],needRuntime:n.helper(V_SHOW)}},ignoreSideEffectTags=(t,e)=>{t.type===1&&t.tagType===0&&(t.tag==="script"||t.tag==="style")&&(e.onError(createDOMCompilerError(61,t.loc)),e.removeNode())},DOMNodeTransforms=[transformStyle],DOMDirectiveTransforms={cloak:noopDirectiveTransform,html:transformVHtml,text:transformVText,model:transformModel,on:transformOn,show:transformShow};function compile(t,e={}){return baseCompile(t,extend({},parserOptions,e,{nodeTransforms:[ignoreSideEffectTags,...DOMNodeTransforms,...e.nodeTransforms||[]],directiveTransforms:extend({},DOMDirectiveTransforms,e.directiveTransforms||{}),transformHoist:null}))}const compileCache=Object.create(null);function compileToFunction(t,e){if(!isString(t))if(t.nodeType)t=t.innerHTML;else return NOOP;const n=t,r=compileCache[n];if(r)return r;if(t[0]==="#"){const l=document.querySelector(t);t=l?l.innerHTML:""}const o=extend({hoistStatic:!0,onError:void 0,onWarn:NOOP},e);!o.isCustomElement&&typeof customElements<"u"&&(o.isCustomElement=l=>!!customElements.get(l));const{code:s}=compile(t,o),a=new Function("Vue",s)(runtimeDom);return a._rc=!0,compileCache[n]=a}registerRuntimeCompiler(compileToFunction);function isDate(t){return t instanceof Date||Object.prototype.toString.call(t)==="[object Date]"}function toDate(t){return isDate(t)?new Date(t.getTime()):t==null?new Date(NaN):new Date(t)}function isValidDate$1(t){return isDate(t)&&!isNaN(t.getTime())}function startOfWeek(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!(e>=0&&e<=6))throw new RangeError("weekStartsOn must be between 0 and 6");var n=toDate(t),r=n.getDay(),o=(r+7-e)%7;return n.setDate(n.getDate()-o),n.setHours(0,0,0,0),n}function startOfWeekYear(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.firstDayOfWeek,r=n===void 0?0:n,o=e.firstWeekContainsDate,s=o===void 0?1:o;if(!(s>=1&&s<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7");for(var a=toDate(t),l=a.getFullYear(),c=new Date(0),u=l+1;u>=l-1&&(c.setFullYear(u,0,s),c.setHours(0,0,0,0),c=startOfWeek(c,r),!(a.getTime()>=c.getTime()));u--);return c}function getWeek(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.firstDayOfWeek,r=n===void 0?0:n,o=e.firstWeekContainsDate,s=o===void 0?1:o,a=toDate(t),l=startOfWeek(a,r),c=startOfWeekYear(a,{firstDayOfWeek:r,firstWeekContainsDate:s}),u=l.getTime()-c.getTime();return Math.round(u/(7*24*3600*1e3))+1}var locale$1={months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekdaysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],firstDayOfWeek:0,firstWeekContainsDate:1},REGEX_FORMAT=/\[([^\]]+)]|YYYY|YY?|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|m{1,2}|s{1,2}|Z{1,2}|S{1,3}|w{1,2}|x|X|a|A/g;function pad(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,n="".concat(Math.abs(t)),r=t<0?"-":"";n.length<e;)n="0".concat(n);return r+n}function getOffset(t){return Math.round(t.getTimezoneOffset()/15)*15}function formatTimezone(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",n=t>0?"-":"+",r=Math.abs(t),o=Math.floor(r/60),s=r%60;return n+pad(o,2)+e+pad(s,2)}var meridiem=function(e,n,r){var o=e<12?"AM":"PM";return r?o.toLocaleLowerCase():o},formatFlags={Y:function(e){var n=e.getFullYear();return n<=9999?"".concat(n):"+".concat(n)},YY:function(e){return pad(e.getFullYear(),4).substr(2)},YYYY:function(e){return pad(e.getFullYear(),4)},M:function(e){return e.getMonth()+1},MM:function(e){return pad(e.getMonth()+1,2)},MMM:function(e,n){return n.monthsShort[e.getMonth()]},MMMM:function(e,n){return n.months[e.getMonth()]},D:function(e){return e.getDate()},DD:function(e){return pad(e.getDate(),2)},H:function(e){return e.getHours()},HH:function(e){return pad(e.getHours(),2)},h:function(e){var n=e.getHours();return n===0?12:n>12?n%12:n},hh:function(){var e=formatFlags.h.apply(formatFlags,arguments);return pad(e,2)},m:function(e){return e.getMinutes()},mm:function(e){return pad(e.getMinutes(),2)},s:function(e){return e.getSeconds()},ss:function(e){return pad(e.getSeconds(),2)},S:function(e){return Math.floor(e.getMilliseconds()/100)},SS:function(e){return pad(Math.floor(e.getMilliseconds()/10),2)},SSS:function(e){return pad(e.getMilliseconds(),3)},d:function(e){return e.getDay()},dd:function(e,n){return n.weekdaysMin[e.getDay()]},ddd:function(e,n){return n.weekdaysShort[e.getDay()]},dddd:function(e,n){return n.weekdays[e.getDay()]},A:function(e,n){var r=n.meridiem||meridiem;return r(e.getHours(),e.getMinutes(),!1)},a:function(e,n){var r=n.meridiem||meridiem;return r(e.getHours(),e.getMinutes(),!0)},Z:function(e){return formatTimezone(getOffset(e),":")},ZZ:function(e){return formatTimezone(getOffset(e))},X:function(e){return Math.floor(e.getTime()/1e3)},x:function(e){return e.getTime()},w:function(e,n){return getWeek(e,{firstDayOfWeek:n.firstDayOfWeek,firstWeekContainsDate:n.firstWeekContainsDate})},ww:function(e,n){return pad(formatFlags.w(e,n),2)}};function format(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=e?String(e):"YYYY-MM-DDTHH:mm:ss.SSSZ",o=toDate(t);if(!isValidDate$1(o))return"Invalid Date";var s=n.locale||locale$1;return r.replace(REGEX_FORMAT,function(a,l){return l||(typeof formatFlags[a]=="function"?"".concat(formatFlags[a](o,s)):a)})}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(t){if(Symbol.iterator in Object(t)||Object.prototype.toString.call(t)==="[object Arguments]")return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}function ownKeys(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys(n,!0).forEach(function(r){_defineProperty(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(n).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(t,e){if(Symbol.iterator in Object(t)||Object.prototype.toString.call(t)==="[object Arguments]"){var n=[],r=!0,o=!1,s=void 0;try{for(var a=t[Symbol.iterator](),l;!(r=(l=a.next()).done)&&(n.push(l.value),!(e&&n.length===e));r=!0);}catch(c){o=!0,s=c}finally{try{!r&&a.return!=null&&a.return()}finally{if(o)throw s}}return n}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _defineProperty(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var formattingTokens=/(\[[^\[]*\])|(MM?M?M?|Do|DD?|ddd?d?|w[o|w]?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|S{1,3}|x|X|ZZ?|.)/g,match1=/\d/,match2=/\d\d/,match3=/\d{3}/,match4=/\d{4}/,match1to2=/\d\d?/,matchShortOffset=/[+-]\d\d:?\d\d/,matchSigned=/[+-]?\d+/,matchTimestamp=/[+-]?\d+(\.\d{1,3})?/,YEAR="year",MONTH="month",DAY="day",HOUR="hour",MINUTE="minute",SECOND="second",MILLISECOND="millisecond",parseFlags={},addParseFlag=function(e,n,r){var o=Array.isArray(e)?e:[e],s;typeof r=="string"?s=function(l){var c=parseInt(l,10);return _defineProperty({},r,c)}:s=r,o.forEach(function(a){parseFlags[a]=[n,s]})},escapeStringRegExp=function(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")},matchWordRegExp=function(e){return function(n){var r=n[e];if(!Array.isArray(r))throw new Error("Locale[".concat(e,"] need an array"));return new RegExp(r.map(escapeStringRegExp).join("|"))}},matchWordCallback=function(e,n){return function(r,o){var s=o[e];if(!Array.isArray(s))throw new Error("Locale[".concat(e,"] need an array"));var a=s.indexOf(r);if(a<0)throw new Error("Invalid Word");return _defineProperty({},n,a)}};addParseFlag("Y",matchSigned,YEAR);addParseFlag("YY",match2,function(t){var e=new Date().getFullYear(),n=Math.floor(e/100),r=parseInt(t,10);return r=(r>68?n-1:n)*100+r,_defineProperty({},YEAR,r)});addParseFlag("YYYY",match4,YEAR);addParseFlag("M",match1to2,function(t){return _defineProperty({},MONTH,parseInt(t,10)-1)});addParseFlag("MM",match2,function(t){return _defineProperty({},MONTH,parseInt(t,10)-1)});addParseFlag("MMM",matchWordRegExp("monthsShort"),matchWordCallback("monthsShort",MONTH));addParseFlag("MMMM",matchWordRegExp("months"),matchWordCallback("months",MONTH));addParseFlag("D",match1to2,DAY);addParseFlag("DD",match2,DAY);addParseFlag(["H","h"],match1to2,HOUR);addParseFlag(["HH","hh"],match2,HOUR);addParseFlag("m",match1to2,MINUTE);addParseFlag("mm",match2,MINUTE);addParseFlag("s",match1to2,SECOND);addParseFlag("ss",match2,SECOND);addParseFlag("S",match1,function(t){return _defineProperty({},MILLISECOND,parseInt(t,10)*100)});addParseFlag("SS",match2,function(t){return _defineProperty({},MILLISECOND,parseInt(t,10)*10)});addParseFlag("SSS",match3,MILLISECOND);function matchMeridiem(t){return t.meridiemParse||/[ap]\.?m?\.?/i}function defaultIsPM(t){return"".concat(t).toLowerCase().charAt(0)==="p"}addParseFlag(["A","a"],matchMeridiem,function(t,e){var n=typeof e.isPM=="function"?e.isPM(t):defaultIsPM(t);return{isPM:n}});function offsetFromString(t){var e=t.match(/([+-]|\d\d)/g)||["-","0","0"],n=_slicedToArray(e,3),r=n[0],o=n[1],s=n[2],a=parseInt(o,10)*60+parseInt(s,10);return a===0?0:r==="+"?-a:+a}addParseFlag(["Z","ZZ"],matchShortOffset,function(t){return{offset:offsetFromString(t)}});addParseFlag("x",matchSigned,function(t){return{date:new Date(parseInt(t,10))}});addParseFlag("X",matchTimestamp,function(t){return{date:new Date(parseFloat(t)*1e3)}});addParseFlag("d",match1,"weekday");addParseFlag("dd",matchWordRegExp("weekdaysMin"),matchWordCallback("weekdaysMin","weekday"));addParseFlag("ddd",matchWordRegExp("weekdaysShort"),matchWordCallback("weekdaysShort","weekday"));addParseFlag("dddd",matchWordRegExp("weekdays"),matchWordCallback("weekdays","weekday"));addParseFlag("w",match1to2,"week");addParseFlag("ww",match2,"week");function to24hour(t,e){if(t!==void 0&&e!==void 0){if(e){if(t<12)return t+12}else if(t===12)return 0}return t}function getFullInputArray(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Date,n=[0,0,1,0,0,0,0],r=[e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()],o=!0,s=0;s<7;s++)t[s]===void 0?n[s]=o?r[s]:n[s]:(n[s]=t[s],o=!1);return n}function createDate$1(t,e,n,r,o,s,a){var l;return t<100&&t>=0?(l=new Date(t+400,e,n,r,o,s,a),isFinite(l.getFullYear())&&l.setFullYear(t)):l=new Date(t,e,n,r,o,s,a),l}function createUTCDate(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var o=n[0];return o<100&&o>=0?(n[0]+=400,t=new Date(Date.UTC.apply(Date,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(o)):t=new Date(Date.UTC.apply(Date,n)),t}function makeParser(t,e,n){var r=e.match(formattingTokens);if(!r)throw new Error;for(var o=r.length,s={},a=0;a<o;a+=1){var l=r[a],c=parseFlags[l];if(c){var g=typeof c[0]=="function"?c[0](n):c[0],C=c[1],v=(g.exec(t)||[])[0],m=C(v,n);s=_objectSpread({},s,{},m),t=t.replace(v,"")}else{var u=l.replace(/^\[|\]$/g,"");if(t.indexOf(u)===0)t=t.substr(u.length);else throw new Error("not match")}}return s}function parse(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};try{var r=n.locale,o=r===void 0?locale$1:r,s=n.backupDate,a=s===void 0?new Date:s,l=makeParser(t,e,o),c=l.year,u=l.month,g=l.day,C=l.hour,v=l.minute,m=l.second,S=l.millisecond,T=l.isPM,w=l.date,N=l.offset,D=l.weekday,k=l.week;if(w)return w;var L=[c,u,g,C,v,m,S];if(L[3]=to24hour(L[3],T),k!==void 0&&u===void 0&&g===void 0){var H=startOfWeekYear(c===void 0?a:new Date(c,3),{firstDayOfWeek:o.firstDayOfWeek,firstWeekContainsDate:o.firstWeekContainsDate});return new Date(H.getTime()+(k-1)*7*24*3600*1e3)}var R,B=getFullInputArray(L,a);return N!==void 0?(B[6]+=N*60*1e3,R=createUTCDate.apply(void 0,_toConsumableArray(B))):R=createDate$1.apply(void 0,_toConsumableArray(B)),D!==void 0&&R.getDay()!==D?new Date(NaN):R}catch{return new Date(NaN)}}var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(t,e,n)=>e in t?__defProp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,__spreadValues=(t,e)=>{for(var n in e||(e={}))__hasOwnProp.call(e,n)&&__defNormalProp(t,n,e[n]);if(__getOwnPropSymbols)for(var n of __getOwnPropSymbols(e))__propIsEnum.call(e,n)&&__defNormalProp(t,n,e[n]);return t},__spreadProps=(t,e)=>__defProps(t,__getOwnPropDescs(e)),__objRest=(t,e)=>{var n={};for(var r in t)__hasOwnProp.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&__getOwnPropSymbols)for(var r of __getOwnPropSymbols(t))e.indexOf(r)<0&&__propIsEnum.call(t,r)&&(n[r]=t[r]);return n};const lang={formatLocale:locale$1,yearFormat:"YYYY",monthFormat:"MMM",monthBeforeYear:!0};let defaultLocale="en";const locales={};locales[defaultLocale]=lang;function locale(t,e,n=!1){if(typeof t!="string")return locales[defaultLocale];let r=defaultLocale;return locales[t]&&(r=t),e&&(locales[t]=e,r=t),n||(defaultLocale=r),locales[t]||locales[defaultLocale]}function getLocale(t){return locale(t,void 0,!0)}function chunk(t,e){if(!Array.isArray(t))return[];const n=[],r=t.length;let o=0;for(e=e||r;o<r;)n.push(t.slice(o,o+=e));return n}function last(t){return Array.isArray(t)?t[t.length-1]:void 0}function isPlainObject$1(t){return Object.prototype.toString.call(t)==="[object Object]"}function pick(t,e){const n={};return isPlainObject$1(t)&&(Array.isArray(e)||(e=[e]),e.forEach(r=>{Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])})),n}function mergeDeep$1(t,e){if(!isPlainObject$1(t))return{};let n=t;return isPlainObject$1(e)&&Object.keys(e).forEach(r=>{let o=e[r];const s=t[r];isPlainObject$1(o)&&isPlainObject$1(s)&&(o=mergeDeep$1(s,o)),n=__spreadProps(__spreadValues({},n),{[r]:o})}),n}function padNumber(t){const e=parseInt(String(t),10);return e<10?`0${e}`:`${e}`}function camelcase(t){const e=/-(\w)/g;return t.replace(e,(n,r)=>r?r.toUpperCase():"")}const localeContextKey="datepicker_locale",prefixClassKey="datepicker_prefixClass",getWeekKey="datepicker_getWeek";function useLocale(){return inject(localeContextKey,shallowRef(getLocale()))}function provideLocale(t){const e=computed(()=>isPlainObject$1(t.value)?mergeDeep$1(getLocale(),t.value):getLocale(t.value));return provide(localeContextKey,e),e}function providePrefixClass(t){provide(prefixClassKey,t)}function usePrefixClass(){return inject(prefixClassKey,"mx")}function provideGetWeek(t){provide(getWeekKey,t)}function useGetWeek(){return inject(getWeekKey,getWeek)}function getPopupElementSize(t){const e=t.style.display,n=t.style.visibility;t.style.display="block",t.style.visibility="hidden";const r=window.getComputedStyle(t),o=t.offsetWidth+parseInt(r.marginLeft,10)+parseInt(r.marginRight,10),s=t.offsetHeight+parseInt(r.marginTop,10)+parseInt(r.marginBottom,10);return t.style.display=e,t.style.visibility=n,{width:o,height:s}}function getRelativePosition(t,e,n,r){let o=0,s=0,a=0,l=0;const c=t.getBoundingClientRect(),u=document.documentElement.clientWidth,g=document.documentElement.clientHeight;return r&&(a=window.pageXOffset+c.left,l=window.pageYOffset+c.top),u-c.left<e&&c.right<e?o=a-c.left+1:c.left+c.width/2<=u/2?o=a:o=a+c.width-e,c.top<=n&&g-c.bottom<=n?s=l+g-c.top-n:c.top+c.height/2<=g/2?s=l+c.height:s=l-n,{left:`${o}px`,top:`${s}px`}}function getScrollParent(t,e=document.body){if(!t||t===e)return null;const n=(s,a)=>getComputedStyle(s,null).getPropertyValue(a);return/(auto|scroll)/.test(n(t,"overflow")+n(t,"overflow-y")+n(t,"overflow-x"))?t:getScrollParent(t.parentElement,e)}let scrollBarWidth;function getScrollbarWidth(){if(typeof window>"u")return 0;if(scrollBarWidth!==void 0)return scrollBarWidth;const t=document.createElement("div");t.style.visibility="hidden",t.style.overflow="scroll",t.style.width="100px",t.style.position="absolute",t.style.top="-9999px",document.body.appendChild(t);const e=document.createElement("div");return e.style.width="100%",t.appendChild(e),scrollBarWidth=t.offsetWidth-e.offsetWidth,t.parentNode.removeChild(t),scrollBarWidth}const mousedownEvent="ontouchend"in document?"touchstart":"mousedown";function rafThrottle(t){let e=!1;return function(...r){e||(e=!0,requestAnimationFrame(()=>{e=!1,t.apply(this,r)}))}}function defineVueComponent(t,e){return{setup:t,name:t.name,props:e}}function withDefault(t,e){return new Proxy(t,{get(r,o){const s=r[o];return s!==void 0?s:e[o]}})}const keys$1=()=>t=>t,resolveProps=(t,e)=>{const n={};for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)){const o=camelcase(r);let s=t[r];e.indexOf(o)!==-1&&s===""&&(s=!0),n[o]=s}return n};function Popup(t,{slots:e}){const n=withDefault(t,{appendToBody:!0}),r=usePrefixClass(),o=ref(null),s=ref({left:"",top:""}),a=()=>{if(!n.visible||!o.value)return;const c=n.getRelativeElement();if(!c)return;const{width:u,height:g}=getPopupElementSize(o.value);s.value=getRelativePosition(c,u,g,n.appendToBody)};watchEffect(a,{flush:"post"}),watchEffect(c=>{const u=n.getRelativeElement();if(!u)return;const g=getScrollParent(u)||window,C=rafThrottle(a);g.addEventListener("scroll",C),window.addEventListener("resize",C),c(()=>{g.removeEventListener("scroll",C),window.removeEventListener("resize",C)})},{flush:"post"});const l=c=>{if(!n.visible)return;const u=c.target,g=o.value,C=n.getRelativeElement();g&&!g.contains(u)&&C&&!C.contains(u)&&n.onClickOutside(c)};return watchEffect(c=>{document.addEventListener(mousedownEvent,l),c(()=>{document.removeEventListener(mousedownEvent,l)})}),()=>createVNode(Teleport,{to:"body",disabled:!n.appendToBody},{default:()=>[createVNode(Transition,{name:`${r}-zoom-in-down`},{default:()=>{var c;return[n.visible&&createVNode("div",{ref:o,class:`${r}-datepicker-main ${r}-datepicker-popup ${n.className}`,style:[__spreadValues({position:"absolute"},s.value),n.style||{}]},[(c=e.default)==null?void 0:c.call(e)])]}})]})}const popupProps=keys$1()(["style","className","visible","appendToBody","onClickOutside","getRelativeElement"]);var Popup$1=defineVueComponent(Popup,popupProps);const _hoisted_1$2$1={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",width:"1em",height:"1em"},_hoisted_2$2$1=createBaseVNode("path",{d:"M940.218 107.055H730.764v-60.51H665.6v60.51H363.055v-60.51H297.89v60.51H83.78c-18.617 0-32.581 13.963-32.581 32.581v805.237c0 18.618 13.964 32.582 32.582 32.582h861.09c18.619 0 32.583-13.964 32.583-32.582V139.636c-4.655-18.618-18.619-32.581-37.237-32.581zm-642.327 65.163v60.51h65.164v-60.51h307.2v60.51h65.163v-60.51h176.873v204.8H116.364v-204.8H297.89zM116.364 912.291V442.18H912.29v470.11H116.364z"},null,-1),_hoisted_3$2$1=[_hoisted_2$2$1];function render$2(t,e){return openBlock(),createElementBlock("svg",_hoisted_1$2$1,_hoisted_3$2$1)}const _hoisted_1$1$1={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",width:"1em",height:"1em"},_hoisted_2$1$1=createBaseVNode("path",{d:"M810.005 274.005 572.011 512l237.994 237.995-60.01 60.01L512 572.011 274.005 810.005l-60.01-60.01L451.989 512 213.995 274.005l60.01-60.01L512 451.989l237.995-237.994z"},null,-1),_hoisted_3$1$1=[_hoisted_2$1$1];function render$1(t,e){return openBlock(),createElementBlock("svg",_hoisted_1$1$1,_hoisted_3$1$1)}const _hoisted_1$5={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em"},_hoisted_2$3=createBaseVNode("path",{d:"M0 0h24v24H0z",fill:"none"},null,-1),_hoisted_3$3=createBaseVNode("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"},null,-1),_hoisted_4$3=createBaseVNode("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},null,-1),_hoisted_5$2=[_hoisted_2$3,_hoisted_3$3,_hoisted_4$3];function render$3(t,e){return openBlock(),createElementBlock("svg",_hoisted_1$5,_hoisted_5$2)}function createDate(t,e=0,n=1,r=0,o=0,s=0,a=0){const l=new Date(t,e,n,r,o,s,a);return t<100&&t>=0&&l.setFullYear(t),l}function isValidDate(t){return t instanceof Date&&!isNaN(t.getTime())}function isValidRangeDate(t){return Array.isArray(t)&&t.length===2&&t.every(isValidDate)&&t[0]<=t[1]}function isValidDates(t){return Array.isArray(t)&&t.every(isValidDate)}function getValidDate(...t){if(t[0]!==void 0&&t[0]!==null){const n=new Date(t[0]);if(isValidDate(n))return n}const e=t.slice(1);return e.length?getValidDate(...e):new Date}function startOfYear(t){const e=new Date(t);return e.setMonth(0,1),e.setHours(0,0,0,0),e}function startOfMonth(t){const e=new Date(t);return e.setDate(1),e.setHours(0,0,0,0),e}function startOfDay(t){const e=new Date(t);return e.setHours(0,0,0,0),e}function getCalendar({firstDayOfWeek:t,year:e,month:n}){const r=[],o=createDate(e,n,0),s=o.getDate(),a=s-(o.getDay()+7-t)%7;for(let g=a;g<=s;g++)r.push(createDate(e,n,g-s));o.setMonth(n+1,0);const l=o.getDate();for(let g=1;g<=l;g++)r.push(createDate(e,n,g));const c=s-a+1,u=6*7-c-l;for(let g=1;g<=u;g++)r.push(createDate(e,n,l+g));return r}function setMonth(t,e){const n=new Date(t),r=typeof e=="function"?e(n.getMonth()):Number(e),o=n.getFullYear(),s=createDate(o,r+1,0).getDate(),a=n.getDate();return n.setMonth(r,Math.min(a,s)),n}function setYear(t,e){const n=new Date(t),r=typeof e=="function"?e(n.getFullYear()):e;return n.setFullYear(r),n}function diffCalendarMonths(t,e){const n=new Date(e),r=new Date(t),o=n.getFullYear()-r.getFullYear(),s=n.getMonth()-r.getMonth();return o*12+s}function assignTime(t,e){const n=new Date(t),r=new Date(e);return n.setHours(r.getHours(),r.getMinutes(),r.getSeconds()),n}function PickerInput(t,{slots:e}){const n=withDefault(t,{editable:!0,disabled:!1,clearable:!0,range:!1,multiple:!1}),r=usePrefixClass(),o=ref(null),s=computed(()=>n.separator||(n.range?" ~ ":",")),a=v=>n.range?isValidRangeDate(v)&&v.every(m=>!n.disabledDate(m)):n.multiple?isValidDates(v)&&v.every(m=>!n.disabledDate(m)):isValidDate(v)&&!n.disabledDate(v),l=computed(()=>o.value!==null?o.value:typeof n.renderInputText=="function"?n.renderInputText(n.value):a(n.value)?Array.isArray(n.value)?n.value.map(v=>n.formatDate(v)).join(s.value):n.formatDate(n.value):""),c=v=>{var m;v&&v.stopPropagation(),n.onChange(n.range?[null,null]:null),(m=n.onClear)==null||m.call(n)},u=()=>{var v;if(!n.editable||o.value===null)return;const m=o.value.trim();if(o.value=null,m===""){c();return}let S;if(n.range){let T=m.split(s.value);T.length!==2&&(T=m.split(s.value.trim())),S=T.map(w=>n.parseDate(w.trim()))}else n.multiple?S=m.split(s.value).map(T=>n.parseDate(T.trim())):S=n.parseDate(m);a(S)?n.onChange(S):(v=n.onInputError)==null||v.call(n,m)},g=v=>{o.value=typeof v=="string"?v:v.target.value},C=v=>{const{keyCode:m}=v;m===9?n.onBlur():m===13&&u()};return()=>{var v,m,S;const T=!n.disabled&&n.clearable&&l.value,w=__spreadProps(__spreadValues({name:"date",type:"text",autocomplete:"off",value:l.value,class:n.inputClass||`${r}-input`,readonly:!n.editable,disabled:n.disabled,placeholder:n.placeholder},n.inputAttr),{onFocus:n.onFocus,onKeydown:C,onInput:g,onChange:u});return createVNode("div",{class:`${r}-input-wrapper`,onClick:n.onClick},[((v=e.input)==null?void 0:v.call(e,w))||createVNode("input",w,null),T?createVNode("i",{class:`${r}-icon-clear`,onClick:c},[((m=e["icon-clear"])==null?void 0:m.call(e))||createVNode(render$1,null,null)]):null,createVNode("i",{class:`${r}-icon-calendar`},[((S=e["icon-calendar"])==null?void 0:S.call(e))||createVNode(render$2,null,null)])])}}const pickerInputBaseProps=keys$1()(["placeholder","editable","disabled","clearable","inputClass","inputAttr","range","multiple","separator","renderInputText","onInputError","onClear"]),pickerInputProps=keys$1()(["value","formatDate","parseDate","disabledDate","onChange","onFocus","onBlur","onClick",...pickerInputBaseProps]);var PickerInput$1=defineVueComponent(PickerInput,pickerInputProps);function Picker(t,{slots:e}){var n;const r=withDefault(t,{prefixClass:"mx",valueType:"date",format:"YYYY-MM-DD",type:"date",disabledDate:()=>!1,disabledTime:()=>!1,confirmText:"OK"});providePrefixClass(r.prefixClass),provideGetWeek(((n=r.formatter)==null?void 0:n.getWeek)||getWeek);const o=provideLocale(toRef(t,"lang")),s=ref(),a=()=>s.value,l=ref(!1),c=computed(()=>!r.disabled&&(typeof r.open=="boolean"?r.open:l.value)),u=()=>{var R,B;r.disabled||c.value||(l.value=!0,(R=r["onUpdate:open"])==null||R.call(r,!0),(B=r.onOpen)==null||B.call(r))},g=()=>{var R,B;c.value&&(l.value=!1,(R=r["onUpdate:open"])==null||R.call(r,!1),(B=r.onClose)==null||B.call(r))},C=(R,B)=>(B=B||r.format,isPlainObject$1(r.formatter)&&typeof r.formatter.stringify=="function"?r.formatter.stringify(R,B):format(R,B,{locale:o.value.formatLocale})),v=(R,B)=>{if(B=B||r.format,isPlainObject$1(r.formatter)&&typeof r.formatter.parse=="function")return r.formatter.parse(R,B);const Y=new Date;return parse(R,B,{locale:o.value.formatLocale,backupDate:Y})},m=R=>{switch(r.valueType){case"date":return R instanceof Date?new Date(R.getTime()):new Date(NaN);case"timestamp":return typeof R=="number"?new Date(R):new Date(NaN);case"format":return typeof R=="string"?v(R):new Date(NaN);default:return typeof R=="string"?v(R,r.valueType):new Date(NaN)}},S=R=>{if(!isValidDate(R))return null;switch(r.valueType){case"date":return R;case"timestamp":return R.getTime();case"format":return C(R);default:return C(R,r.valueType)}},T=computed(()=>{const R=r.value;return r.range?(Array.isArray(R)?R.slice(0,2):[null,null]).map(m):r.multiple?(Array.isArray(R)?R:[]).map(m):m(R)}),w=(R,B,Y=!0)=>{var K,se;const pe=Array.isArray(R)?R.map(S):S(R);return(K=r["onUpdate:value"])==null||K.call(r,pe),(se=r.onChange)==null||se.call(r,pe,B),Y&&g(),pe},N=ref(new Date);watchEffect(()=>{c.value&&(N.value=T.value)});const D=(R,B)=>{r.confirm?N.value=R:w(R,B,!r.multiple&&(B===r.type||B==="time"))},k=()=>{var R;const B=w(N.value);(R=r.onConfirm)==null||R.call(r,B)},L=R=>r.disabledDate(R)||r.disabledTime(R),H=R=>{var B;const{prefixClass:Y}=r;return createVNode("div",{class:`${Y}-datepicker-sidebar`},[(B=e.sidebar)==null?void 0:B.call(e,R),(r.shortcuts||[]).map((K,se)=>createVNode("button",{key:se,"data-index":se,type:"button",class:`${Y}-btn ${Y}-btn-text ${Y}-btn-shortcut`,onClick:()=>{var pe;const le=(pe=K.onClick)==null?void 0:pe.call(K);le&&w(le)}},[K.text]))])};return()=>{var R,B;const{prefixClass:Y,disabled:K,confirm:se,range:pe,popupClass:le,popupStyle:Ee,appendToBody:Ne}=r,_e={value:N.value,["onUpdate:value"]:D,emit:w},me=e.header&&createVNode("div",{class:`${Y}-datepicker-header`},[e.header(_e)]),Ke=(e.footer||se)&&createVNode("div",{class:`${Y}-datepicker-footer`},[(R=e.footer)==null?void 0:R.call(e,_e),se&&createVNode("button",{type:"button",class:`${Y}-btn ${Y}-datepicker-btn-confirm`,onClick:k},[r.confirmText])]),Ye=(B=e.content)==null?void 0:B.call(e,_e),pt=(e.sidebar||r.shortcuts)&&H(_e);return createVNode("div",{ref:s,class:{[`${Y}-datepicker`]:!0,[`${Y}-datepicker-range`]:pe,disabled:K}},[createVNode(PickerInput$1,__spreadProps(__spreadValues({},pick(r,pickerInputBaseProps)),{value:T.value,formatDate:C,parseDate:v,disabledDate:L,onChange:w,onClick:u,onFocus:u,onBlur:g}),pick(e,["icon-calendar","icon-clear","input"])),createVNode(Popup$1,{className:le,style:Ee,visible:c.value,appendToBody:Ne,getRelativeElement:a,onClickOutside:g},{default:()=>[pt,createVNode("div",{class:`${Y}-datepicker-content`},[me,Ye,Ke])]})])}}const pickerbaseProps=keys$1()(["value","valueType","type","format","formatter","lang","prefixClass","appendToBody","open","popupClass","popupStyle","confirm","confirmText","shortcuts","disabledDate","disabledTime","onOpen","onClose","onConfirm","onChange","onUpdate:open","onUpdate:value"]),pickerProps=[...pickerbaseProps,...pickerInputBaseProps];var Picker$1=defineVueComponent(Picker,pickerProps);function ButtonIcon(t){var e=t,{value:n}=e,r=__objRest(e,["value"]);const o=usePrefixClass();return createVNode("button",__spreadProps(__spreadValues({},r),{type:"button",class:`${o}-btn ${o}-btn-text ${o}-btn-icon-${n}`}),[createVNode("i",{class:`${o}-icon-${n}`},null)])}function TableHeader$1({type:t,calendar:e,onUpdateCalendar:n},{slots:r}){var o;const s=usePrefixClass(),a=()=>{n(setMonth(e,v=>v-1))},l=()=>{n(setMonth(e,v=>v+1))},c=()=>{n(setYear(e,v=>v-1))},u=()=>{n(setYear(e,v=>v+1))},g=()=>{n(setYear(e,v=>v-10))},C=()=>{n(setYear(e,v=>v+10))};return createVNode("div",{class:`${s}-calendar-header`},[createVNode(ButtonIcon,{value:"double-left",onClick:t==="year"?g:c},null),t==="date"&&createVNode(ButtonIcon,{value:"left",onClick:a},null),createVNode(ButtonIcon,{value:"double-right",onClick:t==="year"?C:u},null),t==="date"&&createVNode(ButtonIcon,{value:"right",onClick:l},null),createVNode("span",{class:`${s}-calendar-header-label`},[(o=r.default)==null?void 0:o.call(r)])])}function TableDate({calendar:t,isWeekMode:e,showWeekNumber:n,titleFormat:r,getWeekActive:o,getCellClasses:s,onSelect:a,onUpdatePanel:l,onUpdateCalendar:c,onDateMouseEnter:u,onDateMouseLeave:g}){const C=usePrefixClass(),v=useGetWeek(),m=useLocale().value,{yearFormat:S,monthBeforeYear:T,monthFormat:w="MMM",formatLocale:N}=m,D=N.firstDayOfWeek||0;let k=m.days||N.weekdaysMin;k=k.concat(k).slice(D,D+7);const L=t.getFullYear(),H=t.getMonth(),R=chunk(getCalendar({firstDayOfWeek:D,year:L,month:H}),7),B=(_e,me)=>format(_e,me,{locale:m.formatLocale}),Y=_e=>{l(_e)},K=_e=>{const me=_e.getAttribute("data-index"),[Ke,Ye]=me.split(",").map(ut=>parseInt(ut,10)),pt=R[Ke][Ye];return new Date(pt)},se=_e=>{a(K(_e.currentTarget))},pe=_e=>{u&&u(K(_e.currentTarget))},le=_e=>{g&&g(K(_e.currentTarget))},Ee=createVNode("button",{type:"button",class:`${C}-btn ${C}-btn-text ${C}-btn-current-year`,onClick:()=>Y("year")},[B(t,S)]),Ne=createVNode("button",{type:"button",class:`${C}-btn ${C}-btn-text ${C}-btn-current-month`,onClick:()=>Y("month")},[B(t,w)]);return n=typeof n=="boolean"?n:e,createVNode("div",{class:[`${C}-calendar ${C}-calendar-panel-date`,{[`${C}-calendar-week-mode`]:e}]},[createVNode(TableHeader$1,{type:"date",calendar:t,onUpdateCalendar:c},{default:()=>[T?[Ne,Ee]:[Ee,Ne]]}),createVNode("div",{class:`${C}-calendar-content`},[createVNode("table",{class:`${C}-table ${C}-table-date`},[createVNode("thead",null,[createVNode("tr",null,[n&&createVNode("th",{class:`${C}-week-number-header`},null),k.map(_e=>createVNode("th",{key:_e},[_e]))])]),createVNode("tbody",null,[R.map((_e,me)=>createVNode("tr",{key:me,class:[`${C}-date-row`,{[`${C}-active-week`]:o(_e)}]},[n&&createVNode("td",{class:`${C}-week-number`,"data-index":`${me},0`,onClick:se},[createVNode("div",null,[v(_e[0])])]),_e.map((Ke,Ye)=>createVNode("td",{key:Ye,class:["cell",s(Ke)],title:B(Ke,r),"data-index":`${me},${Ye}`,onClick:se,onMouseenter:pe,onMouseleave:le},[createVNode("div",null,[Ke.getDate()])]))]))])])])])}function TableMonth({calendar:t,getCellClasses:e,onSelect:n,onUpdateCalendar:r,onUpdatePanel:o}){const s=usePrefixClass(),a=useLocale().value,l=a.months||a.formatLocale.monthsShort,c=g=>createDate(t.getFullYear(),g),u=g=>{const v=g.currentTarget.getAttribute("data-month");n(c(parseInt(v,10)))};return createVNode("div",{class:`${s}-calendar ${s}-calendar-panel-month`},[createVNode(TableHeader$1,{type:"month",calendar:t,onUpdateCalendar:r},{default:()=>[createVNode("button",{type:"button",class:`${s}-btn ${s}-btn-text ${s}-btn-current-year`,onClick:()=>o("year")},[t.getFullYear()])]}),createVNode("div",{class:`${s}-calendar-content`},[createVNode("table",{class:`${s}-table ${s}-table-month`},[chunk(l,3).map((g,C)=>createVNode("tr",{key:C},[g.map((v,m)=>{const S=C*3+m;return createVNode("td",{key:m,class:["cell",e(c(S))],"data-month":S,onClick:u},[createVNode("div",null,[v])])})]))])])])}const getDefaultYears=t=>{const e=Math.floor(t.getFullYear()/10)*10,n=[];for(let r=0;r<10;r++)n.push(e+r);return chunk(n,2)};function TableYear({calendar:t,getCellClasses:e=()=>[],getYearPanel:n=getDefaultYears,onSelect:r,onUpdateCalendar:o}){const s=usePrefixClass(),a=C=>createDate(C,0),l=C=>{const m=C.currentTarget.getAttribute("data-year");r(a(parseInt(m,10)))},c=n(new Date(t)),u=c[0][0],g=last(last(c));return createVNode("div",{class:`${s}-calendar ${s}-calendar-panel-year`},[createVNode(TableHeader$1,{type:"year",calendar:t,onUpdateCalendar:o},{default:()=>[createVNode("span",null,[u]),createVNode("span",{class:`${s}-calendar-decade-separator`},null),createVNode("span",null,[g])]}),createVNode("div",{class:`${s}-calendar-content`},[createVNode("table",{class:`${s}-table ${s}-table-year`},[c.map((C,v)=>createVNode("tr",{key:v},[C.map((m,S)=>createVNode("td",{key:S,class:["cell",e(a(m))],"data-year":m,onClick:l},[createVNode("div",null,[m])]))]))])])])}function Calendar(t){const e=withDefault(t,{defaultValue:startOfDay(new Date),type:"date",disabledDate:()=>!1,getClasses:()=>[],titleFormat:"YYYY-MM-DD"}),n=computed(()=>(Array.isArray(e.value)?e.value:[e.value]).filter(isValidDate).map(D=>e.type==="year"?startOfYear(D):e.type==="month"?startOfMonth(D):startOfDay(D))),r=ref(new Date);watchEffect(()=>{let N=e.calendar;if(!isValidDate(N)){const{length:D}=n.value;N=getValidDate(D>0?n.value[D-1]:e.defaultValue)}r.value=startOfMonth(N)});const o=N=>{var D;r.value=N,(D=e.onCalendarChange)==null||D.call(e,N)},s=ref("date");watchEffect(()=>{const N=["date","month","year"],D=Math.max(N.indexOf(e.type),N.indexOf(e.defaultPanel));s.value=D!==-1?N[D]:"date"});const a=N=>{var D;const k=s.value;s.value=N,(D=e.onPanelChange)==null||D.call(e,N,k)},l=N=>e.disabledDate(new Date(N),n.value),c=(N,D)=>{var k,L,H;if(!l(N))if((k=e.onPick)==null||k.call(e,N),e.multiple===!0){const R=n.value.filter(B=>B.getTime()!==N.getTime());R.length===n.value.length&&R.push(N),(L=e["onUpdate:value"])==null||L.call(e,R,D)}else(H=e["onUpdate:value"])==null||H.call(e,N,D)},u=N=>{c(N,e.type==="week"?"week":"date")},g=N=>{if(e.type==="year")c(N,"year");else if(o(N),a("month"),e.partialUpdate&&n.value.length===1){const D=setYear(n.value[0],N.getFullYear());c(D,"year")}},C=N=>{if(e.type==="month")c(N,"month");else if(o(N),a("date"),e.partialUpdate&&n.value.length===1){const D=setMonth(setYear(n.value[0],N.getFullYear()),N.getMonth());c(D,"month")}},v=(N,D=[])=>(l(N)?D.push("disabled"):n.value.some(k=>k.getTime()===N.getTime())&&D.push("active"),D.concat(e.getClasses(N,n.value,D.join(" ")))),m=N=>{const D=N.getMonth()!==r.value.getMonth(),k=[];return N.getTime()===new Date().setHours(0,0,0,0)&&k.push("today"),D&&k.push("not-current-month"),v(N,k)},S=N=>e.type!=="month"?r.value.getMonth()===N.getMonth()?"active":"":v(N),T=N=>e.type!=="year"?r.value.getFullYear()===N.getFullYear()?"active":"":v(N),w=N=>{if(e.type!=="week")return!1;const D=N[0].getTime(),k=N[6].getTime();return n.value.some(L=>{const H=L.getTime();return H>=D&&H<=k})};return()=>s.value==="year"?createVNode(TableYear,{calendar:r.value,getCellClasses:T,getYearPanel:e.getYearPanel,onSelect:g,onUpdateCalendar:o},null):s.value==="month"?createVNode(TableMonth,{calendar:r.value,getCellClasses:S,onSelect:C,onUpdatePanel:a,onUpdateCalendar:o},null):createVNode(TableDate,{isWeekMode:e.type==="week",showWeekNumber:e.showWeekNumber,titleFormat:e.titleFormat,calendar:r.value,getCellClasses:m,getWeekActive:w,onSelect:u,onUpdatePanel:a,onUpdateCalendar:o,onDateMouseEnter:e.onDateMouseEnter,onDateMouseLeave:e.onDateMouseLeave},null)}const calendarProps=keys$1()(["type","value","defaultValue","defaultPanel","disabledDate","getClasses","calendar","multiple","partialUpdate","showWeekNumber","titleFormat","getYearPanel","onDateMouseEnter","onDateMouseLeave","onCalendarChange","onPanelChange","onUpdate:value","onPick"]);var Calendar$1=defineVueComponent(Calendar,calendarProps);const inRange=(t,e)=>{const n=t.getTime();let[r,o]=e.map(s=>s.getTime());return r>o&&([r,o]=[o,r]),n>r&&n<o};function CalendarRange(t){const e=withDefault(t,{defaultValue:new Date,type:"date"}),n=usePrefixClass(),r=computed(()=>{let w=Array.isArray(e.defaultValue)?e.defaultValue:[e.defaultValue,e.defaultValue];return w=w.map(N=>startOfDay(N)),isValidRangeDate(w)?w:[new Date,new Date].map(N=>startOfDay(N))}),o=ref([new Date(NaN),new Date(NaN)]);watchEffect(()=>{isValidRangeDate(e.value)&&(o.value=e.value)});const s=(w,N)=>{var D;const[k,L]=o.value;isValidDate(k)&&!isValidDate(L)?(k.getTime()>w.getTime()?o.value=[w,k]:o.value=[k,w],(D=e["onUpdate:value"])==null||D.call(e,o.value,N)):o.value=[w,new Date(NaN)]},a=ref([new Date,new Date]),l=computed(()=>isValidRangeDate(e.calendar)?e.calendar:a.value),c=computed(()=>e.type==="year"?10*12:e.type==="month"?1*12:1),u=(w,N)=>{var D;const k=diffCalendarMonths(w[0],w[1]),L=c.value-k;if(L>0){const H=N===1?0:1;w[H]=setMonth(w[H],R=>R+(H===0?-L:L))}a.value=w,(D=e.onCalendarChange)==null||D.call(e,w,N)},g=w=>{u([w,l.value[1]],0)},C=w=>{u([l.value[0],w],1)};watchEffect(()=>{const w=isValidRangeDate(e.value)?e.value:r.value;u(w.slice(0,2))});const v=ref(null),m=w=>v.value=w,S=()=>v.value=null,T=(w,N,D)=>{const k=e.getClasses?e.getClasses(w,N,D):[],L=Array.isArray(k)?k:[k];return/disabled|active/.test(D)?L:(N.length===2&&inRange(w,N)&&L.push("in-range"),N.length===1&&v.value&&inRange(w,[N[0],v.value])?L.concat("hover-in-range"):L)};return()=>{const w=l.value.map((N,D)=>{const k=__spreadProps(__spreadValues({},e),{calendar:N,value:o.value,defaultValue:r.value[D],getClasses:T,partialUpdate:!1,multiple:!1,["onUpdate:value"]:s,onCalendarChange:D===0?g:C,onDateMouseLeave:S,onDateMouseEnter:m});return createVNode(Calendar$1,k,null)});return createVNode("div",{class:`${n}-calendar-range`},[w])}}const calendarRangeProps=calendarProps;var CalendarRange$1=defineVueComponent(CalendarRange,calendarRangeProps);const ScrollbarVertical=defineComponent({setup(t,{slots:e}){const n=usePrefixClass(),r=ref(),o=ref(""),s=ref("");onMounted(()=>{if(!r.value)return;const S=r.value,T=S.clientHeight*100/S.scrollHeight;o.value=T<100?`${T}%`:""});const l=getScrollbarWidth(),c=S=>{const T=S.currentTarget,{scrollHeight:w,scrollTop:N}=T;s.value=`${N*100/w}%`};let u=!1,g=0;const C=S=>{S.stopImmediatePropagation();const T=S.currentTarget,{offsetTop:w}=T;u=!0,g=S.clientY-w},v=S=>{if(!u||!r.value)return;const{clientY:T}=S,{scrollHeight:w,clientHeight:N}=r.value,k=(T-g)*w/N;r.value.scrollTop=k},m=()=>{u=!1};return onMounted(()=>{document.addEventListener("mousemove",v),document.addEventListener("mouseup",m)}),onUnmounted(()=>{document.addEventListener("mousemove",v),document.addEventListener("mouseup",m)}),()=>{var S;return createVNode("div",{class:`${n}-scrollbar`,style:{position:"relative",overflow:"hidden"}},[createVNode("div",{ref:r,class:`${n}-scrollbar-wrap`,style:{marginRight:`-${l}px`},onScroll:c},[(S=e.default)==null?void 0:S.call(e)]),createVNode("div",{class:`${n}-scrollbar-track`},[createVNode("div",{class:`${n}-scrollbar-thumb`,style:{height:o.value,top:s.value},onMousedown:C},null)])])}}});function Columns({options:t,getClasses:e,onSelect:n}){const r=usePrefixClass(),o=s=>{const a=s.target,l=s.currentTarget;if(a.tagName.toUpperCase()!=="LI")return;const c=l.getAttribute("data-type"),u=parseInt(l.getAttribute("data-index"),10),g=parseInt(a.getAttribute("data-index"),10),C=t[u].list[g].value;n(C,c)};return createVNode("div",{class:`${r}-time-columns`},[t.map((s,a)=>createVNode(ScrollbarVertical,{key:s.type,class:`${r}-time-column`},{default:()=>[createVNode("ul",{class:`${r}-time-list`,"data-index":a,"data-type":s.type,onClick:o},[s.list.map((l,c)=>createVNode("li",{key:l.text,"data-index":c,class:[`${r}-time-item`,e(l.value,s.type)]},[l.text]))])]}))])}function _isSlot(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!isVNode(t)}function FixedList(t){let e;const n=usePrefixClass();return createVNode(ScrollbarVertical,null,_isSlot(e=t.options.map(r=>createVNode("div",{key:r.text,class:[`${n}-time-option`,t.getClasses(r.value,"time")],onClick:()=>t.onSelect(r.value,"time")},[r.text])))?e:{default:()=>[e]})}function generateList({length:t,step:e=1,options:n}){if(Array.isArray(n))return n.filter(o=>o>=0&&o<t);e<=0&&(e=1);const r=[];for(let o=0;o<t;o+=e)r.push(o);return r}function getColumnOptions(t,e){let{showHour:n,showMinute:r,showSecond:o,use12h:s}=e;const a=e.format||"HH:mm:ss";n=typeof n=="boolean"?n:/[HhKk]/.test(a),r=typeof r=="boolean"?r:/m/.test(a),o=typeof o=="boolean"?o:/s/.test(a),s=typeof s=="boolean"?s:/a/i.test(a);const l=[],c=s&&t.getHours()>=12;return n&&l.push({type:"hour",list:generateList({length:s?12:24,step:e.hourStep,options:e.hourOptions}).map(u=>{const g=u===0&&s?"12":padNumber(u),C=new Date(t);return C.setHours(c?u+12:u),{value:C,text:g}})}),r&&l.push({type:"minute",list:generateList({length:60,step:e.minuteStep,options:e.minuteOptions}).map(u=>{const g=new Date(t);return g.setMinutes(u),{value:g,text:padNumber(u)}})}),o&&l.push({type:"second",list:generateList({length:60,step:e.secondStep,options:e.secondOptions}).map(u=>{const g=new Date(t);return g.setSeconds(u),{value:g,text:padNumber(u)}})}),s&&l.push({type:"ampm",list:["AM","PM"].map((u,g)=>{const C=new Date(t);return C.setHours(C.getHours()%12+g*12),{text:u,value:C}})}),l}function parseOption(t=""){const e=t.split(":");if(e.length>=2){const n=parseInt(e[0],10),r=parseInt(e[1],10);return{hours:n,minutes:r}}return null}function getFixedOptions({date:t,option:e,format:n,formatDate:r}){const o=[];if(typeof e=="function")return e()||[];const s=parseOption(e.start),a=parseOption(e.end),l=parseOption(e.step),c=e.format||n;if(s&&a&&l){const u=s.minutes+s.hours*60,g=a.minutes+a.hours*60,C=l.minutes+l.hours*60,v=Math.floor((g-u)/C);for(let m=0;m<=v;m++){const S=u+m*C,T=Math.floor(S/60),w=S%60,N=new Date(t);N.setHours(T,w,0),o.push({value:N,text:r(N,c)})}}return o}const scrollTo=(t,e,n=0)=>{if(n<=0){requestAnimationFrame(()=>{t.scrollTop=e});return}const o=(e-t.scrollTop)/n*10;requestAnimationFrame(()=>{const s=t.scrollTop+o;if(s>=e){t.scrollTop=e;return}t.scrollTop=s,scrollTo(t,e,n-10)})};function TimePanel(t){const e=withDefault(t,{defaultValue:startOfDay(new Date),format:"HH:mm:ss",timeTitleFormat:"YYYY-MM-DD",disabledTime:()=>!1,scrollDuration:100}),n=usePrefixClass(),r=useLocale(),o=(T,w)=>format(T,w,{locale:r.value.formatLocale}),s=ref(new Date);watchEffect(()=>{s.value=getValidDate(e.value,e.defaultValue)});const a=T=>Array.isArray(T)?T.every(w=>e.disabledTime(new Date(w))):e.disabledTime(new Date(T)),l=T=>{const w=new Date(T);return a([w.getTime(),w.setMinutes(0,0,0),w.setMinutes(59,59,999)])},c=T=>{const w=new Date(T);return a([w.getTime(),w.setSeconds(0,0),w.setSeconds(59,999)])},u=T=>{const w=new Date(T),N=w.getHours()<12?0:12,D=N+11;return a([w.getTime(),w.setHours(N,0,0,0),w.setHours(D,59,59,999)])},g=(T,w)=>w==="hour"?l(T):w==="minute"?c(T):w==="ampm"?u(T):a(T),C=(T,w)=>{var N;if(!g(T,w)){const D=new Date(T);s.value=D,a(D)||(N=e["onUpdate:value"])==null||N.call(e,D,w)}},v=(T,w)=>g(T,w)?"disabled":T.getTime()===s.value.getTime()?"active":"",m=ref(),S=T=>{if(!m.value)return;const w=m.value.querySelectorAll(".active");for(let N=0;N<w.length;N++){const D=w[N],k=getScrollParent(D,m.value);if(k){const L=D.offsetTop;scrollTo(k,L,T)}}};return onMounted(()=>S(0)),watch(s,()=>S(e.scrollDuration),{flush:"post"}),()=>{let T;return e.timePickerOptions?T=createVNode(FixedList,{onSelect:C,getClasses:v,options:getFixedOptions({date:s.value,format:e.format,option:e.timePickerOptions,formatDate:o})},null):T=createVNode(Columns,{options:getColumnOptions(s.value,e),onSelect:C,getClasses:v},null),createVNode("div",{class:`${n}-time`,ref:m},[e.showTimeHeader&&createVNode("div",{class:`${n}-time-header`},[createVNode("button",{type:"button",class:`${n}-btn ${n}-btn-text ${n}-time-header-title`,onClick:e.onClickTitle},[o(s.value,e.timeTitleFormat)])]),createVNode("div",{class:`${n}-time-content`},[T])])}}const timePanelProps=keys$1()(["value","defaultValue","format","timeTitleFormat","showTimeHeader","disabledTime","timePickerOptions","hourOptions","minuteOptions","secondOptions","hourStep","minuteStep","secondStep","showHour","showMinute","showSecond","use12h","scrollDuration","onClickTitle","onUpdate:value"]);var TimePanel$1=defineVueComponent(TimePanel,timePanelProps);function TimeRange(t){const e=withDefault(t,{defaultValue:startOfDay(new Date),disabledTime:()=>!1}),n=usePrefixClass(),r=ref([new Date(NaN),new Date(NaN)]);watchEffect(()=>{isValidRangeDate(e.value)?r.value=e.value:r.value=[new Date(NaN),new Date(NaN)]});const o=(u,g)=>{var C;(C=e["onUpdate:value"])==null||C.call(e,r.value,u==="time"?"time-range":u,g)},s=(u,g)=>{r.value[0]=u,r.value[1].getTime()>=u.getTime()||(r.value[1]=u),o(g,0)},a=(u,g)=>{r.value[1]=u,r.value[0].getTime()<=u.getTime()||(r.value[0]=u),o(g,1)},l=u=>e.disabledTime(u,0),c=u=>u.getTime()<r.value[0].getTime()||e.disabledTime(u,1);return()=>{const u=Array.isArray(e.defaultValue)?e.defaultValue:[e.defaultValue,e.defaultValue];return createVNode("div",{class:`${n}-time-range`},[createVNode(TimePanel$1,__spreadProps(__spreadValues({},e),{["onUpdate:value"]:s,value:r.value[0],defaultValue:u[0],disabledTime:l}),null),createVNode(TimePanel$1,__spreadProps(__spreadValues({},e),{["onUpdate:value"]:a,value:r.value[1],defaultValue:u[1],disabledTime:c}),null)])}}const timeRangeProps=timePanelProps;var TimeRange$1=defineVueComponent(TimeRange,timeRangeProps);function useTimePanelVisible(t){const e=ref(!1),n=()=>{var s;e.value=!1,(s=t.onShowTimePanelChange)==null||s.call(t,!1)},r=()=>{var s;e.value=!0,(s=t.onShowTimePanelChange)==null||s.call(t,!0)};return{timeVisible:computed(()=>typeof t.showTimePanel=="boolean"?t.showTimePanel:e.value),openTimePanel:r,closeTimePanel:n}}function DateTime(t){const e=withDefault(t,{disabledTime:()=>!1,defaultValue:startOfDay(new Date)}),n=ref(e.value);watchEffect(()=>{n.value=e.value});const{openTimePanel:r,closeTimePanel:o,timeVisible:s}=useTimePanelVisible(e),a=(l,c)=>{var u;c==="date"&&r();let g=assignTime(l,getValidDate(e.value,e.defaultValue));if(e.disabledTime(new Date(g))&&(g=assignTime(l,e.defaultValue),e.disabledTime(new Date(g)))){n.value=g;return}(u=e["onUpdate:value"])==null||u.call(e,g,c)};return()=>{const l=usePrefixClass(),c=__spreadProps(__spreadValues({},pick(e,calendarProps)),{multiple:!1,type:"date",value:n.value,["onUpdate:value"]:a}),u=__spreadProps(__spreadValues({},pick(e,timePanelProps)),{showTimeHeader:!0,value:n.value,["onUpdate:value"]:e["onUpdate:value"],onClickTitle:o});return createVNode("div",{class:`${l}-date-time`},[createVNode(Calendar$1,c,null),s.value&&createVNode(TimePanel$1,u,null)])}}const datetimeBaseProps=keys$1()(["showTimePanel","onShowTimePanelChange"]),datetimeProps=[...datetimeBaseProps,...calendarProps,...timePanelProps];var DateTime$1=defineVueComponent(DateTime,datetimeProps);function DateTimeRange(t){const e=withDefault(t,{defaultValue:startOfDay(new Date),disabledTime:()=>!1}),n=ref(e.value);watchEffect(()=>{n.value=e.value});const{openTimePanel:r,closeTimePanel:o,timeVisible:s}=useTimePanelVisible(e),a=(l,c)=>{var u;c==="date"&&r();const g=Array.isArray(e.defaultValue)?e.defaultValue:[e.defaultValue,e.defaultValue];let C=l.map((v,m)=>{const S=isValidRangeDate(e.value)?e.value[m]:g[m];return assignTime(v,S)});if(C[1].getTime()<C[0].getTime()&&(C=[C[0],C[0]]),C.some(e.disabledTime)&&(C=l.map((v,m)=>assignTime(v,g[m])),C.some(e.disabledTime))){n.value=C;return}(u=e["onUpdate:value"])==null||u.call(e,C,c)};return()=>{const l=usePrefixClass(),c=__spreadProps(__spreadValues({},pick(e,calendarRangeProps)),{type:"date",value:n.value,["onUpdate:value"]:a}),u=__spreadProps(__spreadValues({},pick(e,timeRangeProps)),{showTimeHeader:!0,value:n.value,["onUpdate:value"]:e["onUpdate:value"],onClickTitle:o});return createVNode("div",{class:`${l}-date-time-range`},[createVNode(CalendarRange$1,c,null),s.value&&createVNode(TimeRange$1,u,null)])}}const datetimeRangeProps=[...datetimeBaseProps,...timeRangeProps,...calendarRangeProps];var DateTimeRange$1=defineVueComponent(DateTimeRange,datetimeRangeProps);const booleanKeys=keys$1()(["range","open","appendToBody","clearable","confirm","disabled","editable","multiple","partialUpdate","showHour","showMinute","showSecond","showTimeHeader","showTimePanel","showWeekNumber","use12h"]),formatMap={date:"YYYY-MM-DD",datetime:"YYYY-MM-DD HH:mm:ss",year:"YYYY",month:"YYYY-MM",time:"HH:mm:ss",week:"w"};function DatePicker(t,{slots:e}){const n=t.type||"date",r=t.format||formatMap[n]||formatMap.date,o=__spreadProps(__spreadValues({},resolveProps(t,booleanKeys)),{type:n,format:r});return createVNode(Picker$1,pick(o,Picker$1.props),__spreadValues({content:s=>{if(o.range){const a=n==="time"?TimeRange$1:n==="datetime"?DateTimeRange$1:CalendarRange$1;return h(a,pick(__spreadValues(__spreadValues({},o),s),a.props))}else{const a=n==="time"?TimePanel$1:n==="datetime"?DateTime$1:Calendar$1;return h(a,pick(__spreadValues(__spreadValues({},o),s),a.props))}},["icon-calendar"]:()=>createVNode(n==="time"?render$3:render$2,null,null)},e))}const api={locale,install:t=>{t.component("DatePicker",DatePicker)}};var index$1=Object.assign(DatePicker,api,{Calendar:Calendar$1,CalendarRange:CalendarRange$1,TimePanel:TimePanel$1,TimeRange:TimeRange$1,DateTime:DateTime$1,DateTimeRange:DateTimeRange$1});const index="",_export_sfc=(t,e)=>{const n=t.__vccOpts||t;for(const[r,o]of e)n[r]=o;return n},_sfc_main$5={components:{DatePicker:index$1},props:["dataVeche","numeCampDb","zileNelucratoare","tip","valueType","format","latime","notBeforeDate","notAfterDate","doarZiuaA","doarZiuaB","minuteStep","hours","range"],computed:{latimePrelucrata(){if(this.tip==="time")return{width:"80px"};if(this.tip==="date")return{width:"150px"};if(this.tip==="datetime")return{width:"180px"}}},name:"ControlOpen",data(){return{time:null,dataNoua:"",langObject:{formatLocale:{months:["ianuarie","februarie","martie","aprilie","mai","iunie","iulie","august","septembrie","octombrie","noiembrie","decembrie"],monthsShort:["ian","feb","mar","apr","mai","iun","iul","aug","sep","oct","noi","dec"],weekdays:["duminică","luni","marți","miercuri","joi","vineri","sâmbătă"],weekdaysShort:["Dum","Lun","Mar","Mie","Joi","Vin","Sâm"],weekdaysMin:["Du","Lu","Ma","Mi","Jo","Vi","Sâ"],firstDayOfWeek:1,firstWeekContainsDate:7}}}},methods:{notDates(t){},captureDataExpirare(){this.time&&this.$emit("trimitere_data_expirare",this.time)},sendDataToParent(){this.time&&this.$emit("trimitere_data_catre_parinte",this.time)}},created(){if(this.dataVeche!=null&&this.dataVeche!=="")if(this.dataVeche.includes(",")){var t=[];t[0]=this.dataVeche.substring(0,this.dataVeche.indexOf(",")),t[1]=this.dataVeche.slice(this.dataVeche.indexOf(",")+1),this.time=t}else this.time=this.dataVeche;this.sendDataToParent()},updated(){this.captureDataExpirare(),this.sendDataToParent()}},_hoisted_1$4=["name"];function _sfc_render$5(t,e,n,r,o,s){const a=resolveComponent("date-picker",!0);return openBlock(),createElementBlock("div",null,[withDirectives(createBaseVNode("input",{type:"text",name:n.numeCampDb,"onUpdate:modelValue":e[0]||(e[0]=l=>o.time=l)},null,8,_hoisted_1$4),[[vModelText,o.time],[vShow,!1]]),createVNode(a,{value:o.time,"onUpdate:value":e[1]||(e[1]=l=>o.time=l),type:n.tip,"value-type":n.valueType,format:n.format,"minute-step":n.minuteStep,"hour-options":n.hours,editable:!0,"disabled-date":s.notDates,style:normalizeStyle(n.latime),lang:o.langObject,range:n.range},null,8,["value","type","value-type","format","minute-step","hour-options","disabled-date","style","lang","range"])])}const VueDatepickerNext=_export_sfc(_sfc_main$5,[["render",_sfc_render$5]]);function OrderedMap(t){this.content=t}OrderedMap.prototype={constructor:OrderedMap,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,o=r.find(t),s=r.content.slice();return o==-1?s.push(n||t,e):(s[o+1]=e,n&&(s[o]=n)),new OrderedMap(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new OrderedMap(n)},addToStart:function(t,e){return new OrderedMap([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new OrderedMap(n)},addBefore:function(t,e,n){var r=this.remove(e),o=r.content.slice(),s=r.find(t);return o.splice(s==-1?o.length:s,0,e,n),new OrderedMap(o)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=OrderedMap.from(t),t.size?new OrderedMap(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=OrderedMap.from(t),t.size?new OrderedMap(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=OrderedMap.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};OrderedMap.from=function(t){if(t instanceof OrderedMap)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new OrderedMap(e)};function findDiffStart(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let o=t.child(r),s=e.child(r);if(o==s){n+=o.nodeSize;continue}if(!o.sameMarkup(s))return n;if(o.isText&&o.text!=s.text){for(let a=0;o.text[a]==s.text[a];a++)n++;return n}if(o.content.size||s.content.size){let a=findDiffStart(o.content,s.content,n+1);if(a!=null)return a}n+=o.nodeSize}}function findDiffEnd(t,e,n,r){for(let o=t.childCount,s=e.childCount;;){if(o==0||s==0)return o==s?null:{a:n,b:r};let a=t.child(--o),l=e.child(--s),c=a.nodeSize;if(a==l){n-=c,r-=c;continue}if(!a.sameMarkup(l))return{a:n,b:r};if(a.isText&&a.text!=l.text){let u=0,g=Math.min(a.text.length,l.text.length);for(;u<g&&a.text[a.text.length-u-1]==l.text[l.text.length-u-1];)u++,n--,r--;return{a:n,b:r}}if(a.content.size||l.content.size){let u=findDiffEnd(a.content,l.content,n-1,r-1);if(u)return u}n-=c,r-=c}}class Fragment{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,o=0,s){for(let a=0,l=0;l<n;a++){let c=this.content[a],u=l+c.nodeSize;if(u>e&&r(c,o+l,s||null,a)!==!1&&c.content.size){let g=l+1;c.nodesBetween(Math.max(0,e-g),Math.min(c.content.size,n-g),r,o+g)}l=u}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,o){let s="",a=!0;return this.nodesBetween(e,n,(l,c)=>{let u=l.isText?l.text.slice(Math.max(e,c)-c,n-c):l.isLeaf?o?typeof o=="function"?o(l):o:l.type.spec.leafText?l.type.spec.leafText(l):"":"";l.isBlock&&(l.isLeaf&&u||l.isTextblock)&&r&&(a?a=!1:s+=r),s+=u},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,o=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(o[o.length-1]=n.withText(n.text+r.text),s=1);s<e.content.length;s++)o.push(e.content[s]);return new Fragment(o,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],o=0;if(n>e)for(let s=0,a=0;a<n;s++){let l=this.content[s],c=a+l.nodeSize;c>e&&((a<e||c>n)&&(l.isText?l=l.cut(Math.max(0,e-a),Math.min(l.text.length,n-a)):l=l.cut(Math.max(0,e-a-1),Math.min(l.content.size,n-a-1))),r.push(l),o+=l.nodeSize),a=c}return new Fragment(r,o)}cutByIndex(e,n){return e==n?Fragment.empty:e==0&&n==this.content.length?this:new Fragment(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let o=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return o[e]=n,new Fragment(o,s)}addToStart(e){return new Fragment([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new Fragment(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let o=this.content[n];e(o,r,n),r+=o.nodeSize}}findDiffStart(e,n=0){return findDiffStart(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return findDiffEnd(this,e,n,r)}findIndex(e,n=-1){if(e==0)return retIndex(0,e);if(e==this.size)return retIndex(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,o=0;;r++){let s=this.child(r),a=o+s.nodeSize;if(a>=e)return a==e||n>0?retIndex(r+1,a):retIndex(r,o);o=a}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return Fragment.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new Fragment(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return Fragment.empty;let n,r=0;for(let o=0;o<e.length;o++){let s=e[o];r+=s.nodeSize,o&&s.isText&&e[o-1].sameMarkup(s)?(n||(n=e.slice(0,o)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new Fragment(n||e,r)}static from(e){if(!e)return Fragment.empty;if(e instanceof Fragment)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Fragment([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Fragment.empty=new Fragment([],0);const found={index:0,offset:0};function retIndex(t,e){return found.index=t,found.offset=e,found}function compareDeep(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!compareDeep(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!compareDeep(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let Mark$1=class ya{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let o=0;o<e.length;o++){let s=e[o];if(this.eq(s))return e;if(this.type.excludes(s.type))n||(n=e.slice(0,o));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(n||(n=e.slice(0,o)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&compareDeep(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let o=r.create(n.attrs);return r.checkAttrs(o.attrs),o}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return ya.none;if(e instanceof ya)return[e];let n=e.slice();return n.sort((r,o)=>r.type.rank-o.type.rank),n}};Mark$1.none=[];class ReplaceError extends Error{}class Slice{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=insertInto(this.content,e+this.openStart,n);return r&&new Slice(r,this.openStart,this.openEnd)}removeBetween(e,n){return new Slice(removeRange(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return Slice.empty;let r=n.openStart||0,o=n.openEnd||0;if(typeof r!="number"||typeof o!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Slice(Fragment.fromJSON(e,n.content),r,o)}static maxOpen(e,n=!0){let r=0,o=0;for(let s=e.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)o++;return new Slice(e,r,o)}}Slice.empty=new Slice(Fragment.empty,0,0);function removeRange(t,e,n){let{index:r,offset:o}=t.findIndex(e),s=t.maybeChild(r),{index:a,offset:l}=t.findIndex(n);if(o==e||s.isText){if(l!=n&&!t.child(a).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=a)throw new RangeError("Removing non-flat range");return t.replaceChild(r,s.copy(removeRange(s.content,e-o-1,n-o-1)))}function insertInto(t,e,n,r){let{index:o,offset:s}=t.findIndex(e),a=t.maybeChild(o);if(s==e||a.isText)return r&&!r.canReplace(o,o,n)?null:t.cut(0,e).append(n).append(t.cut(e));let l=insertInto(a.content,e-s-1,n);return l&&t.replaceChild(o,a.copy(l))}function replace(t,e,n){if(n.openStart>t.depth)throw new ReplaceError("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new ReplaceError("Inconsistent open depths");return replaceOuter(t,e,n,0)}function replaceOuter(t,e,n,r){let o=t.index(r),s=t.node(r);if(o==e.index(r)&&r<t.depth-n.openStart){let a=replaceOuter(t,e,n,r+1);return s.copy(s.content.replaceChild(o,a))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let a=t.parent,l=a.content;return close(a,l.cut(0,t.parentOffset).append(n.content).append(l.cut(e.parentOffset)))}else{let{start:a,end:l}=prepareSliceForReplace(n,t);return close(s,replaceThreeWay(t,a,l,e,r))}else return close(s,replaceTwoWay(t,e,r))}function checkJoin(t,e){if(!e.type.compatibleContent(t.type))throw new ReplaceError("Cannot join "+e.type.name+" onto "+t.type.name)}function joinable$1(t,e,n){let r=t.node(n);return checkJoin(r,e.node(n)),r}function addNode(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function addRange(t,e,n,r){let o=(e||t).node(n),s=0,a=e?e.index(n):o.childCount;t&&(s=t.index(n),t.depth>n?s++:t.textOffset&&(addNode(t.nodeAfter,r),s++));for(let l=s;l<a;l++)addNode(o.child(l),r);e&&e.depth==n&&e.textOffset&&addNode(e.nodeBefore,r)}function close(t,e){return t.type.checkContent(e),t.copy(e)}function replaceThreeWay(t,e,n,r,o){let s=t.depth>o&&joinable$1(t,e,o+1),a=r.depth>o&&joinable$1(n,r,o+1),l=[];return addRange(null,t,o,l),s&&a&&e.index(o)==n.index(o)?(checkJoin(s,a),addNode(close(s,replaceThreeWay(t,e,n,r,o+1)),l)):(s&&addNode(close(s,replaceTwoWay(t,e,o+1)),l),addRange(e,n,o,l),a&&addNode(close(a,replaceTwoWay(n,r,o+1)),l)),addRange(r,null,o,l),new Fragment(l)}function replaceTwoWay(t,e,n){let r=[];if(addRange(null,t,n,r),t.depth>n){let o=joinable$1(t,e,n+1);addNode(close(o,replaceTwoWay(t,e,n+1)),r)}return addRange(e,null,n,r),new Fragment(r)}function prepareSliceForReplace(t,e){let n=e.depth-t.openStart,o=e.node(n).copy(t.content);for(let s=n-1;s>=0;s--)o=e.node(s).copy(Fragment.from(o));return{start:o.resolveNoCache(t.openStart+n),end:o.resolveNoCache(o.content.size-t.openEnd-n)}}class ResolvedPos{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],o=e.child(n);return r?e.child(n).cut(r):o}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],o=n==0?0:this.path[n*3-1]+1;for(let s=0;s<e;s++)o+=r.child(s).nodeSize;return o}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return Mark$1.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),o=e.maybeChild(n);if(!r){let l=r;r=o,o=l}let s=r.marks;for(var a=0;a<s.length;a++)s[a].type.spec.inclusive===!1&&(!o||!s[a].isInSet(o.marks))&&(s=s[a--].removeFromSet(s));return s}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,o=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!o||!r[s].isInSet(o.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new NodeRange(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],o=0,s=n;for(let a=e;;){let{index:l,offset:c}=a.content.findIndex(s),u=s-c;if(r.push(a,l,o+c),!u||(a=a.child(l),a.isText))break;s=u-1,o+=c+1}return new ResolvedPos(n,r,s)}static resolveCached(e,n){let r=resolveCache.get(e);if(r)for(let s=0;s<r.elts.length;s++){let a=r.elts[s];if(a.pos==n)return a}else resolveCache.set(e,r=new ResolveCache);let o=r.elts[r.i]=ResolvedPos.resolve(e,n);return r.i=(r.i+1)%resolveCacheSize,o}}class ResolveCache{constructor(){this.elts=[],this.i=0}}const resolveCacheSize=12,resolveCache=new WeakMap;class NodeRange{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const emptyAttrs=Object.create(null);let Node$2=class Ea{constructor(e,n,r,o=Mark$1.none){this.type=e,this.attrs=n,this.marks=o,this.content=r||Fragment.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,o=0){this.content.nodesBetween(e,n,r,o,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,o){return this.content.textBetween(e,n,r,o)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&compareDeep(this.attrs,n||e.defaultAttrs||emptyAttrs)&&Mark$1.sameSet(this.marks,r||Mark$1.none)}copy(e=null){return e==this.content?this:new Ea(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Ea(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return Slice.empty;let o=this.resolve(e),s=this.resolve(n),a=r?0:o.sharedDepth(n),l=o.start(a),u=o.node(a).content.cut(o.pos-l,s.pos-l);return new Slice(u,o.depth-a,s.depth-a)}replace(e,n,r){return replace(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:o}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(o==e||n.isText)return n;e-=o+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let o=this.content.child(n-1);return{node:o,index:n-1,offset:r-o.nodeSize}}resolve(e){return ResolvedPos.resolveCached(this,e)}resolveNoCache(e){return ResolvedPos.resolve(this,e)}rangeHasMark(e,n,r){let o=!1;return n>e&&this.nodesBetween(e,n,s=>(r.isInSet(s.marks)&&(o=!0),!o)),o}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),wrapMarks(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=Fragment.empty,o=0,s=r.childCount){let a=this.contentMatchAt(e).matchFragment(r,o,s),l=a&&a.matchFragment(this.content,n);if(!l||!l.validEnd)return!1;for(let c=o;c<s;c++)if(!this.type.allowsMarks(r.child(c).marks))return!1;return!0}canReplaceWith(e,n,r,o){if(o&&!this.type.allowsMarks(o))return!1;let s=this.contentMatchAt(e).matchType(r),a=s&&s.matchFragment(this.content,n);return a?a.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Mark$1.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!Mark$1.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let o=Fragment.fromJSON(e,n.content),s=e.nodeType(n.type).create(n.attrs,o,r);return s.type.checkAttrs(s.attrs),s}};Node$2.prototype.text=void 0;class TextNode extends Node$2{constructor(e,n,r,o){if(super(e,n,null,o),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):wrapMarks(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new TextNode(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new TextNode(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function wrapMarks(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class ContentMatch{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new TokenStream(e,n);if(r.next==null)return ContentMatch.empty;let o=parseExpr(r);r.next&&r.err("Unexpected trailing text");let s=dfa(nfa(o));return checkForDeadEnds(s,r),s}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let o=this;for(let s=n;o&&s<r;s++)o=o.matchType(e.child(s).type);return o}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let o=[this];function s(a,l){let c=a.matchFragment(e,r);if(c&&(!n||c.validEnd))return Fragment.from(l.map(u=>u.createAndFill()));for(let u=0;u<a.next.length;u++){let{type:g,next:C}=a.next[u];if(!(g.isText||g.hasRequiredAttrs())&&o.indexOf(C)==-1){o.push(C);let v=s(C,l.concat(g));if(v)return v}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let o=r.shift(),s=o.match;if(s.matchType(e)){let a=[];for(let l=o;l.type;l=l.via)a.push(l.type);return a.reverse()}for(let a=0;a<s.next.length;a++){let{type:l,next:c}=s.next[a];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in n)&&(!o.type||c.validEnd)&&(r.push({match:l.contentMatch,type:l,via:o}),n[l.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let o=0;o<r.next.length;o++)e.indexOf(r.next[o].next)==-1&&n(r.next[o].next)}return n(this),e.map((r,o)=>{let s=o+(r.validEnd?"*":" ")+" ";for(let a=0;a<r.next.length;a++)s+=(a?", ":"")+r.next[a].type.name+"->"+e.indexOf(r.next[a].next);return s}).join(`
`)}}ContentMatch.empty=new ContentMatch(!0);class TokenStream{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function parseExpr(t){let e=[];do e.push(parseExprSeq(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function parseExprSeq(t){let e=[];do e.push(parseExprSubscript(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function parseExprSubscript(t){let e=parseExprAtom(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=parseExprRange(t,e);else break;return e}function parseNum(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function parseExprRange(t,e){let n=parseNum(t),r=n;return t.eat(",")&&(t.next!="}"?r=parseNum(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function resolveName(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let o=[];for(let s in n){let a=n[s];a.isInGroup(e)&&o.push(a)}return o.length==0&&t.err("No node type or group '"+e+"' found"),o}function parseExprAtom(t){if(t.eat("(")){let e=parseExpr(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=resolveName(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function nfa(t){let e=[[]];return o(s(t,0),n()),e;function n(){return e.push([])-1}function r(a,l,c){let u={term:c,to:l};return e[a].push(u),u}function o(a,l){a.forEach(c=>c.to=l)}function s(a,l){if(a.type=="choice")return a.exprs.reduce((c,u)=>c.concat(s(u,l)),[]);if(a.type=="seq")for(let c=0;;c++){let u=s(a.exprs[c],l);if(c==a.exprs.length-1)return u;o(u,l=n())}else if(a.type=="star"){let c=n();return r(l,c),o(s(a.expr,c),c),[r(c)]}else if(a.type=="plus"){let c=n();return o(s(a.expr,l),c),o(s(a.expr,c),c),[r(c)]}else{if(a.type=="opt")return[r(l)].concat(s(a.expr,l));if(a.type=="range"){let c=l;for(let u=0;u<a.min;u++){let g=n();o(s(a.expr,c),g),c=g}if(a.max==-1)o(s(a.expr,c),c);else for(let u=a.min;u<a.max;u++){let g=n();r(c,g),o(s(a.expr,c),g),c=g}return[r(c)]}else{if(a.type=="name")return[r(l,void 0,a.value)];throw new Error("Unknown expr type")}}}}function cmp(t,e){return e-t}function nullFrom(t,e){let n=[];return r(e),n.sort(cmp);function r(o){let s=t[o];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(o);for(let a=0;a<s.length;a++){let{term:l,to:c}=s[a];!l&&n.indexOf(c)==-1&&r(c)}}}function dfa(t){let e=Object.create(null);return n(nullFrom(t,0));function n(r){let o=[];r.forEach(a=>{t[a].forEach(({term:l,to:c})=>{if(!l)return;let u;for(let g=0;g<o.length;g++)o[g][0]==l&&(u=o[g][1]);nullFrom(t,c).forEach(g=>{u||o.push([l,u=[]]),u.indexOf(g)==-1&&u.push(g)})})});let s=e[r.join(",")]=new ContentMatch(r.indexOf(t.length-1)>-1);for(let a=0;a<o.length;a++){let l=o[a][1].sort(cmp);s.next.push({type:o[a][0],next:e[l.join(",")]||n(l)})}return s}}function checkForDeadEnds(t,e){for(let n=0,r=[t];n<r.length;n++){let o=r[n],s=!o.validEnd,a=[];for(let l=0;l<o.next.length;l++){let{type:c,next:u}=o.next[l];a.push(c.name),s&&!(c.isText||c.hasRequiredAttrs())&&(s=!1),r.indexOf(u)==-1&&r.push(u)}s&&e.err("Only non-generatable nodes ("+a.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function defaultAttrs(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function computeAttrs(t,e){let n=Object.create(null);for(let r in t){let o=e&&e[r];if(o===void 0){let s=t[r];if(s.hasDefault)o=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=o}return n}function checkAttrs(t,e,n,r){for(let o in e)if(!(o in t))throw new RangeError(`Unsupported attribute ${o} for ${n} of type ${o}`);for(let o in t){let s=t[o];s.validate&&s.validate(e[o])}}function initAttrs(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new Attribute(t,r,e[r]);return n}let NodeType$1=class hc{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=initAttrs(e,r.attrs),this.defaultAttrs=defaultAttrs(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==ContentMatch.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:computeAttrs(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Node$2(this,this.computeAttrs(e),Fragment.from(n),Mark$1.setFrom(r))}createChecked(e=null,n,r){return n=Fragment.from(n),this.checkContent(n),new Node$2(this,this.computeAttrs(e),n,Mark$1.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=Fragment.from(n),n.size){let a=this.contentMatch.fillBefore(n);if(!a)return null;n=a.append(n)}let o=this.contentMatch.matchFragment(n),s=o&&o.fillBefore(Fragment.empty,!0);return s?new Node$2(this,e,n.append(s),Mark$1.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){checkAttrs(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:Mark$1.none:e}static compile(e,n){let r=Object.create(null);e.forEach((s,a)=>r[s]=new hc(s,n,a));let o=n.spec.topNode||"doc";if(!r[o])throw new RangeError("Schema is missing its top node type ('"+o+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function validateType(t,e,n){let r=n.split("|");return o=>{let s=o===null?"null":typeof o;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${s}`)}}class Attribute{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?validateType(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class MarkType{constructor(e,n,r,o){this.name=e,this.rank=n,this.schema=r,this.spec=o,this.attrs=initAttrs(e,o.attrs),this.excluded=null;let s=defaultAttrs(this.attrs);this.instance=s?new Mark$1(this,s):null}create(e=null){return!e&&this.instance?this.instance:new Mark$1(this,computeAttrs(this.attrs,e))}static compile(e,n){let r=Object.create(null),o=0;return e.forEach((s,a)=>r[s]=new MarkType(s,o++,n,a)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){checkAttrs(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class Schema{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let o in e)n[o]=e[o];n.nodes=OrderedMap.from(e.nodes),n.marks=OrderedMap.from(e.marks||{}),this.nodes=NodeType$1.compile(this.spec.nodes,this),this.marks=MarkType.compile(this.spec.marks,this);let r=Object.create(null);for(let o in this.nodes){if(o in this.marks)throw new RangeError(o+" can not be both a node and a mark");let s=this.nodes[o],a=s.spec.content||"",l=s.spec.marks;if(s.contentMatch=r[a]||(r[a]=ContentMatch.parse(a,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=l=="_"?null:l?gatherMarks(this,l.split(" ")):l==""||!s.inlineContent?[]:null}for(let o in this.marks){let s=this.marks[o],a=s.spec.excludes;s.excluded=a==null?[s]:a==""?[]:gatherMarks(this,a.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,o){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof NodeType$1){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,o)}text(e,n){let r=this.nodes.text;return new TextNode(r,r.defaultAttrs,e,Mark$1.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeFromJSON(e){return Node$2.fromJSON(this,e)}markFromJSON(e){return Mark$1.fromJSON(this,e)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function gatherMarks(t,e){let n=[];for(let r=0;r<e.length;r++){let o=e[r],s=t.marks[o],a=s;if(s)n.push(s);else for(let l in t.marks){let c=t.marks[l];(o=="_"||c.spec.group&&c.spec.group.split(" ").indexOf(o)>-1)&&n.push(a=c)}if(!a)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function isTagRule(t){return t.tag!=null}function isStyleRule(t){return t.style!=null}let DOMParser$1=class Ca{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(o=>{if(isTagRule(o))this.tags.push(o);else if(isStyleRule(o)){let s=/[^=]*/.exec(o.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(o)}}),this.normalizeLists=!this.tags.some(o=>{if(!/^(ul|ol)\b/.test(o.tag)||!o.node)return!1;let s=e.nodes[o.node];return s.contentMatch.matchType(s)})}parse(e,n={}){let r=new ParseContext(this,n,!1);return r.addAll(e,Mark$1.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new ParseContext(this,n,!0);return r.addAll(e,Mark$1.none,n.from,n.to),Slice.maxOpen(r.finish())}matchTag(e,n,r){for(let o=r?this.tags.indexOf(r)+1:0;o<this.tags.length;o++){let s=this.tags[o];if(matches(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let a=s.getAttrs(e);if(a===!1)continue;s.attrs=a||void 0}return s}}}matchStyle(e,n,r,o){for(let s=o?this.styles.indexOf(o)+1:0;s<this.styles.length;s++){let a=this.styles[s],l=a.style;if(!(l.indexOf(e)!=0||a.context&&!r.matchesContext(a.context)||l.length>e.length&&(l.charCodeAt(e.length)!=61||l.slice(e.length+1)!=n))){if(a.getAttrs){let c=a.getAttrs(n);if(c===!1)continue;a.attrs=c||void 0}return a}}}static schemaRules(e){let n=[];function r(o){let s=o.priority==null?50:o.priority,a=0;for(;a<n.length;a++){let l=n[a];if((l.priority==null?50:l.priority)<s)break}n.splice(a,0,o)}for(let o in e.marks){let s=e.marks[o].spec.parseDOM;s&&s.forEach(a=>{r(a=copy(a)),a.mark||a.ignore||a.clearMark||(a.mark=o)})}for(let o in e.nodes){let s=e.nodes[o].spec.parseDOM;s&&s.forEach(a=>{r(a=copy(a)),a.node||a.ignore||a.mark||(a.node=o)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Ca(e,Ca.schemaRules(e)))}};const blockTags={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ignoreTags={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},listTags={ol:!0,ul:!0},OPT_PRESERVE_WS=1,OPT_PRESERVE_WS_FULL=2,OPT_OPEN_LEFT=4;function wsOptionsFor(t,e,n){return e!=null?(e?OPT_PRESERVE_WS:0)|(e==="full"?OPT_PRESERVE_WS_FULL:0):t&&t.whitespace=="pre"?OPT_PRESERVE_WS|OPT_PRESERVE_WS_FULL:n&~OPT_OPEN_LEFT}class NodeContext{constructor(e,n,r,o,s,a){this.type=e,this.attrs=n,this.marks=r,this.solid=o,this.options=a,this.content=[],this.activeMarks=Mark$1.none,this.match=s||(a&OPT_OPEN_LEFT?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(Fragment.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,o;return(o=r.findWrapping(e.type))?(this.match=r,o):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&OPT_PRESERVE_WS)){let r=this.content[this.content.length-1],o;if(r&&r.isText&&(o=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==o[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-o[0].length))}}let n=Fragment.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(Fragment.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!blockTags.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class ParseContext{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let o=n.topNode,s,a=wsOptionsFor(null,n.preserveWhitespace,0)|(r?OPT_OPEN_LEFT:0);o?s=new NodeContext(o.type,o.attrs,Mark$1.none,!0,n.topMatch||o.type.contentMatch,a):r?s=new NodeContext(null,null,Mark$1.none,!0,null,a):s=new NodeContext(e.schema.topNodeType,null,Mark$1.none,!0,null,a),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,o=this.top,s=o.options&OPT_PRESERVE_WS_FULL?"full":this.localPreserveWS||(o.options&OPT_PRESERVE_WS)>0;if(s==="full"||o.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(s)s!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let a=o.content[o.content.length-1],l=e.previousSibling;(!a||l&&l.nodeName=="BR"||a.isText&&/[ \t\r\n\u000c]$/.test(a.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let o=this.localPreserveWS,s=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let a=e.nodeName.toLowerCase(),l;listTags.hasOwnProperty(a)&&this.parser.normalizeLists&&normalizeList(e);let c=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(l=this.parser.matchTag(e,this,r));e:if(c?c.ignore:ignoreTags.hasOwnProperty(a))this.findInside(e),this.ignoreFallback(e,n);else if(!c||c.skip||c.closeParent){c&&c.closeParent?this.open=Math.max(0,this.open-1):c&&c.skip.nodeType&&(e=c.skip);let u,g=this.needsBlock;if(blockTags.hasOwnProperty(a))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),u=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let C=c&&c.skip?n:this.readStyles(e,n);C&&this.addAll(e,C),u&&this.sync(s),this.needsBlock=g}else{let u=this.readStyles(e,n);u&&this.addElementByRule(e,c,u,c.consuming===!1?l:void 0)}this.localPreserveWS=o}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let o=0;o<this.parser.matchedStyles.length;o++){let s=this.parser.matchedStyles[o],a=r.getPropertyValue(s);if(a)for(let l=void 0;;){let c=this.parser.matchStyle(s,a,this,l);if(!c)break;if(c.ignore)return null;if(c.clearMark?n=n.filter(u=>!c.clearMark(u)):n=n.concat(this.parser.schema.marks[c.mark].create(c.attrs)),c.consuming===!1)l=c;else break}}return n}addElementByRule(e,n,r,o){let s,a;if(n.node)if(a=this.parser.schema.nodes[n.node],a.isLeaf)this.insertNode(a.create(n.attrs),r)||this.leafFallback(e,r);else{let c=this.enter(a,n.attrs||null,r,n.preserveWhitespace);c&&(s=!0,r=c)}else{let c=this.parser.schema.marks[n.mark];r=r.concat(c.create(n.attrs))}let l=this.top;if(a&&a.isLeaf)this.findInside(e);else if(o)this.addElement(e,r,o);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(c=>this.insertNode(c,r));else{let c=e;typeof n.contentElement=="string"?c=e.querySelector(n.contentElement):typeof n.contentElement=="function"?c=n.contentElement(e):n.contentElement&&(c=n.contentElement),this.findAround(e,c,!0),this.addAll(c,r),this.findAround(e,c,!1)}s&&this.sync(l)&&this.open--}addAll(e,n,r,o){let s=r||0;for(let a=r?e.childNodes[r]:e.firstChild,l=o==null?null:e.childNodes[o];a!=l;a=a.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(a,n);this.findAtPoint(e,s)}findPlace(e,n){let r,o;for(let s=this.open;s>=0;s--){let a=this.nodes[s],l=a.findWrapping(e);if(l&&(!r||r.length>l.length)&&(r=l,o=a,!l.length)||a.solid)break}if(!r)return null;this.sync(o);for(let s=0;s<r.length;s++)n=this.enterInner(r[s],null,n,!1);return n}insertNode(e,n){if(e.isInline&&this.needsBlock&&!this.top.type){let o=this.textblockFromContext();o&&(n=this.enterInner(o,null,n))}let r=this.findPlace(e,n);if(r){this.closeExtra();let o=this.top;o.match&&(o.match=o.match.matchType(e.type));let s=Mark$1.none;for(let a of r.concat(e.marks))(o.type?o.type.allowsMarkType(a.type):markMayApply(a.type,e.type))&&(s=a.addToSet(s));return o.content.push(e.mark(s)),!0}return!1}enter(e,n,r,o){let s=this.findPlace(e.create(n),r);return s&&(s=this.enterInner(e,n,r,!0,o)),s}enterInner(e,n,r,o=!1,s){this.closeExtra();let a=this.top;a.match=a.match&&a.match.matchType(e);let l=wsOptionsFor(e,s,a.options);a.options&OPT_OPEN_LEFT&&a.content.length==0&&(l|=OPT_OPEN_LEFT);let c=Mark$1.none;return r=r.filter(u=>(a.type?a.type.allowsMarkType(u.type):markMayApply(u.type,e))?(c=u.addToSet(c),!1):!0),this.nodes.push(new NodeContext(e,n,c,o,null,l)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=OPT_PRESERVE_WS)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let o=r.length-1;o>=0;o--)e+=r[o].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let o=0;o<this.find.length;o++)this.find[o].pos==null&&e.nodeType==1&&e.contains(this.find[o].node)&&n.compareDocumentPosition(this.find[o].node)&(r?2:4)&&(this.find[o].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,o=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(o?0:1),a=(l,c)=>{for(;l>=0;l--){let u=n[l];if(u==""){if(l==n.length-1||l==0)continue;for(;c>=s;c--)if(a(l-1,c))return!0;return!1}else{let g=c>0||c==0&&o?this.nodes[c].type:r&&c>=s?r.node(c-s).type:null;if(!g||g.name!=u&&!g.isInGroup(u))return!1;c--}}return!0};return a(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function normalizeList(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&listTags.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function matches(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function copy(t){let e={};for(let n in t)e[n]=t[n];return e}function markMayApply(t,e){let n=e.schema.nodes;for(let r in n){let o=n[r];if(!o.allowsMarkType(t))continue;let s=[],a=l=>{s.push(l);for(let c=0;c<l.edgeCount;c++){let{type:u,next:g}=l.edge(c);if(u==e||s.indexOf(g)<0&&a(g))return!0}};if(a(o.contentMatch))return!0}}class DOMSerializer{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=doc$1(n).createDocumentFragment());let o=r,s=[];return e.forEach(a=>{if(s.length||a.marks.length){let l=0,c=0;for(;l<s.length&&c<a.marks.length;){let u=a.marks[c];if(!this.marks[u.type.name]){c++;continue}if(!u.eq(s[l][0])||u.type.spec.spanning===!1)break;l++,c++}for(;l<s.length;)o=s.pop()[1];for(;c<a.marks.length;){let u=a.marks[c++],g=this.serializeMark(u,a.isInline,n);g&&(s.push([u,o]),o.appendChild(g.dom),o=g.contentDOM||g.dom)}}o.appendChild(this.serializeNodeInner(a,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:o}=renderSpec(doc$1(n),this.nodes[e.type.name](e),null,e.attrs);if(o){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,o)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let o=e.marks.length-1;o>=0;o--){let s=this.serializeMark(e.marks[o],e.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,n,r={}){let o=this.marks[e.type.name];return o&&renderSpec(doc$1(r),o(e,n),null,e.attrs)}static renderSpec(e,n,r=null,o){return renderSpec(e,n,r,o)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new DOMSerializer(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=gatherToDOM(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return gatherToDOM(e.marks)}}function gatherToDOM(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function doc$1(t){return t.document||window.document}const suspiciousAttributeCache=new WeakMap;function suspiciousAttributes(t){let e=suspiciousAttributeCache.get(t);return e===void 0&&suspiciousAttributeCache.set(t,e=suspiciousAttributesInner(t)),e}function suspiciousAttributesInner(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let o=0;o<r.length;o++)n(r[o]);else for(let o in r)n(r[o])}return n(t),e}function renderSpec(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let o=e[0],s;if(typeof o!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=suspiciousAttributes(r))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let a=o.indexOf(" ");a>0&&(n=o.slice(0,a),o=o.slice(a+1));let l,c=n?t.createElementNS(n,o):t.createElement(o),u=e[1],g=1;if(u&&typeof u=="object"&&u.nodeType==null&&!Array.isArray(u)){g=2;for(let C in u)if(u[C]!=null){let v=C.indexOf(" ");v>0?c.setAttributeNS(C.slice(0,v),C.slice(v+1),u[C]):c.setAttribute(C,u[C])}}for(let C=g;C<e.length;C++){let v=e[C];if(v===0){if(C<e.length-1||C>g)throw new RangeError("Content hole must be the only child of its parent node");return{dom:c,contentDOM:c}}else{let{dom:m,contentDOM:S}=renderSpec(t,v,n,r);if(c.appendChild(m),S){if(l)throw new RangeError("Multiple content holes");l=S}}}return{dom:c,contentDOM:l}}const lower16=65535,factor16=Math.pow(2,16);function makeRecover(t,e){return t+e*factor16}function recoverIndex(t){return t&lower16}function recoverOffset(t){return(t-(t&lower16))/factor16}const DEL_BEFORE=1,DEL_AFTER=2,DEL_ACROSS=4,DEL_SIDE=8;class MapResult{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&DEL_SIDE)>0}get deletedBefore(){return(this.delInfo&(DEL_BEFORE|DEL_ACROSS))>0}get deletedAfter(){return(this.delInfo&(DEL_AFTER|DEL_ACROSS))>0}get deletedAcross(){return(this.delInfo&DEL_ACROSS)>0}}class StepMap{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&StepMap.empty)return StepMap.empty}recover(e){let n=0,r=recoverIndex(e);if(!this.inverted)for(let o=0;o<r;o++)n+=this.ranges[o*3+2]-this.ranges[o*3+1];return this.ranges[r*3]+n+recoverOffset(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let o=0,s=this.inverted?2:1,a=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let c=this.ranges[l]-(this.inverted?o:0);if(c>e)break;let u=this.ranges[l+s],g=this.ranges[l+a],C=c+u;if(e<=C){let v=u?e==c?-1:e==C?1:n:n,m=c+o+(v<0?0:g);if(r)return m;let S=e==(n<0?c:C)?null:makeRecover(l/3,e-c),T=e==c?DEL_AFTER:e==C?DEL_BEFORE:DEL_ACROSS;return(n<0?e!=c:e!=C)&&(T|=DEL_SIDE),new MapResult(m,T,S)}o+=g-u}return r?e+o:new MapResult(e+o,0,null)}touches(e,n){let r=0,o=recoverIndex(n),s=this.inverted?2:1,a=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let c=this.ranges[l]-(this.inverted?r:0);if(c>e)break;let u=this.ranges[l+s],g=c+u;if(e<=g&&l==o*3)return!0;r+=this.ranges[l+a]-u}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let o=0,s=0;o<this.ranges.length;o+=3){let a=this.ranges[o],l=a-(this.inverted?s:0),c=a+(this.inverted?0:s),u=this.ranges[o+n],g=this.ranges[o+r];e(l,l+u,c,c+g),s+=g-u}}invert(){return new StepMap(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?StepMap.empty:new StepMap(e<0?[0,-e,0]:[0,0,e])}}StepMap.empty=new StepMap([]);class Mapping{constructor(e=[],n,r=0,o=e.length){this.maps=e,this.mirror=n,this.from=r,this.to=o}slice(e=0,n=this.maps.length){return new Mapping(this.maps,this.mirror,e,n)}copy(){return new Mapping(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,n){this.to=this.maps.push(e),n!=null&&this.setMirror(this.maps.length-1,n)}appendMapping(e){for(let n=0,r=this.maps.length;n<e.maps.length;n++){let o=e.getMirror(n);this.appendMap(e.maps[n],o!=null&&o<n?r+o:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this.maps.length+e.maps.length;n>=0;n--){let o=e.getMirror(n);this.appendMap(e.maps[n].invert(),o!=null&&o>n?r-o-1:void 0)}}invert(){let e=new Mapping;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this.maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let o=0;for(let s=this.from;s<this.to;s++){let a=this.maps[s],l=a.mapResult(e,n);if(l.recover!=null){let c=this.getMirror(s);if(c!=null&&c>s&&c<this.to){s=c,e=this.maps[c].recover(l.recover);continue}}o|=l.delInfo,e=l.pos}return r?e:new MapResult(e,o,null)}}const stepsByID=Object.create(null);class Step{getMap(){return StepMap.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=stepsByID[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in stepsByID)throw new RangeError("Duplicate use of step JSON ID "+e);return stepsByID[e]=n,n.prototype.jsonID=e,n}}class StepResult{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new StepResult(e,null)}static fail(e){return new StepResult(null,e)}static fromReplace(e,n,r,o){try{return StepResult.ok(e.replace(n,r,o))}catch(s){if(s instanceof ReplaceError)return StepResult.fail(s.message);throw s}}}function mapFragment(t,e,n){let r=[];for(let o=0;o<t.childCount;o++){let s=t.child(o);s.content.size&&(s=s.copy(mapFragment(s.content,e,s))),s.isInline&&(s=e(s,n,o)),r.push(s)}return Fragment.fromArray(r)}class AddMarkStep extends Step{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),o=r.node(r.sharedDepth(this.to)),s=new Slice(mapFragment(n.content,(a,l)=>!a.isAtom||!l.type.allowsMarkType(this.mark.type)?a:a.mark(this.mark.addToSet(a.marks)),o),n.openStart,n.openEnd);return StepResult.fromReplace(e,this.from,this.to,s)}invert(){return new RemoveMarkStep(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new AddMarkStep(n.pos,r.pos,this.mark)}merge(e){return e instanceof AddMarkStep&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new AddMarkStep(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new AddMarkStep(n.from,n.to,e.markFromJSON(n.mark))}}Step.jsonID("addMark",AddMarkStep);class RemoveMarkStep extends Step{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new Slice(mapFragment(n.content,o=>o.mark(this.mark.removeFromSet(o.marks)),e),n.openStart,n.openEnd);return StepResult.fromReplace(e,this.from,this.to,r)}invert(){return new AddMarkStep(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new RemoveMarkStep(n.pos,r.pos,this.mark)}merge(e){return e instanceof RemoveMarkStep&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new RemoveMarkStep(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new RemoveMarkStep(n.from,n.to,e.markFromJSON(n.mark))}}Step.jsonID("removeMark",RemoveMarkStep);class AddNodeMarkStep extends Step{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return StepResult.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return StepResult.fromReplace(e,this.pos,this.pos+1,new Slice(Fragment.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let o=0;o<n.marks.length;o++)if(!n.marks[o].isInSet(r))return new AddNodeMarkStep(this.pos,n.marks[o]);return new AddNodeMarkStep(this.pos,this.mark)}}return new RemoveNodeMarkStep(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new AddNodeMarkStep(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new AddNodeMarkStep(n.pos,e.markFromJSON(n.mark))}}Step.jsonID("addNodeMark",AddNodeMarkStep);class RemoveNodeMarkStep extends Step{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return StepResult.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return StepResult.fromReplace(e,this.pos,this.pos+1,new Slice(Fragment.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new AddNodeMarkStep(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new RemoveNodeMarkStep(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new RemoveNodeMarkStep(n.pos,e.markFromJSON(n.mark))}}Step.jsonID("removeNodeMark",RemoveNodeMarkStep);class ReplaceStep extends Step{constructor(e,n,r,o=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=o}apply(e){return this.structure&&contentBetween(e,this.from,this.to)?StepResult.fail("Structure replace would overwrite content"):StepResult.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new StepMap([this.from,this.to-this.from,this.slice.size])}invert(e){return new ReplaceStep(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new ReplaceStep(n.pos,Math.max(n.pos,r.pos),this.slice)}merge(e){if(!(e instanceof ReplaceStep)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?Slice.empty:new Slice(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new ReplaceStep(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?Slice.empty:new Slice(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new ReplaceStep(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new ReplaceStep(n.from,n.to,Slice.fromJSON(e,n.slice),!!n.structure)}}Step.jsonID("replace",ReplaceStep);class ReplaceAroundStep extends Step{constructor(e,n,r,o,s,a,l=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=o,this.slice=s,this.insert=a,this.structure=l}apply(e){if(this.structure&&(contentBetween(e,this.from,this.gapFrom)||contentBetween(e,this.gapTo,this.to)))return StepResult.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return StepResult.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?StepResult.fromReplace(e,this.from,this.to,r):StepResult.fail("Content does not fit in gap")}getMap(){return new StepMap([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new ReplaceAroundStep(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),o=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||o<n.pos||s>r.pos?null:new ReplaceAroundStep(n.pos,r.pos,o,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ReplaceAroundStep(n.from,n.to,n.gapFrom,n.gapTo,Slice.fromJSON(e,n.slice),n.insert,!!n.structure)}}Step.jsonID("replaceAround",ReplaceAroundStep);function contentBetween(t,e,n){let r=t.resolve(e),o=n-e,s=r.depth;for(;o>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,o--;if(o>0){let a=r.node(s).maybeChild(r.indexAfter(s));for(;o>0;){if(!a||a.isLeaf)return!0;a=a.firstChild,o--}}return!1}function addMark(t,e,n,r){let o=[],s=[],a,l;t.doc.nodesBetween(e,n,(c,u,g)=>{if(!c.isInline)return;let C=c.marks;if(!r.isInSet(C)&&g.type.allowsMarkType(r.type)){let v=Math.max(u,e),m=Math.min(u+c.nodeSize,n),S=r.addToSet(C);for(let T=0;T<C.length;T++)C[T].isInSet(S)||(a&&a.to==v&&a.mark.eq(C[T])?a.to=m:o.push(a=new RemoveMarkStep(v,m,C[T])));l&&l.to==v?l.to=m:s.push(l=new AddMarkStep(v,m,r))}}),o.forEach(c=>t.step(c)),s.forEach(c=>t.step(c))}function removeMark(t,e,n,r){let o=[],s=0;t.doc.nodesBetween(e,n,(a,l)=>{if(!a.isInline)return;s++;let c=null;if(r instanceof MarkType){let u=a.marks,g;for(;g=r.isInSet(u);)(c||(c=[])).push(g),u=g.removeFromSet(u)}else r?r.isInSet(a.marks)&&(c=[r]):c=a.marks;if(c&&c.length){let u=Math.min(l+a.nodeSize,n);for(let g=0;g<c.length;g++){let C=c[g],v;for(let m=0;m<o.length;m++){let S=o[m];S.step==s-1&&C.eq(o[m].style)&&(v=S)}v?(v.to=u,v.step=s):o.push({style:C,from:Math.max(l,e),to:u,step:s})}}}),o.forEach(a=>t.step(new RemoveMarkStep(a.from,a.to,a.style)))}function clearIncompatible(t,e,n,r=n.contentMatch,o=!0){let s=t.doc.nodeAt(e),a=[],l=e+1;for(let c=0;c<s.childCount;c++){let u=s.child(c),g=l+u.nodeSize,C=r.matchType(u.type);if(!C)a.push(new ReplaceStep(l,g,Slice.empty));else{r=C;for(let v=0;v<u.marks.length;v++)n.allowsMarkType(u.marks[v].type)||t.step(new RemoveMarkStep(l,g,u.marks[v]));if(o&&u.isText&&n.whitespace!="pre"){let v,m=/\r?\n|\r/g,S;for(;v=m.exec(u.text);)S||(S=new Slice(Fragment.from(n.schema.text(" ",n.allowedMarks(u.marks))),0,0)),a.push(new ReplaceStep(l+v.index,l+v.index+v[0].length,S))}}l=g}if(!r.validEnd){let c=r.fillBefore(Fragment.empty,!0);t.replace(l,l,new Slice(c,0,0))}for(let c=a.length-1;c>=0;c--)t.step(a[c])}function canCut(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function liftTarget(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let o=t.$from.node(r),s=t.$from.index(r),a=t.$to.indexAfter(r);if(r<t.depth&&o.canReplace(s,a,n))return r;if(r==0||o.type.spec.isolating||!canCut(o,s,a))break}return null}function lift$2(t,e,n){let{$from:r,$to:o,depth:s}=e,a=r.before(s+1),l=o.after(s+1),c=a,u=l,g=Fragment.empty,C=0;for(let S=s,T=!1;S>n;S--)T||r.index(S)>0?(T=!0,g=Fragment.from(r.node(S).copy(g)),C++):c--;let v=Fragment.empty,m=0;for(let S=s,T=!1;S>n;S--)T||o.after(S+1)<o.end(S)?(T=!0,v=Fragment.from(o.node(S).copy(v)),m++):u++;t.step(new ReplaceAroundStep(c,u,a,l,new Slice(g.append(v),C,m),g.size-C,!0))}function findWrapping(t,e,n=null,r=t){let o=findWrappingOutside(t,e),s=o&&findWrappingInside(r,e);return s?o.map(withAttrs).concat({type:e,attrs:n}).concat(s.map(withAttrs)):null}function withAttrs(t){return{type:t,attrs:null}}function findWrappingOutside(t,e){let{parent:n,startIndex:r,endIndex:o}=t,s=n.contentMatchAt(r).findWrapping(e);if(!s)return null;let a=s.length?s[0]:e;return n.canReplaceWith(r,o,a)?s:null}function findWrappingInside(t,e){let{parent:n,startIndex:r,endIndex:o}=t,s=n.child(r),a=e.contentMatch.findWrapping(s.type);if(!a)return null;let c=(a.length?a[a.length-1]:e).contentMatch;for(let u=r;c&&u<o;u++)c=c.matchType(n.child(u).type);return!c||!c.validEnd?null:a}function wrap(t,e,n){let r=Fragment.empty;for(let a=n.length-1;a>=0;a--){if(r.size){let l=n[a].type.contentMatch.matchFragment(r);if(!l||!l.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=Fragment.from(n[a].type.create(n[a].attrs,r))}let o=e.start,s=e.end;t.step(new ReplaceAroundStep(o,s,o,s,new Slice(r,0,0),n.length,!0))}function setBlockType$1(t,e,n,r,o){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,n,(a,l)=>{let c=typeof o=="function"?o(a):o;if(a.isTextblock&&!a.hasMarkup(r,c)&&canChangeType(t.doc,t.mapping.slice(s).map(l),r)){let u=null;if(r.schema.linebreakReplacement){let m=r.whitespace=="pre",S=!!r.contentMatch.matchType(r.schema.linebreakReplacement);m&&!S?u=!1:!m&&S&&(u=!0)}u===!1&&replaceLinebreaks(t,a,l,s),clearIncompatible(t,t.mapping.slice(s).map(l,1),r,void 0,u===null);let g=t.mapping.slice(s),C=g.map(l,1),v=g.map(l+a.nodeSize,1);return t.step(new ReplaceAroundStep(C,v,C+1,v-1,new Slice(Fragment.from(r.create(c,null,a.marks)),0,0),1,!0)),u===!0&&replaceNewlines(t,a,l,s),!1}})}function replaceNewlines(t,e,n,r){e.forEach((o,s)=>{if(o.isText){let a,l=/\r?\n|\r/g;for(;a=l.exec(o.text);){let c=t.mapping.slice(r).map(n+1+s+a.index);t.replaceWith(c,c+1,e.type.schema.linebreakReplacement.create())}}})}function replaceLinebreaks(t,e,n,r){e.forEach((o,s)=>{if(o.type==o.type.schema.linebreakReplacement){let a=t.mapping.slice(r).map(n+1+s);t.replaceWith(a,a+1,e.type.schema.text(`
`))}})}function canChangeType(t,e,n){let r=t.resolve(e),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}function setNodeMarkup(t,e,n,r,o){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let a=n.create(r,null,o||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,a);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new ReplaceAroundStep(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new Slice(Fragment.from(a),0,0),1,!0))}function canSplit(t,e,n=1,r){let o=t.resolve(e),s=o.depth-n,a=r&&r[r.length-1]||o.parent;if(s<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!a.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(let u=o.depth-1,g=n-2;u>s;u--,g--){let C=o.node(u),v=o.index(u);if(C.type.spec.isolating)return!1;let m=C.content.cutByIndex(v,C.childCount),S=r&&r[g+1];S&&(m=m.replaceChild(0,S.type.create(S.attrs)));let T=r&&r[g]||C;if(!C.canReplace(v+1,C.childCount)||!T.type.validContent(m))return!1}let l=o.indexAfter(s),c=r&&r[0];return o.node(s).canReplaceWith(l,l,c?c.type:o.node(s+1).type)}function split(t,e,n=1,r){let o=t.doc.resolve(e),s=Fragment.empty,a=Fragment.empty;for(let l=o.depth,c=o.depth-n,u=n-1;l>c;l--,u--){s=Fragment.from(o.node(l).copy(s));let g=r&&r[u];a=Fragment.from(g?g.type.create(g.attrs,a):o.node(l).copy(a))}t.step(new ReplaceStep(e,e,new Slice(s.append(a),n,n),!0))}function canJoin(t,e){let n=t.resolve(e),r=n.index();return joinable(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function canAppendWithSubstitutedLinebreaks(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let o=0;o<e.childCount;o++){let s=e.child(o),a=s.type==r?t.type.schema.nodes.text:s.type;if(n=n.matchType(a),!n||!t.type.allowsMarks(s.marks))return!1}return n.validEnd}function joinable(t,e){return!!(t&&e&&!t.isLeaf&&canAppendWithSubstitutedLinebreaks(t,e))}function joinPoint(t,e,n=-1){let r=t.resolve(e);for(let o=r.depth;;o--){let s,a,l=r.index(o);if(o==r.depth?(s=r.nodeBefore,a=r.nodeAfter):n>0?(s=r.node(o+1),l++,a=r.node(o).maybeChild(l)):(s=r.node(o).maybeChild(l-1),a=r.node(o+1)),s&&!s.isTextblock&&joinable(s,a)&&r.node(o).canReplace(l,l+1))return e;if(o==0)break;e=n<0?r.before(o):r.after(o)}}function join(t,e,n){let r=null,{linebreakReplacement:o}=t.doc.type.schema,s=t.doc.resolve(e-n),a=s.node().type;if(o&&a.inlineContent){let g=a.whitespace=="pre",C=!!a.contentMatch.matchType(o);g&&!C?r=!1:!g&&C&&(r=!0)}let l=t.steps.length;if(r===!1){let g=t.doc.resolve(e+n);replaceLinebreaks(t,g.node(),g.before(),l)}a.inlineContent&&clearIncompatible(t,e+n-1,a,s.node().contentMatchAt(s.index()),r==null);let c=t.mapping.slice(l),u=c.map(e-n);if(t.step(new ReplaceStep(u,c.map(e+n,-1),Slice.empty,!0)),r===!0){let g=t.doc.resolve(u);replaceNewlines(t,g.node(),g.before(),t.steps.length)}return t}function insertPoint(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let o=r.depth-1;o>=0;o--){let s=r.index(o);if(r.node(o).canReplaceWith(s,s,n))return r.before(o+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let o=r.depth-1;o>=0;o--){let s=r.indexAfter(o);if(r.node(o).canReplaceWith(s,s,n))return r.after(o+1);if(s<r.node(o).childCount)return null}return null}function dropPoint(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let o=n.content;for(let s=0;s<n.openStart;s++)o=o.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let a=r.depth;a>=0;a--){let l=a==r.depth?0:r.pos<=(r.start(a+1)+r.end(a+1))/2?-1:1,c=r.index(a)+(l>0?1:0),u=r.node(a),g=!1;if(s==1)g=u.canReplace(c,c,o);else{let C=u.contentMatchAt(c).findWrapping(o.firstChild.type);g=C&&u.canReplaceWith(c,c,C[0])}if(g)return l==0?r.pos:l<0?r.before(a+1):r.after(a+1)}return null}function replaceStep(t,e,n=e,r=Slice.empty){if(e==n&&!r.size)return null;let o=t.resolve(e),s=t.resolve(n);return fitsTrivially(o,s,r)?new ReplaceStep(e,n,r):new Fitter(o,s,r).fit()}function fitsTrivially(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class Fitter{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=Fragment.empty;for(let o=0;o<=e.depth;o++){let s=e.node(o);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(o))})}for(let o=e.depth;o>0;o--)this.placed=Fragment.from(e.node(o).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let u=this.findFittable();u?this.placeNodes(u):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,o=this.close(e<0?this.$to:r.doc.resolve(e));if(!o)return null;let s=this.placed,a=r.depth,l=o.depth;for(;a&&l&&s.childCount==1;)s=s.firstChild.content,a--,l--;let c=new Slice(s,a,l);return e>-1?new ReplaceAroundStep(r.pos,e,this.$to.pos,this.$to.end(),c,n):c.size||r.pos!=this.$to.pos?new ReplaceStep(r.pos,o.pos,c):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,o=this.unplaced.openEnd;r<e;r++){let s=n.firstChild;if(n.childCount>1&&(o=0),s.type.spec.isolating&&o<=r){e=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let o,s=null;r?(s=contentAt(this.unplaced.content,r-1).firstChild,o=s.content):o=this.unplaced.content;let a=o.firstChild;for(let l=this.depth;l>=0;l--){let{type:c,match:u}=this.frontier[l],g,C=null;if(n==1&&(a?u.matchType(a.type)||(C=u.fillBefore(Fragment.from(a),!1)):s&&c.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:l,parent:s,inject:C};if(n==2&&a&&(g=u.findWrapping(a.type)))return{sliceDepth:r,frontierDepth:l,parent:s,wrap:g};if(s&&u.matchType(s.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,o=contentAt(e,n);return!o.childCount||o.firstChild.isLeaf?!1:(this.unplaced=new Slice(e,n+1,Math.max(r,o.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,o=contentAt(e,n);if(o.childCount<=1&&n>0){let s=e.size-n<=n+o.size;this.unplaced=new Slice(dropFromFragment(e,n-1,1),n-1,s?n-1:r)}else this.unplaced=new Slice(dropFromFragment(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:o,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let T=0;T<s.length;T++)this.openFrontierNode(s[T]);let a=this.unplaced,l=r?r.content:a.content,c=a.openStart-e,u=0,g=[],{match:C,type:v}=this.frontier[n];if(o){for(let T=0;T<o.childCount;T++)g.push(o.child(T));C=C.matchFragment(o)}let m=l.size+e-(a.content.size-a.openEnd);for(;u<l.childCount;){let T=l.child(u),w=C.matchType(T.type);if(!w)break;u++,(u>1||c==0||T.content.size)&&(C=w,g.push(closeNodeStart(T.mark(v.allowedMarks(T.marks)),u==1?c:0,u==l.childCount?m:-1)))}let S=u==l.childCount;S||(m=-1),this.placed=addToFragment(this.placed,n,Fragment.from(g)),this.frontier[n].match=C,S&&m<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let T=0,w=l;T<m;T++){let N=w.lastChild;this.frontier.push({type:N.type,match:N.contentMatchAt(N.childCount)}),w=N.content}this.unplaced=S?e==0?Slice.empty:new Slice(dropFromFragment(a.content,e-1,1),e-1,m<0?a.openEnd:e-1):new Slice(dropFromFragment(a.content,e,u),a.openStart,a.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!contentAfterFits(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,o=this.$to.after(r);for(;r>1&&o==this.$to.end(--r);)++o;return o}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:o}=this.frontier[n],s=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),a=contentAfterFits(e,n,o,r,s);if(a){for(let l=n-1;l>=0;l--){let{match:c,type:u}=this.frontier[l],g=contentAfterFits(e,l,u,c,!0);if(!g||g.childCount)continue e}return{depth:n,fit:a,move:s?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=addToFragment(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let o=e.node(r),s=o.type.contentMatch.fillBefore(o.content,!0,e.index(r));this.openFrontierNode(o.type,o.attrs,s)}return e}openFrontierNode(e,n=null,r){let o=this.frontier[this.depth];o.match=o.match.matchType(e),this.placed=addToFragment(this.placed,this.depth,Fragment.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(Fragment.empty,!0);n.childCount&&(this.placed=addToFragment(this.placed,this.frontier.length,n))}}function dropFromFragment(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(dropFromFragment(t.firstChild.content,e-1,n)))}function addToFragment(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(addToFragment(t.lastChild.content,e-1,n)))}function contentAt(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function closeNodeStart(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,closeNodeStart(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(Fragment.empty,!0)))),t.copy(r)}function contentAfterFits(t,e,n,r,o){let s=t.node(e),a=o?t.indexAfter(e):t.index(e);if(a==s.childCount&&!n.compatibleContent(s.type))return null;let l=r.fillBefore(s.content,!0,a);return l&&!invalidMarks(n,s.content,a)?l:null}function invalidMarks(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function definesContent(t){return t.spec.defining||t.spec.definingForContent}function replaceRange(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let o=t.doc.resolve(e),s=t.doc.resolve(n);if(fitsTrivially(o,s,r))return t.step(new ReplaceStep(e,n,r));let a=coveredDepths(o,t.doc.resolve(n));a[a.length-1]==0&&a.pop();let l=-(o.depth+1);a.unshift(l);for(let v=o.depth,m=o.pos-1;v>0;v--,m--){let S=o.node(v).type.spec;if(S.defining||S.definingAsContext||S.isolating)break;a.indexOf(v)>-1?l=v:o.before(v)==m&&a.splice(1,0,-v)}let c=a.indexOf(l),u=[],g=r.openStart;for(let v=r.content,m=0;;m++){let S=v.firstChild;if(u.push(S),m==r.openStart)break;v=S.content}for(let v=g-1;v>=0;v--){let m=u[v],S=definesContent(m.type);if(S&&!m.sameMarkup(o.node(Math.abs(l)-1)))g=v;else if(S||!m.type.isTextblock)break}for(let v=r.openStart;v>=0;v--){let m=(v+g+1)%(r.openStart+1),S=u[m];if(S)for(let T=0;T<a.length;T++){let w=a[(T+c)%a.length],N=!0;w<0&&(N=!1,w=-w);let D=o.node(w-1),k=o.index(w-1);if(D.canReplaceWith(k,k,S.type,S.marks))return t.replace(o.before(w),N?s.after(w):n,new Slice(closeFragment(r.content,0,r.openStart,m),m,r.openEnd))}}let C=t.steps.length;for(let v=a.length-1;v>=0&&(t.replace(e,n,r),!(t.steps.length>C));v--){let m=a[v];m<0||(e=o.before(m),n=s.after(m))}}function closeFragment(t,e,n,r,o){if(e<n){let s=t.firstChild;t=t.replaceChild(0,s.copy(closeFragment(s.content,e+1,n,r,s)))}if(e>r){let s=o.contentMatchAt(0),a=s.fillBefore(t).append(t);t=a.append(s.matchFragment(a).fillBefore(Fragment.empty,!0))}return t}function replaceRangeWith(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let o=insertPoint(t.doc,e,r.type);o!=null&&(e=n=o)}t.replaceRange(e,n,new Slice(Fragment.from(r),0,0))}function deleteRange$1(t,e,n){let r=t.doc.resolve(e),o=t.doc.resolve(n),s=coveredDepths(r,o);for(let a=0;a<s.length;a++){let l=s[a],c=a==s.length-1;if(c&&l==0||r.node(l).type.contentMatch.validEnd)return t.delete(r.start(l),o.end(l));if(l>0&&(c||r.node(l-1).canReplace(r.index(l-1),o.indexAfter(l-1))))return t.delete(r.before(l),o.after(l))}for(let a=1;a<=r.depth&&a<=o.depth;a++)if(e-r.start(a)==r.depth-a&&n>r.end(a)&&o.end(a)-n!=o.depth-a&&r.start(a-1)==o.start(a-1)&&r.node(a-1).canReplace(r.index(a-1),o.index(a-1)))return t.delete(r.before(a),n);t.delete(e,n)}function coveredDepths(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let o=r;o>=0;o--){let s=t.start(o);if(s<t.pos-(t.depth-o)||e.end(o)>e.pos+(e.depth-o)||t.node(o).type.spec.isolating||e.node(o).type.spec.isolating)break;(s==e.start(o)||o==t.depth&&o==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&o&&e.start(o-1)==s-1)&&n.push(o)}return n}class AttrStep extends Step{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return StepResult.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let o=n.type.create(r,null,n.marks);return StepResult.fromReplace(e,this.pos,this.pos+1,new Slice(Fragment.from(o),0,n.isLeaf?0:1))}getMap(){return StepMap.empty}invert(e){return new AttrStep(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new AttrStep(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new AttrStep(n.pos,n.attr,n.value)}}Step.jsonID("attr",AttrStep);class DocAttrStep extends Step{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let o in e.attrs)n[o]=e.attrs[o];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return StepResult.ok(r)}getMap(){return StepMap.empty}invert(e){return new DocAttrStep(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new DocAttrStep(n.attr,n.value)}}Step.jsonID("docAttr",DocAttrStep);let TransformError=class extends Error{};TransformError=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};TransformError.prototype=Object.create(Error.prototype);TransformError.prototype.constructor=TransformError;TransformError.prototype.name="TransformError";class Transform{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Mapping}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new TransformError(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=Slice.empty){let o=replaceStep(this.doc,e,n,r);return o&&this.step(o),this}replaceWith(e,n,r){return this.replace(e,n,new Slice(Fragment.from(r),0,0))}delete(e,n){return this.replace(e,n,Slice.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return replaceRange(this,e,n,r),this}replaceRangeWith(e,n,r){return replaceRangeWith(this,e,n,r),this}deleteRange(e,n){return deleteRange$1(this,e,n),this}lift(e,n){return lift$2(this,e,n),this}join(e,n=1){return join(this,e,n),this}wrap(e,n){return wrap(this,e,n),this}setBlockType(e,n=e,r,o=null){return setBlockType$1(this,e,n,r,o),this}setNodeMarkup(e,n,r=null,o){return setNodeMarkup(this,e,n,r,o),this}setNodeAttribute(e,n,r){return this.step(new AttrStep(e,n,r)),this}setDocAttribute(e,n){return this.step(new DocAttrStep(e,n)),this}addNodeMark(e,n){return this.step(new AddNodeMarkStep(e,n)),this}removeNodeMark(e,n){if(!(n instanceof Mark$1)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n=n.isInSet(r.marks),!n)return this}return this.step(new RemoveNodeMarkStep(e,n)),this}split(e,n=1,r){return split(this,e,n,r),this}addMark(e,n,r){return addMark(this,e,n,r),this}removeMark(e,n,r){return removeMark(this,e,n,r),this}clearIncompatible(e,n,r){return clearIncompatible(this,e,n,r),this}}const classesById=Object.create(null);class Selection{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new SelectionRange(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=Slice.empty){let r=n.content.lastChild,o=null;for(let l=0;l<n.openEnd;l++)o=r,r=r.lastChild;let s=e.steps.length,a=this.ranges;for(let l=0;l<a.length;l++){let{$from:c,$to:u}=a[l],g=e.mapping.slice(s);e.replaceRange(g.map(c.pos),g.map(u.pos),l?Slice.empty:n),l==0&&selectionToInsertionEnd$1(e,s,(r?r.isInline:o&&o.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,o=this.ranges;for(let s=0;s<o.length;s++){let{$from:a,$to:l}=o[s],c=e.mapping.slice(r),u=c.map(a.pos),g=c.map(l.pos);s?e.deleteRange(u,g):(e.replaceRangeWith(u,g,n),selectionToInsertionEnd$1(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let o=e.parent.inlineContent?new TextSelection(e):findSelectionIn(e.node(0),e.parent,e.pos,e.index(),n,r);if(o)return o;for(let s=e.depth-1;s>=0;s--){let a=n<0?findSelectionIn(e.node(0),e.node(s),e.before(s+1),e.index(s),n,r):findSelectionIn(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,n,r);if(a)return a}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new AllSelection(e.node(0))}static atStart(e){return findSelectionIn(e,e,0,0,1)||new AllSelection(e)}static atEnd(e){return findSelectionIn(e,e,e.content.size,e.childCount,-1)||new AllSelection(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=classesById[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in classesById)throw new RangeError("Duplicate use of selection JSON ID "+e);return classesById[e]=n,n.prototype.jsonID=e,n}getBookmark(){return TextSelection.between(this.$anchor,this.$head).getBookmark()}}Selection.prototype.visible=!0;class SelectionRange{constructor(e,n){this.$from=e,this.$to=n}}let warnedAboutTextSelection=!1;function checkTextSelection(t){!warnedAboutTextSelection&&!t.parent.inlineContent&&(warnedAboutTextSelection=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class TextSelection extends Selection{constructor(e,n=e){checkTextSelection(e),checkTextSelection(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return Selection.near(r);let o=e.resolve(n.map(this.anchor));return new TextSelection(o.parent.inlineContent?o:r,r)}replace(e,n=Slice.empty){if(super.replace(e,n),n==Slice.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof TextSelection&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new TextBookmark(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new TextSelection(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let o=e.resolve(n);return new this(o,r==n?o:e.resolve(r))}static between(e,n,r){let o=e.pos-n.pos;if((!r||o)&&(r=o>=0?1:-1),!n.parent.inlineContent){let s=Selection.findFrom(n,r,!0)||Selection.findFrom(n,-r,!0);if(s)n=s.$head;else return Selection.near(n,r)}return e.parent.inlineContent||(o==0?e=n:(e=(Selection.findFrom(e,-r,!0)||Selection.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=o<0&&(e=n))),new TextSelection(e,n)}}Selection.jsonID("text",TextSelection);class TextBookmark{constructor(e,n){this.anchor=e,this.head=n}map(e){return new TextBookmark(e.map(this.anchor),e.map(this.head))}resolve(e){return TextSelection.between(e.resolve(this.anchor),e.resolve(this.head))}}class NodeSelection extends Selection{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:o}=n.mapResult(this.anchor),s=e.resolve(o);return r?Selection.near(s):new NodeSelection(s)}content(){return new Slice(Fragment.from(this.node),0,0)}eq(e){return e instanceof NodeSelection&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new NodeBookmark(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new NodeSelection(e.resolve(n.anchor))}static create(e,n){return new NodeSelection(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}NodeSelection.prototype.visible=!1;Selection.jsonID("node",NodeSelection);class NodeBookmark{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new TextBookmark(r,r):new NodeBookmark(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&NodeSelection.isSelectable(r)?new NodeSelection(n):Selection.near(n)}}class AllSelection extends Selection{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=Slice.empty){if(n==Slice.empty){e.delete(0,e.doc.content.size);let r=Selection.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new AllSelection(e)}map(e){return new AllSelection(e)}eq(e){return e instanceof AllSelection}getBookmark(){return AllBookmark}}Selection.jsonID("all",AllSelection);const AllBookmark={map(){return this},resolve(t){return new AllSelection(t)}};function findSelectionIn(t,e,n,r,o,s=!1){if(e.inlineContent)return TextSelection.create(t,n);for(let a=r-(o>0?0:1);o>0?a<e.childCount:a>=0;a+=o){let l=e.child(a);if(l.isAtom){if(!s&&NodeSelection.isSelectable(l))return NodeSelection.create(t,n-(o<0?l.nodeSize:0))}else{let c=findSelectionIn(t,l,n+o,o<0?l.childCount:0,o,s);if(c)return c}n+=l.nodeSize*o}return null}function selectionToInsertionEnd$1(t,e,n){let r=t.steps.length-1;if(r<e)return;let o=t.steps[r];if(!(o instanceof ReplaceStep||o instanceof ReplaceAroundStep))return;let s=t.mapping.maps[r],a;s.forEach((l,c,u,g)=>{a==null&&(a=g)}),t.setSelection(Selection.near(t.doc.resolve(a),n))}const UPDATED_SEL=1,UPDATED_MARKS=2,UPDATED_SCROLL=4;class Transaction extends Transform{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|UPDATED_SEL)&~UPDATED_MARKS,this.storedMarks=null,this}get selectionSet(){return(this.updated&UPDATED_SEL)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=UPDATED_MARKS,this}ensureMarks(e){return Mark$1.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&UPDATED_MARKS)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~UPDATED_MARKS,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Mark$1.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let o=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(o.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!e)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let a=this.doc.resolve(n);s=r==n?a.marks():a.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,o.text(e,s)),this.selection.empty||this.setSelection(Selection.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=UPDATED_SCROLL,this}get scrolledIntoView(){return(this.updated&UPDATED_SCROLL)>0}}function bind(t,e){return!e||!t?t:t.bind(e)}class FieldDesc{constructor(e,n,r){this.name=e,this.init=bind(n.init,r),this.apply=bind(n.apply,r)}}const baseFields=[new FieldDesc("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new FieldDesc("selection",{init(t,e){return t.selection||Selection.atStart(e.doc)},apply(t){return t.selection}}),new FieldDesc("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new FieldDesc("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class Configuration{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=baseFields.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new FieldDesc(r.key,r.spec.state,r))})}}class EditorState{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let o=this.config.plugins[r];if(o.spec.filterTransaction&&!o.spec.filterTransaction.call(o,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),o=null;for(;;){let s=!1;for(let a=0;a<this.config.plugins.length;a++){let l=this.config.plugins[a];if(l.spec.appendTransaction){let c=o?o[a].n:0,u=o?o[a].state:this,g=c<n.length&&l.spec.appendTransaction.call(l,c?n.slice(c):n,u,r);if(g&&r.filterTransaction(g,a)){if(g.setMeta("appendedTransaction",e),!o){o=[];for(let C=0;C<this.config.plugins.length;C++)o.push(C<a?{state:r,n:n.length}:{state:this,n:0})}n.push(g),r=r.applyInner(g),s=!0}o&&(o[a]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new EditorState(this.config),r=this.config.fields;for(let o=0;o<r.length;o++){let s=r[o];n[s.name]=s.apply(e,this[s.name],this,n)}return n}get tr(){return new Transaction(this)}static create(e){let n=new Configuration(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new EditorState(n);for(let o=0;o<n.fields.length;o++)r[n.fields[o].name]=n.fields[o].init(e,r);return r}reconfigure(e){let n=new Configuration(this.schema,e.plugins),r=n.fields,o=new EditorState(n);for(let s=0;s<r.length;s++){let a=r[s].name;o[a]=this.hasOwnProperty(a)?this[a]:r[s].init(e,o)}return o}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let o=e[r],s=o.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(o,this[o.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let o=new Configuration(e.schema,e.plugins),s=new EditorState(o);return o.fields.forEach(a=>{if(a.name=="doc")s.doc=Node$2.fromJSON(e.schema,n.doc);else if(a.name=="selection")s.selection=Selection.fromJSON(s.doc,n.selection);else if(a.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let l in r){let c=r[l],u=c.spec.state;if(c.key==a.name&&u&&u.fromJSON&&Object.prototype.hasOwnProperty.call(n,l)){s[a.name]=u.fromJSON.call(c,e,n[l],s);return}}s[a.name]=a.init(e,s)}}),s}}function bindProps(t,e,n){for(let r in t){let o=t[r];o instanceof Function?o=o.bind(e):r=="handleDOMEvents"&&(o=bindProps(o,e,{})),n[r]=o}return n}class Plugin{constructor(e){this.spec=e,this.props={},e.props&&bindProps(e.props,this,this.props),this.key=e.key?e.key.key:createKey("plugin")}getState(e){return e[this.key]}}const keys=Object.create(null);function createKey(t){return t in keys?t+"$"+ ++keys[t]:(keys[t]=0,t+"$")}class PluginKey{constructor(e="key"){this.key=createKey(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const domIndex=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},parentNode=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let reusedRange=null;const textRange=function(t,e,n){let r=reusedRange||(reusedRange=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},clearReusedRange=function(){reusedRange=null},isEquivalentPosition=function(t,e,n,r){return n&&(scanFor(t,e,n,r,-1)||scanFor(t,e,n,r,1))},atomElements=/^(img|br|input|textarea|hr)$/i;function scanFor(t,e,n,r,o){for(;;){if(t==n&&e==r)return!0;if(e==(o<0?0:nodeSize(t))){let s=t.parentNode;if(!s||s.nodeType!=1||hasBlockDesc(t)||atomElements.test(t.nodeName)||t.contentEditable=="false")return!1;e=domIndex(t)+(o<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(o<0?-1:0)],t.contentEditable=="false")return!1;e=o<0?nodeSize(t):0}else return!1}}function nodeSize(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function textNodeBefore$1(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=nodeSize(t)}else if(t.parentNode&&!hasBlockDesc(t))e=domIndex(t),t=t.parentNode;else return null}}function textNodeAfter$1(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!hasBlockDesc(t))e=domIndex(t)+1,t=t.parentNode;else return null}}function isOnEdge(t,e,n){for(let r=e==0,o=e==nodeSize(t);r||o;){if(t==n)return!0;let s=domIndex(t);if(t=t.parentNode,!t)return!1;r=r&&s==0,o=o&&s==nodeSize(t)}}function hasBlockDesc(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const selectionCollapsed=function(t){return t.focusNode&&isEquivalentPosition(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function keyEvent(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function deepActiveElement(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function caretFromPoint(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(nodeSize(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(nodeSize(r.startContainer),r.startOffset)}}}const nav=typeof navigator<"u"?navigator:null,doc=typeof document<"u"?document:null,agent=nav&&nav.userAgent||"",ie_edge=/Edge\/(\d+)/.exec(agent),ie_upto10=/MSIE \d/.exec(agent),ie_11up=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(agent),ie$1=!!(ie_upto10||ie_11up||ie_edge),ie_version=ie_upto10?document.documentMode:ie_11up?+ie_11up[1]:ie_edge?+ie_edge[1]:0,gecko=!ie$1&&/gecko\/(\d+)/i.test(agent);gecko&&+(/Firefox\/(\d+)/.exec(agent)||[0,0])[1];const _chrome=!ie$1&&/Chrome\/(\d+)/.exec(agent),chrome=!!_chrome,chrome_version=_chrome?+_chrome[1]:0,safari=!ie$1&&!!nav&&/Apple Computer/.test(nav.vendor),ios=safari&&(/Mobile\/\w+/.test(agent)||!!nav&&nav.maxTouchPoints>2),mac$2=ios||(nav?/Mac/.test(nav.platform):!1),windows=nav?/Win/.test(nav.platform):!1,android=/Android \d/.test(agent),webkit=!!doc&&"webkitFontSmoothing"in doc.documentElement.style,webkit_version=webkit?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function windowRect(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function getSide(t,e){return typeof t=="number"?t:t[e]}function clientRect(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function scrollRectIntoView(t,e,n){let r=t.someProp("scrollThreshold")||0,o=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let a=n||t.dom;a;a=parentNode(a)){if(a.nodeType!=1)continue;let l=a,c=l==s.body,u=c?windowRect(s):clientRect(l),g=0,C=0;if(e.top<u.top+getSide(r,"top")?C=-(u.top-e.top+getSide(o,"top")):e.bottom>u.bottom-getSide(r,"bottom")&&(C=e.bottom-e.top>u.bottom-u.top?e.top+getSide(o,"top")-u.top:e.bottom-u.bottom+getSide(o,"bottom")),e.left<u.left+getSide(r,"left")?g=-(u.left-e.left+getSide(o,"left")):e.right>u.right-getSide(r,"right")&&(g=e.right-u.right+getSide(o,"right")),g||C)if(c)s.defaultView.scrollBy(g,C);else{let v=l.scrollLeft,m=l.scrollTop;C&&(l.scrollTop+=C),g&&(l.scrollLeft+=g);let S=l.scrollLeft-v,T=l.scrollTop-m;e={left:e.left-S,top:e.top-T,right:e.right-S,bottom:e.bottom-T}}if(c||/^(fixed|sticky)$/.test(getComputedStyle(a).position))break}}function storeScrollPos(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,o;for(let s=(e.left+e.right)/2,a=n+1;a<Math.min(innerHeight,e.bottom);a+=5){let l=t.root.elementFromPoint(s,a);if(!l||l==t.dom||!t.dom.contains(l))continue;let c=l.getBoundingClientRect();if(c.top>=n-20){r=l,o=c.top;break}}return{refDOM:r,refTop:o,stack:scrollStack(t.dom)}}function scrollStack(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=parentNode(r));return e}function resetScrollPos({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;restoreScrollStack(n,r==0?0:r-e)}function restoreScrollStack(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:o,left:s}=t[n];r.scrollTop!=o+e&&(r.scrollTop=o+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let preventScrollSupported=null;function focusPreventScroll(t){if(t.setActive)return t.setActive();if(preventScrollSupported)return t.focus(preventScrollSupported);let e=scrollStack(t);t.focus(preventScrollSupported==null?{get preventScroll(){return preventScrollSupported={preventScroll:!0},!0}}:void 0),preventScrollSupported||(preventScrollSupported=!1,restoreScrollStack(e,0))}function findOffsetInNode(t,e){let n,r=2e8,o,s=0,a=e.top,l=e.top,c,u;for(let g=t.firstChild,C=0;g;g=g.nextSibling,C++){let v;if(g.nodeType==1)v=g.getClientRects();else if(g.nodeType==3)v=textRange(g).getClientRects();else continue;for(let m=0;m<v.length;m++){let S=v[m];if(S.top<=a&&S.bottom>=l){a=Math.max(S.bottom,a),l=Math.min(S.top,l);let T=S.left>e.left?S.left-e.left:S.right<e.left?e.left-S.right:0;if(T<r){n=g,r=T,o=T&&n.nodeType==3?{left:S.right<e.left?S.right:S.left,top:e.top}:e,g.nodeType==1&&T&&(s=C+(e.left>=(S.left+S.right)/2?1:0));continue}}else S.top>e.top&&!c&&S.left<=e.left&&S.right>=e.left&&(c=g,u={left:Math.max(S.left,Math.min(S.right,e.left)),top:S.top});!n&&(e.left>=S.right&&e.top>=S.top||e.left>=S.left&&e.top>=S.bottom)&&(s=C+1)}}return!n&&c&&(n=c,o=u,r=0),n&&n.nodeType==3?findOffsetInText(n,o):!n||r&&n.nodeType==1?{node:t,offset:s}:findOffsetInNode(n,o)}function findOffsetInText(t,e){let n=t.nodeValue.length,r=document.createRange();for(let o=0;o<n;o++){r.setEnd(t,o+1),r.setStart(t,o);let s=singleRect(r,1);if(s.top!=s.bottom&&inRect(e,s))return{node:t,offset:o+(e.left>=(s.left+s.right)/2?1:0)}}return{node:t,offset:0}}function inRect(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function targetKludge(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function posFromElement(t,e,n){let{node:r,offset:o}=findOffsetInNode(e,n),s=-1;if(r.nodeType==1&&!r.firstChild){let a=r.getBoundingClientRect();s=a.left!=a.right&&n.left>(a.left+a.right)/2?1:-1}return t.docView.posFromDOM(r,o,s)}function posFromCaret(t,e,n,r){let o=-1;for(let s=e,a=!1;s!=t.dom;){let l=t.docView.nearestDesc(s,!0),c;if(!l)return null;if(l.dom.nodeType==1&&(l.node.isBlock&&l.parent||!l.contentDOM)&&((c=l.dom.getBoundingClientRect()).width||c.height)&&(l.node.isBlock&&l.parent&&(!a&&c.left>r.left||c.top>r.top?o=l.posBefore:(!a&&c.right<r.left||c.bottom<r.top)&&(o=l.posAfter),a=!0),!l.contentDOM&&o<0&&!l.node.isText))return(l.node.isBlock?r.top<(c.top+c.bottom)/2:r.left<(c.left+c.right)/2)?l.posBefore:l.posAfter;s=l.dom.parentNode}return o>-1?o:t.docView.posFromDOM(e,n,-1)}function elementFromPoint(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let o=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),s=o;;){let a=t.childNodes[s];if(a.nodeType==1){let l=a.getClientRects();for(let c=0;c<l.length;c++){let u=l[c];if(inRect(e,u))return elementFromPoint(a,e,u)}}if((s=(s+1)%r)==o)break}return t}function posAtCoords(t,e){let n=t.dom.ownerDocument,r,o=0,s=caretFromPoint(n,e.left,e.top);s&&({node:r,offset:o}=s);let a=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),l;if(!a||!t.dom.contains(a.nodeType!=1?a.parentNode:a)){let u=t.dom.getBoundingClientRect();if(!inRect(e,u)||(a=elementFromPoint(t.dom,e,u),!a))return null}if(safari)for(let u=a;r&&u;u=parentNode(u))u.draggable&&(r=void 0);if(a=targetKludge(a,e),r){if(gecko&&r.nodeType==1&&(o=Math.min(o,r.childNodes.length),o<r.childNodes.length)){let g=r.childNodes[o],C;g.nodeName=="IMG"&&(C=g.getBoundingClientRect()).right<=e.left&&C.bottom>e.top&&o++}let u;webkit&&o&&r.nodeType==1&&(u=r.childNodes[o-1]).nodeType==1&&u.contentEditable=="false"&&u.getBoundingClientRect().top>=e.top&&o--,r==t.dom&&o==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?l=t.state.doc.content.size:(o==0||r.nodeType!=1||r.childNodes[o-1].nodeName!="BR")&&(l=posFromCaret(t,r,o,e))}l==null&&(l=posFromElement(t,a,e));let c=t.docView.nearestDesc(a,!0);return{pos:l,inside:c?c.posAtStart-c.border:-1}}function nonZero(t){return t.top<t.bottom||t.left<t.right}function singleRect(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(nonZero(r))return r}return Array.prototype.find.call(n,nonZero)||t.getBoundingClientRect()}const BIDI=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function coordsAtPos(t,e,n){let{node:r,offset:o,atom:s}=t.docView.domFromPos(e,n<0?-1:1),a=webkit||gecko;if(r.nodeType==3)if(a&&(BIDI.test(r.nodeValue)||(n<0?!o:o==r.nodeValue.length))){let c=singleRect(textRange(r,o,o),n);if(gecko&&o&&/\s/.test(r.nodeValue[o-1])&&o<r.nodeValue.length){let u=singleRect(textRange(r,o-1,o-1),-1);if(u.top==c.top){let g=singleRect(textRange(r,o,o+1),-1);if(g.top!=c.top)return flattenV(g,g.left<u.left)}}return c}else{let c=o,u=o,g=n<0?1:-1;return n<0&&!o?(u++,g=-1):n>=0&&o==r.nodeValue.length?(c--,g=1):n<0?c--:u++,flattenV(singleRect(textRange(r,c,u),g),g<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&o&&(n<0||o==nodeSize(r))){let c=r.childNodes[o-1];if(c.nodeType==1)return flattenH(c.getBoundingClientRect(),!1)}if(s==null&&o<nodeSize(r)){let c=r.childNodes[o];if(c.nodeType==1)return flattenH(c.getBoundingClientRect(),!0)}return flattenH(r.getBoundingClientRect(),n>=0)}if(s==null&&o&&(n<0||o==nodeSize(r))){let c=r.childNodes[o-1],u=c.nodeType==3?textRange(c,nodeSize(c)-(a?0:1)):c.nodeType==1&&(c.nodeName!="BR"||!c.nextSibling)?c:null;if(u)return flattenV(singleRect(u,1),!1)}if(s==null&&o<nodeSize(r)){let c=r.childNodes[o];for(;c.pmViewDesc&&c.pmViewDesc.ignoreForCoords;)c=c.nextSibling;let u=c?c.nodeType==3?textRange(c,0,a?0:1):c.nodeType==1?c:null:null;if(u)return flattenV(singleRect(u,-1),!0)}return flattenV(singleRect(r.nodeType==3?textRange(r):r,-n),n>=0)}function flattenV(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function flattenH(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function withFlushedState(t,e,n){let r=t.state,o=t.root.activeElement;r!=e&&t.updateState(e),o!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),o!=t.dom&&o&&o.focus()}}function endOfTextblockVertical(t,e,n){let r=e.selection,o=n=="up"?r.$from:r.$to;return withFlushedState(t,e,()=>{let{node:s}=t.docView.domFromPos(o.pos,n=="up"?-1:1);for(;;){let l=t.docView.nearestDesc(s,!0);if(!l)break;if(l.node.isBlock){s=l.contentDOM||l.dom;break}s=l.dom.parentNode}let a=coordsAtPos(t,o.pos,1);for(let l=s.firstChild;l;l=l.nextSibling){let c;if(l.nodeType==1)c=l.getClientRects();else if(l.nodeType==3)c=textRange(l,0,l.nodeValue.length).getClientRects();else continue;for(let u=0;u<c.length;u++){let g=c[u];if(g.bottom>g.top+1&&(n=="up"?a.top-g.top>(g.bottom-a.top)*2:g.bottom-a.bottom>(a.bottom-g.top)*2))return!1}}return!0})}const maybeRTL=/[\u0590-\u08ac]/;function endOfTextblockHorizontal(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let o=r.parentOffset,s=!o,a=o==r.parent.content.size,l=t.domSelection();return l?!maybeRTL.test(r.parent.textContent)||!l.modify?n=="left"||n=="backward"?s:a:withFlushedState(t,e,()=>{let{focusNode:c,focusOffset:u,anchorNode:g,anchorOffset:C}=t.domSelectionRange(),v=l.caretBidiLevel;l.modify("move",n,"character");let m=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:S,focusOffset:T}=t.domSelectionRange(),w=S&&!m.contains(S.nodeType==1?S:S.parentNode)||c==S&&u==T;try{l.collapse(g,C),c&&(c!=g||u!=C)&&l.extend&&l.extend(c,u)}catch{}return v!=null&&(l.caretBidiLevel=v),w}):r.pos==r.start()||r.pos==r.end()}let cachedState=null,cachedDir=null,cachedResult=!1;function endOfTextblock(t,e,n){return cachedState==e&&cachedDir==n?cachedResult:(cachedState=e,cachedDir=n,cachedResult=n=="up"||n=="down"?endOfTextblockVertical(t,e,n):endOfTextblockHorizontal(t,e,n))}const NOT_DIRTY=0,CHILD_DIRTY=1,CONTENT_DIRTY=2,NODE_DIRTY=3;class ViewDesc{constructor(e,n,r,o){this.parent=e,this.children=n,this.dom=r,this.contentDOM=o,this.dirty=NOT_DIRTY,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let o=this.children[n];if(o==e)return r;r+=o.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,a;if(e==this.contentDOM)s=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((a=s.pmViewDesc)&&a.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(a)+a.size:this.posAtStart}else{let s,a;if(e==this.contentDOM)s=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((a=s.pmViewDesc)&&a.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(a):this.posAtEnd}let o;if(e==this.dom&&this.contentDOM)o=n>domIndex(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))o=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=e;;s=s.parentNode){if(s==this.dom){o=!1;break}if(s.previousSibling)break}if(o==null&&n==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){o=!0;break}if(s.nextSibling)break}}return o??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,o=e;o;o=o.parentNode){let s=this.getDesc(o),a;if(s&&(!n||s.node))if(r&&(a=s.nodeDOM)&&!(a.nodeType==1?a.contains(e.nodeType==1?e:e.parentNode):a==e))r=!1;else return s}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let o=e;o;o=o.parentNode){let s=this.getDesc(o);if(s)return s.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let o=this.children[n],s=r+o.size;if(r==e&&s!=r){for(;!o.border&&o.children.length;)o=o.children[0];return o}if(e<s)return o.descAt(e-r-o.border);r=s}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,o=0;for(let s=0;r<this.children.length;r++){let a=this.children[r],l=s+a.size;if(l>e||a instanceof TrailingHackViewDesc){o=e-s;break}s=l}if(o)return this.children[r].domFromPos(o-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof WidgetViewDesc&&s.side>=0;r--);if(n<=0){let s,a=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,a=!1);return s&&n&&a&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?domIndex(s.dom)+1:0}}else{let s,a=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,a=!1);return s&&a&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?domIndex(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let o=-1,s=-1;for(let a=r,l=0;;l++){let c=this.children[l],u=a+c.size;if(o==-1&&e<=u){let g=a+c.border;if(e>=g&&n<=u-c.border&&c.node&&c.contentDOM&&this.contentDOM.contains(c.contentDOM))return c.parseRange(e,n,g);e=a;for(let C=l;C>0;C--){let v=this.children[C-1];if(v.size&&v.dom.parentNode==this.contentDOM&&!v.emptyChildAt(1)){o=domIndex(v.dom)+1;break}e-=v.size}o==-1&&(o=0)}if(o>-1&&(u>n||l==this.children.length-1)){n=u;for(let g=l+1;g<this.children.length;g++){let C=this.children[g];if(C.size&&C.dom.parentNode==this.contentDOM&&!C.emptyChildAt(-1)){s=domIndex(C.dom);break}n+=C.size}s==-1&&(s=this.contentDOM.childNodes.length);break}a=u}return{node:this.contentDOM,from:e,to:n,fromOffset:o,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,o=!1){let s=Math.min(e,n),a=Math.max(e,n);for(let m=0,S=0;m<this.children.length;m++){let T=this.children[m],w=S+T.size;if(s>S&&a<w)return T.setSelection(e-S-T.border,n-S-T.border,r,o);S=w}let l=this.domFromPos(e,e?-1:1),c=n==e?l:this.domFromPos(n,n?-1:1),u=r.root.getSelection(),g=r.domSelectionRange(),C=!1;if((gecko||safari)&&e==n){let{node:m,offset:S}=l;if(m.nodeType==3){if(C=!!(S&&m.nodeValue[S-1]==`
`),C&&S==m.nodeValue.length)for(let T=m,w;T;T=T.parentNode){if(w=T.nextSibling){w.nodeName=="BR"&&(l=c={node:w.parentNode,offset:domIndex(w)+1});break}let N=T.pmViewDesc;if(N&&N.node&&N.node.isBlock)break}}else{let T=m.childNodes[S-1];C=T&&(T.nodeName=="BR"||T.contentEditable=="false")}}if(gecko&&g.focusNode&&g.focusNode!=c.node&&g.focusNode.nodeType==1){let m=g.focusNode.childNodes[g.focusOffset];m&&m.contentEditable=="false"&&(o=!0)}if(!(o||C&&safari)&&isEquivalentPosition(l.node,l.offset,g.anchorNode,g.anchorOffset)&&isEquivalentPosition(c.node,c.offset,g.focusNode,g.focusOffset))return;let v=!1;if((u.extend||e==n)&&!C){u.collapse(l.node,l.offset);try{e!=n&&u.extend(c.node,c.offset),v=!0}catch{}}if(!v){if(e>n){let S=l;l=c,c=S}let m=document.createRange();m.setEnd(c.node,c.offset),m.setStart(l.node,l.offset),u.removeAllRanges(),u.addRange(m)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,o=0;o<this.children.length;o++){let s=this.children[o],a=r+s.size;if(r==a?e<=a&&n>=r:e<a&&n>r){let l=r+s.border,c=a-s.border;if(e>=l&&n<=c){this.dirty=e==r||n==a?CONTENT_DIRTY:CHILD_DIRTY,e==l&&n==c&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=NODE_DIRTY:s.markDirty(e-l,n-l);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?CONTENT_DIRTY:NODE_DIRTY}r=a}this.dirty=CONTENT_DIRTY}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?CONTENT_DIRTY:CHILD_DIRTY;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class WidgetViewDesc extends ViewDesc{constructor(e,n,r,o){let s,a=n.type.toDOM;if(typeof a=="function"&&(a=a(r,()=>{if(!s)return o;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(a.nodeType!=1){let l=document.createElement("span");l.appendChild(a),a=l}a.contentEditable="false",a.classList.add("ProseMirror-widget")}super(e,[],a,null),this.widget=n,this.widget=n,s=this}matchesWidget(e){return this.dirty==NOT_DIRTY&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class CompositionViewDesc extends ViewDesc{constructor(e,n,r,o){super(e,[],n,null),this.textDOM=r,this.text=o}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class MarkViewDesc extends ViewDesc{constructor(e,n,r,o,s){super(e,[],r,o),this.mark=n,this.spec=s}static create(e,n,r,o){let s=o.nodeViews[n.type.name],a=s&&s(n,o,r);return(!a||!a.dom)&&(a=DOMSerializer.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new MarkViewDesc(e,n,a.dom,a.contentDOM||a.dom,a)}parseRule(){return this.dirty&NODE_DIRTY||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=NODE_DIRTY&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=NOT_DIRTY){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=NOT_DIRTY}}slice(e,n,r){let o=MarkViewDesc.create(this.parent,this.mark,!0,r),s=this.children,a=this.size;n<a&&(s=replaceNodes(s,n,a,r)),e>0&&(s=replaceNodes(s,0,e,r));for(let l=0;l<s.length;l++)s[l].parent=o;return o.children=s,o}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class NodeViewDesc extends ViewDesc{constructor(e,n,r,o,s,a,l,c,u){super(e,[],s,a),this.node=n,this.outerDeco=r,this.innerDeco=o,this.nodeDOM=l}static create(e,n,r,o,s,a){let l=s.nodeViews[n.type.name],c,u=l&&l(n,s,()=>{if(!c)return a;if(c.parent)return c.parent.posBeforeChild(c)},r,o),g=u&&u.dom,C=u&&u.contentDOM;if(n.isText){if(!g)g=document.createTextNode(n.text);else if(g.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else g||({dom:g,contentDOM:C}=DOMSerializer.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!C&&!n.isText&&g.nodeName!="BR"&&(g.hasAttribute("contenteditable")||(g.contentEditable="false"),n.type.spec.draggable&&(g.draggable=!0));let v=g;return g=applyOuterDeco(g,r,n),u?c=new CustomNodeViewDesc(e,n,r,o,g,C||null,v,u,s,a+1):n.isText?new TextViewDesc(e,n,r,o,g,v,s):new NodeViewDesc(e,n,r,o,g,C||null,v,s,a+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>Fragment.empty)}return e}matchesNode(e,n,r){return this.dirty==NOT_DIRTY&&e.eq(this.node)&&sameOuterDeco(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,o=n,s=e.composing?this.localCompositionInfo(e,n):null,a=s&&s.pos>-1?s:null,l=s&&s.pos<0,c=new ViewTreeUpdater(this,a&&a.node,e);iterDeco(this.node,this.innerDeco,(u,g,C)=>{u.spec.marks?c.syncToMarks(u.spec.marks,r,e):u.type.side>=0&&!C&&c.syncToMarks(g==this.node.childCount?Mark$1.none:this.node.child(g).marks,r,e),c.placeWidget(u,e,o)},(u,g,C,v)=>{c.syncToMarks(u.marks,r,e);let m;c.findNodeMatch(u,g,C,v)||l&&e.state.selection.from>o&&e.state.selection.to<o+u.nodeSize&&(m=c.findIndexWithChild(s.node))>-1&&c.updateNodeAt(u,g,C,m,e)||c.updateNextNode(u,g,C,e,v,o)||c.addNode(u,g,C,e,o),o+=u.nodeSize}),c.syncToMarks([],r,e),this.node.isTextblock&&c.addTextblockHacks(),c.destroyRest(),(c.changed||this.dirty==CONTENT_DIRTY)&&(a&&this.protectLocalComposition(e,a),renderDescs(this.contentDOM,this.children,e),ios&&iosHacks(this.dom))}localCompositionInfo(e,n){let{from:r,to:o}=e.state.selection;if(!(e.state.selection instanceof TextSelection)||r<n||o>n+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let a=s.nodeValue,l=findTextInFragment(this.node.content,a,r-n,o-n);return l<0?null:{node:s,pos:l,text:a}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:o}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let a=new CompositionViewDesc(this,s,n,o);e.input.compositionNodes.push(a),this.children=replaceNodes(this.children,r,r+o.length,e,a)}update(e,n,r,o){return this.dirty==NODE_DIRTY||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,o),!0)}updateInner(e,n,r,o){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(o,this.posAtStart),this.dirty=NOT_DIRTY}updateOuterDeco(e){if(sameOuterDeco(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=patchOuterDeco(this.dom,this.nodeDOM,computeOuterDeco(this.outerDeco,this.node,n),computeOuterDeco(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function docViewDesc(t,e,n,r,o){applyOuterDeco(r,e,t);let s=new NodeViewDesc(void 0,t,e,n,r,r,r,o,0);return s.contentDOM&&s.updateChildren(o,0),s}class TextViewDesc extends NodeViewDesc{constructor(e,n,r,o,s,a,l){super(e,n,r,o,s,null,a,l,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,o){return this.dirty==NODE_DIRTY||this.dirty!=NOT_DIRTY&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=NOT_DIRTY||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,o.trackWrites==this.nodeDOM&&(o.trackWrites=null)),this.node=e,this.dirty=NOT_DIRTY,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let o=this.node.cut(e,n),s=document.createTextNode(o.text);return new TextViewDesc(this.parent,o,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=NODE_DIRTY)}get domAtom(){return!1}isText(e){return this.node.text==e}}class TrailingHackViewDesc extends ViewDesc{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==NOT_DIRTY&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class CustomNodeViewDesc extends NodeViewDesc{constructor(e,n,r,o,s,a,l,c,u,g){super(e,n,r,o,s,a,l,u,g),this.spec=c}update(e,n,r,o){if(this.dirty==NODE_DIRTY)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,n,r);return s&&this.updateInner(e,n,r,o),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,o)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,o){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,o)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function renderDescs(t,e,n){let r=t.firstChild,o=!1;for(let s=0;s<e.length;s++){let a=e[s],l=a.dom;if(l.parentNode==t){for(;l!=r;)r=rm(r),o=!0;r=r.nextSibling}else o=!0,t.insertBefore(l,r);if(a instanceof MarkViewDesc){let c=r?r.previousSibling:t.lastChild;renderDescs(a.contentDOM,a.children,n),r=c?c.nextSibling:t.firstChild}}for(;r;)r=rm(r),o=!0;o&&n.trackWrites==t&&(n.trackWrites=null)}const OuterDecoLevel=function(t){t&&(this.nodeName=t)};OuterDecoLevel.prototype=Object.create(null);const noDeco=[new OuterDecoLevel];function computeOuterDeco(t,e,n){if(t.length==0)return noDeco;let r=n?noDeco[0]:new OuterDecoLevel,o=[r];for(let s=0;s<t.length;s++){let a=t[s].type.attrs;if(a){a.nodeName&&o.push(r=new OuterDecoLevel(a.nodeName));for(let l in a){let c=a[l];c!=null&&(n&&o.length==1&&o.push(r=new OuterDecoLevel(e.isInline?"span":"div")),l=="class"?r.class=(r.class?r.class+" ":"")+c:l=="style"?r.style=(r.style?r.style+";":"")+c:l!="nodeName"&&(r[l]=c))}}}return o}function patchOuterDeco(t,e,n,r){if(n==noDeco&&r==noDeco)return e;let o=e;for(let s=0;s<r.length;s++){let a=r[s],l=n[s];if(s){let c;l&&l.nodeName==a.nodeName&&o!=t&&(c=o.parentNode)&&c.nodeName.toLowerCase()==a.nodeName||(c=document.createElement(a.nodeName),c.pmIsDeco=!0,c.appendChild(o),l=noDeco[0]),o=c}patchAttributes(o,l||noDeco[0],a)}return o}function patchAttributes(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],o=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)o.indexOf(r[s])==-1&&t.classList.remove(r[s]);for(let s=0;s<o.length;s++)r.indexOf(o[s])==-1&&t.classList.add(o[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,o;for(;o=r.exec(e.style);)t.style.removeProperty(o[1])}n.style&&(t.style.cssText+=n.style)}}function applyOuterDeco(t,e,n){return patchOuterDeco(t,t,noDeco,computeOuterDeco(e,n,t.nodeType!=1))}function sameOuterDeco(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function rm(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class ViewTreeUpdater{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=preMatch(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let o=0,s=this.stack.length>>1,a=Math.min(s,e.length);for(;o<a&&(o==s-1?this.top:this.stack[o+1<<1]).matchesMark(e[o])&&e[o].type.spec.spanning!==!1;)o++;for(;o<s;)this.destroyRest(),this.top.dirty=NOT_DIRTY,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let l=-1;for(let c=this.index;c<Math.min(this.index+3,this.top.children.length);c++){let u=this.top.children[c];if(u.matchesMark(e[s])&&!this.isLocked(u.dom)){l=c;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let c=MarkViewDesc.create(this.top,e[s],n,r);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,s++}}findNodeMatch(e,n,r,o){let s=-1,a;if(o>=this.preMatch.index&&(a=this.preMatch.matches[o-this.preMatch.index]).parent==this.top&&a.matchesNode(e,n,r))s=this.top.children.indexOf(a,this.index);else for(let l=this.index,c=Math.min(this.top.children.length,l+5);l<c;l++){let u=this.top.children[l];if(u.matchesNode(e,n,r)&&!this.preMatch.matched.has(u)){s=l;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,n,r,o,s){let a=this.top.children[o];return a.dirty==NODE_DIRTY&&a.dom==a.contentDOM&&(a.dirty=CONTENT_DIRTY),a.update(e,n,r,s)?(this.destroyBetween(this.index,o),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let o=this.index;o<this.top.children.length;o++)if(this.top.children[o]==r)return o}return-1}e=n}}updateNextNode(e,n,r,o,s,a){for(let l=this.index;l<this.top.children.length;l++){let c=this.top.children[l];if(c instanceof NodeViewDesc){let u=this.preMatch.matched.get(c);if(u!=null&&u!=s)return!1;let g=c.dom,C,v=this.isLocked(g)&&!(e.isText&&c.node&&c.node.isText&&c.nodeDOM.nodeValue==e.text&&c.dirty!=NODE_DIRTY&&sameOuterDeco(n,c.outerDeco));if(!v&&c.update(e,n,r,o))return this.destroyBetween(this.index,l),c.dom!=g&&(this.changed=!0),this.index++,!0;if(!v&&(C=this.recreateWrapper(c,e,n,r,o,a)))return this.destroyBetween(this.index,l),this.top.children[this.index]=C,C.contentDOM&&(C.dirty=CONTENT_DIRTY,C.updateChildren(o,a+1),C.dirty=NOT_DIRTY),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,o,s,a){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!sameOuterDeco(r,e.outerDeco)||!o.eq(e.innerDeco))return null;let l=NodeViewDesc.create(this.top,n,r,o,s,a);if(l.contentDOM){l.children=e.children,e.children=[];for(let c of l.children)c.parent=l}return e.destroy(),l}addNode(e,n,r,o,s){let a=NodeViewDesc.create(this.top,e,n,r,o,s);a.contentDOM&&a.updateChildren(o,s+1),this.top.children.splice(this.index++,0,a),this.changed=!0}placeWidget(e,n,r){let o=this.index<this.top.children.length?this.top.children[this.index]:null;if(o&&o.matchesWidget(e)&&(e==o.widget||!o.widget.type.toDOM.parentNode))this.index++;else{let s=new WidgetViewDesc(this.top,e,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof MarkViewDesc;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof TextViewDesc)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((safari||chrome)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let o=new TrailingHackViewDesc(this.top,[],r,null);n!=this.top?n.children.push(o):n.children.splice(this.index++,0,o),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function preMatch(t,e){let n=e,r=n.children.length,o=t.childCount,s=new Map,a=[];e:for(;o>0;){let l;for(;;)if(r){let u=n.children[r-1];if(u instanceof MarkViewDesc)n=u,r=u.children.length;else{l=u,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let c=l.node;if(c){if(c!=t.child(o-1))break;--o,s.set(l,o),a.push(l)}}return{index:o,matched:s,matches:a.reverse()}}function compareSide(t,e){return t.type.side-e.type.side}function iterDeco(t,e,n,r){let o=e.locals(t),s=0;if(o.length==0){for(let u=0;u<t.childCount;u++){let g=t.child(u);r(g,o,e.forChild(s,g),u),s+=g.nodeSize}return}let a=0,l=[],c=null;for(let u=0;;){let g,C;for(;a<o.length&&o[a].to==s;){let w=o[a++];w.widget&&(g?(C||(C=[g])).push(w):g=w)}if(g)if(C){C.sort(compareSide);for(let w=0;w<C.length;w++)n(C[w],u,!!c)}else n(g,u,!!c);let v,m;if(c)m=-1,v=c,c=null;else if(u<t.childCount)m=u,v=t.child(u++);else break;for(let w=0;w<l.length;w++)l[w].to<=s&&l.splice(w--,1);for(;a<o.length&&o[a].from<=s&&o[a].to>s;)l.push(o[a++]);let S=s+v.nodeSize;if(v.isText){let w=S;a<o.length&&o[a].from<w&&(w=o[a].from);for(let N=0;N<l.length;N++)l[N].to<w&&(w=l[N].to);w<S&&(c=v.cut(w-s),v=v.cut(0,w-s),S=w,m=-1)}else for(;a<o.length&&o[a].to<S;)a++;let T=v.isInline&&!v.isLeaf?l.filter(w=>!w.inline):l.slice();r(v,T,e.forChild(s,v),m),s=S}}function iosHacks(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function findTextInFragment(t,e,n,r){for(let o=0,s=0;o<t.childCount&&s<=r;){let a=t.child(o++),l=s;if(s+=a.nodeSize,!a.isText)continue;let c=a.text;for(;o<t.childCount;){let u=t.child(o++);if(s+=u.nodeSize,!u.isText)break;c+=u.text}if(s>=n){if(s>=r&&c.slice(r-e.length-l,r-l)==e)return r-e.length;let u=l<r?c.lastIndexOf(e,r-l-1):-1;if(u>=0&&u+e.length+l>=n)return l+u;if(n==r&&c.length>=r+e.length-l&&c.slice(r-l,r-l+e.length)==e)return r}}return-1}function replaceNodes(t,e,n,r,o){let s=[];for(let a=0,l=0;a<t.length;a++){let c=t[a],u=l,g=l+=c.size;u>=n||g<=e?s.push(c):(u<e&&s.push(c.slice(0,e-u,r)),o&&(s.push(o),o=void 0),g>n&&s.push(c.slice(n-u,c.size,r)))}return s}function selectionFromDOM(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let o=t.docView.nearestDesc(n.focusNode),s=o&&o.size==0,a=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(a<0)return null;let l=r.resolve(a),c,u;if(selectionCollapsed(n)){for(c=a;o&&!o.node;)o=o.parent;let C=o.node;if(o&&C.isAtom&&NodeSelection.isSelectable(C)&&o.parent&&!(C.isInline&&isOnEdge(n.focusNode,n.focusOffset,o.dom))){let v=o.posBefore;u=new NodeSelection(a==v?l:r.resolve(v))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let C=a,v=a;for(let m=0;m<n.rangeCount;m++){let S=n.getRangeAt(m);C=Math.min(C,t.docView.posFromDOM(S.startContainer,S.startOffset,1)),v=Math.max(v,t.docView.posFromDOM(S.endContainer,S.endOffset,-1))}if(C<0)return null;[c,a]=v==t.state.selection.anchor?[v,C]:[C,v],l=r.resolve(a)}else c=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(c<0)return null}let g=r.resolve(c);if(!u){let C=e=="pointer"||t.state.selection.head<l.pos&&!s?1:-1;u=selectionBetween(t,g,l,C)}return u}function editorOwnsSelection(t){return t.editable?t.hasFocus():hasSelection(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function selectionToDOM(t,e=!1){let n=t.state.selection;if(syncNodeSelection(t,n),!!editorOwnsSelection(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&chrome){let r=t.domSelectionRange(),o=t.domObserver.currentSelection;if(r.anchorNode&&o.anchorNode&&isEquivalentPosition(r.anchorNode,r.anchorOffset,o.anchorNode,o.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)selectCursorWrapper(t);else{let{anchor:r,head:o}=n,s,a;brokenSelectBetweenUneditable&&!(n instanceof TextSelection)&&(n.$from.parent.inlineContent||(s=temporarilyEditableNear(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(a=temporarilyEditableNear(t,n.to))),t.docView.setSelection(r,o,t,e),brokenSelectBetweenUneditable&&(s&&resetEditable(s),a&&resetEditable(a)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&removeClassOnSelectionChange(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const brokenSelectBetweenUneditable=safari||chrome&&chrome_version<63;function temporarilyEditableNear(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),o=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(safari&&o&&o.contentEditable=="false")return setEditable(o);if((!o||o.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(o)return setEditable(o);if(s)return setEditable(s)}}function setEditable(t){return t.contentEditable="true",safari&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function resetEditable(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function removeClassOnSelectionChange(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,o=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=o)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!editorOwnsSelection(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function selectCursorWrapper(t){let e=t.domSelection(),n=document.createRange();if(!e)return;let r=t.cursorWrapper.dom,o=r.nodeName=="IMG";o?n.setStart(r.parentNode,domIndex(r)+1):n.setStart(r,0),n.collapse(!0),e.removeAllRanges(),e.addRange(n),!o&&!t.state.selection.visible&&ie$1&&ie_version<=11&&(r.disabled=!0,r.disabled=!1)}function syncNodeSelection(t,e){if(e instanceof NodeSelection){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(clearNodeSelection(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else clearNodeSelection(t)}function clearNodeSelection(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function selectionBetween(t,e,n,r){return t.someProp("createSelectionBetween",o=>o(t,e,n))||TextSelection.between(e,n,r)}function hasFocusAndSelection(t){return t.editable&&!t.hasFocus()?!1:hasSelection(t)}function hasSelection(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function anchorInRightPlace(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return isEquivalentPosition(e.node,e.offset,n.anchorNode,n.anchorOffset)}function moveSelectionBlock(t,e){let{$anchor:n,$head:r}=t.selection,o=e>0?n.max(r):n.min(r),s=o.parent.inlineContent?o.depth?t.doc.resolve(e>0?o.after():o.before()):null:o;return s&&Selection.findFrom(s,e)}function apply(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function selectHorizontally(t,e,n){let r=t.state.selection;if(r instanceof TextSelection)if(n.indexOf("s")>-1){let{$head:o}=r,s=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let a=t.state.doc.resolve(o.pos+s.nodeSize*(e<0?-1:1));return apply(t,new TextSelection(r.$anchor,a))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let o=moveSelectionBlock(t.state,e);return o&&o instanceof NodeSelection?apply(t,o):!1}else if(!(mac$2&&n.indexOf("m")>-1)){let o=r.$head,s=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter,a;if(!s||s.isText)return!1;let l=e<0?o.pos-s.nodeSize:o.pos;return s.isAtom||(a=t.docView.descAt(l))&&!a.contentDOM?NodeSelection.isSelectable(s)?apply(t,new NodeSelection(e<0?t.state.doc.resolve(o.pos-s.nodeSize):o)):webkit?apply(t,new TextSelection(t.state.doc.resolve(e<0?l:l+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof NodeSelection&&r.node.isInline)return apply(t,new TextSelection(e>0?r.$to:r.$from));{let o=moveSelectionBlock(t.state,e);return o?apply(t,o):!1}}}function nodeLen(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function isIgnorable(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function skipIgnoredNodes(t,e){return e<0?skipIgnoredNodesBefore(t):skipIgnoredNodesAfter(t)}function skipIgnoredNodesBefore(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let o,s,a=!1;for(gecko&&n.nodeType==1&&r<nodeLen(n)&&isIgnorable(n.childNodes[r],-1)&&(a=!0);;)if(r>0){if(n.nodeType!=1)break;{let l=n.childNodes[r-1];if(isIgnorable(l,-1))o=n,s=--r;else if(l.nodeType==3)n=l,r=n.nodeValue.length;else break}}else{if(isBlockNode(n))break;{let l=n.previousSibling;for(;l&&isIgnorable(l,-1);)o=n.parentNode,s=domIndex(l),l=l.previousSibling;if(l)n=l,r=nodeLen(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}a?setSelFocus(t,n,r):o&&setSelFocus(t,o,s)}function skipIgnoredNodesAfter(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let o=nodeLen(n),s,a;for(;;)if(r<o){if(n.nodeType!=1)break;let l=n.childNodes[r];if(isIgnorable(l,1))s=n,a=++r;else break}else{if(isBlockNode(n))break;{let l=n.nextSibling;for(;l&&isIgnorable(l,1);)s=l.parentNode,a=domIndex(l)+1,l=l.nextSibling;if(l)n=l,r=0,o=nodeLen(n);else{if(n=n.parentNode,n==t.dom)break;r=o=0}}}s&&setSelFocus(t,s,a)}function isBlockNode(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function textNodeAfter(t,e){for(;t&&e==t.childNodes.length&&!hasBlockDesc(t);)e=domIndex(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function textNodeBefore(t,e){for(;t&&!e&&!hasBlockDesc(t);)e=domIndex(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function setSelFocus(t,e,n){if(e.nodeType!=3){let s,a;(a=textNodeAfter(e,n))?(e=a,n=0):(s=textNodeBefore(e,n))&&(e=s,n=s.nodeValue.length)}let r=t.domSelection();if(!r)return;if(selectionCollapsed(r)){let s=document.createRange();s.setEnd(e,n),s.setStart(e,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:o}=t;setTimeout(()=>{t.state==o&&selectionToDOM(t)},50)}function findDirection(t,e){let n=t.state.doc.resolve(e);if(!(chrome||windows)&&n.parent.inlineContent){let o=t.coordsAtPos(e);if(e>n.start()){let s=t.coordsAtPos(e-1),a=(s.top+s.bottom)/2;if(a>o.top&&a<o.bottom&&Math.abs(s.left-o.left)>1)return s.left<o.left?"ltr":"rtl"}if(e<n.end()){let s=t.coordsAtPos(e+1),a=(s.top+s.bottom)/2;if(a>o.top&&a<o.bottom&&Math.abs(s.left-o.left)>1)return s.left>o.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function selectVertically(t,e,n){let r=t.state.selection;if(r instanceof TextSelection&&!r.empty||n.indexOf("s")>-1||mac$2&&n.indexOf("m")>-1)return!1;let{$from:o,$to:s}=r;if(!o.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let a=moveSelectionBlock(t.state,e);if(a&&a instanceof NodeSelection)return apply(t,a)}if(!o.parent.inlineContent){let a=e<0?o:s,l=r instanceof AllSelection?Selection.near(a,e):Selection.findFrom(a,e);return l?apply(t,l):!1}return!1}function stopNativeHorizontalDelete(t,e){if(!(t.state.selection instanceof TextSelection))return!0;let{$head:n,$anchor:r,empty:o}=t.state.selection;if(!n.sameParent(r))return!0;if(!o)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let a=t.state.tr;return e<0?a.delete(n.pos-s.nodeSize,n.pos):a.delete(n.pos,n.pos+s.nodeSize),t.dispatch(a),!0}return!1}function switchEditable(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function safariDownArrowBug(t){if(!safari||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;switchEditable(t,r,"true"),setTimeout(()=>switchEditable(t,r,"false"),20)}return!1}function getMods(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function captureKeyDown(t,e){let n=e.keyCode,r=getMods(e);if(n==8||mac$2&&n==72&&r=="c")return stopNativeHorizontalDelete(t,-1)||skipIgnoredNodes(t,-1);if(n==46&&!e.shiftKey||mac$2&&n==68&&r=="c")return stopNativeHorizontalDelete(t,1)||skipIgnoredNodes(t,1);if(n==13||n==27)return!0;if(n==37||mac$2&&n==66&&r=="c"){let o=n==37?findDirection(t,t.state.selection.from)=="ltr"?-1:1:-1;return selectHorizontally(t,o,r)||skipIgnoredNodes(t,o)}else if(n==39||mac$2&&n==70&&r=="c"){let o=n==39?findDirection(t,t.state.selection.from)=="ltr"?1:-1:1;return selectHorizontally(t,o,r)||skipIgnoredNodes(t,o)}else{if(n==38||mac$2&&n==80&&r=="c")return selectVertically(t,-1,r)||skipIgnoredNodes(t,-1);if(n==40||mac$2&&n==78&&r=="c")return safariDownArrowBug(t)||selectVertically(t,1,r)||skipIgnoredNodes(t,1);if(r==(mac$2?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function serializeForClipboard(t,e){t.someProp("transformCopied",m=>{e=m(e,t)});let n=[],{content:r,openStart:o,openEnd:s}=e;for(;o>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){o--,s--;let m=r.firstChild;n.push(m.type.name,m.attrs!=m.type.defaultAttrs?m.attrs:null),r=m.content}let a=t.someProp("clipboardSerializer")||DOMSerializer.fromSchema(t.state.schema),l=detachedDoc(),c=l.createElement("div");c.appendChild(a.serializeFragment(r,{document:l}));let u=c.firstChild,g,C=0;for(;u&&u.nodeType==1&&(g=wrapMap[u.nodeName.toLowerCase()]);){for(let m=g.length-1;m>=0;m--){let S=l.createElement(g[m]);for(;c.firstChild;)S.appendChild(c.firstChild);c.appendChild(S),C++}u=c.firstChild}u&&u.nodeType==1&&u.setAttribute("data-pm-slice",`${o} ${s}${C?` -${C}`:""} ${JSON.stringify(n)}`);let v=t.someProp("clipboardTextSerializer",m=>m(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:c,text:v,slice:e}}function parseFromClipboard(t,e,n,r,o){let s=o.parent.type.spec.code,a,l;if(!n&&!e)return null;let c=e&&(r||s||!n);if(c){if(t.someProp("transformPastedText",v=>{e=v(e,s||r,t)}),s)return e?new Slice(Fragment.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):Slice.empty;let C=t.someProp("clipboardTextParser",v=>v(e,o,r,t));if(C)l=C;else{let v=o.marks(),{schema:m}=t.state,S=DOMSerializer.fromSchema(m);a=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(T=>{let w=a.appendChild(document.createElement("p"));T&&w.appendChild(S.serializeNode(m.text(T,v)))})}}else t.someProp("transformPastedHTML",C=>{n=C(n,t)}),a=readHTML(n),webkit&&restoreReplacedSpaces(a);let u=a&&a.querySelector("[data-pm-slice]"),g=u&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(u.getAttribute("data-pm-slice")||"");if(g&&g[3])for(let C=+g[3];C>0;C--){let v=a.firstChild;for(;v&&v.nodeType!=1;)v=v.nextSibling;if(!v)break;a=v}if(l||(l=(t.someProp("clipboardParser")||t.someProp("domParser")||DOMParser$1.fromSchema(t.state.schema)).parseSlice(a,{preserveWhitespace:!!(c||g),context:o,ruleFromNode(v){return v.nodeName=="BR"&&!v.nextSibling&&v.parentNode&&!inlineParents.test(v.parentNode.nodeName)?{ignore:!0}:null}})),g)l=addContext(closeSlice(l,+g[1],+g[2]),g[4]);else if(l=Slice.maxOpen(normalizeSiblings(l.content,o),!0),l.openStart||l.openEnd){let C=0,v=0;for(let m=l.content.firstChild;C<l.openStart&&!m.type.spec.isolating;C++,m=m.firstChild);for(let m=l.content.lastChild;v<l.openEnd&&!m.type.spec.isolating;v++,m=m.lastChild);l=closeSlice(l,C,v)}return t.someProp("transformPasted",C=>{l=C(l,t)}),l}const inlineParents=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function normalizeSiblings(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let o=e.node(n).contentMatchAt(e.index(n)),s,a=[];if(t.forEach(l=>{if(!a)return;let c=o.findWrapping(l.type),u;if(!c)return a=null;if(u=a.length&&s.length&&addToSibling(c,s,l,a[a.length-1],0))a[a.length-1]=u;else{a.length&&(a[a.length-1]=closeRight(a[a.length-1],s.length));let g=withWrappers(l,c);a.push(g),o=o.matchType(g.type),s=c}}),a)return Fragment.from(a)}return t}function withWrappers(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,Fragment.from(t));return t}function addToSibling(t,e,n,r,o){if(o<t.length&&o<e.length&&t[o]==e[o]){let s=addToSibling(t,e,n,r.lastChild,o+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(o==t.length-1?n.type:t[o+1]))return r.copy(r.content.append(Fragment.from(withWrappers(n,t,o+1))))}}function closeRight(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,closeRight(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(Fragment.empty,!0);return t.copy(n.append(r))}function closeRange(t,e,n,r,o,s){let a=e<0?t.firstChild:t.lastChild,l=a.content;return t.childCount>1&&(s=0),o<r-1&&(l=closeRange(l,e,n,r,o+1,s)),o>=n&&(l=e<0?a.contentMatchAt(0).fillBefore(l,s<=o).append(l):l.append(a.contentMatchAt(a.childCount).fillBefore(Fragment.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,a.copy(l))}function closeSlice(t,e,n){return e<t.openStart&&(t=new Slice(closeRange(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new Slice(closeRange(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const wrapMap={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let _detachedDoc=null;function detachedDoc(){return _detachedDoc||(_detachedDoc=document.implementation.createHTMLDocument("title"))}let _policy=null;function maybeWrapTrusted(t){let e=window.trustedTypes;return e?(_policy||(_policy=e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),_policy.createHTML(t)):t}function readHTML(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=detachedDoc().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),o;if((o=r&&wrapMap[r[1].toLowerCase()])&&(t=o.map(s=>"<"+s+">").join("")+t+o.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=maybeWrapTrusted(t),o)for(let s=0;s<o.length;s++)n=n.querySelector(o[s])||n;return n}function restoreReplacedSpaces(t){let e=t.querySelectorAll(chrome?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==" "&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function addContext(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:o,openStart:s,openEnd:a}=t;for(let l=r.length-2;l>=0;l-=2){let c=n.nodes[r[l]];if(!c||c.hasRequiredAttrs())break;o=Fragment.from(c.create(r[l+1],o)),s++,a++}return new Slice(o,s,a)}const handlers={},editHandlers={},passiveHandlers={touchstart:!0,touchmove:!0};class InputState{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function initInput(t){for(let e in handlers){let n=handlers[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{eventBelongsToView(t,r)&&!runCustomHandler(t,r)&&(t.editable||!(r.type in editHandlers))&&n(t,r)},passiveHandlers[e]?{passive:!0}:void 0)}safari&&t.dom.addEventListener("input",()=>null),ensureListeners(t)}function setSelectionOrigin(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function destroyInput(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function ensureListeners(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>runCustomHandler(t,r))})}function runCustomHandler(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function eventBelongsToView(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function dispatchEvent(t,e){!runCustomHandler(t,e)&&handlers[e.type]&&(t.editable||!(e.type in editHandlers))&&handlers[e.type](t,e)}editHandlers.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!inOrNearComposition(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(android&&chrome&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),ios&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",o=>o(t,keyEvent(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||captureKeyDown(t,n)?n.preventDefault():setSelectionOrigin(t,"key")};editHandlers.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};editHandlers.keypress=(t,e)=>{let n=e;if(inOrNearComposition(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||mac$2&&n.metaKey)return;if(t.someProp("handleKeyPress",o=>o(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof TextSelection)||!r.$from.sameParent(r.$to)){let o=String.fromCharCode(n.charCode);!/[\r\n]/.test(o)&&!t.someProp("handleTextInput",s=>s(t,r.$from.pos,r.$to.pos,o))&&t.dispatch(t.state.tr.insertText(o).scrollIntoView()),n.preventDefault()}};function eventCoords(t){return{left:t.clientX,top:t.clientY}}function isNear(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function runHandlerOnContext(t,e,n,r,o){if(r==-1)return!1;let s=t.state.doc.resolve(r);for(let a=s.depth+1;a>0;a--)if(t.someProp(e,l=>a>s.depth?l(t,n,s.nodeAfter,s.before(a),o,!0):l(t,n,s.node(a),s.before(a),o,!1)))return!0;return!1}function updateSelection(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);n=="pointer"&&r.setMeta("pointer",!0),t.dispatch(r)}function selectClickedLeaf(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&NodeSelection.isSelectable(r)?(updateSelection(t,new NodeSelection(n),"pointer"),!0):!1}function selectClickedNode(t,e){if(e==-1)return!1;let n=t.state.selection,r,o;n instanceof NodeSelection&&(r=n.node);let s=t.state.doc.resolve(e);for(let a=s.depth+1;a>0;a--){let l=a>s.depth?s.nodeAfter:s.node(a);if(NodeSelection.isSelectable(l)){r&&n.$from.depth>0&&a>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?o=s.before(n.$from.depth):o=s.before(a);break}}return o!=null?(updateSelection(t,NodeSelection.create(t.state.doc,o),"pointer"),!0):!1}function handleSingleClick(t,e,n,r,o){return runHandlerOnContext(t,"handleClickOn",e,n,r)||t.someProp("handleClick",s=>s(t,e,r))||(o?selectClickedNode(t,n):selectClickedLeaf(t,n))}function handleDoubleClick(t,e,n,r){return runHandlerOnContext(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",o=>o(t,e,r))}function handleTripleClick$1(t,e,n,r){return runHandlerOnContext(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",o=>o(t,e,r))||defaultTripleClick(t,n,r)}function defaultTripleClick(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(updateSelection(t,TextSelection.create(r,0,r.content.size),"pointer"),!0):!1;let o=r.resolve(e);for(let s=o.depth+1;s>0;s--){let a=s>o.depth?o.nodeAfter:o.node(s),l=o.before(s);if(a.inlineContent)updateSelection(t,TextSelection.create(r,l+1,l+1+a.content.size),"pointer");else if(NodeSelection.isSelectable(a))updateSelection(t,NodeSelection.create(r,l),"pointer");else continue;return!0}}function forceDOMFlush(t){return endComposition(t)}const selectNodeModifier=mac$2?"metaKey":"ctrlKey";handlers.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=forceDOMFlush(t),o=Date.now(),s="singleClick";o-t.input.lastClick.time<500&&isNear(n,t.input.lastClick)&&!n[selectNodeModifier]&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:o,x:n.clientX,y:n.clientY,type:s};let a=t.posAtCoords(eventCoords(n));a&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new MouseDown(t,a,n,!!r)):(s=="doubleClick"?handleDoubleClick:handleTripleClick$1)(t,a.pos,a.inside,n)?n.preventDefault():setSelectionOrigin(t,"pointer"))};class MouseDown{constructor(e,n,r,o){this.view=e,this.pos=n,this.event=r,this.flushed=o,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[selectNodeModifier],this.allowDefault=r.shiftKey;let s,a;if(n.inside>-1)s=e.state.doc.nodeAt(n.inside),a=n.inside;else{let g=e.state.doc.resolve(n.pos);s=g.parent,a=g.depth?g.before():0}const l=o?null:r.target,c=l?e.docView.nearestDesc(l,!0):null;this.target=c&&c.dom.nodeType==1?c.dom:null;let{selection:u}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||u instanceof NodeSelection&&u.from<=a&&u.to>a)&&(this.mightDrag={node:s,pos:a,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&gecko&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),setSelectionOrigin(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>selectionToDOM(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(eventCoords(e))),this.updateAllowDefault(e),this.allowDefault||!n?setSelectionOrigin(this.view,"pointer"):handleSingleClick(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||safari&&this.mightDrag&&!this.mightDrag.node.isAtom||chrome&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(updateSelection(this.view,Selection.near(this.view.state.doc.resolve(n.pos)),"pointer"),e.preventDefault()):setSelectionOrigin(this.view,"pointer")}move(e){this.updateAllowDefault(e),setSelectionOrigin(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}handlers.touchstart=t=>{t.input.lastTouch=Date.now(),forceDOMFlush(t),setSelectionOrigin(t,"pointer")};handlers.touchmove=t=>{t.input.lastTouch=Date.now(),setSelectionOrigin(t,"pointer")};handlers.contextmenu=t=>forceDOMFlush(t);function inOrNearComposition(t,e){return t.composing?!0:safari&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const timeoutComposition=android?5e3:-1;editHandlers.compositionstart=editHandlers.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof TextSelection&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),endComposition(t,!0),t.markCursor=null;else if(endComposition(t,!e.selection.empty),gecko&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let o=r.focusNode,s=r.focusOffset;o&&o.nodeType==1&&s!=0;){let a=s<0?o.lastChild:o.childNodes[s-1];if(!a)break;if(a.nodeType==3){let l=t.domSelection();l&&l.collapse(a,a.nodeValue.length);break}else o=a,s=-1}}t.input.composing=!0}scheduleComposeEnd(t,timeoutComposition)};editHandlers.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,scheduleComposeEnd(t,20))};function scheduleComposeEnd(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>endComposition(t),e))}function clearComposition(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=timestampFromCustomEvent());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function findCompositionNode(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=textNodeBefore$1(e.focusNode,e.focusOffset),r=textNodeAfter$1(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let o=r.pmViewDesc,s=t.domObserver.lastChangedTextNode;if(n==s||r==s)return s;if(!o||!o.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let a=n.pmViewDesc;if(!(!a||!a.isText(n.nodeValue)))return r}}return n||r}function timestampFromCustomEvent(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function endComposition(t,e=!1){if(!(android&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),clearComposition(t),e||t.docView&&t.docView.dirty){let n=selectionFromDOM(t);return n&&!n.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!t.state.selection.empty?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function captureCopy(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),o=document.createRange();o.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const brokenClipboardAPI=ie$1&&ie_version<15||ios&&webkit_version<604;handlers.copy=editHandlers.cut=(t,e)=>{let n=e,r=t.state.selection,o=n.type=="cut";if(r.empty)return;let s=brokenClipboardAPI?null:n.clipboardData,a=r.content(),{dom:l,text:c}=serializeForClipboard(t,a);s?(n.preventDefault(),s.clearData(),s.setData("text/html",l.innerHTML),s.setData("text/plain",c)):captureCopy(t,l),o&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function sliceSingleNode(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function capturePaste(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let o=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?doPaste(t,r.value,null,o,e):doPaste(t,r.textContent,r.innerHTML,o,e)},50)}function doPaste(t,e,n,r,o){let s=parseFromClipboard(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",c=>c(t,o,s||Slice.empty)))return!0;if(!s)return!1;let a=sliceSingleNode(s),l=a?t.state.tr.replaceSelectionWith(a,r):t.state.tr.replaceSelection(s);return t.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function getText$1(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}editHandlers.paste=(t,e)=>{let n=e;if(t.composing&&!android)return;let r=brokenClipboardAPI?null:n.clipboardData,o=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&doPaste(t,getText$1(r),r.getData("text/html"),o,n)?n.preventDefault():capturePaste(t,n)};class Dragging{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const dragCopyModifier=mac$2?"altKey":"ctrlKey";handlers.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let o=t.state.selection,s=o.empty?null:t.posAtCoords(eventCoords(n)),a;if(!(s&&s.pos>=o.from&&s.pos<=(o instanceof NodeSelection?o.to-1:o.to))){if(r&&r.mightDrag)a=NodeSelection.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let C=t.docView.nearestDesc(n.target,!0);C&&C.node.type.spec.draggable&&C!=t.docView&&(a=NodeSelection.create(t.state.doc,C.posBefore))}}let l=(a||t.state.selection).content(),{dom:c,text:u,slice:g}=serializeForClipboard(t,l);(!n.dataTransfer.files.length||!chrome||chrome_version>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(brokenClipboardAPI?"Text":"text/html",c.innerHTML),n.dataTransfer.effectAllowed="copyMove",brokenClipboardAPI||n.dataTransfer.setData("text/plain",u),t.dragging=new Dragging(g,!n[dragCopyModifier],a)};handlers.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};editHandlers.dragover=editHandlers.dragenter=(t,e)=>e.preventDefault();editHandlers.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let o=t.posAtCoords(eventCoords(n));if(!o)return;let s=t.state.doc.resolve(o.pos),a=r&&r.slice;a?t.someProp("transformPasted",S=>{a=S(a,t)}):a=parseFromClipboard(t,getText$1(n.dataTransfer),brokenClipboardAPI?null:n.dataTransfer.getData("text/html"),!1,s);let l=!!(r&&!n[dragCopyModifier]);if(t.someProp("handleDrop",S=>S(t,n,a||Slice.empty,l))){n.preventDefault();return}if(!a)return;n.preventDefault();let c=a?dropPoint(t.state.doc,s.pos,a):s.pos;c==null&&(c=s.pos);let u=t.state.tr;if(l){let{node:S}=r;S?S.replace(u):u.deleteSelection()}let g=u.mapping.map(c),C=a.openStart==0&&a.openEnd==0&&a.content.childCount==1,v=u.doc;if(C?u.replaceRangeWith(g,g,a.content.firstChild):u.replaceRange(g,g,a),u.doc.eq(v))return;let m=u.doc.resolve(g);if(C&&NodeSelection.isSelectable(a.content.firstChild)&&m.nodeAfter&&m.nodeAfter.sameMarkup(a.content.firstChild))u.setSelection(new NodeSelection(m));else{let S=u.mapping.map(c);u.mapping.maps[u.mapping.maps.length-1].forEach((T,w,N,D)=>S=D),u.setSelection(selectionBetween(t,m,u.doc.resolve(S)))}t.focus(),t.dispatch(u.setMeta("uiEvent","drop"))};handlers.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&selectionToDOM(t)},20))};handlers.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};handlers.beforeinput=(t,e)=>{if(chrome&&android&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",s=>s(t,keyEvent(8,"Backspace")))))return;let{$cursor:o}=t.state.selection;o&&o.pos>0&&t.dispatch(t.state.tr.delete(o.pos-1,o.pos).scrollIntoView())},50)}};for(let t in editHandlers)handlers[t]=editHandlers[t];function compareObjs(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class WidgetType{constructor(e,n){this.toDOM=e,this.spec=n||noSpec,this.side=this.spec.side||0}map(e,n,r,o){let{pos:s,deleted:a}=e.mapResult(n.from+o,this.side<0?-1:1);return a?null:new Decoration(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof WidgetType&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&compareObjs(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class InlineType{constructor(e,n){this.attrs=e,this.spec=n||noSpec}map(e,n,r,o){let s=e.map(n.from+o,this.spec.inclusiveStart?-1:1)-r,a=e.map(n.to+o,this.spec.inclusiveEnd?1:-1)-r;return s>=a?null:new Decoration(s,a,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof InlineType&&compareObjs(this.attrs,e.attrs)&&compareObjs(this.spec,e.spec)}static is(e){return e.type instanceof InlineType}destroy(){}}class NodeType{constructor(e,n){this.attrs=e,this.spec=n||noSpec}map(e,n,r,o){let s=e.mapResult(n.from+o,1);if(s.deleted)return null;let a=e.mapResult(n.to+o,-1);return a.deleted||a.pos<=s.pos?null:new Decoration(s.pos-r,a.pos-r,this)}valid(e,n){let{index:r,offset:o}=e.content.findIndex(n.from),s;return o==n.from&&!(s=e.child(r)).isText&&o+s.nodeSize==n.to}eq(e){return this==e||e instanceof NodeType&&compareObjs(this.attrs,e.attrs)&&compareObjs(this.spec,e.spec)}destroy(){}}class Decoration{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new Decoration(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new Decoration(e,e,new WidgetType(n,r))}static inline(e,n,r,o){return new Decoration(e,n,new InlineType(r,o))}static node(e,n,r,o){return new Decoration(e,n,new NodeType(r,o))}get spec(){return this.type.spec}get inline(){return this.type instanceof InlineType}get widget(){return this.type instanceof WidgetType}}const none=[],noSpec={};class DecorationSet{constructor(e,n){this.local=e.length?e:none,this.children=n.length?n:none}static create(e,n){return n.length?buildTree(n,e,0,noSpec):empty}find(e,n,r){let o=[];return this.findInner(e??0,n??1e9,o,0,r),o}findInner(e,n,r,o,s){for(let a=0;a<this.local.length;a++){let l=this.local[a];l.from<=n&&l.to>=e&&(!s||s(l.spec))&&r.push(l.copy(l.from+o,l.to+o))}for(let a=0;a<this.children.length;a+=3)if(this.children[a]<n&&this.children[a+1]>e){let l=this.children[a]+1;this.children[a+2].findInner(e-l,n-l,r,o+l,s)}}map(e,n,r){return this==empty||e.maps.length==0?this:this.mapInner(e,n,0,0,r||noSpec)}mapInner(e,n,r,o,s){let a;for(let l=0;l<this.local.length;l++){let c=this.local[l].map(e,r,o);c&&c.type.valid(n,c)?(a||(a=[])).push(c):s.onRemove&&s.onRemove(this.local[l].spec)}return this.children.length?mapChildren(this.children,a||[],e,n,r,o,s):a?new DecorationSet(a.sort(byPos),none):empty}add(e,n){return n.length?this==empty?DecorationSet.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let o,s=0;e.forEach((l,c)=>{let u=c+r,g;if(g=takeSpansForNode(n,l,u)){for(o||(o=this.children.slice());s<o.length&&o[s]<c;)s+=3;o[s]==c?o[s+2]=o[s+2].addInner(l,g,u+1):o.splice(s,0,c,c+l.nodeSize,buildTree(g,l,u+1,noSpec)),s+=3}});let a=moveSpans(s?withoutNulls(n):n,-r);for(let l=0;l<a.length;l++)a[l].type.valid(e,a[l])||a.splice(l--,1);return new DecorationSet(a.length?this.local.concat(a).sort(byPos):this.local,o||this.children)}remove(e){return e.length==0||this==empty?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,o=this.local;for(let s=0;s<r.length;s+=3){let a,l=r[s]+n,c=r[s+1]+n;for(let g=0,C;g<e.length;g++)(C=e[g])&&C.from>l&&C.to<c&&(e[g]=null,(a||(a=[])).push(C));if(!a)continue;r==this.children&&(r=this.children.slice());let u=r[s+2].removeInner(a,l+1);u!=empty?r[s+2]=u:(r.splice(s,3),s-=3)}if(o.length){for(let s=0,a;s<e.length;s++)if(a=e[s])for(let l=0;l<o.length;l++)o[l].eq(a,n)&&(o==this.local&&(o=this.local.slice()),o.splice(l--,1))}return r==this.children&&o==this.local?this:o.length||r.length?new DecorationSet(o,r):empty}forChild(e,n){if(this==empty)return this;if(n.isLeaf)return DecorationSet.empty;let r,o;for(let l=0;l<this.children.length;l+=3)if(this.children[l]>=e){this.children[l]==e&&(r=this.children[l+2]);break}let s=e+1,a=s+n.content.size;for(let l=0;l<this.local.length;l++){let c=this.local[l];if(c.from<a&&c.to>s&&c.type instanceof InlineType){let u=Math.max(s,c.from)-s,g=Math.min(a,c.to)-s;u<g&&(o||(o=[])).push(c.copy(u,g))}}if(o){let l=new DecorationSet(o.sort(byPos),none);return r?new DecorationGroup([l,r]):l}return r||empty}eq(e){if(this==e)return!0;if(!(e instanceof DecorationSet)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return removeOverlap(this.localsInner(e))}localsInner(e){if(this==empty)return none;if(e.inlineContent||!this.local.some(InlineType.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof InlineType||n.push(this.local[r]);return n}forEachSet(e){e(this)}}DecorationSet.empty=new DecorationSet([],[]);DecorationSet.removeOverlap=removeOverlap;const empty=DecorationSet.empty;class DecorationGroup{constructor(e){this.members=e}map(e,n){const r=this.members.map(o=>o.map(e,n,noSpec));return DecorationGroup.from(r)}forChild(e,n){if(n.isLeaf)return DecorationSet.empty;let r=[];for(let o=0;o<this.members.length;o++){let s=this.members[o].forChild(e,n);s!=empty&&(s instanceof DecorationGroup?r=r.concat(s.members):r.push(s))}return DecorationGroup.from(r)}eq(e){if(!(e instanceof DecorationGroup)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let o=0;o<this.members.length;o++){let s=this.members[o].localsInner(e);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let a=0;a<s.length;a++)n.push(s[a])}}return n?removeOverlap(r?n:n.sort(byPos)):none}static from(e){switch(e.length){case 0:return empty;case 1:return e[0];default:return new DecorationGroup(e.every(n=>n instanceof DecorationSet)?e:e.reduce((n,r)=>n.concat(r instanceof DecorationSet?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function mapChildren(t,e,n,r,o,s,a){let l=t.slice();for(let u=0,g=s;u<n.maps.length;u++){let C=0;n.maps[u].forEach((v,m,S,T)=>{let w=T-S-(m-v);for(let N=0;N<l.length;N+=3){let D=l[N+1];if(D<0||v>D+g-C)continue;let k=l[N]+g-C;m>=k?l[N+1]=v<=k?-2:-1:v>=g&&w&&(l[N]+=w,l[N+1]+=w)}C+=w}),g=n.maps[u].map(g,-1)}let c=!1;for(let u=0;u<l.length;u+=3)if(l[u+1]<0){if(l[u+1]==-2){c=!0,l[u+1]=-1;continue}let g=n.map(t[u]+s),C=g-o;if(C<0||C>=r.content.size){c=!0;continue}let v=n.map(t[u+1]+s,-1),m=v-o,{index:S,offset:T}=r.content.findIndex(C),w=r.maybeChild(S);if(w&&T==C&&T+w.nodeSize==m){let N=l[u+2].mapInner(n,w,g+1,t[u]+s+1,a);N!=empty?(l[u]=C,l[u+1]=m,l[u+2]=N):(l[u+1]=-2,c=!0)}else c=!0}if(c){let u=mapAndGatherRemainingDecorations(l,t,e,n,o,s,a),g=buildTree(u,r,0,a);e=g.local;for(let C=0;C<l.length;C+=3)l[C+1]<0&&(l.splice(C,3),C-=3);for(let C=0,v=0;C<g.children.length;C+=3){let m=g.children[C];for(;v<l.length&&l[v]<m;)v+=3;l.splice(v,0,g.children[C],g.children[C+1],g.children[C+2])}}return new DecorationSet(e.sort(byPos),l)}function moveSpans(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let o=t[r];n.push(new Decoration(o.from+e,o.to+e,o.type))}return n}function mapAndGatherRemainingDecorations(t,e,n,r,o,s,a){function l(c,u){for(let g=0;g<c.local.length;g++){let C=c.local[g].map(r,o,u);C?n.push(C):a.onRemove&&a.onRemove(c.local[g].spec)}for(let g=0;g<c.children.length;g+=3)l(c.children[g+2],c.children[g]+u+1)}for(let c=0;c<t.length;c+=3)t[c+1]==-1&&l(t[c+2],e[c]+s+1);return n}function takeSpansForNode(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,o=null;for(let s=0,a;s<t.length;s++)(a=t[s])&&a.from>n&&a.to<r&&((o||(o=[])).push(a),t[s]=null);return o}function withoutNulls(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function buildTree(t,e,n,r){let o=[],s=!1;e.forEach((l,c)=>{let u=takeSpansForNode(t,l,c+n);if(u){s=!0;let g=buildTree(u,l,n+c+1,r);g!=empty&&o.push(c,c+l.nodeSize,g)}});let a=moveSpans(s?withoutNulls(t):t,-n).sort(byPos);for(let l=0;l<a.length;l++)a[l].type.valid(e,a[l])||(r.onRemove&&r.onRemove(a[l].spec),a.splice(l--,1));return a.length||o.length?new DecorationSet(a,o):empty}function byPos(t,e){return t.from-e.from||t.to-e.to}function removeOverlap(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let o=n+1;o<e.length;o++){let s=e[o];if(s.from==r.from){s.to!=r.to&&(e==t&&(e=t.slice()),e[o]=s.copy(s.from,r.to),insertAhead(e,o+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,s.from),insertAhead(e,o,r.copy(s.from,r.to)));break}}}return e}function insertAhead(t,e,n){for(;e<t.length&&byPos(n,t[e])>0;)e++;t.splice(e,0,n)}function viewDecorations(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=empty&&e.push(r)}),t.cursorWrapper&&e.push(DecorationSet.create(t.state.doc,[t.cursorWrapper.deco])),DecorationGroup.from(e)}const observeOptions={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},useCharData=ie$1&&ie_version<=11;class SelectionState{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class DOMObserver{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new SelectionState,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let o=0;o<r.length;o++)this.queue.push(r[o]);ie$1&&ie_version<=11&&r.some(o=>o.type=="childList"&&o.removedNodes.length||o.type=="characterData"&&o.oldValue.length>o.target.nodeValue.length)?this.flushSoon():this.flush()}),useCharData&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,observeOptions)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(hasFocusAndSelection(this.view)){if(this.suppressingSelectionUpdates)return selectionToDOM(this.view);if(ie$1&&ie_version<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&isEquivalentPosition(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let s=e.focusNode;s;s=parentNode(s))n.add(s);for(let s=e.anchorNode;s;s=parentNode(s))if(n.has(s)){r=s;break}let o=r&&this.view.docView.nearestDesc(r);if(o&&o.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),o=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&hasFocusAndSelection(e)&&!this.ignoreSelectionChange(r),s=-1,a=-1,l=!1,c=[];if(e.editable)for(let g=0;g<n.length;g++){let C=this.registerMutation(n[g],c);C&&(s=s<0?C.from:Math.min(C.from,s),a=a<0?C.to:Math.max(C.to,a),C.typeOver&&(l=!0))}if(gecko&&c.length){let g=c.filter(C=>C.nodeName=="BR");if(g.length==2){let[C,v]=g;C.parentNode&&C.parentNode.parentNode==v.parentNode?v.remove():C.remove()}else{let{focusNode:C}=this.currentSelection;for(let v of g){let m=v.parentNode;m&&m.nodeName=="LI"&&(!C||blockParent(e,C)!=m)&&v.remove()}}}let u=null;s<0&&o&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&selectionCollapsed(r)&&(u=selectionFromDOM(e))&&u.eq(Selection.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,selectionToDOM(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||o)&&(s>-1&&(e.docView.markDirty(s,a),checkCSS(e)),this.handleDOMChange(s,a,l,c),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||selectionToDOM(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let g=0;g<e.addedNodes.length;g++){let C=e.addedNodes[g];n.push(C),C.nodeType==3&&(this.lastChangedTextNode=C)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let o=e.previousSibling,s=e.nextSibling;if(ie$1&&ie_version<=11&&e.addedNodes.length)for(let g=0;g<e.addedNodes.length;g++){let{previousSibling:C,nextSibling:v}=e.addedNodes[g];(!C||Array.prototype.indexOf.call(e.addedNodes,C)<0)&&(o=C),(!v||Array.prototype.indexOf.call(e.addedNodes,v)<0)&&(s=v)}let a=o&&o.parentNode==e.target?domIndex(o)+1:0,l=r.localPosFromDOM(e.target,a,-1),c=s&&s.parentNode==e.target?domIndex(s):e.target.childNodes.length,u=r.localPosFromDOM(e.target,c,1);return{from:l,to:u}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let cssChecked=new WeakMap,cssCheckWarned=!1;function checkCSS(t){if(!cssChecked.has(t)&&(cssChecked.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=gecko,cssCheckWarned)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),cssCheckWarned=!0}}function rangeToSelectionRange(t,e){let n=e.startContainer,r=e.startOffset,o=e.endContainer,s=e.endOffset,a=t.domAtPos(t.state.selection.anchor);return isEquivalentPosition(a.node,a.offset,o,s)&&([n,r,o,s]=[o,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:o,focusOffset:s}}function safariShadowSelectionRange(t,e){if(e.getComposedRanges){let o=e.getComposedRanges(t.root)[0];if(o)return rangeToSelectionRange(t,o)}let n;function r(o){o.preventDefault(),o.stopImmediatePropagation(),n=o.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?rangeToSelectionRange(t,n):null}function blockParent(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function parseBetween(t,e,n){let{node:r,fromOffset:o,toOffset:s,from:a,to:l}=t.docView.parseRange(e,n),c=t.domSelectionRange(),u,g=c.anchorNode;if(g&&t.dom.contains(g.nodeType==1?g:g.parentNode)&&(u=[{node:g,offset:c.anchorOffset}],selectionCollapsed(c)||u.push({node:c.focusNode,offset:c.focusOffset})),chrome&&t.input.lastKeyCode===8)for(let w=s;w>o;w--){let N=r.childNodes[w-1],D=N.pmViewDesc;if(N.nodeName=="BR"&&!D){s=w;break}if(!D||D.size)break}let C=t.state.doc,v=t.someProp("domParser")||DOMParser$1.fromSchema(t.state.schema),m=C.resolve(a),S=null,T=v.parse(r,{topNode:m.parent,topMatch:m.parent.contentMatchAt(m.index()),topOpen:!0,from:o,to:s,preserveWhitespace:m.parent.type.whitespace=="pre"?"full":!0,findPositions:u,ruleFromNode,context:m});if(u&&u[0].pos!=null){let w=u[0].pos,N=u[1]&&u[1].pos;N==null&&(N=w),S={anchor:w+a,head:N+a}}return{doc:T,sel:S,from:a,to:l}}function ruleFromNode(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(safari&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||safari&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const isInline=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function readDOMChange(t,e,n,r,o){let s=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let K=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,se=selectionFromDOM(t,K);if(se&&!t.state.selection.eq(se)){if(chrome&&android&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",le=>le(t,keyEvent(13,"Enter"))))return;let pe=t.state.tr.setSelection(se);K=="pointer"?pe.setMeta("pointer",!0):K=="key"&&pe.scrollIntoView(),s&&pe.setMeta("composition",s),t.dispatch(pe)}return}let a=t.state.doc.resolve(e),l=a.sharedDepth(n);e=a.before(l+1),n=t.state.doc.resolve(n).after(l+1);let c=t.state.selection,u=parseBetween(t,e,n),g=t.state.doc,C=g.slice(u.from,u.to),v,m;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(v=t.state.selection.to,m="end"):(v=t.state.selection.from,m="start"),t.input.lastKeyCode=null;let S=findDiff(C.content,u.doc.content,u.from,v,m);if(S&&t.input.domChangeCount++,(ios&&t.input.lastIOSEnter>Date.now()-225||android)&&o.some(K=>K.nodeType==1&&!isInline.test(K.nodeName))&&(!S||S.endA>=S.endB)&&t.someProp("handleKeyDown",K=>K(t,keyEvent(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!S)if(r&&c instanceof TextSelection&&!c.empty&&c.$head.sameParent(c.$anchor)&&!t.composing&&!(u.sel&&u.sel.anchor!=u.sel.head))S={start:c.from,endA:c.to,endB:c.to};else{if(u.sel){let K=resolveSelection(t,t.state.doc,u.sel);if(K&&!K.eq(t.state.selection)){let se=t.state.tr.setSelection(K);s&&se.setMeta("composition",s),t.dispatch(se)}}return}t.state.selection.from<t.state.selection.to&&S.start==S.endB&&t.state.selection instanceof TextSelection&&(S.start>t.state.selection.from&&S.start<=t.state.selection.from+2&&t.state.selection.from>=u.from?S.start=t.state.selection.from:S.endA<t.state.selection.to&&S.endA>=t.state.selection.to-2&&t.state.selection.to<=u.to&&(S.endB+=t.state.selection.to-S.endA,S.endA=t.state.selection.to)),ie$1&&ie_version<=11&&S.endB==S.start+1&&S.endA==S.start&&S.start>u.from&&u.doc.textBetween(S.start-u.from-1,S.start-u.from+1)=="  "&&(S.start--,S.endA--,S.endB--);let T=u.doc.resolveNoCache(S.start-u.from),w=u.doc.resolveNoCache(S.endB-u.from),N=g.resolve(S.start),D=T.sameParent(w)&&T.parent.inlineContent&&N.end()>=S.endA,k;if((ios&&t.input.lastIOSEnter>Date.now()-225&&(!D||o.some(K=>K.nodeName=="DIV"||K.nodeName=="P"))||!D&&T.pos<u.doc.content.size&&!T.sameParent(w)&&(k=Selection.findFrom(u.doc.resolve(T.pos+1),1,!0))&&k.head==w.pos)&&t.someProp("handleKeyDown",K=>K(t,keyEvent(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>S.start&&looksLikeBackspace(g,S.start,S.endA,T,w)&&t.someProp("handleKeyDown",K=>K(t,keyEvent(8,"Backspace")))){android&&chrome&&t.domObserver.suppressSelectionUpdates();return}chrome&&S.endB==S.start&&(t.input.lastChromeDelete=Date.now()),android&&!D&&T.start()!=w.start()&&w.parentOffset==0&&T.depth==w.depth&&u.sel&&u.sel.anchor==u.sel.head&&u.sel.head==S.endA&&(S.endB-=2,w=u.doc.resolveNoCache(S.endB-u.from),setTimeout(()=>{t.someProp("handleKeyDown",function(K){return K(t,keyEvent(13,"Enter"))})},20));let L=S.start,H=S.endA,R,B,Y;if(D){if(T.pos==w.pos)ie$1&&ie_version<=11&&T.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>selectionToDOM(t),20)),R=t.state.tr.delete(L,H),B=g.resolve(S.start).marksAcross(g.resolve(S.endA));else if(S.endA==S.endB&&(Y=isMarkChange(T.parent.content.cut(T.parentOffset,w.parentOffset),N.parent.content.cut(N.parentOffset,S.endA-N.start()))))R=t.state.tr,Y.type=="add"?R.addMark(L,H,Y.mark):R.removeMark(L,H,Y.mark);else if(T.parent.child(T.index()).isText&&T.index()==w.index()-(w.textOffset?0:1)){let K=T.parent.textBetween(T.parentOffset,w.parentOffset);if(t.someProp("handleTextInput",se=>se(t,L,H,K)))return;R=t.state.tr.insertText(K,L,H)}}if(R||(R=t.state.tr.replace(L,H,u.doc.slice(S.start-u.from,S.endB-u.from))),u.sel){let K=resolveSelection(t,R.doc,u.sel);K&&!(chrome&&t.composing&&K.empty&&(S.start!=S.endB||t.input.lastChromeDelete<Date.now()-100)&&(K.head==L||K.head==R.mapping.map(H)-1)||ie$1&&K.empty&&K.head==L)&&R.setSelection(K)}B&&R.ensureMarks(B),s&&R.setMeta("composition",s),t.dispatch(R.scrollIntoView())}function resolveSelection(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:selectionBetween(t,e.resolve(n.anchor),e.resolve(n.head))}function isMarkChange(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,o=n,s=r,a,l,c;for(let g=0;g<r.length;g++)o=r[g].removeFromSet(o);for(let g=0;g<n.length;g++)s=n[g].removeFromSet(s);if(o.length==1&&s.length==0)l=o[0],a="add",c=g=>g.mark(l.addToSet(g.marks));else if(o.length==0&&s.length==1)l=s[0],a="remove",c=g=>g.mark(l.removeFromSet(g.marks));else return null;let u=[];for(let g=0;g<e.childCount;g++)u.push(c(e.child(g)));if(Fragment.from(u).eq(t))return{mark:l,type:a}}function looksLikeBackspace(t,e,n,r,o){if(n-e<=o.pos-r.pos||skipClosingAndOpening(r,!0,!1)<o.pos)return!1;let s=t.resolve(e);if(!r.parent.isTextblock){let l=s.nodeAfter;return l!=null&&n==e+l.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let a=t.resolve(skipClosingAndOpening(s,!0,!0));return!a.parent.isTextblock||a.pos>n||skipClosingAndOpening(a,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(a.parent.content)}function skipClosingAndOpening(t,e,n){let r=t.depth,o=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,o++,e=!1;if(n){let s=t.node(r).maybeChild(t.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,o++}return o}function findDiff(t,e,n,r,o){let s=t.findDiffStart(e,n);if(s==null)return null;let{a,b:l}=t.findDiffEnd(e,n+t.size,n+e.size);if(o=="end"){let c=Math.max(0,s-Math.min(a,l));r-=a+c-s}if(a<s&&t.size<e.size){let c=r<=s&&r>=a?s-r:0;s-=c,s&&s<e.size&&isSurrogatePair(e.textBetween(s-1,s+1))&&(s+=c?1:-1),l=s+(l-a),a=s}else if(l<s){let c=r<=s&&r>=l?s-r:0;s-=c,s&&s<t.size&&isSurrogatePair(t.textBetween(s-1,s+1))&&(s+=c?1:-1),a=s+(a-l),l=s}return{start:s,endA:a,endB:l}}function isSurrogatePair(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class EditorView{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new InputState,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(checkStateComponent),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=getEditable(this),updateCursorWrapper(this),this.nodeViews=buildNodeViews(this),this.docView=docViewDesc(this.state.doc,computeDocDeco(this),viewDecorations(this),this.dom,this),this.domObserver=new DOMObserver(this,(r,o,s,a)=>readDOMChange(this,r,o,s,a)),this.domObserver.start(),initInput(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&ensureListeners(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(checkStateComponent),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let o=this.state,s=!1,a=!1;e.storedMarks&&this.composing&&(clearComposition(this),a=!0),this.state=e;let l=o.plugins!=e.plugins||this._props.plugins!=n.plugins;if(l||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let m=buildNodeViews(this);changedNodeViews(m,this.nodeViews)&&(this.nodeViews=m,s=!0)}(l||n.handleDOMEvents!=this._props.handleDOMEvents)&&ensureListeners(this),this.editable=getEditable(this),updateCursorWrapper(this);let c=viewDecorations(this),u=computeDocDeco(this),g=o.plugins!=e.plugins&&!o.doc.eq(e.doc)?"reset":e.scrollToSelection>o.scrollToSelection?"to selection":"preserve",C=s||!this.docView.matchesNode(e.doc,u,c);(C||!e.selection.eq(o.selection))&&(a=!0);let v=g=="preserve"&&a&&this.dom.style.overflowAnchor==null&&storeScrollPos(this);if(a){this.domObserver.stop();let m=C&&(ie$1||chrome)&&!this.composing&&!o.selection.empty&&!e.selection.empty&&selectionContextChanged(o.selection,e.selection);if(C){let S=chrome?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=findCompositionNode(this)),(s||!this.docView.update(e.doc,u,c,this))&&(this.docView.updateOuterDeco(u),this.docView.destroy(),this.docView=docViewDesc(e.doc,u,c,this.dom,this)),S&&!this.trackWrites&&(m=!0)}m||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&anchorInRightPlace(this))?selectionToDOM(this,m):(syncNodeSelection(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(o),!((r=this.dragging)===null||r===void 0)&&r.node&&!o.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,o),g=="reset"?this.dom.scrollTop=0:g=="to selection"?this.scrollToSelection():v&&resetScrollPos(v)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof NodeSelection){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&scrollRectIntoView(this,n.getBoundingClientRect(),e)}else scrollRectIntoView(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,o=-1;if(this.state.doc.nodeAt(r.from)==r.node)o=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(o=s)}this.dragging=new Dragging(e.slice,e.move,o<0?void 0:NodeSelection.create(this.state.doc,o))}someProp(e,n){let r=this._props&&this._props[e],o;if(r!=null&&(o=n?n(r):r))return o;for(let a=0;a<this.directPlugins.length;a++){let l=this.directPlugins[a].props[e];if(l!=null&&(o=n?n(l):l))return o}let s=this.state.plugins;if(s)for(let a=0;a<s.length;a++){let l=s[a].props[e];if(l!=null&&(o=n?n(l):l))return o}}hasFocus(){if(ie$1){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&focusPreventScroll(this.dom),selectionToDOM(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return posAtCoords(this,e)}coordsAtPos(e,n=1){return coordsAtPos(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let o=this.docView.posFromDOM(e,n,r);if(o==null)throw new RangeError("DOM position not inside the editor");return o}endOfTextblock(e,n){return endOfTextblock(this,n||this.state,e)}pasteHTML(e,n){return doPaste(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return doPaste(this,e,null,!0,n||new ClipboardEvent("paste"))}destroy(){this.docView&&(destroyInput(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],viewDecorations(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,clearReusedRange())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return dispatchEvent(this,e)}dispatch(e){let n=this._props.dispatchTransaction;n?n.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?safari&&this.root.nodeType===11&&deepActiveElement(this.dom.ownerDocument)==this.dom&&safariShadowSelectionRange(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function computeDocDeco(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[Decoration.node(0,t.state.doc.content.size,e)]}function updateCursorWrapper(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:Decoration.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function getEditable(t){return!t.someProp("editable",e=>e(t.state)===!1)}function selectionContextChanged(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function buildNodeViews(t){let e=Object.create(null);function n(r){for(let o in r)Object.prototype.hasOwnProperty.call(e,o)||(e[o]=r[o])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function changedNodeViews(t,e){let n=0,r=0;for(let o in t){if(t[o]!=e[o])return!0;n++}for(let o in e)r++;return n!=r}function checkStateComponent(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var base={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shift={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},mac$1=typeof navigator<"u"&&/Mac/.test(navigator.platform),ie=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var i=0;i<10;i++)base[48+i]=base[96+i]=String(i);for(var i=1;i<=24;i++)base[i+111]="F"+i;for(var i=65;i<=90;i++)base[i]=String.fromCharCode(i+32),shift[i]=String.fromCharCode(i);for(var code in base)shift.hasOwnProperty(code)||(shift[code]=base[code]);function keyName(t){var e=mac$1&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||ie&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?shift:base)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const mac=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function normalizeKeyName$1(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,o,s,a;for(let l=0;l<e.length-1;l++){let c=e[l];if(/^(cmd|meta|m)$/i.test(c))a=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))o=!0;else if(/^s(hift)?$/i.test(c))s=!0;else if(/^mod$/i.test(c))mac?a=!0:o=!0;else throw new Error("Unrecognized modifier name: "+c)}return r&&(n="Alt-"+n),o&&(n="Ctrl-"+n),a&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function normalize(t){let e=Object.create(null);for(let n in t)e[normalizeKeyName$1(n)]=t[n];return e}function modifiers(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function keymap(t){return new Plugin({props:{handleKeyDown:keydownHandler(t)}})}function keydownHandler(t){let e=normalize(t);return function(n,r){let o=keyName(r),s,a=e[modifiers(o,r)];if(a&&a(n.state,n.dispatch,n))return!0;if(o.length==1&&o!=" "){if(r.shiftKey){let l=e[modifiers(o,r,!1)];if(l&&l(n.state,n.dispatch,n))return!0}if((r.shiftKey||r.altKey||r.metaKey||o.charCodeAt(0)>127)&&(s=base[r.keyCode])&&s!=o){let l=e[modifiers(s,r)];if(l&&l(n.state,n.dispatch,n))return!0}}return!1}}const deleteSelection$1=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function atBlockStart(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const joinBackward$1=(t,e,n)=>{let r=atBlockStart(t,n);if(!r)return!1;let o=findCutBefore(r);if(!o){let a=r.blockRange(),l=a&&liftTarget(a);return l==null?!1:(e&&e(t.tr.lift(a,l).scrollIntoView()),!0)}let s=o.nodeBefore;if(deleteBarrier(t,o,e,-1))return!0;if(r.parent.content.size==0&&(textblockAt(s,"end")||NodeSelection.isSelectable(s)))for(let a=r.depth;;a--){let l=replaceStep(t.doc,r.before(a),r.after(a),Slice.empty);if(l&&l.slice.size<l.to-l.from){if(e){let c=t.tr.step(l);c.setSelection(textblockAt(s,"end")?Selection.findFrom(c.doc.resolve(c.mapping.map(o.pos,-1)),-1):NodeSelection.create(c.doc,o.pos-s.nodeSize)),e(c.scrollIntoView())}return!0}if(a==1||r.node(a-1).childCount>1)break}return s.isAtom&&o.depth==r.depth-1?(e&&e(t.tr.delete(o.pos-s.nodeSize,o.pos).scrollIntoView()),!0):!1},joinTextblockBackward$1=(t,e,n)=>{let r=atBlockStart(t,n);if(!r)return!1;let o=findCutBefore(r);return o?joinTextblocksAround(t,o,e):!1},joinTextblockForward$1=(t,e,n)=>{let r=atBlockEnd(t,n);if(!r)return!1;let o=findCutAfter(r);return o?joinTextblocksAround(t,o,e):!1};function joinTextblocksAround(t,e,n){let r=e.nodeBefore,o=r,s=e.pos-1;for(;!o.isTextblock;s--){if(o.type.spec.isolating)return!1;let g=o.lastChild;if(!g)return!1;o=g}let a=e.nodeAfter,l=a,c=e.pos+1;for(;!l.isTextblock;c++){if(l.type.spec.isolating)return!1;let g=l.firstChild;if(!g)return!1;l=g}let u=replaceStep(t.doc,s,c,Slice.empty);if(!u||u.from!=s||u instanceof ReplaceStep&&u.slice.size>=c-s)return!1;if(n){let g=t.tr.step(u);g.setSelection(TextSelection.create(g.doc,s)),n(g.scrollIntoView())}return!0}function textblockAt(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const selectNodeBackward$1=(t,e,n)=>{let{$head:r,empty:o}=t.selection,s=r;if(!o)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;s=findCutBefore(r)}let a=s&&s.nodeBefore;return!a||!NodeSelection.isSelectable(a)?!1:(e&&e(t.tr.setSelection(NodeSelection.create(t.doc,s.pos-a.nodeSize)).scrollIntoView()),!0)};function findCutBefore(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function atBlockEnd(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const joinForward$1=(t,e,n)=>{let r=atBlockEnd(t,n);if(!r)return!1;let o=findCutAfter(r);if(!o)return!1;let s=o.nodeAfter;if(deleteBarrier(t,o,e,1))return!0;if(r.parent.content.size==0&&(textblockAt(s,"start")||NodeSelection.isSelectable(s))){let a=replaceStep(t.doc,r.before(),r.after(),Slice.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=t.tr.step(a);l.setSelection(textblockAt(s,"start")?Selection.findFrom(l.doc.resolve(l.mapping.map(o.pos)),1):NodeSelection.create(l.doc,l.mapping.map(o.pos))),e(l.scrollIntoView())}return!0}}return s.isAtom&&o.depth==r.depth-1?(e&&e(t.tr.delete(o.pos,o.pos+s.nodeSize).scrollIntoView()),!0):!1},selectNodeForward$1=(t,e,n)=>{let{$head:r,empty:o}=t.selection,s=r;if(!o)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;s=findCutAfter(r)}let a=s&&s.nodeAfter;return!a||!NodeSelection.isSelectable(a)?!1:(e&&e(t.tr.setSelection(NodeSelection.create(t.doc,s.pos)).scrollIntoView()),!0)};function findCutAfter(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const joinUp$1=(t,e)=>{let n=t.selection,r=n instanceof NodeSelection,o;if(r){if(n.node.isTextblock||!canJoin(t.doc,n.from))return!1;o=n.from}else if(o=joinPoint(t.doc,n.from,-1),o==null)return!1;if(e){let s=t.tr.join(o);r&&s.setSelection(NodeSelection.create(s.doc,o-t.doc.resolve(o).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},joinDown$1=(t,e)=>{let n=t.selection,r;if(n instanceof NodeSelection){if(n.node.isTextblock||!canJoin(t.doc,n.to))return!1;r=n.to}else if(r=joinPoint(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},lift$1=(t,e)=>{let{$from:n,$to:r}=t.selection,o=n.blockRange(r),s=o&&liftTarget(o);return s==null?!1:(e&&e(t.tr.lift(o,s).scrollIntoView()),!0)},newlineInCode$1=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function defaultBlockAt$1(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const exitCode$1=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let o=n.node(-1),s=n.indexAfter(-1),a=defaultBlockAt$1(o.contentMatchAt(s));if(!a||!o.canReplaceWith(s,s,a))return!1;if(e){let l=n.after(),c=t.tr.replaceWith(l,l,a.createAndFill());c.setSelection(Selection.near(c.doc.resolve(l),1)),e(c.scrollIntoView())}return!0},createParagraphNear$1=(t,e)=>{let n=t.selection,{$from:r,$to:o}=n;if(n instanceof AllSelection||r.parent.inlineContent||o.parent.inlineContent)return!1;let s=defaultBlockAt$1(o.parent.contentMatchAt(o.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let a=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,l=t.tr.insert(a,s.createAndFill());l.setSelection(TextSelection.create(l.doc,a+1)),e(l.scrollIntoView())}return!0},liftEmptyBlock$1=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(canSplit(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),o=r&&liftTarget(r);return o==null?!1:(e&&e(t.tr.lift(r,o).scrollIntoView()),!0)},selectParentNode$1=(t,e)=>{let{$from:n,to:r}=t.selection,o,s=n.sharedDepth(r);return s==0?!1:(o=n.before(s),e&&e(t.tr.setSelection(NodeSelection.create(t.doc,o))),!0)};function joinMaybeClear(t,e,n){let r=e.nodeBefore,o=e.nodeAfter,s=e.index();return!r||!o||!r.type.compatibleContent(o.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(o.isTextblock||canJoin(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function deleteBarrier(t,e,n,r){let o=e.nodeBefore,s=e.nodeAfter,a,l,c=o.type.spec.isolating||s.type.spec.isolating;if(!c&&joinMaybeClear(t,e,n))return!0;let u=!c&&e.parent.canReplace(e.index(),e.index()+1);if(u&&(a=(l=o.contentMatchAt(o.childCount)).findWrapping(s.type))&&l.matchType(a[0]||s.type).validEnd){if(n){let m=e.pos+s.nodeSize,S=Fragment.empty;for(let N=a.length-1;N>=0;N--)S=Fragment.from(a[N].create(null,S));S=Fragment.from(o.copy(S));let T=t.tr.step(new ReplaceAroundStep(e.pos-1,m,e.pos,m,new Slice(S,1,0),a.length,!0)),w=T.doc.resolve(m+2*a.length);w.nodeAfter&&w.nodeAfter.type==o.type&&canJoin(T.doc,w.pos)&&T.join(w.pos),n(T.scrollIntoView())}return!0}let g=s.type.spec.isolating||r>0&&c?null:Selection.findFrom(e,1),C=g&&g.$from.blockRange(g.$to),v=C&&liftTarget(C);if(v!=null&&v>=e.depth)return n&&n(t.tr.lift(C,v).scrollIntoView()),!0;if(u&&textblockAt(s,"start",!0)&&textblockAt(o,"end")){let m=o,S=[];for(;S.push(m),!m.isTextblock;)m=m.lastChild;let T=s,w=1;for(;!T.isTextblock;T=T.firstChild)w++;if(m.canReplace(m.childCount,m.childCount,T.content)){if(n){let N=Fragment.empty;for(let k=S.length-1;k>=0;k--)N=Fragment.from(S[k].copy(N));let D=t.tr.step(new ReplaceAroundStep(e.pos-S.length,e.pos+s.nodeSize,e.pos+w,e.pos+s.nodeSize-w,new Slice(N,S.length,0),0,!0));n(D.scrollIntoView())}return!0}}return!1}function selectTextblockSide(t){return function(e,n){let r=e.selection,o=t<0?r.$from:r.$to,s=o.depth;for(;o.node(s).isInline;){if(!s)return!1;s--}return o.node(s).isTextblock?(n&&n(e.tr.setSelection(TextSelection.create(e.doc,t<0?o.start(s):o.end(s)))),!0):!1}}const selectTextblockStart$1=selectTextblockSide(-1),selectTextblockEnd$1=selectTextblockSide(1);function wrapIn$1(t,e=null){return function(n,r){let{$from:o,$to:s}=n.selection,a=o.blockRange(s),l=a&&findWrapping(a,t,e);return l?(r&&r(n.tr.wrap(a,l).scrollIntoView()),!0):!1}}function setBlockType(t,e=null){return function(n,r){let o=!1;for(let s=0;s<n.selection.ranges.length&&!o;s++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[s];n.doc.nodesBetween(a,l,(c,u)=>{if(o)return!1;if(!(!c.isTextblock||c.hasMarkup(t,e)))if(c.type==t)o=!0;else{let g=n.doc.resolve(u),C=g.index();o=g.parent.canReplaceWith(C,C+1,t)}})}if(!o)return!1;if(r){let s=n.tr;for(let a=0;a<n.selection.ranges.length;a++){let{$from:{pos:l},$to:{pos:c}}=n.selection.ranges[a];s.setBlockType(l,c,t,e)}r(s.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function wrapInList$1(t,e=null){return function(n,r){let{$from:o,$to:s}=n.selection,a=o.blockRange(s);if(!a)return!1;let l=r?n.tr:null;return wrapRangeInList(l,a,t,e)?(r&&r(l.scrollIntoView()),!0):!1}}function wrapRangeInList(t,e,n,r=null){let o=!1,s=e,a=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let c=a.resolve(e.start-2);s=new NodeRange(c,c,e.depth),e.endIndex<e.parent.childCount&&(e=new NodeRange(e.$from,a.resolve(e.$to.end(e.depth)),e.depth)),o=!0}let l=findWrapping(s,n,r,e);return l?(t&&doWrapInList(t,e,l,o,n),!0):!1}function doWrapInList(t,e,n,r,o){let s=Fragment.empty;for(let g=n.length-1;g>=0;g--)s=Fragment.from(n[g].type.create(n[g].attrs,s));t.step(new ReplaceAroundStep(e.start-(r?2:0),e.end,e.start,e.end,new Slice(s,0,0),n.length,!0));let a=0;for(let g=0;g<n.length;g++)n[g].type==o&&(a=g+1);let l=n.length-a,c=e.start+n.length-(r?2:0),u=e.parent;for(let g=e.startIndex,C=e.endIndex,v=!0;g<C;g++,v=!1)!v&&canSplit(t.doc,c,l)&&(t.split(c,l),c+=2*l),c+=u.child(g).nodeSize;return t}function liftListItem$1(t){return function(e,n){let{$from:r,$to:o}=e.selection,s=r.blockRange(o,a=>a.childCount>0&&a.firstChild.type==t);return s?n?r.node(s.depth-1).type==t?liftToOuterList(e,n,t,s):liftOutOfList(e,n,s):!0:!1}}function liftToOuterList(t,e,n,r){let o=t.tr,s=r.end,a=r.$to.end(r.depth);s<a&&(o.step(new ReplaceAroundStep(s-1,a,s,a,new Slice(Fragment.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new NodeRange(o.doc.resolve(r.$from.pos),o.doc.resolve(a),r.depth));const l=liftTarget(r);if(l==null)return!1;o.lift(r,l);let c=o.mapping.map(s,-1)-1;return canJoin(o.doc,c)&&o.join(c),e(o.scrollIntoView()),!0}function liftOutOfList(t,e,n){let r=t.tr,o=n.parent;for(let m=n.end,S=n.endIndex-1,T=n.startIndex;S>T;S--)m-=o.child(S).nodeSize,r.delete(m-1,m+1);let s=r.doc.resolve(n.start),a=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let l=n.startIndex==0,c=n.endIndex==o.childCount,u=s.node(-1),g=s.index(-1);if(!u.canReplace(g+(l?0:1),g+1,a.content.append(c?Fragment.empty:Fragment.from(o))))return!1;let C=s.pos,v=C+a.nodeSize;return r.step(new ReplaceAroundStep(C-(l?1:0),v+(c?1:0),C+1,v-1,new Slice((l?Fragment.empty:Fragment.from(o.copy(Fragment.empty))).append(c?Fragment.empty:Fragment.from(o.copy(Fragment.empty))),l?0:1,c?0:1),l?0:1)),e(r.scrollIntoView()),!0}function sinkListItem$1(t){return function(e,n){let{$from:r,$to:o}=e.selection,s=r.blockRange(o,u=>u.childCount>0&&u.firstChild.type==t);if(!s)return!1;let a=s.startIndex;if(a==0)return!1;let l=s.parent,c=l.child(a-1);if(c.type!=t)return!1;if(n){let u=c.lastChild&&c.lastChild.type==l.type,g=Fragment.from(u?t.create():null),C=new Slice(Fragment.from(t.create(null,Fragment.from(l.type.create(null,g)))),u?3:1,0),v=s.start,m=s.end;n(e.tr.step(new ReplaceAroundStep(v-(u?3:1),m,v,m,C,1,!0)).scrollIntoView())}return!0}}function createChainableState(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:o}=n,{storedMarks:s}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return o},get tr(){return r=n.selection,o=n.doc,s=n.storedMarks,n}}}class CommandManager{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:o}=n,{tr:s}=r,a=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([l,c])=>[l,(...g)=>{const C=c(...g)(a);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(s),C}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:o,state:s}=this,{view:a}=o,l=[],c=!!e,u=e||s.tr,g=()=>(!c&&n&&!u.getMeta("preventDispatch")&&!this.hasCustomState&&a.dispatch(u),l.every(v=>v===!0)),C={...Object.fromEntries(Object.entries(r).map(([v,m])=>[v,(...T)=>{const w=this.buildProps(u,n),N=m(...T)(w);return l.push(N),C}])),run:g};return C}createCan(e){const{rawCommands:n,state:r}=this,o=!1,s=e||r.tr,a=this.buildProps(s,o);return{...Object.fromEntries(Object.entries(n).map(([c,u])=>[c,(...g)=>u(...g)({...a,dispatch:void 0})])),chain:()=>this.createChain(s,o)}}buildProps(e,n=!0){const{rawCommands:r,editor:o,state:s}=this,{view:a}=o,l={tr:e,editor:o,view:a,state:createChainableState({state:s,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e,n),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([c,u])=>[c,(...g)=>u(...g)(l)]))}};return l}}class EventEmitter{constructor(){this.callbacks={}}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),this}emit(e,...n){const r=this.callbacks[e];return r&&r.forEach(o=>o.apply(this,n)),this}off(e,n){const r=this.callbacks[e];return r&&(n?this.callbacks[e]=r.filter(o=>o!==n):delete this.callbacks[e]),this}once(e,n){const r=(...o)=>{this.off(e,r),n.apply(this,o)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function getExtensionField(t,e,n){return t.config[e]===void 0&&t.parent?getExtensionField(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?getExtensionField(t.parent,e,n):null}):t.config[e]}function splitExtensions(t){const e=t.filter(o=>o.type==="extension"),n=t.filter(o=>o.type==="node"),r=t.filter(o=>o.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function getAttributesFromExtensions(t){const e=[],{nodeExtensions:n,markExtensions:r}=splitExtensions(t),o=[...n,...r],s={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(a=>{const l={name:a.name,options:a.options,storage:a.storage,extensions:o},c=getExtensionField(a,"addGlobalAttributes",l);if(!c)return;c().forEach(g=>{g.types.forEach(C=>{Object.entries(g.attributes).forEach(([v,m])=>{e.push({type:C,name:v,attribute:{...s,...m}})})})})}),o.forEach(a=>{const l={name:a.name,options:a.options,storage:a.storage},c=getExtensionField(a,"addAttributes",l);if(!c)return;const u=c();Object.entries(u).forEach(([g,C])=>{const v={...s,...C};typeof(v==null?void 0:v.default)=="function"&&(v.default=v.default()),v!=null&&v.isRequired&&(v==null?void 0:v.default)===void 0&&delete v.default,e.push({type:a.name,name:g,attribute:v})})}),e}function getNodeType(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function mergeAttributes(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([o,s])=>{if(!r[o]){r[o]=s;return}if(o==="class"){const l=s?s.split(" "):[],c=r[o]?r[o].split(" "):[],u=l.filter(g=>!c.includes(g));r[o]=[...c,...u].join(" ")}else if(o==="style"){const l=s?s.split(";").map(g=>g.trim()).filter(Boolean):[],c=r[o]?r[o].split(";").map(g=>g.trim()).filter(Boolean):[],u=new Map;c.forEach(g=>{const[C,v]=g.split(":").map(m=>m.trim());u.set(C,v)}),l.forEach(g=>{const[C,v]=g.split(":").map(m=>m.trim());u.set(C,v)}),r[o]=Array.from(u.entries()).map(([g,C])=>`${g}: ${C}`).join("; ")}else r[o]=s}),r},{})}function getRenderedAttributes(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>mergeAttributes(n,r),{})}function isFunction(t){return typeof t=="function"}function callOrReturn(t,e=void 0,...n){return isFunction(t)?e?t.bind(e)(...n):t(...n):t}function isEmptyObject(t={}){return Object.keys(t).length===0&&t.constructor===Object}function fromString(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function injectExtensionAttributesToParseRule(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const o=e.reduce((s,a)=>{const l=a.attribute.parseHTML?a.attribute.parseHTML(n):fromString(n.getAttribute(a.name));return l==null?s:{...s,[a.name]:l}},{});return{...r,...o}}}}function cleanUpSchemaItem(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&isEmptyObject(n)?!1:n!=null))}function getSchemaByResolvedExtensions(t,e){var n;const r=getAttributesFromExtensions(t),{nodeExtensions:o,markExtensions:s}=splitExtensions(t),a=(n=o.find(u=>getExtensionField(u,"topNode")))===null||n===void 0?void 0:n.name,l=Object.fromEntries(o.map(u=>{const g=r.filter(N=>N.type===u.name),C={name:u.name,options:u.options,storage:u.storage,editor:e},v=t.reduce((N,D)=>{const k=getExtensionField(D,"extendNodeSchema",C);return{...N,...k?k(u):{}}},{}),m=cleanUpSchemaItem({...v,content:callOrReturn(getExtensionField(u,"content",C)),marks:callOrReturn(getExtensionField(u,"marks",C)),group:callOrReturn(getExtensionField(u,"group",C)),inline:callOrReturn(getExtensionField(u,"inline",C)),atom:callOrReturn(getExtensionField(u,"atom",C)),selectable:callOrReturn(getExtensionField(u,"selectable",C)),draggable:callOrReturn(getExtensionField(u,"draggable",C)),code:callOrReturn(getExtensionField(u,"code",C)),whitespace:callOrReturn(getExtensionField(u,"whitespace",C)),linebreakReplacement:callOrReturn(getExtensionField(u,"linebreakReplacement",C)),defining:callOrReturn(getExtensionField(u,"defining",C)),isolating:callOrReturn(getExtensionField(u,"isolating",C)),attrs:Object.fromEntries(g.map(N=>{var D;return[N.name,{default:(D=N==null?void 0:N.attribute)===null||D===void 0?void 0:D.default}]}))}),S=callOrReturn(getExtensionField(u,"parseHTML",C));S&&(m.parseDOM=S.map(N=>injectExtensionAttributesToParseRule(N,g)));const T=getExtensionField(u,"renderHTML",C);T&&(m.toDOM=N=>T({node:N,HTMLAttributes:getRenderedAttributes(N,g)}));const w=getExtensionField(u,"renderText",C);return w&&(m.toText=w),[u.name,m]})),c=Object.fromEntries(s.map(u=>{const g=r.filter(w=>w.type===u.name),C={name:u.name,options:u.options,storage:u.storage,editor:e},v=t.reduce((w,N)=>{const D=getExtensionField(N,"extendMarkSchema",C);return{...w,...D?D(u):{}}},{}),m=cleanUpSchemaItem({...v,inclusive:callOrReturn(getExtensionField(u,"inclusive",C)),excludes:callOrReturn(getExtensionField(u,"excludes",C)),group:callOrReturn(getExtensionField(u,"group",C)),spanning:callOrReturn(getExtensionField(u,"spanning",C)),code:callOrReturn(getExtensionField(u,"code",C)),attrs:Object.fromEntries(g.map(w=>{var N;return[w.name,{default:(N=w==null?void 0:w.attribute)===null||N===void 0?void 0:N.default}]}))}),S=callOrReturn(getExtensionField(u,"parseHTML",C));S&&(m.parseDOM=S.map(w=>injectExtensionAttributesToParseRule(w,g)));const T=getExtensionField(u,"renderHTML",C);return T&&(m.toDOM=w=>T({mark:w,HTMLAttributes:getRenderedAttributes(w,g)})),[u.name,m]}));return new Schema({topNode:a,nodes:l,marks:c})}function getSchemaTypeByName(t,e){return e.nodes[t]||e.marks[t]||null}function isExtensionRulesEnabled(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function getHTMLFromFragment(t,e){const n=DOMSerializer.fromSchema(e).serializeFragment(t),o=document.implementation.createHTMLDocument().createElement("div");return o.appendChild(n),o.innerHTML}const getTextContentFromNodes=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(o,s,a,l)=>{var c,u;const g=((u=(c=o.type.spec).toText)===null||u===void 0?void 0:u.call(c,{node:o,pos:s,parent:a,index:l}))||o.textContent||"%leaf%";n+=o.isAtom&&!o.isText?g:g.slice(0,Math.max(0,r-s))}),n};function isRegExp(t){return Object.prototype.toString.call(t)==="[object RegExp]"}class InputRule{constructor(e){this.find=e.find,this.handler=e.handler}}const inputRuleMatcherHandler=(t,e)=>{if(isRegExp(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function run$1$1(t){var e;const{editor:n,from:r,to:o,text:s,rules:a,plugin:l}=t,{view:c}=n;if(c.composing)return!1;const u=c.state.doc.resolve(r);if(u.parent.type.spec.code||!((e=u.nodeBefore||u.nodeAfter)===null||e===void 0)&&e.marks.find(v=>v.type.spec.code))return!1;let g=!1;const C=getTextContentFromNodes(u)+s;return a.forEach(v=>{if(g)return;const m=inputRuleMatcherHandler(C,v.find);if(!m)return;const S=c.state.tr,T=createChainableState({state:c.state,transaction:S}),w={from:r-(m[0].length-s.length),to:o},{commands:N,chain:D,can:k}=new CommandManager({editor:n,state:T});v.handler({state:T,range:w,match:m,commands:N,chain:D,can:k})===null||!S.steps.length||(S.setMeta(l,{transform:S,from:r,to:o,text:s}),c.dispatch(S),g=!0)}),g}function inputRulesPlugin(t){const{editor:e,rules:n}=t,r=new Plugin({state:{init(){return null},apply(o,s,a){const l=o.getMeta(r);if(l)return l;const c=o.getMeta("applyInputRules");return!!c&&setTimeout(()=>{let{text:g}=c;typeof g=="string"?g=g:g=getHTMLFromFragment(Fragment.from(g),a.schema);const{from:C}=c,v=C+g.length;run$1$1({editor:e,from:C,to:v,text:g,rules:n,plugin:r})}),o.selectionSet||o.docChanged?null:s}},props:{handleTextInput(o,s,a,l){return run$1$1({editor:e,from:s,to:a,text:l,rules:n,plugin:r})},handleDOMEvents:{compositionend:o=>(setTimeout(()=>{const{$cursor:s}=o.state.selection;s&&run$1$1({editor:e,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(o,s){if(s.key!=="Enter")return!1;const{$cursor:a}=o.state.selection;return a?run$1$1({editor:e,from:a.pos,to:a.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function getType(t){return Object.prototype.toString.call(t).slice(8,-1)}function isPlainObject(t){return getType(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function mergeDeep(t,e){const n={...t};return isPlainObject(t)&&isPlainObject(e)&&Object.keys(e).forEach(r=>{isPlainObject(e[r])&&isPlainObject(t[r])?n[r]=mergeDeep(t[r],e[r]):n[r]=e[r]}),n}class Mark{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=callOrReturn(getExtensionField(this,"addOptions",{name:this.name}))),this.storage=callOrReturn(getExtensionField(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Mark(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>mergeDeep(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new Mark(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=callOrReturn(getExtensionField(n,"addOptions",{name:n.name})),n.storage=callOrReturn(getExtensionField(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,o=e.state.selection.$from;if(o.pos===o.end()){const a=o.marks();if(!!!a.find(u=>(u==null?void 0:u.type.name)===n.name))return!1;const c=a.find(u=>(u==null?void 0:u.type.name)===n.name);return c&&r.removeStoredMark(c),r.insertText(" ",o.pos),e.view.dispatch(r),!0}return!1}}function isNumber(t){return typeof t=="number"}class PasteRule{constructor(e){this.find=e.find,this.handler=e.handler}}const pasteRuleMatcherHandler=(t,e,n)=>{if(isRegExp(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(o=>{const s=[o.text];return s.index=o.index,s.input=t,s.data=o.data,o.replaceWith&&(o.text.includes(o.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(o.replaceWith)),s}):[]};function run$2(t){const{editor:e,state:n,from:r,to:o,rule:s,pasteEvent:a,dropEvent:l}=t,{commands:c,chain:u,can:g}=new CommandManager({editor:e,state:n}),C=[];return n.doc.nodesBetween(r,o,(m,S)=>{if(!m.isTextblock||m.type.spec.code)return;const T=Math.max(r,S),w=Math.min(o,S+m.content.size),N=m.textBetween(T-S,w-S,void 0,"￼");pasteRuleMatcherHandler(N,s.find,a).forEach(k=>{if(k.index===void 0)return;const L=T+k.index+1,H=L+k[0].length,R={from:n.tr.mapping.map(L),to:n.tr.mapping.map(H)},B=s.handler({state:n,range:R,match:k,commands:c,chain:u,can:g,pasteEvent:a,dropEvent:l});C.push(B)})}),C.every(m=>m!==null)}let tiptapDragFromOtherEditor=null;const createClipboardPasteEvent=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)===null||e===void 0||e.setData("text/html",t),n};function pasteRulesPlugin(t){const{editor:e,rules:n}=t;let r=null,o=!1,s=!1,a=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,l;try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}const c=({state:g,from:C,to:v,rule:m,pasteEvt:S})=>{const T=g.tr,w=createChainableState({state:g,transaction:T});if(!(!run$2({editor:e,state:w,from:Math.max(C-1,0),to:v.b-1,rule:m,pasteEvent:S,dropEvent:l})||!T.steps.length)){try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}return a=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,T}};return n.map(g=>new Plugin({view(C){const v=S=>{var T;r=!((T=C.dom.parentElement)===null||T===void 0)&&T.contains(S.target)?C.dom.parentElement:null,r&&(tiptapDragFromOtherEditor=e)},m=()=>{tiptapDragFromOtherEditor&&(tiptapDragFromOtherEditor=null)};return window.addEventListener("dragstart",v),window.addEventListener("dragend",m),{destroy(){window.removeEventListener("dragstart",v),window.removeEventListener("dragend",m)}}},props:{handleDOMEvents:{drop:(C,v)=>{if(s=r===C.dom.parentElement,l=v,!s){const m=tiptapDragFromOtherEditor;m&&setTimeout(()=>{const S=m.state.selection;S&&m.commands.deleteRange({from:S.from,to:S.to})},10)}return!1},paste:(C,v)=>{var m;const S=(m=v.clipboardData)===null||m===void 0?void 0:m.getData("text/html");return a=v,o=!!(S!=null&&S.includes("data-pm-slice")),!1}}},appendTransaction:(C,v,m)=>{const S=C[0],T=S.getMeta("uiEvent")==="paste"&&!o,w=S.getMeta("uiEvent")==="drop"&&!s,N=S.getMeta("applyPasteRules"),D=!!N;if(!T&&!w&&!D)return;if(D){let{text:H}=N;typeof H=="string"?H=H:H=getHTMLFromFragment(Fragment.from(H),m.schema);const{from:R}=N,B=R+H.length,Y=createClipboardPasteEvent(H);return c({rule:g,state:m,from:R,to:{b:B},pasteEvt:Y})}const k=v.doc.content.findDiffStart(m.doc.content),L=v.doc.content.findDiffEnd(m.doc.content);if(!(!isNumber(k)||!L||k===L.b))return c({rule:g,state:m,from:k,to:L,pasteEvt:a})}}))}function findDuplicates(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}class ExtensionManager{constructor(e,n){this.splittableMarks=[],this.editor=n,this.extensions=ExtensionManager.resolve(e),this.schema=getSchemaByResolvedExtensions(this.extensions,n),this.setupExtensions()}static resolve(e){const n=ExtensionManager.sort(ExtensionManager.flatten(e)),r=findDuplicates(n.map(o=>o.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(o=>`'${o}'`).join(", ")}]. This can lead to issues.`),n}static flatten(e){return e.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},o=getExtensionField(n,"addExtensions",r);return o?[n,...this.flatten(o())]:n}).flat(10)}static sort(e){return e.sort((r,o)=>{const s=getExtensionField(r,"priority")||100,a=getExtensionField(o,"priority")||100;return s>a?-1:s<a?1:0})}get commands(){return this.extensions.reduce((e,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:getSchemaTypeByName(n.name,this.schema)},o=getExtensionField(n,"addCommands",r);return o?{...e,...o()}:e},{})}get plugins(){const{editor:e}=this,n=ExtensionManager.sort([...this.extensions].reverse()),r=[],o=[],s=n.map(a=>{const l={name:a.name,options:a.options,storage:a.storage,editor:e,type:getSchemaTypeByName(a.name,this.schema)},c=[],u=getExtensionField(a,"addKeyboardShortcuts",l);let g={};if(a.type==="mark"&&getExtensionField(a,"exitable",l)&&(g.ArrowRight=()=>Mark.handleExit({editor:e,mark:a})),u){const T=Object.fromEntries(Object.entries(u()).map(([w,N])=>[w,()=>N({editor:e})]));g={...g,...T}}const C=keymap(g);c.push(C);const v=getExtensionField(a,"addInputRules",l);isExtensionRulesEnabled(a,e.options.enableInputRules)&&v&&r.push(...v());const m=getExtensionField(a,"addPasteRules",l);isExtensionRulesEnabled(a,e.options.enablePasteRules)&&m&&o.push(...m());const S=getExtensionField(a,"addProseMirrorPlugins",l);if(S){const T=S();c.push(...T)}return c}).flat();return[inputRulesPlugin({editor:e,rules:r}),...pasteRulesPlugin({editor:e,rules:o}),...s]}get attributes(){return getAttributesFromExtensions(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:n}=splitExtensions(this.extensions);return Object.fromEntries(n.filter(r=>!!getExtensionField(r,"addNodeView")).map(r=>{const o=this.attributes.filter(c=>c.type===r.name),s={name:r.name,options:r.options,storage:r.storage,editor:e,type:getNodeType(r.name,this.schema)},a=getExtensionField(r,"addNodeView",s);if(!a)return[];const l=(c,u,g,C,v)=>{const m=getRenderedAttributes(c,o);return a()({node:c,view:u,getPos:g,decorations:C,innerDecorations:v,editor:e,extension:r,HTMLAttributes:m})};return[r.name,l]}))}setupExtensions(){this.extensions.forEach(e=>{var n;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:getSchemaTypeByName(e.name,this.schema)};e.type==="mark"&&(!((n=callOrReturn(getExtensionField(e,"keepOnSplit",r)))!==null&&n!==void 0)||n)&&this.splittableMarks.push(e.name);const o=getExtensionField(e,"onBeforeCreate",r),s=getExtensionField(e,"onCreate",r),a=getExtensionField(e,"onUpdate",r),l=getExtensionField(e,"onSelectionUpdate",r),c=getExtensionField(e,"onTransaction",r),u=getExtensionField(e,"onFocus",r),g=getExtensionField(e,"onBlur",r),C=getExtensionField(e,"onDestroy",r);o&&this.editor.on("beforeCreate",o),s&&this.editor.on("create",s),a&&this.editor.on("update",a),l&&this.editor.on("selectionUpdate",l),c&&this.editor.on("transaction",c),u&&this.editor.on("focus",u),g&&this.editor.on("blur",g),C&&this.editor.on("destroy",C)})}}class Extension{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=callOrReturn(getExtensionField(this,"addOptions",{name:this.name}))),this.storage=callOrReturn(getExtensionField(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Extension(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>mergeDeep(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new Extension({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=callOrReturn(getExtensionField(n,"addOptions",{name:n.name})),n.storage=callOrReturn(getExtensionField(n,"addStorage",{name:n.name,options:n.options})),n}}function getTextBetween(t,e,n){const{from:r,to:o}=e,{blockSeparator:s=`

`,textSerializers:a={}}=n||{};let l="";return t.nodesBetween(r,o,(c,u,g,C)=>{var v;c.isBlock&&u>r&&(l+=s);const m=a==null?void 0:a[c.type.name];if(m)return g&&(l+=m({node:c,pos:u,parent:g,index:C,range:e})),!1;c.isText&&(l+=(v=c==null?void 0:c.text)===null||v===void 0?void 0:v.slice(Math.max(r,u)-u,o-u))}),l}function getTextSerializersFromSchema(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}const ClipboardTextSerializer=Extension.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:o}=e,{ranges:s}=o,a=Math.min(...s.map(g=>g.$from.pos)),l=Math.max(...s.map(g=>g.$to.pos)),c=getTextSerializersFromSchema(n);return getTextBetween(r,{from:a,to:l},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:c})}}})]}}),blur=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),clearContent=(t=!1)=>({commands:e})=>e.setContent("",t),clearNodes=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:o}=r;return n&&o.forEach(({$from:s,$to:a})=>{t.doc.nodesBetween(s.pos,a.pos,(l,c)=>{if(l.type.isText)return;const{doc:u,mapping:g}=e,C=u.resolve(g.map(c)),v=u.resolve(g.map(c+l.nodeSize)),m=C.blockRange(v);if(!m)return;const S=liftTarget(m);if(l.type.isTextblock){const{defaultType:T}=C.parent.contentMatchAt(C.index());e.setNodeMarkup(m.start,T)}(S||S===0)&&e.lift(m,S)})}),!0},command=t=>e=>t(e),createParagraphNear=()=>({state:t,dispatch:e})=>createParagraphNear$1(t,e),cut=(t,e)=>({editor:n,tr:r})=>{const{state:o}=n,s=o.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const a=r.mapping.map(e);return r.insert(a,s.content),r.setSelection(new TextSelection(r.doc.resolve(a-1))),!0},deleteCurrentNode=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const o=t.selection.$anchor;for(let s=o.depth;s>0;s-=1)if(o.node(s).type===r.type){if(e){const l=o.before(s),c=o.after(s);t.delete(l,c).scrollIntoView()}return!0}return!1},deleteNode=t=>({tr:e,state:n,dispatch:r})=>{const o=getNodeType(t,n.schema),s=e.selection.$anchor;for(let a=s.depth;a>0;a-=1)if(s.node(a).type===o){if(r){const c=s.before(a),u=s.after(a);e.delete(c,u).scrollIntoView()}return!0}return!1},deleteRange=t=>({tr:e,dispatch:n})=>{const{from:r,to:o}=t;return n&&e.delete(r,o),!0},deleteSelection=()=>({state:t,dispatch:e})=>deleteSelection$1(t,e),enter=()=>({commands:t})=>t.keyboardShortcut("Enter"),exitCode=()=>({state:t,dispatch:e})=>exitCode$1(t,e);function objectIncludes(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(o=>n.strict?e[o]===t[o]:isRegExp(e[o])?e[o].test(t[o]):e[o]===t[o]):!0}function findMarkInSet(t,e,n={}){return t.find(r=>r.type===e&&objectIncludes(Object.fromEntries(Object.keys(n).map(o=>[o,r.attrs[o]])),n))}function isMarkInSet(t,e,n={}){return!!findMarkInSet(t,e,n)}function getMarkRange(t,e,n){var r;if(!t||!e)return;let o=t.parent.childAfter(t.parentOffset);if((!o.node||!o.node.marks.some(g=>g.type===e))&&(o=t.parent.childBefore(t.parentOffset)),!o.node||!o.node.marks.some(g=>g.type===e)||(n=n||((r=o.node.marks[0])===null||r===void 0?void 0:r.attrs),!findMarkInSet([...o.node.marks],e,n)))return;let a=o.index,l=t.start()+o.offset,c=a+1,u=l+o.node.nodeSize;for(;a>0&&isMarkInSet([...t.parent.child(a-1).marks],e,n);)a-=1,l-=t.parent.child(a).nodeSize;for(;c<t.parent.childCount&&isMarkInSet([...t.parent.child(c).marks],e,n);)u+=t.parent.child(c).nodeSize,c+=1;return{from:l,to:u}}function getMarkType(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const extendMarkRange=(t,e={})=>({tr:n,state:r,dispatch:o})=>{const s=getMarkType(t,r.schema),{doc:a,selection:l}=n,{$from:c,from:u,to:g}=l;if(o){const C=getMarkRange(c,s,e);if(C&&C.from<=u&&C.to>=g){const v=TextSelection.create(a,C.from,C.to);n.setSelection(v)}}return!0},first=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function isTextSelection(t){return t instanceof TextSelection}function minMax(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function resolveFocusPosition(t,e=null){if(!e)return null;const n=Selection.atStart(t),r=Selection.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const o=n.from,s=r.to;return e==="all"?TextSelection.create(t,minMax(0,o,s),minMax(t.content.size,o,s)):TextSelection.create(t,minMax(e,o,s),minMax(e,o,s))}const focus=(t=null,e={})=>({editor:n,view:r,tr:o,dispatch:s})=>{e={scrollIntoView:!0,...e};const a=()=>{r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(s&&t===null&&!isTextSelection(n.state.selection))return a(),!0;const l=resolveFocusPosition(o.doc,t)||n.state.selection,c=n.state.selection.eq(l);return s&&(c||o.setSelection(l),c&&o.storedMarks&&o.setStoredMarks(o.storedMarks),a()),!0},forEach=(t,e)=>n=>t.every((r,o)=>e(r,{...n,index:o})),insertContent=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),removeWhitespaces=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&removeWhitespaces(r)}return t};function elementFromString(t){const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return removeWhitespaces(n)}function createNodeFromContent(t,e,n){if(t instanceof Node$2||t instanceof Fragment)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,o=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return Fragment.fromArray(t.map(l=>e.nodeFromJSON(l)));const a=e.nodeFromJSON(t);return n.errorOnInvalidContent&&a.check(),a}catch(s){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",s),createNodeFromContent("",e,n)}if(o){if(n.errorOnInvalidContent){let a=!1,l="";const c=new Schema({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:u=>(a=!0,l=typeof u=="string"?u:u.outerHTML,null)}]}})});if(n.slice?DOMParser$1.fromSchema(c).parseSlice(elementFromString(t),n.parseOptions):DOMParser$1.fromSchema(c).parse(elementFromString(t),n.parseOptions),n.errorOnInvalidContent&&a)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${l}`)})}const s=DOMParser$1.fromSchema(e);return n.slice?s.parseSlice(elementFromString(t),n.parseOptions).content:s.parse(elementFromString(t),n.parseOptions)}return createNodeFromContent("",e,n)}function selectionToInsertionEnd(t,e,n){const r=t.steps.length-1;if(r<e)return;const o=t.steps[r];if(!(o instanceof ReplaceStep||o instanceof ReplaceAroundStep))return;const s=t.mapping.maps[r];let a=0;s.forEach((l,c,u,g)=>{a===0&&(a=g)}),t.setSelection(Selection.near(t.doc.resolve(a),n))}const isFragment=t=>!("type"in t),insertContentAt=(t,e,n)=>({tr:r,dispatch:o,editor:s})=>{var a;if(o){n={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let l;try{l=createNodeFromContent(e,s.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions},errorOnInvalidContent:(a=n.errorOnInvalidContent)!==null&&a!==void 0?a:s.options.enableContentCheck})}catch(S){return s.emit("contentError",{editor:s,error:S,disableCollaboration:()=>{s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}}),!1}let{from:c,to:u}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},g=!0,C=!0;if((isFragment(l)?l:[l]).forEach(S=>{S.check(),g=g?S.isText&&S.marks.length===0:!1,C=C?S.isBlock:!1}),c===u&&C){const{parent:S}=r.doc.resolve(c);S.isTextblock&&!S.type.spec.code&&!S.childCount&&(c-=1,u+=1)}let m;if(g){if(Array.isArray(e))m=e.map(S=>S.text||"").join("");else if(e instanceof Fragment){let S="";e.forEach(T=>{T.text&&(S+=T.text)}),m=S}else typeof e=="object"&&e&&e.text?m=e.text:m=e;r.insertText(m,c,u)}else m=l,r.replaceWith(c,u,m);n.updateSelection&&selectionToInsertionEnd(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:c,text:m}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:c,text:m})}return!0},joinUp=()=>({state:t,dispatch:e})=>joinUp$1(t,e),joinDown=()=>({state:t,dispatch:e})=>joinDown$1(t,e),joinBackward=()=>({state:t,dispatch:e})=>joinBackward$1(t,e),joinForward=()=>({state:t,dispatch:e})=>joinForward$1(t,e),joinItemBackward=()=>({state:t,dispatch:e,tr:n})=>{try{const r=joinPoint(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},joinItemForward=()=>({state:t,dispatch:e,tr:n})=>{try{const r=joinPoint(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},joinTextblockBackward=()=>({state:t,dispatch:e})=>joinTextblockBackward$1(t,e),joinTextblockForward=()=>({state:t,dispatch:e})=>joinTextblockForward$1(t,e);function isiOS(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function isMacOS(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function normalizeKeyName(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,o,s,a;for(let l=0;l<e.length-1;l+=1){const c=e[l];if(/^(cmd|meta|m)$/i.test(c))a=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))o=!0;else if(/^s(hift)?$/i.test(c))s=!0;else if(/^mod$/i.test(c))isiOS()||isMacOS()?a=!0:o=!0;else throw new Error(`Unrecognized modifier name: ${c}`)}return r&&(n=`Alt-${n}`),o&&(n=`Ctrl-${n}`),a&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}const keyboardShortcut=t=>({editor:e,view:n,tr:r,dispatch:o})=>{const s=normalizeKeyName(t).split(/-(?!$)/),a=s.find(u=>!["Alt","Ctrl","Meta","Shift"].includes(u)),l=new KeyboardEvent("keydown",{key:a==="Space"?" ":a,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),c=e.captureTransaction(()=>{n.someProp("handleKeyDown",u=>u(n,l))});return c==null||c.steps.forEach(u=>{const g=u.map(r.mapping);g&&o&&r.maybeStep(g)}),!0};function isNodeActive(t,e,n={}){const{from:r,to:o,empty:s}=t.selection,a=e?getNodeType(e,t.schema):null,l=[];t.doc.nodesBetween(r,o,(C,v)=>{if(C.isText)return;const m=Math.max(r,v),S=Math.min(o,v+C.nodeSize);l.push({node:C,from:m,to:S})});const c=o-r,u=l.filter(C=>a?a.name===C.node.type.name:!0).filter(C=>objectIncludes(C.node.attrs,n,{strict:!1}));return s?!!u.length:u.reduce((C,v)=>C+v.to-v.from,0)>=c}const lift=(t,e={})=>({state:n,dispatch:r})=>{const o=getNodeType(t,n.schema);return isNodeActive(n,o,e)?lift$1(n,r):!1},liftEmptyBlock=()=>({state:t,dispatch:e})=>liftEmptyBlock$1(t,e),liftListItem=t=>({state:e,dispatch:n})=>{const r=getNodeType(t,e.schema);return liftListItem$1(r)(e,n)},newlineInCode=()=>({state:t,dispatch:e})=>newlineInCode$1(t,e);function getSchemaTypeNameByName(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function deleteProps(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,o)=>(n.includes(o)||(r[o]=t[o]),r),{})}const resetAttributes=(t,e)=>({tr:n,state:r,dispatch:o})=>{let s=null,a=null;const l=getSchemaTypeNameByName(typeof t=="string"?t:t.name,r.schema);return l?(l==="node"&&(s=getNodeType(t,r.schema)),l==="mark"&&(a=getMarkType(t,r.schema)),o&&n.selection.ranges.forEach(c=>{r.doc.nodesBetween(c.$from.pos,c.$to.pos,(u,g)=>{s&&s===u.type&&n.setNodeMarkup(g,void 0,deleteProps(u.attrs,e)),a&&u.marks.length&&u.marks.forEach(C=>{a===C.type&&n.addMark(g,g+u.nodeSize,a.create(deleteProps(C.attrs,e)))})})}),!0):!1},scrollIntoView=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),selectAll=()=>({tr:t,dispatch:e})=>{if(e){const n=new AllSelection(t.doc);t.setSelection(n)}return!0},selectNodeBackward=()=>({state:t,dispatch:e})=>selectNodeBackward$1(t,e),selectNodeForward=()=>({state:t,dispatch:e})=>selectNodeForward$1(t,e),selectParentNode=()=>({state:t,dispatch:e})=>selectParentNode$1(t,e),selectTextblockEnd=()=>({state:t,dispatch:e})=>selectTextblockEnd$1(t,e),selectTextblockStart=()=>({state:t,dispatch:e})=>selectTextblockStart$1(t,e);function createDocument(t,e,n={},r={}){return createNodeFromContent(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}const setContent$1=(t,e=!1,n={},r={})=>({editor:o,tr:s,dispatch:a,commands:l})=>{var c,u;const{doc:g}=s;if(n.preserveWhitespace!=="full"){const C=createDocument(t,o.schema,n,{errorOnInvalidContent:(c=r.errorOnInvalidContent)!==null&&c!==void 0?c:o.options.enableContentCheck});return a&&s.replaceWith(0,g.content.size,C).setMeta("preventUpdate",!e),!0}return a&&s.setMeta("preventUpdate",!e),l.insertContentAt({from:0,to:g.content.size},t,{parseOptions:n,errorOnInvalidContent:(u=r.errorOnInvalidContent)!==null&&u!==void 0?u:o.options.enableContentCheck})};function getMarkAttributes(t,e){const n=getMarkType(e,t.schema),{from:r,to:o,empty:s}=t.selection,a=[];s?(t.storedMarks&&a.push(...t.storedMarks),a.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,o,c=>{a.push(...c.marks)});const l=a.find(c=>c.type.name===n.name);return l?{...l.attrs}:{}}function combineTransactionSteps(t,e){const n=new Transform(t);return e.forEach(r=>{r.steps.forEach(o=>{n.step(o)})}),n}function defaultBlockAt(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function findChildrenInRange(t,e,n){const r=[];return t.nodesBetween(e.from,e.to,(o,s)=>{n(o)&&r.push({node:o,pos:s})}),r}function findParentNodeClosestToPos(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function findParentNode(t){return e=>findParentNodeClosestToPos(e.$from,t)}function getText(t,e){const n={from:0,to:t.content.size};return getTextBetween(t,n,e)}function getNodeAttributes(t,e){const n=getNodeType(e,t.schema),{from:r,to:o}=t.selection,s=[];t.doc.nodesBetween(r,o,l=>{s.push(l)});const a=s.reverse().find(l=>l.type.name===n.name);return a?{...a.attrs}:{}}function getAttributes(t,e){const n=getSchemaTypeNameByName(typeof e=="string"?e:e.name,t.schema);return n==="node"?getNodeAttributes(t,e):n==="mark"?getMarkAttributes(t,e):{}}function removeDuplicates(t,e=JSON.stringify){const n={};return t.filter(r=>{const o=e(r);return Object.prototype.hasOwnProperty.call(n,o)?!1:n[o]=!0})}function simplifyChangedRanges(t){const e=removeDuplicates(t);return e.length===1?e:e.filter((n,r)=>!e.filter((s,a)=>a!==r).some(s=>n.oldRange.from>=s.oldRange.from&&n.oldRange.to<=s.oldRange.to&&n.newRange.from>=s.newRange.from&&n.newRange.to<=s.newRange.to))}function getChangedRanges(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((o,s)=>{const a=[];if(o.ranges.length)o.forEach((l,c)=>{a.push({from:l,to:c})});else{const{from:l,to:c}=n[s];if(l===void 0||c===void 0)return;a.push({from:l,to:c})}a.forEach(({from:l,to:c})=>{const u=e.slice(s).map(l,-1),g=e.slice(s).map(c),C=e.invert().map(u,-1),v=e.invert().map(g);r.push({oldRange:{from:C,to:v},newRange:{from:u,to:g}})})}),simplifyChangedRanges(r)}function getMarksBetween(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(o=>{const s=n.resolve(t),a=getMarkRange(s,o.type);a&&r.push({mark:o,...a})}):n.nodesBetween(t,e,(o,s)=>{!o||(o==null?void 0:o.nodeSize)===void 0||r.push(...o.marks.map(a=>({from:s,to:s+o.nodeSize,mark:a})))}),r}function getSplittedAttributes(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const o=t.find(s=>s.type===e&&s.name===r);return o?o.attribute.keepOnSplit:!1}))}function isMarkActive(t,e,n={}){const{empty:r,ranges:o}=t.selection,s=e?getMarkType(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(C=>s?s.name===C.type.name:!0).find(C=>objectIncludes(C.attrs,n,{strict:!1}));let a=0;const l=[];if(o.forEach(({$from:C,$to:v})=>{const m=C.pos,S=v.pos;t.doc.nodesBetween(m,S,(T,w)=>{if(!T.isText&&!T.marks.length)return;const N=Math.max(m,w),D=Math.min(S,w+T.nodeSize),k=D-N;a+=k,l.push(...T.marks.map(L=>({mark:L,from:N,to:D})))})}),a===0)return!1;const c=l.filter(C=>s?s.name===C.mark.type.name:!0).filter(C=>objectIncludes(C.mark.attrs,n,{strict:!1})).reduce((C,v)=>C+v.to-v.from,0),u=l.filter(C=>s?C.mark.type!==s&&C.mark.type.excludes(s):!0).reduce((C,v)=>C+v.to-v.from,0);return(c>0?c+u:c)>=a}function isActive(t,e,n={}){if(!e)return isNodeActive(t,null,n)||isMarkActive(t,null,n);const r=getSchemaTypeNameByName(e,t.schema);return r==="node"?isNodeActive(t,e,n):r==="mark"?isMarkActive(t,e,n):!1}function isList(t,e){const{nodeExtensions:n}=splitExtensions(e),r=n.find(a=>a.name===t);if(!r)return!1;const o={name:r.name,options:r.options,storage:r.storage},s=callOrReturn(getExtensionField(r,"group",o));return typeof s!="string"?!1:s.split(" ").includes("list")}function isNodeEmpty(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!==null&&r!==void 0?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let o=!0;return t.content.forEach(s=>{o!==!1&&(isNodeEmpty(s,{ignoreWhitespace:n,checkChildren:e})||(o=!1))}),o}return!1}function isNodeSelection(t){return t instanceof NodeSelection}function posToDOMRect(t,e,n){const o=t.state.doc.content.size,s=minMax(e,0,o),a=minMax(n,0,o),l=t.coordsAtPos(s),c=t.coordsAtPos(a,-1),u=Math.min(l.top,c.top),g=Math.max(l.bottom,c.bottom),C=Math.min(l.left,c.left),v=Math.max(l.right,c.right),m=v-C,S=g-u,N={top:u,bottom:g,left:C,right:v,width:m,height:S,x:C,y:u};return{...N,toJSON:()=>N}}function canSetMark(t,e,n){var r;const{selection:o}=e;let s=null;if(isTextSelection(o)&&(s=o.$cursor),s){const l=(r=t.storedMarks)!==null&&r!==void 0?r:s.marks();return!!n.isInSet(l)||!l.some(c=>c.type.excludes(n))}const{ranges:a}=o;return a.some(({$from:l,$to:c})=>{let u=l.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(l.pos,c.pos,(g,C,v)=>{if(u)return!1;if(g.isInline){const m=!v||v.type.allowsMarkType(n),S=!!n.isInSet(g.marks)||!g.marks.some(T=>T.type.excludes(n));u=m&&S}return!u}),u})}const setMark=(t,e={})=>({tr:n,state:r,dispatch:o})=>{const{selection:s}=n,{empty:a,ranges:l}=s,c=getMarkType(t,r.schema);if(o)if(a){const u=getMarkAttributes(r,c);n.addStoredMark(c.create({...u,...e}))}else l.forEach(u=>{const g=u.$from.pos,C=u.$to.pos;r.doc.nodesBetween(g,C,(v,m)=>{const S=Math.max(m,g),T=Math.min(m+v.nodeSize,C);v.marks.find(N=>N.type===c)?v.marks.forEach(N=>{c===N.type&&n.addMark(S,T,c.create({...N.attrs,...e}))}):n.addMark(S,T,c.create(e))})});return canSetMark(r,n,c)},setMeta=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),setNode=(t,e={})=>({state:n,dispatch:r,chain:o})=>{const s=getNodeType(t,n.schema);let a;return n.selection.$anchor.sameParent(n.selection.$head)&&(a=n.selection.$anchor.parent.attrs),s.isTextblock?o().command(({commands:l})=>setBlockType(s,{...a,...e})(n)?!0:l.clearNodes()).command(({state:l})=>setBlockType(s,{...a,...e})(l,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},setNodeSelection=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,o=minMax(t,0,r.content.size),s=NodeSelection.create(r,o);e.setSelection(s)}return!0},setTextSelection=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:o,to:s}=typeof t=="number"?{from:t,to:t}:t,a=TextSelection.atStart(r).from,l=TextSelection.atEnd(r).to,c=minMax(o,a,l),u=minMax(s,a,l),g=TextSelection.create(r,c,u);e.setSelection(g)}return!0},sinkListItem=t=>({state:e,dispatch:n})=>{const r=getNodeType(t,e.schema);return sinkListItem$1(r)(e,n)};function ensureMarks(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(o=>e==null?void 0:e.includes(o.type.name));t.tr.ensureMarks(r)}}const splitBlock=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:o})=>{const{selection:s,doc:a}=e,{$from:l,$to:c}=s,u=o.extensionManager.attributes,g=getSplittedAttributes(u,l.node().type.name,l.node().attrs);if(s instanceof NodeSelection&&s.node.isBlock)return!l.parentOffset||!canSplit(a,l.pos)?!1:(r&&(t&&ensureMarks(n,o.extensionManager.splittableMarks),e.split(l.pos).scrollIntoView()),!0);if(!l.parent.isBlock)return!1;const C=c.parentOffset===c.parent.content.size,v=l.depth===0?void 0:defaultBlockAt(l.node(-1).contentMatchAt(l.indexAfter(-1)));let m=C&&v?[{type:v,attrs:g}]:void 0,S=canSplit(e.doc,e.mapping.map(l.pos),1,m);if(!m&&!S&&canSplit(e.doc,e.mapping.map(l.pos),1,v?[{type:v}]:void 0)&&(S=!0,m=v?[{type:v,attrs:g}]:void 0),r){if(S&&(s instanceof TextSelection&&e.deleteSelection(),e.split(e.mapping.map(l.pos),1,m),v&&!C&&!l.parentOffset&&l.parent.type!==v)){const T=e.mapping.map(l.before()),w=e.doc.resolve(T);l.node(-1).canReplaceWith(w.index(),w.index()+1,v)&&e.setNodeMarkup(e.mapping.map(l.before()),v)}t&&ensureMarks(n,o.extensionManager.splittableMarks),e.scrollIntoView()}return S},splitListItem=(t,e={})=>({tr:n,state:r,dispatch:o,editor:s})=>{var a;const l=getNodeType(t,r.schema),{$from:c,$to:u}=r.selection,g=r.selection.node;if(g&&g.isBlock||c.depth<2||!c.sameParent(u))return!1;const C=c.node(-1);if(C.type!==l)return!1;const v=s.extensionManager.attributes;if(c.parent.content.size===0&&c.node(-1).childCount===c.indexAfter(-1)){if(c.depth===2||c.node(-3).type!==l||c.index(-2)!==c.node(-2).childCount-1)return!1;if(o){let N=Fragment.empty;const D=c.index(-1)?1:c.index(-2)?2:3;for(let Y=c.depth-D;Y>=c.depth-3;Y-=1)N=Fragment.from(c.node(Y).copy(N));const k=c.indexAfter(-1)<c.node(-2).childCount?1:c.indexAfter(-2)<c.node(-3).childCount?2:3,L={...getSplittedAttributes(v,c.node().type.name,c.node().attrs),...e},H=((a=l.contentMatch.defaultType)===null||a===void 0?void 0:a.createAndFill(L))||void 0;N=N.append(Fragment.from(l.createAndFill(null,H)||void 0));const R=c.before(c.depth-(D-1));n.replace(R,c.after(-k),new Slice(N,4-D,0));let B=-1;n.doc.nodesBetween(R,n.doc.content.size,(Y,K)=>{if(B>-1)return!1;Y.isTextblock&&Y.content.size===0&&(B=K+1)}),B>-1&&n.setSelection(TextSelection.near(n.doc.resolve(B))),n.scrollIntoView()}return!0}const m=u.pos===c.end()?C.contentMatchAt(0).defaultType:null,S={...getSplittedAttributes(v,C.type.name,C.attrs),...e},T={...getSplittedAttributes(v,c.node().type.name,c.node().attrs),...e};n.delete(c.pos,u.pos);const w=m?[{type:l,attrs:S},{type:m,attrs:T}]:[{type:l,attrs:S}];if(!canSplit(n.doc,c.pos,2))return!1;if(o){const{selection:N,storedMarks:D}=r,{splittableMarks:k}=s.extensionManager,L=D||N.$to.parentOffset&&N.$from.marks();if(n.split(c.pos,2,w).scrollIntoView(),!L||!o)return!0;const H=L.filter(R=>k.includes(R.type.name));n.ensureMarks(H)}return!0},joinListBackwards=(t,e)=>{const n=findParentNode(a=>a.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const o=t.doc.nodeAt(r);return n.node.type===(o==null?void 0:o.type)&&canJoin(t.doc,n.pos)&&t.join(n.pos),!0},joinListForwards=(t,e)=>{const n=findParentNode(a=>a.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const o=t.doc.nodeAt(r);return n.node.type===(o==null?void 0:o.type)&&canJoin(t.doc,r)&&t.join(r),!0},toggleList=(t,e,n,r={})=>({editor:o,tr:s,state:a,dispatch:l,chain:c,commands:u,can:g})=>{const{extensions:C,splittableMarks:v}=o.extensionManager,m=getNodeType(t,a.schema),S=getNodeType(e,a.schema),{selection:T,storedMarks:w}=a,{$from:N,$to:D}=T,k=N.blockRange(D),L=w||T.$to.parentOffset&&T.$from.marks();if(!k)return!1;const H=findParentNode(R=>isList(R.type.name,C))(T);if(k.depth>=1&&H&&k.depth-H.depth<=1){if(H.node.type===m)return u.liftListItem(S);if(isList(H.node.type.name,C)&&m.validContent(H.node.content)&&l)return c().command(()=>(s.setNodeMarkup(H.pos,m),!0)).command(()=>joinListBackwards(s,m)).command(()=>joinListForwards(s,m)).run()}return!n||!L||!l?c().command(()=>g().wrapInList(m,r)?!0:u.clearNodes()).wrapInList(m,r).command(()=>joinListBackwards(s,m)).command(()=>joinListForwards(s,m)).run():c().command(()=>{const R=g().wrapInList(m,r),B=L.filter(Y=>v.includes(Y.type.name));return s.ensureMarks(B),R?!0:u.clearNodes()}).wrapInList(m,r).command(()=>joinListBackwards(s,m)).command(()=>joinListForwards(s,m)).run()},toggleMark=(t,e={},n={})=>({state:r,commands:o})=>{const{extendEmptyMarkRange:s=!1}=n,a=getMarkType(t,r.schema);return isMarkActive(r,a,e)?o.unsetMark(a,{extendEmptyMarkRange:s}):o.setMark(a,e)},toggleNode=(t,e,n={})=>({state:r,commands:o})=>{const s=getNodeType(t,r.schema),a=getNodeType(e,r.schema),l=isNodeActive(r,s,n);let c;return r.selection.$anchor.sameParent(r.selection.$head)&&(c=r.selection.$anchor.parent.attrs),l?o.setNode(a,c):o.setNode(s,{...c,...n})},toggleWrap=(t,e={})=>({state:n,commands:r})=>{const o=getNodeType(t,n.schema);return isNodeActive(n,o,e)?r.lift(o):r.wrapIn(o,e)},undoInputRule=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const o=n[r];let s;if(o.spec.isInputRules&&(s=o.getState(t))){if(e){const a=t.tr,l=s.transform;for(let c=l.steps.length-1;c>=0;c-=1)a.step(l.steps[c].invert(l.docs[c]));if(s.text){const c=a.doc.resolve(s.from).marks();a.replaceWith(s.from,s.to,t.schema.text(s.text,c))}else a.delete(s.from,s.to)}return!0}}return!1},unsetAllMarks=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:o}=n;return r||e&&o.forEach(s=>{t.removeMark(s.$from.pos,s.$to.pos)}),!0},unsetMark=(t,e={})=>({tr:n,state:r,dispatch:o})=>{var s;const{extendEmptyMarkRange:a=!1}=e,{selection:l}=n,c=getMarkType(t,r.schema),{$from:u,empty:g,ranges:C}=l;if(!o)return!0;if(g&&a){let{from:v,to:m}=l;const S=(s=u.marks().find(w=>w.type===c))===null||s===void 0?void 0:s.attrs,T=getMarkRange(u,c,S);T&&(v=T.from,m=T.to),n.removeMark(v,m,c)}else C.forEach(v=>{n.removeMark(v.$from.pos,v.$to.pos,c)});return n.removeStoredMark(c),!0},updateAttributes=(t,e={})=>({tr:n,state:r,dispatch:o})=>{let s=null,a=null;const l=getSchemaTypeNameByName(typeof t=="string"?t:t.name,r.schema);return l?(l==="node"&&(s=getNodeType(t,r.schema)),l==="mark"&&(a=getMarkType(t,r.schema)),o&&n.selection.ranges.forEach(c=>{const u=c.$from.pos,g=c.$to.pos;let C,v,m,S;n.selection.empty?r.doc.nodesBetween(u,g,(T,w)=>{s&&s===T.type&&(m=Math.max(w,u),S=Math.min(w+T.nodeSize,g),C=w,v=T)}):r.doc.nodesBetween(u,g,(T,w)=>{w<u&&s&&s===T.type&&(m=Math.max(w,u),S=Math.min(w+T.nodeSize,g),C=w,v=T),w>=u&&w<=g&&(s&&s===T.type&&n.setNodeMarkup(w,void 0,{...T.attrs,...e}),a&&T.marks.length&&T.marks.forEach(N=>{if(a===N.type){const D=Math.max(w,u),k=Math.min(w+T.nodeSize,g);n.addMark(D,k,a.create({...N.attrs,...e}))}}))}),v&&(C!==void 0&&n.setNodeMarkup(C,void 0,{...v.attrs,...e}),a&&v.marks.length&&v.marks.forEach(T=>{a===T.type&&n.addMark(m,S,a.create({...T.attrs,...e}))}))}),!0):!1},wrapIn=(t,e={})=>({state:n,dispatch:r})=>{const o=getNodeType(t,n.schema);return wrapIn$1(o,e)(n,r)},wrapInList=(t,e={})=>({state:n,dispatch:r})=>{const o=getNodeType(t,n.schema);return wrapInList$1(o,e)(n,r)};var commands=Object.freeze({__proto__:null,blur,clearContent,clearNodes,command,createParagraphNear,cut,deleteCurrentNode,deleteNode,deleteRange,deleteSelection,enter,exitCode,extendMarkRange,first,focus,forEach,insertContent,insertContentAt,joinBackward,joinDown,joinForward,joinItemBackward,joinItemForward,joinTextblockBackward,joinTextblockForward,joinUp,keyboardShortcut,lift,liftEmptyBlock,liftListItem,newlineInCode,resetAttributes,scrollIntoView,selectAll,selectNodeBackward,selectNodeForward,selectParentNode,selectTextblockEnd,selectTextblockStart,setContent:setContent$1,setMark,setMeta,setNode,setNodeSelection,setTextSelection,sinkListItem,splitBlock,splitListItem,toggleList,toggleMark,toggleNode,toggleWrap,undoInputRule,unsetAllMarks,unsetMark,updateAttributes,wrapIn,wrapInList});const Commands=Extension.create({name:"commands",addCommands(){return{...commands}}}),Drop=Extension.create({name:"drop",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),Editable=Extension.create({name:"editable",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("editable"),props:{editable:()=>this.editor.options.editable}})]}}),FocusEvents=Extension.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new Plugin({key:new PluginKey("focusEvents"),props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),Keymap=Extension.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:a})=>[()=>a.undoInputRule(),()=>a.command(({tr:l})=>{const{selection:c,doc:u}=l,{empty:g,$anchor:C}=c,{pos:v,parent:m}=C,S=C.parent.isTextblock&&v>0?l.doc.resolve(v-1):C,T=S.parent.type.spec.isolating,w=C.pos-C.parentOffset,N=T&&S.parent.childCount===1?w===C.pos:Selection.atStart(u).from===v;return!g||!m.type.isTextblock||m.textContent.length||!N||N&&C.parent.type.name==="paragraph"?!1:a.clearNodes()}),()=>a.deleteSelection(),()=>a.joinBackward(),()=>a.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:a})=>[()=>a.deleteSelection(),()=>a.deleteCurrentNode(),()=>a.joinForward(),()=>a.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:a})=>[()=>a.newlineInCode(),()=>a.createParagraphNear(),()=>a.liftEmptyBlock(),()=>a.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},o={...r},s={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return isiOS()||isMacOS()?s:o},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("clearDocument"),appendTransaction:(t,e,n)=>{const r=t.some(T=>T.docChanged)&&!e.doc.eq(n.doc),o=t.some(T=>T.getMeta("preventClearDocument"));if(!r||o)return;const{empty:s,from:a,to:l}=e.selection,c=Selection.atStart(e.doc).from,u=Selection.atEnd(e.doc).to;if(s||!(a===c&&l===u)||!isNodeEmpty(n.doc))return;const v=n.tr,m=createChainableState({state:n,transaction:v}),{commands:S}=new CommandManager({editor:this.editor,state:m});if(S.clearNodes(),!!v.steps.length)return v}})]}}),Paste=Extension.create({name:"paste",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),Tabindex=Extension.create({name:"tabindex",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class NodePos{get name(){return this.node.type.name}constructor(e,n,r=!1,o=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=o}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You can’t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new NodePos(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new NodePos(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new NodePos(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const o=n.isBlock&&!n.isTextblock,s=n.isAtom&&!n.isText,a=this.pos+r+(s?0:1),l=this.resolvedPos.doc.resolve(a);if(!o&&l.depth<=this.depth)return;const c=new NodePos(l,this.editor,o,o?n:null);o&&(c.actualDepth=this.depth+1),e.push(new NodePos(l,this.editor,o,o?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,o=this.parent;for(;o&&!r;){if(o.node.type.name===e)if(Object.keys(n).length>0){const s=o.node.attrs,a=Object.keys(n);for(let l=0;l<a.length;l+=1){const c=a[l];if(s[c]!==n[c])break}}else r=o;o=o.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let o=[];if(!this.children||this.children.length===0)return o;const s=Object.keys(n);return this.children.forEach(a=>{r&&o.length>0||(a.node.type.name===e&&s.every(c=>n[c]===a.node.attrs[c])&&o.push(a),!(r&&o.length>0)&&(o=o.concat(a.querySelectorAll(e,n,r))))}),o}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}}const style=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function createStyleTag(t,e,n){const r=document.querySelector(`style[data-tiptap-style${n?`-${n}`:""}]`);if(r!==null)return r;const o=document.createElement("style");return e&&o.setAttribute("nonce",e),o.setAttribute(`data-tiptap-style${n?`-${n}`:""}`,""),o.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(o),o}let Editor$1=class extends EventEmitter{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:r,moved:o})=>this.options.onDrop(n,r,o)),this.on("paste",({event:n,slice:r})=>this.options.onPaste(n,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=createStyleTag(style,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,n=!0){this.setOptions({editable:e}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,n){const r=isFunction(n)?n(e,[...this.state.plugins]):[...this.state.plugins,e],o=this.state.reconfigure({plugins:r});return this.view.updateState(o),o}unregisterPlugin(e){if(this.isDestroyed)return;const n=this.state.plugins;let r=n;if([].concat(e).forEach(s=>{const a=typeof s=="string"?`${s}$`:s.key;r=n.filter(l=>!l.key.startsWith(a))}),n.length===r.length)return;const o=this.state.reconfigure({plugins:r});return this.view.updateState(o),o}createExtensionManager(){var e,n;const o=[...this.options.enableCoreExtensions?[Editable,ClipboardTextSerializer.configure({blockSeparator:(n=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||n===void 0?void 0:n.blockSeparator}),Commands,FocusEvents,Keymap,Tabindex,Drop,Paste].filter(s=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[s.name]!==!1:!0):[],...this.options.extensions].filter(s=>["extension","node","mark"].includes(s==null?void 0:s.type));this.extensionManager=new ExtensionManager(o,this)}createCommandManager(){this.commandManager=new CommandManager({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let n;try{n=createDocument(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(a){if(!(a instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(a.message))throw a;this.emit("contentError",{editor:this,error:a,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(l=>l.name!=="collaboration"),this.createExtensionManager()}}),n=createDocument(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=resolveFocusPosition(n,this.options.autofocus);this.view=new EditorView(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:EditorState.create({doc:n,selection:r||void 0})});const o=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(o),this.createNodeViews(),this.prependClass();const s=this.view.dom;s.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(a=>{var l;return(l=this.capturedTransaction)===null||l===void 0?void 0:l.step(a)});return}const n=this.state.apply(e),r=!this.state.selection.eq(n.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:n}),this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const o=e.getMeta("focus"),s=e.getMeta("blur");o&&this.emit("focus",{editor:this,event:o.event,transaction:e}),s&&this.emit("blur",{editor:this,event:s.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return getAttributes(this.state,e)}isActive(e,n){const r=typeof e=="string"?e:null,o=typeof e=="string"?n:e;return isActive(this.state,r,o)}getJSON(){return this.state.doc.toJSON()}getHTML(){return getHTMLFromFragment(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:n=`

`,textSerializers:r={}}=e||{};return getText(this.state.doc,{blockSeparator:n,textSerializers:{...getTextSerializersFromSchema(this.schema),...r}})}get isEmpty(){return isNodeEmpty(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,n))||null}$nodes(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,n))||null}$pos(e){const n=this.state.doc.resolve(e);return new NodePos(n,this)}get $doc(){return this.$pos(0)}};function markInputRule(t){return new InputRule({find:t.find,handler:({state:e,range:n,match:r})=>{const o=callOrReturn(t.getAttributes,void 0,r);if(o===!1||o===null)return null;const{tr:s}=e,a=r[r.length-1],l=r[0];if(a){const c=l.search(/\S/),u=n.from+l.indexOf(a),g=u+a.length;if(getMarksBetween(n.from,n.to,e.doc).filter(m=>m.mark.type.excluded.find(T=>T===t.type&&T!==m.mark.type)).filter(m=>m.to>u).length)return null;g<n.to&&s.delete(g,n.to),u>n.from&&s.delete(n.from+c,u);const v=n.from+c+a.length;s.addMark(n.from+c,v,t.type.create(o||{})),s.removeStoredMark(t.type)}}})}function nodeInputRule(t){return new InputRule({find:t.find,handler:({state:e,range:n,match:r})=>{const o=callOrReturn(t.getAttributes,void 0,r)||{},{tr:s}=e,a=n.from;let l=n.to;const c=t.type.create(o);if(r[1]){const u=r[0].lastIndexOf(r[1]);let g=a+u;g>l?g=l:l=g+r[1].length;const C=r[0][r[0].length-1];s.insertText(C,a+r[0].length-1),s.replaceWith(g,l,c)}else if(r[0]){const u=t.type.isInline?a:a-1;s.insert(u,t.type.create(o)).delete(s.mapping.map(a),s.mapping.map(l))}s.scrollIntoView()}})}function textblockTypeInputRule(t){return new InputRule({find:t.find,handler:({state:e,range:n,match:r})=>{const o=e.doc.resolve(n.from),s=callOrReturn(t.getAttributes,void 0,r)||{};if(!o.node(-1).canReplaceWith(o.index(-1),o.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,s)}})}function wrappingInputRule(t){return new InputRule({find:t.find,handler:({state:e,range:n,match:r,chain:o})=>{const s=callOrReturn(t.getAttributes,void 0,r)||{},a=e.tr.delete(n.from,n.to),c=a.doc.resolve(n.from).blockRange(),u=c&&findWrapping(c,t.type,s);if(!u)return null;if(a.wrap(c,u),t.keepMarks&&t.editor){const{selection:C,storedMarks:v}=e,{splittableMarks:m}=t.editor.extensionManager,S=v||C.$to.parentOffset&&C.$from.marks();if(S){const T=S.filter(w=>m.includes(w.type.name));a.ensureMarks(T)}}if(t.keepAttributes){const C=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";o().updateAttributes(C,s).run()}const g=a.doc.resolve(n.from-1).nodeBefore;g&&g.type===t.type&&canJoin(a.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,g))&&a.join(n.from-1)}})}let Node$1=class Sa{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=callOrReturn(getExtensionField(this,"addOptions",{name:this.name}))),this.storage=callOrReturn(getExtensionField(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Sa(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>mergeDeep(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new Sa(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=callOrReturn(getExtensionField(n,"addOptions",{name:n.name})),n.storage=callOrReturn(getExtensionField(n,"addStorage",{name:n.name,options:n.options})),n}};function markPasteRule(t){return new PasteRule({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:o})=>{const s=callOrReturn(t.getAttributes,void 0,r,o);if(s===!1||s===null)return null;const{tr:a}=e,l=r[r.length-1],c=r[0];let u=n.to;if(l){const g=c.search(/\S/),C=n.from+c.indexOf(l),v=C+l.length;if(getMarksBetween(n.from,n.to,e.doc).filter(S=>S.mark.type.excluded.find(w=>w===t.type&&w!==S.mark.type)).filter(S=>S.to>C).length)return null;v<n.to&&a.delete(v,n.to),C>n.from&&a.delete(n.from+g,C),u=n.from+g+l.length,a.addMark(n.from+g,u,t.type.create(s||{})),a.removeStoredMark(t.type)}}})}var BOX_CLASS="tippy-box",CONTENT_CLASS="tippy-content",BACKDROP_CLASS="tippy-backdrop",ARROW_CLASS="tippy-arrow",SVG_ARROW_CLASS="tippy-svg-arrow",TOUCH_OPTIONS={passive:!0,capture:!0},TIPPY_DEFAULT_APPEND_TO=function(){return document.body};function getValueAtIndexOrReturn(t,e,n){if(Array.isArray(t)){var r=t[e];return r??(Array.isArray(n)?n[e]:n)}return t}function isType(t,e){var n={}.toString.call(t);return n.indexOf("[object")===0&&n.indexOf(e+"]")>-1}function invokeWithArgsOrReturn(t,e){return typeof t=="function"?t.apply(void 0,e):t}function debounce(t,e){if(e===0)return t;var n;return function(r){clearTimeout(n),n=setTimeout(function(){t(r)},e)}}function splitBySpaces(t){return t.split(/\s+/).filter(Boolean)}function normalizeToArray(t){return[].concat(t)}function pushIfUnique(t,e){t.indexOf(e)===-1&&t.push(e)}function unique(t){return t.filter(function(e,n){return t.indexOf(e)===n})}function getBasePlacement(t){return t.split("-")[0]}function arrayFrom(t){return[].slice.call(t)}function removeUndefinedProps(t){return Object.keys(t).reduce(function(e,n){return t[n]!==void 0&&(e[n]=t[n]),e},{})}function div(){return document.createElement("div")}function isElement(t){return["Element","Fragment"].some(function(e){return isType(t,e)})}function isNodeList(t){return isType(t,"NodeList")}function isMouseEvent(t){return isType(t,"MouseEvent")}function isReferenceElement(t){return!!(t&&t._tippy&&t._tippy.reference===t)}function getArrayOfElements(t){return isElement(t)?[t]:isNodeList(t)?arrayFrom(t):Array.isArray(t)?t:arrayFrom(document.querySelectorAll(t))}function setTransitionDuration(t,e){t.forEach(function(n){n&&(n.style.transitionDuration=e+"ms")})}function setVisibilityState(t,e){t.forEach(function(n){n&&n.setAttribute("data-state",e)})}function getOwnerDocument(t){var e,n=normalizeToArray(t),r=n[0];return r!=null&&(e=r.ownerDocument)!=null&&e.body?r.ownerDocument:document}function isCursorOutsideInteractiveBorder(t,e){var n=e.clientX,r=e.clientY;return t.every(function(o){var s=o.popperRect,a=o.popperState,l=o.props,c=l.interactiveBorder,u=getBasePlacement(a.placement),g=a.modifiersData.offset;if(!g)return!0;var C=u==="bottom"?g.top.y:0,v=u==="top"?g.bottom.y:0,m=u==="right"?g.left.x:0,S=u==="left"?g.right.x:0,T=s.top-r+C>c,w=r-s.bottom-v>c,N=s.left-n+m>c,D=n-s.right-S>c;return T||w||N||D})}function updateTransitionEndListener(t,e,n){var r=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(o){t[r](o,n)})}function actualContains(t,e){for(var n=e;n;){var r;if(t.contains(n))return!0;n=n.getRootNode==null||(r=n.getRootNode())==null?void 0:r.host}return!1}var currentInput={isTouch:!1},lastMouseMoveTime=0;function onDocumentTouchStart(){currentInput.isTouch||(currentInput.isTouch=!0,window.performance&&document.addEventListener("mousemove",onDocumentMouseMove))}function onDocumentMouseMove(){var t=performance.now();t-lastMouseMoveTime<20&&(currentInput.isTouch=!1,document.removeEventListener("mousemove",onDocumentMouseMove)),lastMouseMoveTime=t}function onWindowBlur(){var t=document.activeElement;if(isReferenceElement(t)){var e=t._tippy;t.blur&&!e.state.isVisible&&t.blur()}}function bindGlobalEventListeners(){document.addEventListener("touchstart",onDocumentTouchStart,TOUCH_OPTIONS),window.addEventListener("blur",onWindowBlur)}var isBrowser=typeof window<"u"&&typeof document<"u",isIE11=isBrowser?!!window.msCrypto:!1,pluginProps={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},renderProps={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},defaultProps=Object.assign({appendTo:TIPPY_DEFAULT_APPEND_TO,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},pluginProps,renderProps),defaultKeys=Object.keys(defaultProps),setDefaultProps=function(e){var n=Object.keys(e);n.forEach(function(r){defaultProps[r]=e[r]})};function getExtendedPassedProps(t){var e=t.plugins||[],n=e.reduce(function(r,o){var s=o.name,a=o.defaultValue;if(s){var l;r[s]=t[s]!==void 0?t[s]:(l=defaultProps[s])!=null?l:a}return r},{});return Object.assign({},t,n)}function getDataAttributeProps(t,e){var n=e?Object.keys(getExtendedPassedProps(Object.assign({},defaultProps,{plugins:e}))):defaultKeys,r=n.reduce(function(o,s){var a=(t.getAttribute("data-tippy-"+s)||"").trim();if(!a)return o;if(s==="content")o[s]=a;else try{o[s]=JSON.parse(a)}catch{o[s]=a}return o},{});return r}function evaluateProps(t,e){var n=Object.assign({},e,{content:invokeWithArgsOrReturn(e.content,[t])},e.ignoreAttributes?{}:getDataAttributeProps(t,e.plugins));return n.aria=Object.assign({},defaultProps.aria,n.aria),n.aria={expanded:n.aria.expanded==="auto"?e.interactive:n.aria.expanded,content:n.aria.content==="auto"?e.interactive?null:"describedby":n.aria.content},n}var innerHTML=function(){return"innerHTML"};function dangerouslySetInnerHTML(t,e){t[innerHTML()]=e}function createArrowElement(t){var e=div();return t===!0?e.className=ARROW_CLASS:(e.className=SVG_ARROW_CLASS,isElement(t)?e.appendChild(t):dangerouslySetInnerHTML(e,t)),e}function setContent(t,e){isElement(e.content)?(dangerouslySetInnerHTML(t,""),t.appendChild(e.content)):typeof e.content!="function"&&(e.allowHTML?dangerouslySetInnerHTML(t,e.content):t.textContent=e.content)}function getChildren(t){var e=t.firstElementChild,n=arrayFrom(e.children);return{box:e,content:n.find(function(r){return r.classList.contains(CONTENT_CLASS)}),arrow:n.find(function(r){return r.classList.contains(ARROW_CLASS)||r.classList.contains(SVG_ARROW_CLASS)}),backdrop:n.find(function(r){return r.classList.contains(BACKDROP_CLASS)})}}function render(t){var e=div(),n=div();n.className=BOX_CLASS,n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=div();r.className=CONTENT_CLASS,r.setAttribute("data-state","hidden"),setContent(r,t.props),e.appendChild(n),n.appendChild(r),o(t.props,t.props);function o(s,a){var l=getChildren(e),c=l.box,u=l.content,g=l.arrow;a.theme?c.setAttribute("data-theme",a.theme):c.removeAttribute("data-theme"),typeof a.animation=="string"?c.setAttribute("data-animation",a.animation):c.removeAttribute("data-animation"),a.inertia?c.setAttribute("data-inertia",""):c.removeAttribute("data-inertia"),c.style.maxWidth=typeof a.maxWidth=="number"?a.maxWidth+"px":a.maxWidth,a.role?c.setAttribute("role",a.role):c.removeAttribute("role"),(s.content!==a.content||s.allowHTML!==a.allowHTML)&&setContent(u,t.props),a.arrow?g?s.arrow!==a.arrow&&(c.removeChild(g),c.appendChild(createArrowElement(a.arrow))):c.appendChild(createArrowElement(a.arrow)):g&&c.removeChild(g)}return{popper:e,onUpdate:o}}render.$$tippy=!0;var idCounter=1,mouseMoveListeners=[],mountedInstances=[];function createTippy(t,e){var n=evaluateProps(t,Object.assign({},defaultProps,getExtendedPassedProps(removeUndefinedProps(e)))),r,o,s,a=!1,l=!1,c=!1,u=!1,g,C,v,m=[],S=debounce(Ie,n.interactiveDebounce),T,w=idCounter++,N=null,D=unique(n.plugins),k={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},L={id:w,reference:t,popper:div(),popperInstance:N,props:n,state:k,plugins:D,clearDelayTimeouts:O,setProps:A,setContent:J,show:he,hide:be,hideWithInteractivity:q,enable:F,disable:V,unmount:z,destroy:ee};if(!n.render)return L;var H=n.render(L),R=H.popper,B=H.onUpdate;R.setAttribute("data-tippy-root",""),R.id="tippy-"+L.id,L.popper=R,t._tippy=L,R._tippy=L;var Y=D.map(function(Z){return Z.fn(L)}),K=t.hasAttribute("aria-expanded");return jt(),ut(),Ke(),Ye("onCreate",[L]),n.showOnCreate&&Ct(),R.addEventListener("mouseenter",function(){L.props.interactive&&L.state.isVisible&&L.clearDelayTimeouts()}),R.addEventListener("mouseleave",function(){L.props.interactive&&L.props.trigger.indexOf("mouseenter")>=0&&Ne().addEventListener("mousemove",S)}),L;function se(){var Z=L.props.touch;return Array.isArray(Z)?Z:[Z,0]}function pe(){return se()[0]==="hold"}function le(){var Z;return!!((Z=L.props.render)!=null&&Z.$$tippy)}function Ee(){return T||t}function Ne(){var Z=Ee().parentNode;return Z?getOwnerDocument(Z):document}function _e(){return getChildren(R)}function me(Z){return L.state.isMounted&&!L.state.isVisible||currentInput.isTouch||g&&g.type==="focus"?0:getValueAtIndexOrReturn(L.props.delay,Z?0:1,defaultProps.delay)}function Ke(Z){Z===void 0&&(Z=!1),R.style.pointerEvents=L.props.interactive&&!Z?"":"none",R.style.zIndex=""+L.props.zIndex}function Ye(Z,ue,we){if(we===void 0&&(we=!0),Y.forEach(function(je){je[Z]&&je[Z].apply(je,ue)}),we){var Ae;(Ae=L.props)[Z].apply(Ae,ue)}}function pt(){var Z=L.props.aria;if(Z.content){var ue="aria-"+Z.content,we=R.id,Ae=normalizeToArray(L.props.triggerTarget||t);Ae.forEach(function(je){var ze=je.getAttribute(ue);if(L.state.isVisible)je.setAttribute(ue,ze?ze+" "+we:we);else{var it=ze&&ze.replace(we,"").trim();it?je.setAttribute(ue,it):je.removeAttribute(ue)}})}}function ut(){if(!(K||!L.props.aria.expanded)){var Z=normalizeToArray(L.props.triggerTarget||t);Z.forEach(function(ue){L.props.interactive?ue.setAttribute("aria-expanded",L.state.isVisible&&ue===Ee()?"true":"false"):ue.removeAttribute("aria-expanded")})}}function It(){Ne().removeEventListener("mousemove",S),mouseMoveListeners=mouseMoveListeners.filter(function(Z){return Z!==S})}function te(Z){if(!(currentInput.isTouch&&(c||Z.type==="mousedown"))){var ue=Z.composedPath&&Z.composedPath()[0]||Z.target;if(!(L.props.interactive&&actualContains(R,ue))){if(normalizeToArray(L.props.triggerTarget||t).some(function(we){return actualContains(we,ue)})){if(currentInput.isTouch||L.state.isVisible&&L.props.trigger.indexOf("click")>=0)return}else Ye("onClickOutside",[L,Z]);L.props.hideOnClick===!0&&(L.clearDelayTimeouts(),L.hide(),l=!0,setTimeout(function(){l=!1}),L.state.isMounted||_t())}}}function ot(){c=!0}function St(){c=!1}function Gt(){var Z=Ne();Z.addEventListener("mousedown",te,!0),Z.addEventListener("touchend",te,TOUCH_OPTIONS),Z.addEventListener("touchstart",St,TOUCH_OPTIONS),Z.addEventListener("touchmove",ot,TOUCH_OPTIONS)}function _t(){var Z=Ne();Z.removeEventListener("mousedown",te,!0),Z.removeEventListener("touchend",te,TOUCH_OPTIONS),Z.removeEventListener("touchstart",St,TOUCH_OPTIONS),Z.removeEventListener("touchmove",ot,TOUCH_OPTIONS)}function Ze(Z,ue){ht(Z,function(){!L.state.isVisible&&R.parentNode&&R.parentNode.contains(R)&&ue()})}function et(Z,ue){ht(Z,ue)}function ht(Z,ue){var we=_e().box;function Ae(je){je.target===we&&(updateTransitionEndListener(we,"remove",Ae),ue())}if(Z===0)return ue();updateTransitionEndListener(we,"remove",C),updateTransitionEndListener(we,"add",Ae),C=Ae}function Tt(Z,ue,we){we===void 0&&(we=!1);var Ae=normalizeToArray(L.props.triggerTarget||t);Ae.forEach(function(je){je.addEventListener(Z,ue,we),m.push({node:je,eventType:Z,handler:ue,options:we})})}function jt(){pe()&&(Tt("touchstart",Te,{passive:!0}),Tt("touchend",$e,{passive:!0})),splitBySpaces(L.props.trigger).forEach(function(Z){if(Z!=="manual")switch(Tt(Z,Te),Z){case"mouseenter":Tt("mouseleave",$e);break;case"focus":Tt(isIE11?"focusout":"blur",Be);break;case"focusin":Tt("focusout",Be);break}})}function ge(){m.forEach(function(Z){var ue=Z.node,we=Z.eventType,Ae=Z.handler,je=Z.options;ue.removeEventListener(we,Ae,je)}),m=[]}function Te(Z){var ue,we=!1;if(!(!L.state.isEnabled||nt(Z)||l)){var Ae=((ue=g)==null?void 0:ue.type)==="focus";g=Z,T=Z.currentTarget,ut(),!L.state.isVisible&&isMouseEvent(Z)&&mouseMoveListeners.forEach(function(je){return je(Z)}),Z.type==="click"&&(L.props.trigger.indexOf("mouseenter")<0||a)&&L.props.hideOnClick!==!1&&L.state.isVisible?we=!0:Ct(Z),Z.type==="click"&&(a=!we),we&&!Ae&&mt(Z)}}function Ie(Z){var ue=Z.target,we=Ee().contains(ue)||R.contains(ue);if(!(Z.type==="mousemove"&&we)){var Ae=Fe().concat(R).map(function(je){var ze,it=je._tippy,ct=(ze=it.popperInstance)==null?void 0:ze.state;return ct?{popperRect:je.getBoundingClientRect(),popperState:ct,props:n}:null}).filter(Boolean);isCursorOutsideInteractiveBorder(Ae,Z)&&(It(),mt(Z))}}function $e(Z){var ue=nt(Z)||L.props.trigger.indexOf("click")>=0&&a;if(!ue){if(L.props.interactive){L.hideWithInteractivity(Z);return}mt(Z)}}function Be(Z){L.props.trigger.indexOf("focusin")<0&&Z.target!==Ee()||L.props.interactive&&Z.relatedTarget&&R.contains(Z.relatedTarget)||mt(Z)}function nt(Z){return currentInput.isTouch?pe()!==Z.type.indexOf("touch")>=0:!1}function ft(){st();var Z=L.props,ue=Z.popperOptions,we=Z.placement,Ae=Z.offset,je=Z.getReferenceClientRect,ze=Z.moveTransition,it=le()?getChildren(R).arrow:null,ct=je?{getBoundingClientRect:je,contextElement:je.contextElement||Ee()}:t,Nt={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(Le){var Xe=Le.state;if(le()){var ne=_e(),fe=ne.box;["placement","reference-hidden","escaped"].forEach(function(P){P==="placement"?fe.setAttribute("data-placement",Xe.placement):Xe.attributes.popper["data-popper-"+P]?fe.setAttribute("data-"+P,""):fe.removeAttribute("data-"+P)}),Xe.attributes.popper={}}}},Ot=[{name:"offset",options:{offset:Ae}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!ze}},Nt];le()&&it&&Ot.push({name:"arrow",options:{element:it,padding:3}}),Ot.push.apply(Ot,(ue==null?void 0:ue.modifiers)||[]),L.popperInstance=createPopper(ct,R,Object.assign({},ue,{placement:we,onFirstUpdate:v,modifiers:Ot}))}function st(){L.popperInstance&&(L.popperInstance.destroy(),L.popperInstance=null)}function at(){var Z=L.props.appendTo,ue,we=Ee();L.props.interactive&&Z===TIPPY_DEFAULT_APPEND_TO||Z==="parent"?ue=we.parentNode:ue=invokeWithArgsOrReturn(Z,[we]),ue.contains(R)||ue.appendChild(R),L.state.isMounted=!0,ft()}function Fe(){return arrayFrom(R.querySelectorAll("[data-tippy-root]"))}function Ct(Z){L.clearDelayTimeouts(),Z&&Ye("onTrigger",[L,Z]),Gt();var ue=me(!0),we=se(),Ae=we[0],je=we[1];currentInput.isTouch&&Ae==="hold"&&je&&(ue=je),ue?r=setTimeout(function(){L.show()},ue):L.show()}function mt(Z){if(L.clearDelayTimeouts(),Ye("onUntrigger",[L,Z]),!L.state.isVisible){_t();return}if(!(L.props.trigger.indexOf("mouseenter")>=0&&L.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(Z.type)>=0&&a)){var ue=me(!1);ue?o=setTimeout(function(){L.state.isVisible&&L.hide()},ue):s=requestAnimationFrame(function(){L.hide()})}}function F(){L.state.isEnabled=!0}function V(){L.hide(),L.state.isEnabled=!1}function O(){clearTimeout(r),clearTimeout(o),cancelAnimationFrame(s)}function A(Z){if(!L.state.isDestroyed){Ye("onBeforeUpdate",[L,Z]),ge();var ue=L.props,we=evaluateProps(t,Object.assign({},ue,removeUndefinedProps(Z),{ignoreAttributes:!0}));L.props=we,jt(),ue.interactiveDebounce!==we.interactiveDebounce&&(It(),S=debounce(Ie,we.interactiveDebounce)),ue.triggerTarget&&!we.triggerTarget?normalizeToArray(ue.triggerTarget).forEach(function(Ae){Ae.removeAttribute("aria-expanded")}):we.triggerTarget&&t.removeAttribute("aria-expanded"),ut(),Ke(),B&&B(ue,we),L.popperInstance&&(ft(),Fe().forEach(function(Ae){requestAnimationFrame(Ae._tippy.popperInstance.forceUpdate)})),Ye("onAfterUpdate",[L,Z])}}function J(Z){L.setProps({content:Z})}function he(){var Z=L.state.isVisible,ue=L.state.isDestroyed,we=!L.state.isEnabled,Ae=currentInput.isTouch&&!L.props.touch,je=getValueAtIndexOrReturn(L.props.duration,0,defaultProps.duration);if(!(Z||ue||we||Ae)&&!Ee().hasAttribute("disabled")&&(Ye("onShow",[L],!1),L.props.onShow(L)!==!1)){if(L.state.isVisible=!0,le()&&(R.style.visibility="visible"),Ke(),Gt(),L.state.isMounted||(R.style.transition="none"),le()){var ze=_e(),it=ze.box,ct=ze.content;setTransitionDuration([it,ct],0)}v=function(){var Ot;if(!(!L.state.isVisible||u)){if(u=!0,R.offsetHeight,R.style.transition=L.props.moveTransition,le()&&L.props.animation){var ve=_e(),Le=ve.box,Xe=ve.content;setTransitionDuration([Le,Xe],je),setVisibilityState([Le,Xe],"visible")}pt(),ut(),pushIfUnique(mountedInstances,L),(Ot=L.popperInstance)==null||Ot.forceUpdate(),Ye("onMount",[L]),L.props.animation&&le()&&et(je,function(){L.state.isShown=!0,Ye("onShown",[L])})}},at()}}function be(){var Z=!L.state.isVisible,ue=L.state.isDestroyed,we=!L.state.isEnabled,Ae=getValueAtIndexOrReturn(L.props.duration,1,defaultProps.duration);if(!(Z||ue||we)&&(Ye("onHide",[L],!1),L.props.onHide(L)!==!1)){if(L.state.isVisible=!1,L.state.isShown=!1,u=!1,a=!1,le()&&(R.style.visibility="hidden"),It(),_t(),Ke(!0),le()){var je=_e(),ze=je.box,it=je.content;L.props.animation&&(setTransitionDuration([ze,it],Ae),setVisibilityState([ze,it],"hidden"))}pt(),ut(),L.props.animation?le()&&Ze(Ae,L.unmount):L.unmount()}}function q(Z){Ne().addEventListener("mousemove",S),pushIfUnique(mouseMoveListeners,S),S(Z)}function z(){L.state.isVisible&&L.hide(),L.state.isMounted&&(st(),Fe().forEach(function(Z){Z._tippy.unmount()}),R.parentNode&&R.parentNode.removeChild(R),mountedInstances=mountedInstances.filter(function(Z){return Z!==L}),L.state.isMounted=!1,Ye("onHidden",[L]))}function ee(){L.state.isDestroyed||(L.clearDelayTimeouts(),L.unmount(),ge(),delete t._tippy,L.state.isDestroyed=!0,Ye("onDestroy",[L]))}}function tippy(t,e){e===void 0&&(e={});var n=defaultProps.plugins.concat(e.plugins||[]);bindGlobalEventListeners();var r=Object.assign({},e,{plugins:n}),o=getArrayOfElements(t),s=o.reduce(function(a,l){var c=l&&createTippy(l,r);return c&&a.push(c),a},[]);return isElement(t)?s[0]:s}tippy.defaultProps=defaultProps;tippy.setDefaultProps=setDefaultProps;tippy.currentInput=currentInput;Object.assign({},applyStyles$1,{effect:function(e){var n=e.state,r={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(n.elements.popper.style,r.popper),n.styles=r,n.elements.arrow&&Object.assign(n.elements.arrow.style,r.arrow)}});tippy.setDefaultProps({render});class BubbleMenuView{constructor({editor:e,element:n,view:r,tippyOptions:o={},updateDelay:s=250,shouldShow:a}){this.preventHide=!1,this.shouldShow=({view:l,state:c,from:u,to:g})=>{const{doc:C,selection:v}=c,{empty:m}=v,S=!C.textBetween(u,g).length&&isTextSelection(c.selection),T=this.element.contains(document.activeElement);return!(!(l.hasFocus()||T)||m||S||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:l})=>{var c;if(this.preventHide){this.preventHide=!1;return}l!=null&&l.relatedTarget&&(!((c=this.element.parentNode)===null||c===void 0)&&c.contains(l.relatedTarget))||(l==null?void 0:l.relatedTarget)!==this.editor.view.dom&&this.hide()},this.tippyBlurHandler=l=>{this.blurHandler({event:l})},this.handleDebouncedUpdate=(l,c)=>{const u=!(c!=null&&c.selection.eq(l.state.selection)),g=!(c!=null&&c.doc.eq(l.state.doc));!u&&!g||(this.updateDebounceTimer&&clearTimeout(this.updateDebounceTimer),this.updateDebounceTimer=window.setTimeout(()=>{this.updateHandler(l,u,g,c)},this.updateDelay))},this.updateHandler=(l,c,u,g)=>{var C,v,m;const{state:S,composing:T}=l,{selection:w}=S;if(T||!c&&!u)return;this.createTooltip();const{ranges:D}=w,k=Math.min(...D.map(R=>R.$from.pos)),L=Math.max(...D.map(R=>R.$to.pos));if(!((C=this.shouldShow)===null||C===void 0?void 0:C.call(this,{editor:this.editor,element:this.element,view:l,state:S,oldState:g,from:k,to:L}))){this.hide();return}(v=this.tippy)===null||v===void 0||v.setProps({getReferenceClientRect:((m=this.tippyOptions)===null||m===void 0?void 0:m.getReferenceClientRect)||(()=>{if(isNodeSelection(S.selection)){let R=l.nodeDOM(k);if(R){const B=R.dataset.nodeViewWrapper?R:R.querySelector("[data-node-view-wrapper]");if(B&&(R=B.firstChild),R)return R.getBoundingClientRect()}}return posToDOMRect(l,k,L)})}),this.show()},this.editor=e,this.element=n,this.view=r,this.updateDelay=s,a&&(this.shouldShow=a),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=o,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){const{element:e}=this.editor.options,n=!!e.parentElement;this.tippy||!n||(this.tippy=tippy(e,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"top",hideOnClick:"toggle",...this.tippyOptions}),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",this.tippyBlurHandler))}update(e,n){const{state:r}=e,o=r.selection.from!==r.selection.to;if(this.updateDelay>0&&o){this.handleDebouncedUpdate(e,n);return}const s=!(n!=null&&n.selection.eq(e.state.selection)),a=!(n!=null&&n.doc.eq(e.state.doc));this.updateHandler(e,s,a,n)}show(){var e;(e=this.tippy)===null||e===void 0||e.show()}hide(){var e;(e=this.tippy)===null||e===void 0||e.hide()}destroy(){var e,n;!((e=this.tippy)===null||e===void 0)&&e.popper.firstChild&&this.tippy.popper.firstChild.removeEventListener("blur",this.tippyBlurHandler),(n=this.tippy)===null||n===void 0||n.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const BubbleMenuPlugin=t=>new Plugin({key:typeof t.pluginKey=="string"?new PluginKey(t.pluginKey):t.pluginKey,view:e=>new BubbleMenuView({view:e,...t})});Extension.create({name:"bubbleMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"bubbleMenu",updateDelay:void 0,shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[BubbleMenuPlugin({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,updateDelay:this.options.updateDelay,shouldShow:this.options.shouldShow})]:[]}});class FloatingMenuView{getTextContent(e){return getText(e,{textSerializers:getTextSerializersFromSchema(this.editor.schema)})}constructor({editor:e,element:n,view:r,tippyOptions:o={},shouldShow:s}){this.preventHide=!1,this.shouldShow=({view:a,state:l})=>{const{selection:c}=l,{$anchor:u,empty:g}=c,C=u.depth===1,v=u.parent.isTextblock&&!u.parent.type.spec.code&&!u.parent.textContent&&u.parent.childCount===0&&!this.getTextContent(u.parent);return!(!a.hasFocus()||!g||!C||!v||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:a})=>{var l;if(this.preventHide){this.preventHide=!1;return}a!=null&&a.relatedTarget&&(!((l=this.element.parentNode)===null||l===void 0)&&l.contains(a.relatedTarget))||(a==null?void 0:a.relatedTarget)!==this.editor.view.dom&&this.hide()},this.tippyBlurHandler=a=>{this.blurHandler({event:a})},this.editor=e,this.element=n,this.view=r,s&&(this.shouldShow=s),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=o,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){const{element:e}=this.editor.options,n=!!e.parentElement;this.tippy||!n||(this.tippy=tippy(e,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"right",hideOnClick:"toggle",...this.tippyOptions}),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",this.tippyBlurHandler))}update(e,n){var r,o,s;const{state:a}=e,{doc:l,selection:c}=a,{from:u,to:g}=c;if(n&&n.doc.eq(l)&&n.selection.eq(c))return;if(this.createTooltip(),!((r=this.shouldShow)===null||r===void 0?void 0:r.call(this,{editor:this.editor,view:e,state:a,oldState:n}))){this.hide();return}(o=this.tippy)===null||o===void 0||o.setProps({getReferenceClientRect:((s=this.tippyOptions)===null||s===void 0?void 0:s.getReferenceClientRect)||(()=>posToDOMRect(e,u,g))}),this.show()}show(){var e;(e=this.tippy)===null||e===void 0||e.show()}hide(){var e;(e=this.tippy)===null||e===void 0||e.hide()}destroy(){var e,n;!((e=this.tippy)===null||e===void 0)&&e.popper.firstChild&&this.tippy.popper.firstChild.removeEventListener("blur",this.tippyBlurHandler),(n=this.tippy)===null||n===void 0||n.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const FloatingMenuPlugin=t=>new Plugin({key:typeof t.pluginKey=="string"?new PluginKey(t.pluginKey):t.pluginKey,view:e=>new FloatingMenuView({view:e,...t})}),FloatingMenu=Extension.create({name:"floatingMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"floatingMenu",shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[FloatingMenuPlugin({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,shouldShow:this.options.shouldShow})]:[]}});defineComponent({name:"BubbleMenu",props:{pluginKey:{type:[String,Object],default:"bubbleMenu"},editor:{type:Object,required:!0},updateDelay:{type:Number,default:void 0},tippyOptions:{type:Object,default:()=>({})},shouldShow:{type:Function,default:null}},setup(t,{slots:e}){const n=ref(null);return onMounted(()=>{const{updateDelay:r,editor:o,pluginKey:s,shouldShow:a,tippyOptions:l}=t;o.registerPlugin(BubbleMenuPlugin({updateDelay:r,editor:o,element:n.value,pluginKey:s,shouldShow:a,tippyOptions:l}))}),onBeforeUnmount(()=>{const{pluginKey:r,editor:o}=t;o.unregisterPlugin(r)}),()=>{var r;return h("div",{ref:n},(r=e.default)===null||r===void 0?void 0:r.call(e))}}});function useDebouncedRef(t){return customRef((e,n)=>({get(){return e(),t},set(r){t=r,requestAnimationFrame(()=>{requestAnimationFrame(()=>{n()})})}}))}class Editor extends Editor$1{constructor(e={}){return super(e),this.contentComponent=null,this.appContext=null,this.reactiveState=useDebouncedRef(this.view.state),this.reactiveExtensionStorage=useDebouncedRef(this.extensionStorage),this.on("beforeTransaction",({nextState:n})=>{this.reactiveState.value=n,this.reactiveExtensionStorage.value=this.extensionStorage}),markRaw(this)}get state(){return this.reactiveState?this.reactiveState.value:this.view.state}get storage(){return this.reactiveExtensionStorage?this.reactiveExtensionStorage.value:super.storage}registerPlugin(e,n){const r=super.registerPlugin(e,n);return this.reactiveState&&(this.reactiveState.value=r),r}unregisterPlugin(e){const n=super.unregisterPlugin(e);return this.reactiveState&&n&&(this.reactiveState.value=n),n}}const EditorContent=defineComponent({name:"EditorContent",props:{editor:{default:null,type:Object}},setup(t){const e=ref(),n=getCurrentInstance();return watchEffect(()=>{const r=t.editor;r&&r.options.element&&e.value&&nextTick(()=>{if(!e.value||!r.options.element.firstChild)return;const o=unref(e.value);e.value.append(...r.options.element.childNodes),r.contentComponent=n.ctx._,n&&(r.appContext={...n.appContext,provides:n.provides}),r.setOptions({element:o}),r.createNodeViews()})}),onBeforeUnmount(()=>{const r=t.editor;r&&(r.contentComponent=null,r.appContext=null)}),{rootEl:e}},render(){return h("div",{ref:t=>{this.rootEl=t}})}});defineComponent({name:"FloatingMenu",props:{pluginKey:{type:null,default:"floatingMenu"},editor:{type:Object,required:!0},tippyOptions:{type:Object,default:()=>({})},shouldShow:{type:Function,default:null}},setup(t,{slots:e}){const n=ref(null);return onMounted(()=>{const{pluginKey:r,editor:o,tippyOptions:s,shouldShow:a}=t;o.registerPlugin(FloatingMenuPlugin({pluginKey:r,editor:o,element:n.value,tippyOptions:s,shouldShow:a}))}),onBeforeUnmount(()=>{const{pluginKey:r,editor:o}=t;o.unregisterPlugin(r)}),()=>{var r;return h("div",{ref:n},(r=e.default)===null||r===void 0?void 0:r.call(e))}}});defineComponent({name:"NodeViewContent",props:{as:{type:String,default:"div"}},render(){return h(this.as,{style:{whiteSpace:"pre-wrap"},"data-node-view-content":""})}});defineComponent({name:"NodeViewWrapper",props:{as:{type:String,default:"div"}},inject:["onDragStart","decorationClasses"],render(){var t,e;return h(this.as,{class:this.decorationClasses,style:{whiteSpace:"normal"},"data-node-view-wrapper":"",onDragstart:this.onDragStart},(e=(t=this.$slots).default)===null||e===void 0?void 0:e.call(t))}});const inputRegex$4=/^\s*>\s$/,Blockquote=Node$1.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return["blockquote",mergeAttributes(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[wrappingInputRule({find:inputRegex$4,type:this.type})]}}),starInputRegex$1=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,starPasteRegex$1=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,underscoreInputRegex$1=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,underscorePasteRegex$1=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,Bold=Mark.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",mergeAttributes(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[markInputRule({find:starInputRegex$1,type:this.type}),markInputRule({find:underscoreInputRegex$1,type:this.type})]},addPasteRules(){return[markPasteRule({find:starPasteRegex$1,type:this.type}),markPasteRule({find:underscorePasteRegex$1,type:this.type})]}}),ListItemName$1="listItem",TextStyleName$1="textStyle",inputRegex$3=/^\s*([-+*])\s$/,BulletList=Node$1.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",mergeAttributes(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(ListItemName$1,this.editor.getAttributes(TextStyleName$1)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=wrappingInputRule({find:inputRegex$3,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=wrappingInputRule({find:inputRegex$3,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(TextStyleName$1),editor:this.editor})),[t]}}),inputRegex$2=/(^|[^`])`([^`]+)`(?!`)/,pasteRegex$1=/(^|[^`])`([^`]+)`(?!`)/g,Code=Mark.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",mergeAttributes(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[markInputRule({find:inputRegex$2,type:this.type})]},addPasteRules(){return[markPasteRule({find:pasteRegex$1,type:this.type})]}}),backtickInputRegex=/^```([a-z]+)?[\s\n]$/,tildeInputRegex=/^~~~([a-z]+)?[\s\n]$/,CodeBlock=Node$1.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options,s=[...((e=t.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(a=>a.startsWith(n)).map(a=>a.replace(n,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",mergeAttributes(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:o}=n;if(!o||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,a=r.parent.textContent.endsWith(`

`);return!s||!a?!1:t.chain().command(({tr:l})=>(l.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:o,empty:s}=n;if(!s||o.parent.type!==this.type||!(o.parentOffset===o.parent.nodeSize-2))return!1;const l=o.after();return l===void 0?!1:r.nodeAt(l)?t.commands.command(({tr:u})=>(u.setSelection(Selection.near(r.resolve(l))),!0)):t.commands.exitCode()}}},addInputRules(){return[textblockTypeInputRule({find:backtickInputRegex,type:this.type,getAttributes:t=>({language:t[1]})}),textblockTypeInputRule({find:tildeInputRegex,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),o=r?JSON.parse(r):void 0,s=o==null?void 0:o.mode;if(!n||!s)return!1;const{tr:a,schema:l}=t.state,c=l.text(n.replace(/\r\n?/g,`
`));return a.replaceSelectionWith(this.type.create({language:s},c)),a.selection.$from.parent.type!==this.type&&a.setSelection(TextSelection.near(a.doc.resolve(Math.max(0,a.selection.from-2)))),a.setMeta("paste",!0),t.dispatch(a),!0}}})]}}),Document=Node$1.create({name:"doc",topNode:!0,content:"block+"});function dropCursor(t={}){return new Plugin({view(e){return new DropCursorView(e,t)}})}class DropCursorView{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(o=>{let s=a=>{this[o](a)};return e.dom.addEventListener(o,s),{name:o,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r;if(n){let l=e.nodeBefore,c=e.nodeAfter;if(l||c){let u=this.editorView.nodeDOM(this.cursorPos-(l?l.nodeSize:0));if(u){let g=u.getBoundingClientRect(),C=l?g.bottom:g.top;l&&c&&(C=(C+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),r={left:g.left,right:g.right,top:C-this.width/2,bottom:C+this.width/2}}}}if(!r){let l=this.editorView.coordsAtPos(this.cursorPos);r={left:l.left-this.width/2,right:l.left+this.width/2,top:l.top,bottom:l.bottom}}let o=this.editorView.dom.offsetParent;this.element||(this.element=o.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let s,a;if(!o||o==document.body&&getComputedStyle(o).position=="static")s=-pageXOffset,a=-pageYOffset;else{let l=o.getBoundingClientRect();s=l.left-o.scrollLeft,a=l.top-o.scrollTop}this.element.style.left=r.left-s+"px",this.element.style.top=r.top-a+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),o=r&&r.type.spec.disableDropCursor,s=typeof o=="function"?o(this.editorView,n,e):o;if(n&&!s){let a=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let l=dropPoint(this.editorView.state.doc,a,this.editorView.dragging.slice);l!=null&&(a=l)}this.setCursor(a),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}const Dropcursor=Extension.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[dropCursor(this.options)]}});class GapCursor extends Selection{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return GapCursor.valid(r)?new GapCursor(r):Selection.near(r)}content(){return Slice.empty}eq(e){return e instanceof GapCursor&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new GapCursor(e.resolve(n.pos))}getBookmark(){return new GapBookmark(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!closedBefore(e)||!closedAfter(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let o=n.contentMatchAt(e.index()).defaultType;return o&&o.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&GapCursor.valid(e))return e;let o=e.pos,s=null;for(let a=e.depth;;a--){let l=e.node(a);if(n>0?e.indexAfter(a)<l.childCount:e.index(a)>0){s=l.child(n>0?e.indexAfter(a):e.index(a)-1);break}else if(a==0)return null;o+=n;let c=e.doc.resolve(o);if(GapCursor.valid(c))return c}for(;;){let a=n>0?s.firstChild:s.lastChild;if(!a){if(s.isAtom&&!s.isText&&!NodeSelection.isSelectable(s)){e=e.doc.resolve(o+s.nodeSize*n),r=!1;continue e}break}s=a,o+=n;let l=e.doc.resolve(o);if(GapCursor.valid(l))return l}return null}}}GapCursor.prototype.visible=!1;GapCursor.findFrom=GapCursor.findGapCursorFrom;Selection.jsonID("gapcursor",GapCursor);class GapBookmark{constructor(e){this.pos=e}map(e){return new GapBookmark(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return GapCursor.valid(n)?new GapCursor(n):Selection.near(n)}}function closedBefore(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(n-1);;o=o.lastChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function closedAfter(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(n);;o=o.firstChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function gapCursor(){return new Plugin({props:{decorations:drawGapCursor,createSelectionBetween(t,e,n){return e.pos==n.pos&&GapCursor.valid(n)?new GapCursor(n):null},handleClick,handleKeyDown:handleKeyDown$1,handleDOMEvents:{beforeinput}}})}const handleKeyDown$1=keydownHandler({ArrowLeft:arrow$1("horiz",-1),ArrowRight:arrow$1("horiz",1),ArrowUp:arrow$1("vert",-1),ArrowDown:arrow$1("vert",1)});function arrow$1(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,o,s){let a=r.selection,l=e>0?a.$to:a.$from,c=a.empty;if(a instanceof TextSelection){if(!s.endOfTextblock(n)||l.depth==0)return!1;c=!1,l=r.doc.resolve(e>0?l.after():l.before())}let u=GapCursor.findGapCursorFrom(l,e,c);return u?(o&&o(r.tr.setSelection(new GapCursor(u))),!0):!1}}function handleClick(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!GapCursor.valid(r))return!1;let o=t.posAtCoords({left:n.clientX,top:n.clientY});return o&&o.inside>-1&&NodeSelection.isSelectable(t.state.doc.nodeAt(o.inside))?!1:(t.dispatch(t.state.tr.setSelection(new GapCursor(r))),!0)}function beforeinput(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof GapCursor))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let o=Fragment.empty;for(let a=r.length-1;a>=0;a--)o=Fragment.from(r[a].createAndFill(null,o));let s=t.state.tr.replace(n.pos,n.pos,new Slice(o,0,0));return s.setSelection(TextSelection.near(s.doc.resolve(n.pos+1))),t.dispatch(s),!1}function drawGapCursor(t){if(!(t.selection instanceof GapCursor))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",DecorationSet.create(t.doc,[Decoration.widget(t.selection.head,e,{key:"gapcursor"})])}const Gapcursor=Extension.create({name:"gapCursor",addProseMirrorPlugins(){return[gapCursor()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=callOrReturn(getExtensionField(t,"allowGapCursor",n)))!==null&&e!==void 0?e:null}}}),HardBreak=Node$1.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",mergeAttributes(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:o,storedMarks:s}=n;if(o.$from.parent.type.spec.isolating)return!1;const{keepMarks:a}=this.options,{splittableMarks:l}=r.extensionManager,c=s||o.$to.parentOffset&&o.$from.marks();return e().insertContent({type:this.name}).command(({tr:u,dispatch:g})=>{if(g&&c&&a){const C=c.filter(v=>l.includes(v.type.name));u.ensureMarks(C)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),Heading=Node$1.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,mergeAttributes(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>textblockTypeInputRule({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}});var GOOD_LEAF_SIZE=200,RopeSequence=function(){};RopeSequence.prototype.append=function(e){return e.length?(e=RopeSequence.from(e),!this.length&&e||e.length<GOOD_LEAF_SIZE&&this.leafAppend(e)||this.length<GOOD_LEAF_SIZE&&e.leafPrepend(this)||this.appendInner(e)):this};RopeSequence.prototype.prepend=function(e){return e.length?RopeSequence.from(e).append(this):this};RopeSequence.prototype.appendInner=function(e){return new Append(this,e)};RopeSequence.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?RopeSequence.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};RopeSequence.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};RopeSequence.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};RopeSequence.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var o=[];return this.forEach(function(s,a){return o.push(e(s,a))},n,r),o};RopeSequence.from=function(e){return e instanceof RopeSequence?e:e&&e.length?new Leaf(e):RopeSequence.empty};var Leaf=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(o,s){return o==0&&s==this.length?this:new e(this.values.slice(o,s))},e.prototype.getInner=function(o){return this.values[o]},e.prototype.forEachInner=function(o,s,a,l){for(var c=s;c<a;c++)if(o(this.values[c],l+c)===!1)return!1},e.prototype.forEachInvertedInner=function(o,s,a,l){for(var c=s-1;c>=a;c--)if(o(this.values[c],l+c)===!1)return!1},e.prototype.leafAppend=function(o){if(this.length+o.length<=GOOD_LEAF_SIZE)return new e(this.values.concat(o.flatten()))},e.prototype.leafPrepend=function(o){if(this.length+o.length<=GOOD_LEAF_SIZE)return new e(o.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(RopeSequence);RopeSequence.empty=new Leaf([]);var Append=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,o,s,a){var l=this.left.length;if(o<l&&this.left.forEachInner(r,o,Math.min(s,l),a)===!1||s>l&&this.right.forEachInner(r,Math.max(o-l,0),Math.min(this.length,s)-l,a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(r,o,s,a){var l=this.left.length;if(o>l&&this.right.forEachInvertedInner(r,o-l,Math.max(s,l)-l,a+l)===!1||s<l&&this.left.forEachInvertedInner(r,Math.min(o,l),s,a)===!1)return!1},e.prototype.sliceInner=function(r,o){if(r==0&&o==this.length)return this;var s=this.left.length;return o<=s?this.left.slice(r,o):r>=s?this.right.slice(r-s,o-s):this.left.slice(r,s).append(this.right.slice(0,o-s))},e.prototype.leafAppend=function(r){var o=this.right.leafAppend(r);if(o)return new e(this.left,o)},e.prototype.leafPrepend=function(r){var o=this.left.leafPrepend(r);if(o)return new e(o,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(RopeSequence);const max_empty_items=500;class Branch{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let o,s;n&&(o=this.remapping(r,this.items.length),s=o.maps.length);let a=e.tr,l,c,u=[],g=[];return this.items.forEach((C,v)=>{if(!C.step){o||(o=this.remapping(r,v+1),s=o.maps.length),s--,g.push(C);return}if(o){g.push(new Item(C.map));let m=C.step.map(o.slice(s)),S;m&&a.maybeStep(m).doc&&(S=a.mapping.maps[a.mapping.maps.length-1],u.push(new Item(S,void 0,void 0,u.length+g.length))),s--,S&&o.appendMap(S,s)}else a.maybeStep(C.step);if(C.selection)return l=o?C.selection.map(o.slice(s)):C.selection,c=new Branch(this.items.slice(0,r).append(g.reverse().concat(u)),this.eventCount-1),!1},this.items.length,0),{remaining:c,transform:a,selection:l}}addTransform(e,n,r,o){let s=[],a=this.eventCount,l=this.items,c=!o&&l.length?l.get(l.length-1):null;for(let g=0;g<e.steps.length;g++){let C=e.steps[g].invert(e.docs[g]),v=new Item(e.mapping.maps[g],C,n),m;(m=c&&c.merge(v))&&(v=m,g?s.pop():l=l.slice(0,l.length-1)),s.push(v),n&&(a++,n=void 0),o||(c=v)}let u=a-r.depth;return u>DEPTH_OVERFLOW&&(l=cutOffEvents(l,u),a-=u),new Branch(l.append(s),a)}remapping(e,n){let r=new Mapping;return this.items.forEach((o,s)=>{let a=o.mirrorOffset!=null&&s-o.mirrorOffset>=e?r.maps.length-o.mirrorOffset:void 0;r.appendMap(o.map,a)},e,n),r}addMaps(e){return this.eventCount==0?this:new Branch(this.items.append(e.map(n=>new Item(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],o=Math.max(0,this.items.length-n),s=e.mapping,a=e.steps.length,l=this.eventCount;this.items.forEach(v=>{v.selection&&l--},o);let c=n;this.items.forEach(v=>{let m=s.getMirror(--c);if(m==null)return;a=Math.min(a,m);let S=s.maps[m];if(v.step){let T=e.steps[m].invert(e.docs[m]),w=v.selection&&v.selection.map(s.slice(c+1,m));w&&l++,r.push(new Item(S,T,w))}else r.push(new Item(S))},o);let u=[];for(let v=n;v<a;v++)u.push(new Item(s.maps[v]));let g=this.items.slice(0,o).append(u).append(r),C=new Branch(g,l);return C.emptyItemCount()>max_empty_items&&(C=C.compress(this.items.length-r.length)),C}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,o=[],s=0;return this.items.forEach((a,l)=>{if(l>=e)o.push(a),a.selection&&s++;else if(a.step){let c=a.step.map(n.slice(r)),u=c&&c.getMap();if(r--,u&&n.appendMap(u,r),c){let g=a.selection&&a.selection.map(n.slice(r));g&&s++;let C=new Item(u.invert(),c,g),v,m=o.length-1;(v=o.length&&o[m].merge(C))?o[m]=v:o.push(C)}}else a.map&&r--},this.items.length,0),new Branch(RopeSequence.from(o.reverse()),s)}}Branch.empty=new Branch(RopeSequence.empty,0);function cutOffEvents(t,e){let n;return t.forEach((r,o)=>{if(r.selection&&e--==0)return n=o,!1}),t.slice(n)}class Item{constructor(e,n,r,o){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=o}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new Item(n.getMap().invert(),n,this.selection)}}}class HistoryState{constructor(e,n,r,o,s){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=o,this.prevComposition=s}}const DEPTH_OVERFLOW=20;function applyTransaction(t,e,n,r){let o=n.getMeta(historyKey),s;if(o)return o.historyState;n.getMeta(closeHistoryKey)&&(t=new HistoryState(t.done,t.undone,null,0,-1));let a=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(a&&a.getMeta(historyKey))return a.getMeta(historyKey).redo?new HistoryState(t.done.addTransform(n,void 0,r,mustPreserveItems(e)),t.undone,rangesFor(n.mapping.maps),t.prevTime,t.prevComposition):new HistoryState(t.done,t.undone.addTransform(n,void 0,r,mustPreserveItems(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(a&&a.getMeta("addToHistory")===!1)){let l=n.getMeta("composition"),c=t.prevTime==0||!a&&t.prevComposition!=l&&(t.prevTime<(n.time||0)-r.newGroupDelay||!isAdjacentTo(n,t.prevRanges)),u=a?mapRanges(t.prevRanges,n.mapping):rangesFor(n.mapping.maps);return new HistoryState(t.done.addTransform(n,c?e.selection.getBookmark():void 0,r,mustPreserveItems(e)),Branch.empty,u,n.time,l??t.prevComposition)}else return(s=n.getMeta("rebased"))?new HistoryState(t.done.rebased(n,s),t.undone.rebased(n,s),mapRanges(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new HistoryState(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),mapRanges(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function isAdjacentTo(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,o)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&o>=e[s]&&(n=!0)}),n}function rangesFor(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,o,s,a)=>e.push(s,a));return e}function mapRanges(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let o=e.map(t[r],1),s=e.map(t[r+1],-1);o<=s&&n.push(o,s)}return n}function histTransaction(t,e,n){let r=mustPreserveItems(e),o=historyKey.get(e).spec.config,s=(n?t.undone:t.done).popEvent(e,r);if(!s)return null;let a=s.selection.resolve(s.transform.doc),l=(n?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),o,r),c=new HistoryState(n?l:s.remaining,n?s.remaining:l,null,0,-1);return s.transform.setSelection(a).setMeta(historyKey,{redo:n,historyState:c})}let cachedPreserveItems=!1,cachedPreserveItemsPlugins=null;function mustPreserveItems(t){let e=t.plugins;if(cachedPreserveItemsPlugins!=e){cachedPreserveItems=!1,cachedPreserveItemsPlugins=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){cachedPreserveItems=!0;break}}return cachedPreserveItems}const historyKey=new PluginKey("history"),closeHistoryKey=new PluginKey("closeHistory");function history(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Plugin({key:historyKey,state:{init(){return new HistoryState(Branch.empty,Branch.empty,null,0,-1)},apply(e,n,r){return applyTransaction(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,o=r=="historyUndo"?undo:r=="historyRedo"?redo:null;return o?(n.preventDefault(),o(e.state,e.dispatch)):!1}}}})}function buildCommand(t,e){return(n,r)=>{let o=historyKey.getState(n);if(!o||(t?o.undone:o.done).eventCount==0)return!1;if(r){let s=histTransaction(o,n,t);s&&r(e?s.scrollIntoView():s)}return!0}}const undo=buildCommand(!1,!0),redo=buildCommand(!0,!0),History=Extension.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>undo(t,e),redo:()=>({state:t,dispatch:e})=>redo(t,e)}},addProseMirrorPlugins(){return[history(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),HorizontalRule=Node$1.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",mergeAttributes(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{const{selection:n}=e,{$from:r,$to:o}=n,s=t();return r.parentOffset===0?s.insertContentAt({from:Math.max(r.pos-1,0),to:o.pos},{type:this.name}):isNodeSelection(n)?s.insertContentAt(o.pos,{type:this.name}):s.insertContent({type:this.name}),s.command(({tr:a,dispatch:l})=>{var c;if(l){const{$to:u}=a.selection,g=u.end();if(u.nodeAfter)u.nodeAfter.isTextblock?a.setSelection(TextSelection.create(a.doc,u.pos+1)):u.nodeAfter.isBlock?a.setSelection(NodeSelection.create(a.doc,u.pos)):a.setSelection(TextSelection.create(a.doc,u.pos));else{const C=(c=u.parent.type.contentMatch.defaultType)===null||c===void 0?void 0:c.create();C&&(a.insert(g,C),a.setSelection(TextSelection.create(a.doc,g+1)))}a.scrollIntoView()}return!0}).run()}}},addInputRules(){return[nodeInputRule({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),starInputRegex=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,starPasteRegex=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,underscoreInputRegex=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,underscorePasteRegex=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,Italic=Mark.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",mergeAttributes(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[markInputRule({find:starInputRegex,type:this.type}),markInputRule({find:underscoreInputRegex,type:this.type})]},addPasteRules(){return[markPasteRule({find:starPasteRegex,type:this.type}),markPasteRule({find:underscorePasteRegex,type:this.type})]}}),ListItem=Node$1.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",mergeAttributes(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),ListItemName="listItem",TextStyleName="textStyle",inputRegex$1=/^(\d+)\.\s$/,OrderedList=Node$1.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:void 0,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",mergeAttributes(this.options.HTMLAttributes,n),0]:["ol",mergeAttributes(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(ListItemName,this.editor.getAttributes(TextStyleName)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=wrappingInputRule({find:inputRegex$1,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=wrappingInputRule({find:inputRegex$1,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(TextStyleName)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),Paragraph=Node$1.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",mergeAttributes(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),inputRegex=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,pasteRegex=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Strike=Mark.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",mergeAttributes(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[markInputRule({find:inputRegex,type:this.type})]},addPasteRules(){return[markPasteRule({find:pasteRegex,type:this.type})]}}),Text$1=Node$1.create({name:"text",group:"inline"}),StarterKit=Extension.create({name:"starterKit",addExtensions(){var t,e,n,r,o,s,a,l,c,u,g,C,v,m,S,T,w,N;const D=[];return this.options.bold!==!1&&D.push(Bold.configure((t=this.options)===null||t===void 0?void 0:t.bold)),this.options.blockquote!==!1&&D.push(Blockquote.configure((e=this.options)===null||e===void 0?void 0:e.blockquote)),this.options.bulletList!==!1&&D.push(BulletList.configure((n=this.options)===null||n===void 0?void 0:n.bulletList)),this.options.code!==!1&&D.push(Code.configure((r=this.options)===null||r===void 0?void 0:r.code)),this.options.codeBlock!==!1&&D.push(CodeBlock.configure((o=this.options)===null||o===void 0?void 0:o.codeBlock)),this.options.document!==!1&&D.push(Document.configure((s=this.options)===null||s===void 0?void 0:s.document)),this.options.dropcursor!==!1&&D.push(Dropcursor.configure((a=this.options)===null||a===void 0?void 0:a.dropcursor)),this.options.gapcursor!==!1&&D.push(Gapcursor.configure((l=this.options)===null||l===void 0?void 0:l.gapcursor)),this.options.hardBreak!==!1&&D.push(HardBreak.configure((c=this.options)===null||c===void 0?void 0:c.hardBreak)),this.options.heading!==!1&&D.push(Heading.configure((u=this.options)===null||u===void 0?void 0:u.heading)),this.options.history!==!1&&D.push(History.configure((g=this.options)===null||g===void 0?void 0:g.history)),this.options.horizontalRule!==!1&&D.push(HorizontalRule.configure((C=this.options)===null||C===void 0?void 0:C.horizontalRule)),this.options.italic!==!1&&D.push(Italic.configure((v=this.options)===null||v===void 0?void 0:v.italic)),this.options.listItem!==!1&&D.push(ListItem.configure((m=this.options)===null||m===void 0?void 0:m.listItem)),this.options.orderedList!==!1&&D.push(OrderedList.configure((S=this.options)===null||S===void 0?void 0:S.orderedList)),this.options.paragraph!==!1&&D.push(Paragraph.configure((T=this.options)===null||T===void 0?void 0:T.paragraph)),this.options.strike!==!1&&D.push(Strike.configure((w=this.options)===null||w===void 0?void 0:w.strike)),this.options.text!==!1&&D.push(Text$1.configure((N=this.options)===null||N===void 0?void 0:N.text)),D}}),TextAlign=Extension.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:t=>{const e=t.style.textAlign;return this.options.alignments.includes(e)?e:this.options.defaultAlignment},renderHTML:t=>t.textAlign?{style:`text-align: ${t.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:t=>({commands:e})=>this.options.alignments.includes(t)?this.options.types.map(n=>e.updateAttributes(n,{textAlign:t})).every(n=>n):!1,unsetTextAlign:()=>({commands:t})=>this.options.types.map(e=>t.resetAttributes(e,"textAlign")).every(e=>e)}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),mergeNestedSpanStyles=t=>{if(!t.children.length)return;const e=t.querySelectorAll("span");e&&e.forEach(n=>{var r,o;const s=n.getAttribute("style"),a=(o=(r=n.parentElement)===null||r===void 0?void 0:r.closest("span"))===null||o===void 0?void 0:o.getAttribute("style");n.setAttribute("style",`${a};${s}`)})},TextStyle=Mark.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{},mergeNestedSpanStyles:!1}},parseHTML(){return[{tag:"span",getAttrs:t=>t.hasAttribute("style")?(this.options.mergeNestedSpanStyles&&mergeNestedSpanStyles(t),{}):!1}]},renderHTML({HTMLAttributes:t}){return["span",mergeAttributes(this.options.HTMLAttributes,t),0]},addCommands(){return{removeEmptyTextStyle:()=>({tr:t})=>{const{selection:e}=t;return t.doc.nodesBetween(e.from,e.to,(n,r)=>{if(n.isTextblock)return!0;n.marks.filter(o=>o.type===this.type).some(o=>Object.values(o.attrs).some(s=>!!s))||t.removeMark(r,r+n.nodeSize,this.type)}),!0}}}}),Color=Extension.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:t=>{var e;return(e=t.style.color)===null||e===void 0?void 0:e.replace(/['"]+/g,"")},renderHTML:t=>t.color?{style:`color: ${t.color}`}:{}}}}]},addCommands(){return{setColor:t=>({chain:e})=>e().setMark("textStyle",{color:t}).run(),unsetColor:()=>({chain:t})=>t().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}),encodedTlds="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2ntley5rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6logistics9properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3ncaster6d0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2psy3ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mögensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",encodedUtlds="ελ1υ2бг1ел3дети4ею2католик6ом3мкд2он1сква6онлайн5рг3рус2ф2сайт3рб3укр3қаз3հայ3ישראל5קום3ابوظبي5رامكو5لاردن4بحرين5جزائر5سعودية6عليان5مغرب5مارات5یران5بارت2زار4يتك3ھارت5تونس4سودان3رية5شبكة4عراق2ب2مان4فلسطين6قطر3كاثوليك6وم3مصر2ليسيا5وريتانيا7قع4همراه5پاکستان7ڀارت4कॉम3नेट3भारत0म्3ोत5संगठन5বাংলা5ভারত2ৰত4ਭਾਰਤ4ભારત4ଭାରତ4இந்தியா6லங்கை6சிங்கப்பூர்11భారత్5ಭಾರತ4ഭാരതം5ලංකා4คอม3ไทย3ລາວ3გე2みんな3アマゾン4クラウド4グーグル4コム2ストア3セール3ファッション6ポイント4世界2中信1国1國1文网3亚马逊3企业2佛山2信息2健康2八卦2公司1益2台湾1灣2商城1店1标2嘉里0大酒店5在线2大拿2天主教3娱乐2家電2广东2微博2慈善2我爱你3手机2招聘2政务1府2新加坡2闻2时尚2書籍2机构2淡马锡3游戏2澳門2点看2移动2组织机构4网址1店1站1络2联通2谷歌2购物2通販2集团2電訊盈科4飞利浦3食品2餐厅2香格里拉3港2닷넷1컴2삼성2한국2",assign=(t,e)=>{for(const n in e)t[n]=e[n];return t},numeric="numeric",ascii="ascii",alpha="alpha",asciinumeric="asciinumeric",alphanumeric="alphanumeric",domain="domain",emoji="emoji",scheme="scheme",slashscheme="slashscheme",whitespace="whitespace";function registerGroup(t,e){return t in e||(e[t]=[]),e[t]}function addToGroups(t,e,n){e[numeric]&&(e[asciinumeric]=!0,e[alphanumeric]=!0),e[ascii]&&(e[asciinumeric]=!0,e[alpha]=!0),e[asciinumeric]&&(e[alphanumeric]=!0),e[alpha]&&(e[alphanumeric]=!0),e[alphanumeric]&&(e[domain]=!0),e[emoji]&&(e[domain]=!0);for(const r in e){const o=registerGroup(r,n);o.indexOf(t)<0&&o.push(t)}}function flagsForToken(t,e){const n={};for(const r in e)e[r].indexOf(t)>=0&&(n[r]=!0);return n}function State(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}State.groups={};State.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let r=0;r<e.jr.length;r++){const o=e.jr[r][0],s=e.jr[r][1];if(s&&o.test(t))return s}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,n,r){for(let o=0;o<t.length;o++)this.tt(t[o],e,n,r)},tr(t,e,n,r){r=r||State.groups;let o;return e&&e.j?o=e:(o=new State(e),n&&r&&addToGroups(e,n,r)),this.jr.push([t,o]),o},ts(t,e,n,r){let o=this;const s=t.length;if(!s)return o;for(let a=0;a<s-1;a++)o=o.tt(t[a]);return o.tt(t[s-1],e,n,r)},tt(t,e,n,r){r=r||State.groups;const o=this;if(e&&e.j)return o.j[t]=e,e;const s=e;let a,l=o.go(t);if(l?(a=new State,assign(a.j,l.j),a.jr.push.apply(a.jr,l.jr),a.jd=l.jd,a.t=l.t):a=new State,s){if(r)if(a.t&&typeof a.t=="string"){const c=assign(flagsForToken(a.t,r),n);addToGroups(s,c,r)}else n&&addToGroups(s,n,r);a.t=s}return o.j[t]=a,a}};const ta=(t,e,n,r,o)=>t.ta(e,n,r,o),tr=(t,e,n,r,o)=>t.tr(e,n,r,o),ts=(t,e,n,r,o)=>t.ts(e,n,r,o),tt=(t,e,n,r,o)=>t.tt(e,n,r,o),WORD="WORD",UWORD="UWORD",ASCIINUMERICAL="ASCIINUMERICAL",ALPHANUMERICAL="ALPHANUMERICAL",LOCALHOST="LOCALHOST",TLD="TLD",UTLD="UTLD",SCHEME="SCHEME",SLASH_SCHEME="SLASH_SCHEME",NUM="NUM",WS="WS",NL="NL",OPENBRACE="OPENBRACE",CLOSEBRACE="CLOSEBRACE",OPENBRACKET="OPENBRACKET",CLOSEBRACKET="CLOSEBRACKET",OPENPAREN="OPENPAREN",CLOSEPAREN="CLOSEPAREN",OPENANGLEBRACKET="OPENANGLEBRACKET",CLOSEANGLEBRACKET="CLOSEANGLEBRACKET",FULLWIDTHLEFTPAREN="FULLWIDTHLEFTPAREN",FULLWIDTHRIGHTPAREN="FULLWIDTHRIGHTPAREN",LEFTCORNERBRACKET="LEFTCORNERBRACKET",RIGHTCORNERBRACKET="RIGHTCORNERBRACKET",LEFTWHITECORNERBRACKET="LEFTWHITECORNERBRACKET",RIGHTWHITECORNERBRACKET="RIGHTWHITECORNERBRACKET",FULLWIDTHLESSTHAN="FULLWIDTHLESSTHAN",FULLWIDTHGREATERTHAN="FULLWIDTHGREATERTHAN",AMPERSAND="AMPERSAND",APOSTROPHE="APOSTROPHE",ASTERISK="ASTERISK",AT="AT",BACKSLASH="BACKSLASH",BACKTICK="BACKTICK",CARET="CARET",COLON="COLON",COMMA="COMMA",DOLLAR="DOLLAR",DOT="DOT",EQUALS="EQUALS",EXCLAMATION="EXCLAMATION",HYPHEN="HYPHEN",PERCENT="PERCENT",PIPE="PIPE",PLUS="PLUS",POUND="POUND",QUERY="QUERY",QUOTE="QUOTE",FULLWIDTHMIDDLEDOT="FULLWIDTHMIDDLEDOT",SEMI="SEMI",SLASH="SLASH",TILDE="TILDE",UNDERSCORE="UNDERSCORE",EMOJI$1="EMOJI",SYM="SYM";var tk=Object.freeze({__proto__:null,WORD,UWORD,ASCIINUMERICAL,ALPHANUMERICAL,LOCALHOST,TLD,UTLD,SCHEME,SLASH_SCHEME,NUM,WS,NL,OPENBRACE,CLOSEBRACE,OPENBRACKET,CLOSEBRACKET,OPENPAREN,CLOSEPAREN,OPENANGLEBRACKET,CLOSEANGLEBRACKET,FULLWIDTHLEFTPAREN,FULLWIDTHRIGHTPAREN,LEFTCORNERBRACKET,RIGHTCORNERBRACKET,LEFTWHITECORNERBRACKET,RIGHTWHITECORNERBRACKET,FULLWIDTHLESSTHAN,FULLWIDTHGREATERTHAN,AMPERSAND,APOSTROPHE,ASTERISK,AT,BACKSLASH,BACKTICK,CARET,COLON,COMMA,DOLLAR,DOT,EQUALS,EXCLAMATION,HYPHEN,PERCENT,PIPE,PLUS,POUND,QUERY,QUOTE,FULLWIDTHMIDDLEDOT,SEMI,SLASH,TILDE,UNDERSCORE,EMOJI:EMOJI$1,SYM});const ASCII_LETTER=/[a-z]/,LETTER=/\p{L}/u,EMOJI=/\p{Emoji}/u,DIGIT=/\d/,SPACE=/\s/,CR="\r",LF=`
`,EMOJI_VARIATION="️",EMOJI_JOINER="‍",OBJECT_REPLACEMENT="￼";let tlds=null,utlds=null;function init$2(t=[]){const e={};State.groups=e;const n=new State;tlds==null&&(tlds=decodeTlds(encodedTlds)),utlds==null&&(utlds=decodeTlds(encodedUtlds)),tt(n,"'",APOSTROPHE),tt(n,"{",OPENBRACE),tt(n,"}",CLOSEBRACE),tt(n,"[",OPENBRACKET),tt(n,"]",CLOSEBRACKET),tt(n,"(",OPENPAREN),tt(n,")",CLOSEPAREN),tt(n,"<",OPENANGLEBRACKET),tt(n,">",CLOSEANGLEBRACKET),tt(n,"（",FULLWIDTHLEFTPAREN),tt(n,"）",FULLWIDTHRIGHTPAREN),tt(n,"「",LEFTCORNERBRACKET),tt(n,"」",RIGHTCORNERBRACKET),tt(n,"『",LEFTWHITECORNERBRACKET),tt(n,"』",RIGHTWHITECORNERBRACKET),tt(n,"＜",FULLWIDTHLESSTHAN),tt(n,"＞",FULLWIDTHGREATERTHAN),tt(n,"&",AMPERSAND),tt(n,"*",ASTERISK),tt(n,"@",AT),tt(n,"`",BACKTICK),tt(n,"^",CARET),tt(n,":",COLON),tt(n,",",COMMA),tt(n,"$",DOLLAR),tt(n,".",DOT),tt(n,"=",EQUALS),tt(n,"!",EXCLAMATION),tt(n,"-",HYPHEN),tt(n,"%",PERCENT),tt(n,"|",PIPE),tt(n,"+",PLUS),tt(n,"#",POUND),tt(n,"?",QUERY),tt(n,'"',QUOTE),tt(n,"/",SLASH),tt(n,";",SEMI),tt(n,"~",TILDE),tt(n,"_",UNDERSCORE),tt(n,"\\",BACKSLASH),tt(n,"・",FULLWIDTHMIDDLEDOT);const r=tr(n,DIGIT,NUM,{[numeric]:!0});tr(r,DIGIT,r);const o=tr(r,ASCII_LETTER,ASCIINUMERICAL,{[asciinumeric]:!0}),s=tr(r,LETTER,ALPHANUMERICAL,{[alphanumeric]:!0}),a=tr(n,ASCII_LETTER,WORD,{[ascii]:!0});tr(a,DIGIT,o),tr(a,ASCII_LETTER,a),tr(o,DIGIT,o),tr(o,ASCII_LETTER,o);const l=tr(n,LETTER,UWORD,{[alpha]:!0});tr(l,ASCII_LETTER),tr(l,DIGIT,s),tr(l,LETTER,l),tr(s,DIGIT,s),tr(s,ASCII_LETTER),tr(s,LETTER,s);const c=tt(n,LF,NL,{[whitespace]:!0}),u=tt(n,CR,WS,{[whitespace]:!0}),g=tr(n,SPACE,WS,{[whitespace]:!0});tt(n,OBJECT_REPLACEMENT,g),tt(u,LF,c),tt(u,OBJECT_REPLACEMENT,g),tr(u,SPACE,g),tt(g,CR),tt(g,LF),tr(g,SPACE,g),tt(g,OBJECT_REPLACEMENT,g);const C=tr(n,EMOJI,EMOJI$1,{[emoji]:!0});tt(C,"#"),tr(C,EMOJI,C),tt(C,EMOJI_VARIATION,C);const v=tt(C,EMOJI_JOINER);tt(v,"#"),tr(v,EMOJI,C);const m=[[ASCII_LETTER,a],[DIGIT,o]],S=[[ASCII_LETTER,null],[LETTER,l],[DIGIT,s]];for(let T=0;T<tlds.length;T++)fastts(n,tlds[T],TLD,WORD,m);for(let T=0;T<utlds.length;T++)fastts(n,utlds[T],UTLD,UWORD,S);addToGroups(TLD,{tld:!0,ascii:!0},e),addToGroups(UTLD,{utld:!0,alpha:!0},e),fastts(n,"file",SCHEME,WORD,m),fastts(n,"mailto",SCHEME,WORD,m),fastts(n,"http",SLASH_SCHEME,WORD,m),fastts(n,"https",SLASH_SCHEME,WORD,m),fastts(n,"ftp",SLASH_SCHEME,WORD,m),fastts(n,"ftps",SLASH_SCHEME,WORD,m),addToGroups(SCHEME,{scheme:!0,ascii:!0},e),addToGroups(SLASH_SCHEME,{slashscheme:!0,ascii:!0},e),t=t.sort((T,w)=>T[0]>w[0]?1:-1);for(let T=0;T<t.length;T++){const w=t[T][0],D=t[T][1]?{[scheme]:!0}:{[slashscheme]:!0};w.indexOf("-")>=0?D[domain]=!0:ASCII_LETTER.test(w)?DIGIT.test(w)?D[asciinumeric]=!0:D[ascii]=!0:D[numeric]=!0,ts(n,w,w,D)}return ts(n,"localhost",LOCALHOST,{ascii:!0}),n.jd=new State(SYM),{start:n,tokens:assign({groups:e},tk)}}function run$1(t,e){const n=stringToArray(e.replace(/[A-Z]/g,l=>l.toLowerCase())),r=n.length,o=[];let s=0,a=0;for(;a<r;){let l=t,c=null,u=0,g=null,C=-1,v=-1;for(;a<r&&(c=l.go(n[a]));)l=c,l.accepts()?(C=0,v=0,g=l):C>=0&&(C+=n[a].length,v++),u+=n[a].length,s+=n[a].length,a++;s-=C,a-=v,u-=C,o.push({t:g.t,v:e.slice(s-u,s),s:s-u,e:s})}return o}function stringToArray(t){const e=[],n=t.length;let r=0;for(;r<n;){let o=t.charCodeAt(r),s,a=o<55296||o>56319||r+1===n||(s=t.charCodeAt(r+1))<56320||s>57343?t[r]:t.slice(r,r+2);e.push(a),r+=a.length}return e}function fastts(t,e,n,r,o){let s;const a=e.length;for(let l=0;l<a-1;l++){const c=e[l];t.j[c]?s=t.j[c]:(s=new State(r),s.jr=o.slice(),t.j[c]=s),t=s}return s=new State(n),s.jr=o.slice(),t.j[e[a-1]]=s,s}function decodeTlds(t){const e=[],n=[];let r=0,o="0123456789";for(;r<t.length;){let s=0;for(;o.indexOf(t[r+s])>=0;)s++;if(s>0){e.push(n.join(""));for(let a=parseInt(t.substring(r,r+s),10);a>0;a--)n.pop();r+=s}else n.push(t[r]),r++}return e}const defaults={defaultProtocol:"http",events:null,format:noop,formatHref:noop,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Options(t,e=null){let n=assign({},defaults);t&&(n=assign(n,t instanceof Options?t.o:t));const r=n.ignoreTags,o=[];for(let s=0;s<r.length;s++)o.push(r[s].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=o}Options.prototype={o:defaults,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const r=e!=null;let o=this.o[t];return o&&(typeof o=="object"?(o=n.t in o?o[n.t]:defaults[t],typeof o=="function"&&r&&(o=o(e,n))):typeof o=="function"&&r&&(o=o(e,n.t,n)),o)},getObj(t,e,n){let r=this.o[t];return typeof r=="function"&&e!=null&&(r=r(e,n.t,n)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function noop(t){return t}function MultiToken(t,e){this.t="token",this.v=t,this.tk=e}MultiToken.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),r=t.get("format",e,this);return n&&r.length>n?r.substring(0,n)+"…":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=defaults.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",n,this),o=t.get("tagName",n,e),s=this.toFormattedString(t),a={},l=t.get("className",n,e),c=t.get("target",n,e),u=t.get("rel",n,e),g=t.getObj("attributes",n,e),C=t.getObj("events",n,e);return a.href=r,l&&(a.class=l),c&&(a.target=c),u&&(a.rel=u),g&&assign(a,g),{tagName:o,attributes:a,content:s,eventListeners:C}}};function createTokenClass(t,e){class n extends MultiToken{constructor(o,s){super(o,s),this.t=t}}for(const r in e)n.prototype[r]=e[r];return n.t=t,n}const Email=createTokenClass("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),Text=createTokenClass("text"),Nl=createTokenClass("nl"),Url=createTokenClass("url",{isLink:!0,toHref(t=defaults.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==LOCALHOST&&t[1].t===COLON}}),makeState=t=>new State(t);function init$1({groups:t}){const e=t.domain.concat([AMPERSAND,ASTERISK,AT,BACKSLASH,BACKTICK,CARET,DOLLAR,EQUALS,HYPHEN,NUM,PERCENT,PIPE,PLUS,POUND,SLASH,SYM,TILDE,UNDERSCORE]),n=[COLON,COMMA,DOT,EXCLAMATION,PERCENT,QUERY,QUOTE,SEMI,OPENANGLEBRACKET,CLOSEANGLEBRACKET,OPENBRACE,CLOSEBRACE,CLOSEBRACKET,OPENBRACKET,OPENPAREN,CLOSEPAREN,FULLWIDTHLEFTPAREN,FULLWIDTHRIGHTPAREN,LEFTCORNERBRACKET,RIGHTCORNERBRACKET,LEFTWHITECORNERBRACKET,RIGHTWHITECORNERBRACKET,FULLWIDTHLESSTHAN,FULLWIDTHGREATERTHAN],r=[AMPERSAND,APOSTROPHE,ASTERISK,BACKSLASH,BACKTICK,CARET,DOLLAR,EQUALS,HYPHEN,OPENBRACE,CLOSEBRACE,PERCENT,PIPE,PLUS,POUND,QUERY,SLASH,SYM,TILDE,UNDERSCORE],o=makeState(),s=tt(o,TILDE);ta(s,r,s),ta(s,t.domain,s);const a=makeState(),l=makeState(),c=makeState();ta(o,t.domain,a),ta(o,t.scheme,l),ta(o,t.slashscheme,c),ta(a,r,s),ta(a,t.domain,a);const u=tt(a,AT);tt(s,AT,u),tt(l,AT,u),tt(c,AT,u);const g=tt(s,DOT);ta(g,r,s),ta(g,t.domain,s);const C=makeState();ta(u,t.domain,C),ta(C,t.domain,C);const v=tt(C,DOT);ta(v,t.domain,C);const m=makeState(Email);ta(v,t.tld,m),ta(v,t.utld,m),tt(u,LOCALHOST,m);const S=tt(C,HYPHEN);tt(S,HYPHEN,S),ta(S,t.domain,C),ta(m,t.domain,C),tt(m,DOT,v),tt(m,HYPHEN,S);const T=tt(m,COLON);ta(T,t.numeric,Email);const w=tt(a,HYPHEN),N=tt(a,DOT);tt(w,HYPHEN,w),ta(w,t.domain,a),ta(N,r,s),ta(N,t.domain,a);const D=makeState(Url);ta(N,t.tld,D),ta(N,t.utld,D),ta(D,t.domain,a),ta(D,r,s),tt(D,DOT,N),tt(D,HYPHEN,w),tt(D,AT,u);const k=tt(D,COLON),L=makeState(Url);ta(k,t.numeric,L);const H=makeState(Url),R=makeState();ta(H,e,H),ta(H,n,R),ta(R,e,H),ta(R,n,R),tt(D,SLASH,H),tt(L,SLASH,H);const B=tt(l,COLON),Y=tt(c,COLON),K=tt(Y,SLASH),se=tt(K,SLASH);ta(l,t.domain,a),tt(l,DOT,N),tt(l,HYPHEN,w),ta(c,t.domain,a),tt(c,DOT,N),tt(c,HYPHEN,w),ta(B,t.domain,H),tt(B,SLASH,H),tt(B,QUERY,H),ta(se,t.domain,H),ta(se,e,H),tt(se,SLASH,H);const pe=[[OPENBRACE,CLOSEBRACE],[OPENBRACKET,CLOSEBRACKET],[OPENPAREN,CLOSEPAREN],[OPENANGLEBRACKET,CLOSEANGLEBRACKET],[FULLWIDTHLEFTPAREN,FULLWIDTHRIGHTPAREN],[LEFTCORNERBRACKET,RIGHTCORNERBRACKET],[LEFTWHITECORNERBRACKET,RIGHTWHITECORNERBRACKET],[FULLWIDTHLESSTHAN,FULLWIDTHGREATERTHAN]];for(let le=0;le<pe.length;le++){const[Ee,Ne]=pe[le],_e=tt(H,Ee);tt(R,Ee,_e),tt(_e,Ne,H);const me=makeState(Url);ta(_e,e,me);const Ke=makeState();ta(_e,n),ta(me,e,me),ta(me,n,Ke),ta(Ke,e,me),ta(Ke,n,Ke),tt(me,Ne,H),tt(Ke,Ne,H)}return tt(o,LOCALHOST,D),tt(o,NL,Nl),{start:o,tokens:tk}}function run(t,e,n){let r=n.length,o=0,s=[],a=[];for(;o<r;){let l=t,c=null,u=null,g=0,C=null,v=-1;for(;o<r&&!(c=l.go(n[o].t));)a.push(n[o++]);for(;o<r&&(u=c||l.go(n[o].t));)c=null,l=u,l.accepts()?(v=0,C=l):v>=0&&v++,o++,g++;if(v<0)o-=g,o<r&&(a.push(n[o]),o++);else{a.length>0&&(s.push(initMultiToken(Text,e,a)),a=[]),o-=v,g-=v;const m=C.t,S=n.slice(o-g,o);s.push(initMultiToken(m,e,S))}}return a.length>0&&s.push(initMultiToken(Text,e,a)),s}function initMultiToken(t,e,n){const r=n[0].s,o=n[n.length-1].e,s=e.slice(r,o);return new t(s,n)}const warn=typeof console<"u"&&console&&console.warn||(()=>{}),warnAdvice="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",INIT={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function reset(){return State.groups={},INIT.scanner=null,INIT.parser=null,INIT.tokenQueue=[],INIT.pluginQueue=[],INIT.customSchemes=[],INIT.initialized=!1,INIT}function registerCustomProtocol(t,e=!1){if(INIT.initialized&&warn(`linkifyjs: already initialized - will not register custom scheme "${t}" ${warnAdvice}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);INIT.customSchemes.push([t,e])}function init(){INIT.scanner=init$2(INIT.customSchemes);for(let t=0;t<INIT.tokenQueue.length;t++)INIT.tokenQueue[t][1]({scanner:INIT.scanner});INIT.parser=init$1(INIT.scanner.tokens);for(let t=0;t<INIT.pluginQueue.length;t++)INIT.pluginQueue[t][1]({scanner:INIT.scanner,parser:INIT.parser});return INIT.initialized=!0,INIT}function tokenize(t){return INIT.initialized||init(),run(INIT.parser.start,t,run$1(INIT.scanner.start,t))}tokenize.scan=run$1;function find(t,e=null,n=null){if(e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const r=new Options(n),o=tokenize(t),s=[];for(let a=0;a<o.length;a++){const l=o[a];l.isLink&&(!e||l.t===e)&&r.check(l)&&s.push(l.toFormattedObject(r))}return s}function isValidLinkStructure(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function autolink(t){return new Plugin({key:new PluginKey("autolink"),appendTransaction:(e,n,r)=>{const o=e.some(u=>u.docChanged)&&!n.doc.eq(r.doc),s=e.some(u=>u.getMeta("preventAutolink"));if(!o||s)return;const{tr:a}=r,l=combineTransactionSteps(n.doc,[...e]);if(getChangedRanges(l).forEach(({newRange:u})=>{const g=findChildrenInRange(r.doc,u,m=>m.isTextblock);let C,v;if(g.length>1?(C=g[0],v=r.doc.textBetween(C.pos,C.pos+C.node.nodeSize,void 0," ")):g.length&&r.doc.textBetween(u.from,u.to," "," ").endsWith(" ")&&(C=g[0],v=r.doc.textBetween(C.pos,u.to,void 0," ")),C&&v){const m=v.split(" ").filter(N=>N!=="");if(m.length<=0)return!1;const S=m[m.length-1],T=C.pos+v.lastIndexOf(S);if(!S)return!1;const w=tokenize(S).map(N=>N.toObject(t.defaultProtocol));if(!isValidLinkStructure(w))return!1;w.filter(N=>N.isLink).map(N=>({...N,from:T+N.start+1,to:T+N.end+1})).filter(N=>r.schema.marks.code?!r.doc.rangeHasMark(N.from,N.to,r.schema.marks.code):!0).filter(N=>t.validate(N.value)).filter(N=>t.shouldAutoLink(N.value)).forEach(N=>{getMarksBetween(N.from,N.to,r.doc).some(D=>D.mark.type===t.type)||a.addMark(N.from,N.to,t.type.create({href:N.href}))})}}),!!a.steps.length)return a}})}function clickHandler(t){return new Plugin({key:new PluginKey("handleClickLink"),props:{handleClick:(e,n,r)=>{var o,s;if(r.button!==0||!e.editable)return!1;let a=r.target;const l=[];for(;a.nodeName!=="DIV";)l.push(a),a=a.parentNode;if(!l.find(v=>v.nodeName==="A"))return!1;const c=getAttributes(e.state,t.type.name),u=r.target,g=(o=u==null?void 0:u.href)!==null&&o!==void 0?o:c.href,C=(s=u==null?void 0:u.target)!==null&&s!==void 0?s:c.target;return u&&g?(window.open(g,C),!0):!1}}})}function pasteHandler(t){return new Plugin({key:new PluginKey("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{state:o}=e,{selection:s}=o,{empty:a}=s;if(a)return!1;let l="";r.content.forEach(u=>{l+=u.textContent});const c=find(l,{defaultProtocol:t.defaultProtocol}).find(u=>u.isLink&&u.value===l);return!l||!c?!1:(t.editor.commands.setMark(t.type,{href:c.href}),!0)}}})}const ATTR_WHITESPACE=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g;function isAllowedUri(t,e){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const o=typeof r=="string"?r:r.scheme;o&&n.push(o)}),!t||t.replace(ATTR_WHITESPACE,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z+.-]+(?:[^a-z+.-:]|$))`,"i"))}const Link=Mark.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){registerCustomProtocol(t);return}registerCustomProtocol(t.scheme,t.optionalSlashes)})},onDestroy(){reset()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!isAllowedUri(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>!!t}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:n=>!!isAllowedUri(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!isAllowedUri(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",mergeAttributes(this.options.HTMLAttributes,t),0]:["a",mergeAttributes(this.options.HTMLAttributes,{...t,href:""}),0]},addCommands(){return{setLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!isAllowedUri(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!isAllowedUri(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run():!1},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[markPasteRule({find:t=>{const e=[];if(t){const{protocols:n,defaultProtocol:r}=this.options,o=find(t).filter(s=>s.isLink&&this.options.isAllowedUri(s.value,{defaultValidate:a=>!!isAllowedUri(a,n),protocols:n,defaultProtocol:r}));o.length&&o.forEach(s=>e.push({text:s.value,data:{href:s.href},index:s.start}))}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)===null||e===void 0?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:n}=this.options;return this.options.autolink&&t.push(autolink({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:o=>!!isAllowedUri(o,e),protocols:e,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&t.push(clickHandler({type:this.type})),this.options.linkOnPaste&&t.push(pasteHandler({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),t}}),Underline=Mark.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",mergeAttributes(this.options.HTMLAttributes,t),0]},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});var readFromCache,addToCache;if(typeof WeakMap<"u"){let t=new WeakMap;readFromCache=e=>t.get(e),addToCache=(e,n)=>(t.set(e,n),n)}else{const t=[];let n=0;readFromCache=r=>{for(let o=0;o<t.length;o+=2)if(t[o]==r)return t[o+1]},addToCache=(r,o)=>(n==10&&(n=0),t[n++]=r,t[n++]=o)}var TableMap=class{constructor(t,e,n,r){this.width=t,this.height=e,this.map=n,this.problems=r}findCell(t){for(let e=0;e<this.map.length;e++){const n=this.map[e];if(n!=t)continue;const r=e%this.width,o=e/this.width|0;let s=r+1,a=o+1;for(let l=1;s<this.width&&this.map[e+l]==n;l++)s++;for(let l=1;a<this.height&&this.map[e+this.width*l]==n;l++)a++;return{left:r,top:o,right:s,bottom:a}}throw new RangeError(`No cell with offset ${t} found`)}colCount(t){for(let e=0;e<this.map.length;e++)if(this.map[e]==t)return e%this.width;throw new RangeError(`No cell with offset ${t} found`)}nextCell(t,e,n){const{left:r,right:o,top:s,bottom:a}=this.findCell(t);return e=="horiz"?(n<0?r==0:o==this.width)?null:this.map[s*this.width+(n<0?r-1:o)]:(n<0?s==0:a==this.height)?null:this.map[r+this.width*(n<0?s-1:a)]}rectBetween(t,e){const{left:n,right:r,top:o,bottom:s}=this.findCell(t),{left:a,right:l,top:c,bottom:u}=this.findCell(e);return{left:Math.min(n,a),top:Math.min(o,c),right:Math.max(r,l),bottom:Math.max(s,u)}}cellsInRect(t){const e=[],n={};for(let r=t.top;r<t.bottom;r++)for(let o=t.left;o<t.right;o++){const s=r*this.width+o,a=this.map[s];n[a]||(n[a]=!0,!(o==t.left&&o&&this.map[s-1]==a||r==t.top&&r&&this.map[s-this.width]==a)&&e.push(a))}return e}positionAt(t,e,n){for(let r=0,o=0;;r++){const s=o+n.child(r).nodeSize;if(r==t){let a=e+t*this.width;const l=(t+1)*this.width;for(;a<l&&this.map[a]<o;)a++;return a==l?s-1:this.map[a]}o=s}}static get(t){return readFromCache(t)||addToCache(t,computeMap(t))}};function computeMap(t){if(t.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+t.type.name);const e=findWidth(t),n=t.childCount,r=[];let o=0,s=null;const a=[];for(let u=0,g=e*n;u<g;u++)r[u]=0;for(let u=0,g=0;u<n;u++){const C=t.child(u);g++;for(let S=0;;S++){for(;o<r.length&&r[o]!=0;)o++;if(S==C.childCount)break;const T=C.child(S),{colspan:w,rowspan:N,colwidth:D}=T.attrs;for(let k=0;k<N;k++){if(k+u>=n){(s||(s=[])).push({type:"overlong_rowspan",pos:g,n:N-k});break}const L=o+k*e;for(let H=0;H<w;H++){r[L+H]==0?r[L+H]=g:(s||(s=[])).push({type:"collision",row:u,pos:g,n:w-H});const R=D&&D[H];if(R){const B=(L+H)%e*2,Y=a[B];Y==null||Y!=R&&a[B+1]==1?(a[B]=R,a[B+1]=1):Y==R&&a[B+1]++}}}o+=w,g+=T.nodeSize}const v=(u+1)*e;let m=0;for(;o<v;)r[o++]==0&&m++;m&&(s||(s=[])).push({type:"missing",row:u,n:m}),g++}const l=new TableMap(e,n,r,s);let c=!1;for(let u=0;!c&&u<a.length;u+=2)a[u]!=null&&a[u+1]<n&&(c=!0);return c&&findBadColWidths(l,a,t),l}function findWidth(t){let e=-1,n=!1;for(let r=0;r<t.childCount;r++){const o=t.child(r);let s=0;if(n)for(let a=0;a<r;a++){const l=t.child(a);for(let c=0;c<l.childCount;c++){const u=l.child(c);a+u.attrs.rowspan>r&&(s+=u.attrs.colspan)}}for(let a=0;a<o.childCount;a++){const l=o.child(a);s+=l.attrs.colspan,l.attrs.rowspan>1&&(n=!0)}e==-1?e=s:e!=s&&(e=Math.max(e,s))}return e}function findBadColWidths(t,e,n){t.problems||(t.problems=[]);const r={};for(let o=0;o<t.map.length;o++){const s=t.map[o];if(r[s])continue;r[s]=!0;const a=n.nodeAt(s);if(!a)throw new RangeError(`No cell with offset ${s} found`);let l=null;const c=a.attrs;for(let u=0;u<c.colspan;u++){const g=(o+u)%t.width,C=e[g*2];C!=null&&(!c.colwidth||c.colwidth[u]!=C)&&((l||(l=freshColWidth(c)))[u]=C)}l&&t.problems.unshift({type:"colwidth mismatch",pos:s,colwidth:l})}}function freshColWidth(t){if(t.colwidth)return t.colwidth.slice();const e=[];for(let n=0;n<t.colspan;n++)e.push(0);return e}function tableNodeTypes(t){let e=t.cached.tableNodeTypes;if(!e){e=t.cached.tableNodeTypes={};for(const n in t.nodes){const r=t.nodes[n],o=r.spec.tableRole;o&&(e[o]=r)}}return e}var tableEditingKey=new PluginKey("selectingCells");function cellAround(t){for(let e=t.depth-1;e>0;e--)if(t.node(e).type.spec.tableRole=="row")return t.node(0).resolve(t.before(e+1));return null}function cellWrapping(t){for(let e=t.depth;e>0;e--){const n=t.node(e).type.spec.tableRole;if(n==="cell"||n==="header_cell")return t.node(e)}return null}function isInTable(t){const e=t.selection.$head;for(let n=e.depth;n>0;n--)if(e.node(n).type.spec.tableRole=="row")return!0;return!1}function selectionCell(t){const e=t.selection;if("$anchorCell"in e&&e.$anchorCell)return e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell;if("node"in e&&e.node&&e.node.type.spec.tableRole=="cell")return e.$anchor;const n=cellAround(e.$head)||cellNear(e.$head);if(n)return n;throw new RangeError(`No cell found around position ${e.head}`)}function cellNear(t){for(let e=t.nodeAfter,n=t.pos;e;e=e.firstChild,n++){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n)}for(let e=t.nodeBefore,n=t.pos;e;e=e.lastChild,n--){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n-e.nodeSize)}}function pointsAtCell(t){return t.parent.type.spec.tableRole=="row"&&!!t.nodeAfter}function moveCellForward(t){return t.node(0).resolve(t.pos+t.nodeAfter.nodeSize)}function inSameTable(t,e){return t.depth==e.depth&&t.pos>=e.start(-1)&&t.pos<=e.end(-1)}function nextCell(t,e,n){const r=t.node(-1),o=TableMap.get(r),s=t.start(-1),a=o.nextCell(t.pos-s,e,n);return a==null?null:t.node(0).resolve(s+a)}function removeColSpan(t,e,n=1){const r={...t,colspan:t.colspan-n};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(e,n),r.colwidth.some(o=>o>0)||(r.colwidth=null)),r}function addColSpan(t,e,n=1){const r={...t,colspan:t.colspan+n};if(r.colwidth){r.colwidth=r.colwidth.slice();for(let o=0;o<n;o++)r.colwidth.splice(e,0,0)}return r}function columnIsHeader(t,e,n){const r=tableNodeTypes(e.type.schema).header_cell;for(let o=0;o<t.height;o++)if(e.nodeAt(t.map[n+o*t.width]).type!=r)return!1;return!0}var CellSelection=class Sr extends Selection{constructor(e,n=e){const r=e.node(-1),o=TableMap.get(r),s=e.start(-1),a=o.rectBetween(e.pos-s,n.pos-s),l=e.node(0),c=o.cellsInRect(a).filter(g=>g!=n.pos-s);c.unshift(n.pos-s);const u=c.map(g=>{const C=r.nodeAt(g);if(!C)throw RangeError(`No cell with offset ${g} found`);const v=s+g+1;return new SelectionRange(l.resolve(v),l.resolve(v+C.content.size))});super(u[0].$from,u[0].$to,u),this.$anchorCell=e,this.$headCell=n}map(e,n){const r=e.resolve(n.map(this.$anchorCell.pos)),o=e.resolve(n.map(this.$headCell.pos));if(pointsAtCell(r)&&pointsAtCell(o)&&inSameTable(r,o)){const s=this.$anchorCell.node(-1)!=r.node(-1);return s&&this.isRowSelection()?Sr.rowSelection(r,o):s&&this.isColSelection()?Sr.colSelection(r,o):new Sr(r,o)}return TextSelection.between(r,o)}content(){const e=this.$anchorCell.node(-1),n=TableMap.get(e),r=this.$anchorCell.start(-1),o=n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),s={},a=[];for(let c=o.top;c<o.bottom;c++){const u=[];for(let g=c*n.width+o.left,C=o.left;C<o.right;C++,g++){const v=n.map[g];if(s[v])continue;s[v]=!0;const m=n.findCell(v);let S=e.nodeAt(v);if(!S)throw RangeError(`No cell with offset ${v} found`);const T=o.left-m.left,w=m.right-o.right;if(T>0||w>0){let N=S.attrs;if(T>0&&(N=removeColSpan(N,0,T)),w>0&&(N=removeColSpan(N,N.colspan-w,w)),m.left<o.left){if(S=S.type.createAndFill(N),!S)throw RangeError(`Could not create cell with attrs ${JSON.stringify(N)}`)}else S=S.type.create(N,S.content)}if(m.top<o.top||m.bottom>o.bottom){const N={...S.attrs,rowspan:Math.min(m.bottom,o.bottom)-Math.max(m.top,o.top)};m.top<o.top?S=S.type.createAndFill(N):S=S.type.create(N,S.content)}u.push(S)}a.push(e.child(c).copy(Fragment.from(u)))}const l=this.isColSelection()&&this.isRowSelection()?e:a;return new Slice(Fragment.from(l),1,1)}replace(e,n=Slice.empty){const r=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){const{$from:l,$to:c}=o[a],u=e.mapping.slice(r);e.replace(u.map(l.pos),u.map(c.pos),a?Slice.empty:n)}const s=Selection.findFrom(e.doc.resolve(e.mapping.slice(r).map(this.to)),-1);s&&e.setSelection(s)}replaceWith(e,n){this.replace(e,new Slice(Fragment.from(n),0,0))}forEachCell(e){const n=this.$anchorCell.node(-1),r=TableMap.get(n),o=this.$anchorCell.start(-1),s=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-o,this.$headCell.pos-o));for(let a=0;a<s.length;a++)e(n.nodeAt(s[a]),o+s[a])}isColSelection(){const e=this.$anchorCell.index(-1),n=this.$headCell.index(-1);if(Math.min(e,n)>0)return!1;const r=e+this.$anchorCell.nodeAfter.attrs.rowspan,o=n+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,o)==this.$headCell.node(-1).childCount}static colSelection(e,n=e){const r=e.node(-1),o=TableMap.get(r),s=e.start(-1),a=o.findCell(e.pos-s),l=o.findCell(n.pos-s),c=e.node(0);return a.top<=l.top?(a.top>0&&(e=c.resolve(s+o.map[a.left])),l.bottom<o.height&&(n=c.resolve(s+o.map[o.width*(o.height-1)+l.right-1]))):(l.top>0&&(n=c.resolve(s+o.map[l.left])),a.bottom<o.height&&(e=c.resolve(s+o.map[o.width*(o.height-1)+a.right-1]))),new Sr(e,n)}isRowSelection(){const e=this.$anchorCell.node(-1),n=TableMap.get(e),r=this.$anchorCell.start(-1),o=n.colCount(this.$anchorCell.pos-r),s=n.colCount(this.$headCell.pos-r);if(Math.min(o,s)>0)return!1;const a=o+this.$anchorCell.nodeAfter.attrs.colspan,l=s+this.$headCell.nodeAfter.attrs.colspan;return Math.max(a,l)==n.width}eq(e){return e instanceof Sr&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}static rowSelection(e,n=e){const r=e.node(-1),o=TableMap.get(r),s=e.start(-1),a=o.findCell(e.pos-s),l=o.findCell(n.pos-s),c=e.node(0);return a.left<=l.left?(a.left>0&&(e=c.resolve(s+o.map[a.top*o.width])),l.right<o.width&&(n=c.resolve(s+o.map[o.width*(l.top+1)-1]))):(l.left>0&&(n=c.resolve(s+o.map[l.top*o.width])),a.right<o.width&&(e=c.resolve(s+o.map[o.width*(a.top+1)-1]))),new Sr(e,n)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(e,n){return new Sr(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){return new Sr(e.resolve(n),e.resolve(r))}getBookmark(){return new CellBookmark(this.$anchorCell.pos,this.$headCell.pos)}};CellSelection.prototype.visible=!1;Selection.jsonID("cell",CellSelection);var CellBookmark=class mc{constructor(e,n){this.anchor=e,this.head=n}map(e){return new mc(e.map(this.anchor),e.map(this.head))}resolve(e){const n=e.resolve(this.anchor),r=e.resolve(this.head);return n.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&n.index()<n.parent.childCount&&r.index()<r.parent.childCount&&inSameTable(n,r)?new CellSelection(n,r):Selection.near(r,1)}};function drawCellSelection(t){if(!(t.selection instanceof CellSelection))return null;const e=[];return t.selection.forEachCell((n,r)=>{e.push(Decoration.node(r,r+n.nodeSize,{class:"selectedCell"}))}),DecorationSet.create(t.doc,e)}function isCellBoundarySelection({$from:t,$to:e}){if(t.pos==e.pos||t.pos<e.pos-6)return!1;let n=t.pos,r=e.pos,o=t.depth;for(;o>=0&&!(t.after(o+1)<t.end(o));o--,n++);for(let s=e.depth;s>=0&&!(e.before(s+1)>e.start(s));s--,r--);return n==r&&/row|table/.test(t.node(o).type.spec.tableRole)}function isTextSelectionAcrossCells({$from:t,$to:e}){let n,r;for(let o=t.depth;o>0;o--){const s=t.node(o);if(s.type.spec.tableRole==="cell"||s.type.spec.tableRole==="header_cell"){n=s;break}}for(let o=e.depth;o>0;o--){const s=e.node(o);if(s.type.spec.tableRole==="cell"||s.type.spec.tableRole==="header_cell"){r=s;break}}return n!==r&&e.parentOffset===0}function normalizeSelection(t,e,n){const r=(e||t).selection,o=(e||t).doc;let s,a;if(r instanceof NodeSelection&&(a=r.node.type.spec.tableRole)){if(a=="cell"||a=="header_cell")s=CellSelection.create(o,r.from);else if(a=="row"){const l=o.resolve(r.from+1);s=CellSelection.rowSelection(l,l)}else if(!n){const l=TableMap.get(r.node),c=r.from+1,u=c+l.map[l.width*l.height-1];s=CellSelection.create(o,c+1,u)}}else r instanceof TextSelection&&isCellBoundarySelection(r)?s=TextSelection.create(o,r.from):r instanceof TextSelection&&isTextSelectionAcrossCells(r)&&(s=TextSelection.create(o,r.$from.start(),r.$from.end()));return s&&(e||(e=t.tr)).setSelection(s),e}var fixTablesKey=new PluginKey("fix-tables");function changedDescendants(t,e,n,r){const o=t.childCount,s=e.childCount;e:for(let a=0,l=0;a<s;a++){const c=e.child(a);for(let u=l,g=Math.min(o,a+3);u<g;u++)if(t.child(u)==c){l=u+1,n+=c.nodeSize;continue e}r(c,n),l<o&&t.child(l).sameMarkup(c)?changedDescendants(t.child(l),c,n+1,r):c.nodesBetween(0,c.content.size,r,n+1),n+=c.nodeSize}}function fixTables(t,e){let n;const r=(o,s)=>{o.type.spec.tableRole=="table"&&(n=fixTable(t,o,s,n))};return e?e.doc!=t.doc&&changedDescendants(e.doc,t.doc,0,r):t.doc.descendants(r),n}function fixTable(t,e,n,r){const o=TableMap.get(e);if(!o.problems)return r;r||(r=t.tr);const s=[];for(let c=0;c<o.height;c++)s.push(0);for(let c=0;c<o.problems.length;c++){const u=o.problems[c];if(u.type=="collision"){const g=e.nodeAt(u.pos);if(!g)continue;const C=g.attrs;for(let v=0;v<C.rowspan;v++)s[u.row+v]+=u.n;r.setNodeMarkup(r.mapping.map(n+1+u.pos),null,removeColSpan(C,C.colspan-u.n,u.n))}else if(u.type=="missing")s[u.row]+=u.n;else if(u.type=="overlong_rowspan"){const g=e.nodeAt(u.pos);if(!g)continue;r.setNodeMarkup(r.mapping.map(n+1+u.pos),null,{...g.attrs,rowspan:g.attrs.rowspan-u.n})}else if(u.type=="colwidth mismatch"){const g=e.nodeAt(u.pos);if(!g)continue;r.setNodeMarkup(r.mapping.map(n+1+u.pos),null,{...g.attrs,colwidth:u.colwidth})}}let a,l;for(let c=0;c<s.length;c++)s[c]&&(a==null&&(a=c),l=c);for(let c=0,u=n+1;c<o.height;c++){const g=e.child(c),C=u+g.nodeSize,v=s[c];if(v>0){let m="cell";g.firstChild&&(m=g.firstChild.type.spec.tableRole);const S=[];for(let w=0;w<v;w++){const N=tableNodeTypes(t.schema)[m].createAndFill();N&&S.push(N)}const T=(c==0||a==c-1)&&l==c?u+1:C-1;r.insert(r.mapping.map(T),S)}u=C}return r.setMeta(fixTablesKey,{fixTables:!0})}function selectedRect(t){const e=t.selection,n=selectionCell(t),r=n.node(-1),o=n.start(-1),s=TableMap.get(r);return{...e instanceof CellSelection?s.rectBetween(e.$anchorCell.pos-o,e.$headCell.pos-o):s.findCell(n.pos-o),tableStart:o,map:s,table:r}}function addColumn(t,{map:e,tableStart:n,table:r},o){let s=o>0?-1:0;columnIsHeader(e,r,o+s)&&(s=o==0||o==e.width?null:0);for(let a=0;a<e.height;a++){const l=a*e.width+o;if(o>0&&o<e.width&&e.map[l-1]==e.map[l]){const c=e.map[l],u=r.nodeAt(c);t.setNodeMarkup(t.mapping.map(n+c),null,addColSpan(u.attrs,o-e.colCount(c))),a+=u.attrs.rowspan-1}else{const c=s==null?tableNodeTypes(r.type.schema).cell:r.nodeAt(e.map[l+s]).type,u=e.positionAt(a,o,r);t.insert(t.mapping.map(n+u),c.createAndFill())}}return t}function addColumnBefore(t,e){if(!isInTable(t))return!1;if(e){const n=selectedRect(t);e(addColumn(t.tr,n,n.left))}return!0}function addColumnAfter(t,e){if(!isInTable(t))return!1;if(e){const n=selectedRect(t);e(addColumn(t.tr,n,n.right))}return!0}function removeColumn(t,{map:e,table:n,tableStart:r},o){const s=t.mapping.maps.length;for(let a=0;a<e.height;){const l=a*e.width+o,c=e.map[l],u=n.nodeAt(c),g=u.attrs;if(o>0&&e.map[l-1]==c||o<e.width-1&&e.map[l+1]==c)t.setNodeMarkup(t.mapping.slice(s).map(r+c),null,removeColSpan(g,o-e.colCount(c)));else{const C=t.mapping.slice(s).map(r+c);t.delete(C,C+u.nodeSize)}a+=g.rowspan}}function deleteColumn(t,e){if(!isInTable(t))return!1;if(e){const n=selectedRect(t),r=t.tr;if(n.left==0&&n.right==n.map.width)return!1;for(let o=n.right-1;removeColumn(r,n,o),o!=n.left;o--){const s=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!s)throw RangeError("No table found");n.table=s,n.map=TableMap.get(s)}e(r)}return!0}function rowIsHeader(t,e,n){var r;const o=tableNodeTypes(e.type.schema).header_cell;for(let s=0;s<t.width;s++)if(((r=e.nodeAt(t.map[s+n*t.width]))==null?void 0:r.type)!=o)return!1;return!0}function addRow(t,{map:e,tableStart:n,table:r},o){var s;let a=n;for(let u=0;u<o;u++)a+=r.child(u).nodeSize;const l=[];let c=o>0?-1:0;rowIsHeader(e,r,o+c)&&(c=o==0||o==e.height?null:0);for(let u=0,g=e.width*o;u<e.width;u++,g++)if(o>0&&o<e.height&&e.map[g]==e.map[g-e.width]){const C=e.map[g],v=r.nodeAt(C).attrs;t.setNodeMarkup(n+C,null,{...v,rowspan:v.rowspan+1}),u+=v.colspan-1}else{const C=c==null?tableNodeTypes(r.type.schema).cell:(s=r.nodeAt(e.map[g+c*e.width]))==null?void 0:s.type,v=C==null?void 0:C.createAndFill();v&&l.push(v)}return t.insert(a,tableNodeTypes(r.type.schema).row.create(null,l)),t}function addRowBefore(t,e){if(!isInTable(t))return!1;if(e){const n=selectedRect(t);e(addRow(t.tr,n,n.top))}return!0}function addRowAfter(t,e){if(!isInTable(t))return!1;if(e){const n=selectedRect(t);e(addRow(t.tr,n,n.bottom))}return!0}function removeRow(t,{map:e,table:n,tableStart:r},o){let s=0;for(let u=0;u<o;u++)s+=n.child(u).nodeSize;const a=s+n.child(o).nodeSize,l=t.mapping.maps.length;t.delete(s+r,a+r);const c=new Set;for(let u=0,g=o*e.width;u<e.width;u++,g++){const C=e.map[g];if(!c.has(C)){if(c.add(C),o>0&&C==e.map[g-e.width]){const v=n.nodeAt(C).attrs;t.setNodeMarkup(t.mapping.slice(l).map(C+r),null,{...v,rowspan:v.rowspan-1}),u+=v.colspan-1}else if(o<e.height&&C==e.map[g+e.width]){const v=n.nodeAt(C),m=v.attrs,S=v.type.create({...m,rowspan:v.attrs.rowspan-1},v.content),T=e.positionAt(o+1,u,n);t.insert(t.mapping.slice(l).map(r+T),S),u+=m.colspan-1}}}}function deleteRow(t,e){if(!isInTable(t))return!1;if(e){const n=selectedRect(t),r=t.tr;if(n.top==0&&n.bottom==n.map.height)return!1;for(let o=n.bottom-1;removeRow(r,n,o),o!=n.top;o--){const s=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!s)throw RangeError("No table found");n.table=s,n.map=TableMap.get(n.table)}e(r)}return!0}function isEmpty(t){const e=t.content;return e.childCount==1&&e.child(0).isTextblock&&e.child(0).childCount==0}function cellsOverlapRectangle({width:t,height:e,map:n},r){let o=r.top*t+r.left,s=o,a=(r.bottom-1)*t+r.left,l=o+(r.right-r.left-1);for(let c=r.top;c<r.bottom;c++){if(r.left>0&&n[s]==n[s-1]||r.right<t&&n[l]==n[l+1])return!0;s+=t,l+=t}for(let c=r.left;c<r.right;c++){if(r.top>0&&n[o]==n[o-t]||r.bottom<e&&n[a]==n[a+t])return!0;o++,a++}return!1}function mergeCells(t,e){const n=t.selection;if(!(n instanceof CellSelection)||n.$anchorCell.pos==n.$headCell.pos)return!1;const r=selectedRect(t),{map:o}=r;if(cellsOverlapRectangle(o,r))return!1;if(e){const s=t.tr,a={};let l=Fragment.empty,c,u;for(let g=r.top;g<r.bottom;g++)for(let C=r.left;C<r.right;C++){const v=o.map[g*o.width+C],m=r.table.nodeAt(v);if(!(a[v]||!m))if(a[v]=!0,c==null)c=v,u=m;else{isEmpty(m)||(l=l.append(m.content));const S=s.mapping.map(v+r.tableStart);s.delete(S,S+m.nodeSize)}}if(c==null||u==null)return!0;if(s.setNodeMarkup(c+r.tableStart,null,{...addColSpan(u.attrs,u.attrs.colspan,r.right-r.left-u.attrs.colspan),rowspan:r.bottom-r.top}),l.size){const g=c+1+u.content.size,C=isEmpty(u)?c+1:g;s.replaceWith(C+r.tableStart,g+r.tableStart,l)}s.setSelection(new CellSelection(s.doc.resolve(c+r.tableStart))),e(s)}return!0}function splitCell(t,e){const n=tableNodeTypes(t.schema);return splitCellWithType(({node:r})=>n[r.type.spec.tableRole])(t,e)}function splitCellWithType(t){return(e,n)=>{var r;const o=e.selection;let s,a;if(o instanceof CellSelection){if(o.$anchorCell.pos!=o.$headCell.pos)return!1;s=o.$anchorCell.nodeAfter,a=o.$anchorCell.pos}else{if(s=cellWrapping(o.$from),!s)return!1;a=(r=cellAround(o.$from))==null?void 0:r.pos}if(s==null||a==null||s.attrs.colspan==1&&s.attrs.rowspan==1)return!1;if(n){let l=s.attrs;const c=[],u=l.colwidth;l.rowspan>1&&(l={...l,rowspan:1}),l.colspan>1&&(l={...l,colspan:1});const g=selectedRect(e),C=e.tr;for(let m=0;m<g.right-g.left;m++)c.push(u?{...l,colwidth:u&&u[m]?[u[m]]:null}:l);let v;for(let m=g.top;m<g.bottom;m++){let S=g.map.positionAt(m,g.left,g.table);m==g.top&&(S+=s.nodeSize);for(let T=g.left,w=0;T<g.right;T++,w++)T==g.left&&m==g.top||C.insert(v=C.mapping.map(S+g.tableStart,1),t({node:s,row:m,col:T}).createAndFill(c[w]))}C.setNodeMarkup(a,t({node:s,row:g.top,col:g.left}),c[0]),o instanceof CellSelection&&C.setSelection(new CellSelection(C.doc.resolve(o.$anchorCell.pos),v?C.doc.resolve(v):void 0)),n(C)}return!0}}function setCellAttr(t,e){return function(n,r){if(!isInTable(n))return!1;const o=selectionCell(n);if(o.nodeAfter.attrs[t]===e)return!1;if(r){const s=n.tr;n.selection instanceof CellSelection?n.selection.forEachCell((a,l)=>{a.attrs[t]!==e&&s.setNodeMarkup(l,null,{...a.attrs,[t]:e})}):s.setNodeMarkup(o.pos,null,{...o.nodeAfter.attrs,[t]:e}),r(s)}return!0}}function deprecated_toggleHeader(t){return function(e,n){if(!isInTable(e))return!1;if(n){const r=tableNodeTypes(e.schema),o=selectedRect(e),s=e.tr,a=o.map.cellsInRect(t=="column"?{left:o.left,top:0,right:o.right,bottom:o.map.height}:t=="row"?{left:0,top:o.top,right:o.map.width,bottom:o.bottom}:o),l=a.map(c=>o.table.nodeAt(c));for(let c=0;c<a.length;c++)l[c].type==r.header_cell&&s.setNodeMarkup(o.tableStart+a[c],r.cell,l[c].attrs);if(s.steps.length==0)for(let c=0;c<a.length;c++)s.setNodeMarkup(o.tableStart+a[c],r.header_cell,l[c].attrs);n(s)}return!0}}function isHeaderEnabledByType(t,e,n){const r=e.map.cellsInRect({left:0,top:0,right:t=="row"?e.map.width:1,bottom:t=="column"?e.map.height:1});for(let o=0;o<r.length;o++){const s=e.table.nodeAt(r[o]);if(s&&s.type!==n.header_cell)return!1}return!0}function toggleHeader(t,e){return e=e||{useDeprecatedLogic:!1},e.useDeprecatedLogic?deprecated_toggleHeader(t):function(n,r){if(!isInTable(n))return!1;if(r){const o=tableNodeTypes(n.schema),s=selectedRect(n),a=n.tr,l=isHeaderEnabledByType("row",s,o),c=isHeaderEnabledByType("column",s,o),g=(t==="column"?l:t==="row"?c:!1)?1:0,C=t=="column"?{left:0,top:g,right:1,bottom:s.map.height}:t=="row"?{left:g,top:0,right:s.map.width,bottom:1}:s,v=t=="column"?c?o.cell:o.header_cell:t=="row"?l?o.cell:o.header_cell:o.cell;s.map.cellsInRect(C).forEach(m=>{const S=m+s.tableStart,T=a.doc.nodeAt(S);T&&a.setNodeMarkup(S,v,T.attrs)}),r(a)}return!0}}toggleHeader("row",{useDeprecatedLogic:!0});toggleHeader("column",{useDeprecatedLogic:!0});var toggleHeaderCell=toggleHeader("cell",{useDeprecatedLogic:!0});function findNextCell(t,e){if(e<0){const n=t.nodeBefore;if(n)return t.pos-n.nodeSize;for(let r=t.index(-1)-1,o=t.before();r>=0;r--){const s=t.node(-1).child(r),a=s.lastChild;if(a)return o-1-a.nodeSize;o-=s.nodeSize}}else{if(t.index()<t.parent.childCount-1)return t.pos+t.nodeAfter.nodeSize;const n=t.node(-1);for(let r=t.indexAfter(-1),o=t.after();r<n.childCount;r++){const s=n.child(r);if(s.childCount)return o+1;o+=s.nodeSize}}return null}function goToNextCell(t){return function(e,n){if(!isInTable(e))return!1;const r=findNextCell(selectionCell(e),t);if(r==null)return!1;if(n){const o=e.doc.resolve(r);n(e.tr.setSelection(TextSelection.between(o,moveCellForward(o))).scrollIntoView())}return!0}}function deleteTable(t,e){const n=t.selection.$anchor;for(let r=n.depth;r>0;r--)if(n.node(r).type.spec.tableRole=="table")return e&&e(t.tr.delete(n.before(r),n.after(r)).scrollIntoView()),!0;return!1}function deleteCellSelection(t,e){const n=t.selection;if(!(n instanceof CellSelection))return!1;if(e){const r=t.tr,o=tableNodeTypes(t.schema).cell.createAndFill().content;n.forEachCell((s,a)=>{s.content.eq(o)||r.replace(r.mapping.map(a+1),r.mapping.map(a+s.nodeSize-1),new Slice(o,0,0))}),r.docChanged&&e(r)}return!0}function pastedCells(t){if(!t.size)return null;let{content:e,openStart:n,openEnd:r}=t;for(;e.childCount==1&&(n>0&&r>0||e.child(0).type.spec.tableRole=="table");)n--,r--,e=e.child(0).content;const o=e.child(0),s=o.type.spec.tableRole,a=o.type.schema,l=[];if(s=="row")for(let c=0;c<e.childCount;c++){let u=e.child(c).content;const g=c?0:Math.max(0,n-1),C=c<e.childCount-1?0:Math.max(0,r-1);(g||C)&&(u=fitSlice(tableNodeTypes(a).row,new Slice(u,g,C)).content),l.push(u)}else if(s=="cell"||s=="header_cell")l.push(n||r?fitSlice(tableNodeTypes(a).row,new Slice(e,n,r)).content:e);else return null;return ensureRectangular(a,l)}function ensureRectangular(t,e){const n=[];for(let o=0;o<e.length;o++){const s=e[o];for(let a=s.childCount-1;a>=0;a--){const{rowspan:l,colspan:c}=s.child(a).attrs;for(let u=o;u<o+l;u++)n[u]=(n[u]||0)+c}}let r=0;for(let o=0;o<n.length;o++)r=Math.max(r,n[o]);for(let o=0;o<n.length;o++)if(o>=e.length&&e.push(Fragment.empty),n[o]<r){const s=tableNodeTypes(t).cell.createAndFill(),a=[];for(let l=n[o];l<r;l++)a.push(s);e[o]=e[o].append(Fragment.from(a))}return{height:e.length,width:r,rows:e}}function fitSlice(t,e){const n=t.createAndFill();return new Transform(n).replace(0,n.content.size,e).doc}function clipCells({width:t,height:e,rows:n},r,o){if(t!=r){const s=[],a=[];for(let l=0;l<n.length;l++){const c=n[l],u=[];for(let g=s[l]||0,C=0;g<r;C++){let v=c.child(C%c.childCount);g+v.attrs.colspan>r&&(v=v.type.createChecked(removeColSpan(v.attrs,v.attrs.colspan,g+v.attrs.colspan-r),v.content)),u.push(v),g+=v.attrs.colspan;for(let m=1;m<v.attrs.rowspan;m++)s[l+m]=(s[l+m]||0)+v.attrs.colspan}a.push(Fragment.from(u))}n=a,t=r}if(e!=o){const s=[];for(let a=0,l=0;a<o;a++,l++){const c=[],u=n[l%e];for(let g=0;g<u.childCount;g++){let C=u.child(g);a+C.attrs.rowspan>o&&(C=C.type.create({...C.attrs,rowspan:Math.max(1,o-C.attrs.rowspan)},C.content)),c.push(C)}s.push(Fragment.from(c))}n=s,e=o}return{width:t,height:e,rows:n}}function growTable(t,e,n,r,o,s,a){const l=t.doc.type.schema,c=tableNodeTypes(l);let u,g;if(o>e.width)for(let C=0,v=0;C<e.height;C++){const m=n.child(C);v+=m.nodeSize;const S=[];let T;m.lastChild==null||m.lastChild.type==c.cell?T=u||(u=c.cell.createAndFill()):T=g||(g=c.header_cell.createAndFill());for(let w=e.width;w<o;w++)S.push(T);t.insert(t.mapping.slice(a).map(v-1+r),S)}if(s>e.height){const C=[];for(let S=0,T=(e.height-1)*e.width;S<Math.max(e.width,o);S++){const w=S>=e.width?!1:n.nodeAt(e.map[T+S]).type==c.header_cell;C.push(w?g||(g=c.header_cell.createAndFill()):u||(u=c.cell.createAndFill()))}const v=c.row.create(null,Fragment.from(C)),m=[];for(let S=e.height;S<s;S++)m.push(v);t.insert(t.mapping.slice(a).map(r+n.nodeSize-2),m)}return!!(u||g)}function isolateHorizontal(t,e,n,r,o,s,a,l){if(a==0||a==e.height)return!1;let c=!1;for(let u=o;u<s;u++){const g=a*e.width+u,C=e.map[g];if(e.map[g-e.width]==C){c=!0;const v=n.nodeAt(C),{top:m,left:S}=e.findCell(C);t.setNodeMarkup(t.mapping.slice(l).map(C+r),null,{...v.attrs,rowspan:a-m}),t.insert(t.mapping.slice(l).map(e.positionAt(a,S,n)),v.type.createAndFill({...v.attrs,rowspan:m+v.attrs.rowspan-a})),u+=v.attrs.colspan-1}}return c}function isolateVertical(t,e,n,r,o,s,a,l){if(a==0||a==e.width)return!1;let c=!1;for(let u=o;u<s;u++){const g=u*e.width+a,C=e.map[g];if(e.map[g-1]==C){c=!0;const v=n.nodeAt(C),m=e.colCount(C),S=t.mapping.slice(l).map(C+r);t.setNodeMarkup(S,null,removeColSpan(v.attrs,a-m,v.attrs.colspan-(a-m))),t.insert(S+v.nodeSize,v.type.createAndFill(removeColSpan(v.attrs,0,a-m))),u+=v.attrs.rowspan-1}}return c}function insertCells(t,e,n,r,o){let s=n?t.doc.nodeAt(n-1):t.doc;if(!s)throw new Error("No table found");let a=TableMap.get(s);const{top:l,left:c}=r,u=c+o.width,g=l+o.height,C=t.tr;let v=0;function m(){if(s=n?C.doc.nodeAt(n-1):C.doc,!s)throw new Error("No table found");a=TableMap.get(s),v=C.mapping.maps.length}growTable(C,a,s,n,u,g,v)&&m(),isolateHorizontal(C,a,s,n,c,u,l,v)&&m(),isolateHorizontal(C,a,s,n,c,u,g,v)&&m(),isolateVertical(C,a,s,n,l,g,c,v)&&m(),isolateVertical(C,a,s,n,l,g,u,v)&&m();for(let S=l;S<g;S++){const T=a.positionAt(S,c,s),w=a.positionAt(S,u,s);C.replace(C.mapping.slice(v).map(T+n),C.mapping.slice(v).map(w+n),new Slice(o.rows[S-l],0,0))}m(),C.setSelection(new CellSelection(C.doc.resolve(n+a.positionAt(l,c,s)),C.doc.resolve(n+a.positionAt(g-1,u-1,s)))),e(C)}var handleKeyDown=keydownHandler({ArrowLeft:arrow("horiz",-1),ArrowRight:arrow("horiz",1),ArrowUp:arrow("vert",-1),ArrowDown:arrow("vert",1),"Shift-ArrowLeft":shiftArrow("horiz",-1),"Shift-ArrowRight":shiftArrow("horiz",1),"Shift-ArrowUp":shiftArrow("vert",-1),"Shift-ArrowDown":shiftArrow("vert",1),Backspace:deleteCellSelection,"Mod-Backspace":deleteCellSelection,Delete:deleteCellSelection,"Mod-Delete":deleteCellSelection});function maybeSetSelection(t,e,n){return n.eq(t.selection)?!1:(e&&e(t.tr.setSelection(n).scrollIntoView()),!0)}function arrow(t,e){return(n,r,o)=>{if(!o)return!1;const s=n.selection;if(s instanceof CellSelection)return maybeSetSelection(n,r,Selection.near(s.$headCell,e));if(t!="horiz"&&!s.empty)return!1;const a=atEndOfCell(o,t,e);if(a==null)return!1;if(t=="horiz")return maybeSetSelection(n,r,Selection.near(n.doc.resolve(s.head+e),e));{const l=n.doc.resolve(a),c=nextCell(l,t,e);let u;return c?u=Selection.near(c,1):e<0?u=Selection.near(n.doc.resolve(l.before(-1)),-1):u=Selection.near(n.doc.resolve(l.after(-1)),1),maybeSetSelection(n,r,u)}}}function shiftArrow(t,e){return(n,r,o)=>{if(!o)return!1;const s=n.selection;let a;if(s instanceof CellSelection)a=s;else{const c=atEndOfCell(o,t,e);if(c==null)return!1;a=new CellSelection(n.doc.resolve(c))}const l=nextCell(a.$headCell,t,e);return l?maybeSetSelection(n,r,new CellSelection(a.$anchorCell,l)):!1}}function handleTripleClick(t,e){const n=t.state.doc,r=cellAround(n.resolve(e));return r?(t.dispatch(t.state.tr.setSelection(new CellSelection(r))),!0):!1}function handlePaste(t,e,n){if(!isInTable(t.state))return!1;let r=pastedCells(n);const o=t.state.selection;if(o instanceof CellSelection){r||(r={width:1,height:1,rows:[Fragment.from(fitSlice(tableNodeTypes(t.state.schema).cell,n))]});const s=o.$anchorCell.node(-1),a=o.$anchorCell.start(-1),l=TableMap.get(s).rectBetween(o.$anchorCell.pos-a,o.$headCell.pos-a);return r=clipCells(r,l.right-l.left,l.bottom-l.top),insertCells(t.state,t.dispatch,a,l,r),!0}else if(r){const s=selectionCell(t.state),a=s.start(-1);return insertCells(t.state,t.dispatch,a,TableMap.get(s.node(-1)).findCell(s.pos-a),r),!0}else return!1}function handleMouseDown(t,e){var n;if(e.ctrlKey||e.metaKey)return;const r=domInCell(t,e.target);let o;if(e.shiftKey&&t.state.selection instanceof CellSelection)s(t.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&r&&(o=cellAround(t.state.selection.$anchor))!=null&&((n=cellUnderMouse(t,e))==null?void 0:n.pos)!=o.pos)s(o,e),e.preventDefault();else if(!r)return;function s(c,u){let g=cellUnderMouse(t,u);const C=tableEditingKey.getState(t.state)==null;if(!g||!inSameTable(c,g))if(C)g=c;else return;const v=new CellSelection(c,g);if(C||!t.state.selection.eq(v)){const m=t.state.tr.setSelection(v);C&&m.setMeta(tableEditingKey,c.pos),t.dispatch(m)}}function a(){t.root.removeEventListener("mouseup",a),t.root.removeEventListener("dragstart",a),t.root.removeEventListener("mousemove",l),tableEditingKey.getState(t.state)!=null&&t.dispatch(t.state.tr.setMeta(tableEditingKey,-1))}function l(c){const u=c,g=tableEditingKey.getState(t.state);let C;if(g!=null)C=t.state.doc.resolve(g);else if(domInCell(t,u.target)!=r&&(C=cellUnderMouse(t,e),!C))return a();C&&s(C,u)}t.root.addEventListener("mouseup",a),t.root.addEventListener("dragstart",a),t.root.addEventListener("mousemove",l)}function atEndOfCell(t,e,n){if(!(t.state.selection instanceof TextSelection))return null;const{$head:r}=t.state.selection;for(let o=r.depth-1;o>=0;o--){const s=r.node(o);if((n<0?r.index(o):r.indexAfter(o))!=(n<0?0:s.childCount))return null;if(s.type.spec.tableRole=="cell"||s.type.spec.tableRole=="header_cell"){const l=r.before(o),c=e=="vert"?n>0?"down":"up":n>0?"right":"left";return t.endOfTextblock(c)?l:null}}return null}function domInCell(t,e){for(;e&&e!=t.dom;e=e.parentNode)if(e.nodeName=="TD"||e.nodeName=="TH")return e;return null}function cellUnderMouse(t,e){const n=t.posAtCoords({left:e.clientX,top:e.clientY});return n&&n?cellAround(t.state.doc.resolve(n.pos)):null}var TableView$1=class{constructor(e,n){this.node=e,this.defaultCellMinWidth=n,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width",`${n}px`),this.colgroup=this.table.appendChild(document.createElement("colgroup")),updateColumnsOnResize(e,this.colgroup,this.table,n),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type!=this.node.type?!1:(this.node=e,updateColumnsOnResize(e,this.colgroup,this.table,this.defaultCellMinWidth),!0)}ignoreMutation(e){return e.type=="attributes"&&(e.target==this.table||this.colgroup.contains(e.target))}};function updateColumnsOnResize(t,e,n,r,o,s){var a;let l=0,c=!0,u=e.firstChild;const g=t.firstChild;if(g){for(let C=0,v=0;C<g.childCount;C++){const{colspan:m,colwidth:S}=g.child(C).attrs;for(let T=0;T<m;T++,v++){const w=o==v?s:S&&S[T],N=w?w+"px":"";if(l+=w||r,w||(c=!1),u)u.style.width!=N&&(u.style.width=N),u=u.nextSibling;else{const D=document.createElement("col");D.style.width=N,e.appendChild(D)}}}for(;u;){const C=u.nextSibling;(a=u.parentNode)==null||a.removeChild(u),u=C}c?(n.style.width=l+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=l+"px")}}var columnResizingPluginKey=new PluginKey("tableColumnResizing");function columnResizing({handleWidth:t=5,cellMinWidth:e=25,defaultCellMinWidth:n=100,View:r=TableView$1,lastColumnResizable:o=!0}={}){const s=new Plugin({key:columnResizingPluginKey,state:{init(a,l){var c,u;const g=(u=(c=s.spec)==null?void 0:c.props)==null?void 0:u.nodeViews,C=tableNodeTypes(l.schema).table.name;return r&&g&&(g[C]=(v,m)=>new r(v,n,m)),new ResizeState(-1,!1)},apply(a,l){return l.apply(a)}},props:{attributes:a=>{const l=columnResizingPluginKey.getState(a);return l&&l.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(a,l)=>{handleMouseMove(a,l,t,o)},mouseleave:a=>{handleMouseLeave(a)},mousedown:(a,l)=>{handleMouseDown2(a,l,e,n)}},decorations:a=>{const l=columnResizingPluginKey.getState(a);if(l&&l.activeHandle>-1)return handleDecorations(a,l.activeHandle)},nodeViews:{}}});return s}var ResizeState=class Gi{constructor(e,n){this.activeHandle=e,this.dragging=n}apply(e){const n=this,r=e.getMeta(columnResizingPluginKey);if(r&&r.setHandle!=null)return new Gi(r.setHandle,!1);if(r&&r.setDragging!==void 0)return new Gi(n.activeHandle,r.setDragging);if(n.activeHandle>-1&&e.docChanged){let o=e.mapping.map(n.activeHandle,-1);return pointsAtCell(e.doc.resolve(o))||(o=-1),new Gi(o,n.dragging)}return n}};function handleMouseMove(t,e,n,r){const o=columnResizingPluginKey.getState(t.state);if(o&&!o.dragging){const s=domCellAround(e.target);let a=-1;if(s){const{left:l,right:c}=s.getBoundingClientRect();e.clientX-l<=n?a=edgeCell(t,e,"left",n):c-e.clientX<=n&&(a=edgeCell(t,e,"right",n))}if(a!=o.activeHandle){if(!r&&a!==-1){const l=t.state.doc.resolve(a),c=l.node(-1),u=TableMap.get(c),g=l.start(-1);if(u.colCount(l.pos-g)+l.nodeAfter.attrs.colspan-1==u.width-1)return}updateHandle(t,a)}}}function handleMouseLeave(t){const e=columnResizingPluginKey.getState(t.state);e&&e.activeHandle>-1&&!e.dragging&&updateHandle(t,-1)}function handleMouseDown2(t,e,n,r){var o;const s=(o=t.dom.ownerDocument.defaultView)!=null?o:window,a=columnResizingPluginKey.getState(t.state);if(!a||a.activeHandle==-1||a.dragging)return!1;const l=t.state.doc.nodeAt(a.activeHandle),c=currentColWidth(t,a.activeHandle,l.attrs);t.dispatch(t.state.tr.setMeta(columnResizingPluginKey,{setDragging:{startX:e.clientX,startWidth:c}}));function u(C){s.removeEventListener("mouseup",u),s.removeEventListener("mousemove",g);const v=columnResizingPluginKey.getState(t.state);v!=null&&v.dragging&&(updateColumnWidth(t,v.activeHandle,draggedWidth(v.dragging,C,n)),t.dispatch(t.state.tr.setMeta(columnResizingPluginKey,{setDragging:null})))}function g(C){if(!C.which)return u(C);const v=columnResizingPluginKey.getState(t.state);if(v&&v.dragging){const m=draggedWidth(v.dragging,C,n);displayColumnWidth(t,v.activeHandle,m,r)}}return displayColumnWidth(t,a.activeHandle,c,r),s.addEventListener("mouseup",u),s.addEventListener("mousemove",g),e.preventDefault(),!0}function currentColWidth(t,e,{colspan:n,colwidth:r}){const o=r&&r[r.length-1];if(o)return o;const s=t.domAtPos(e);let l=s.node.childNodes[s.offset].offsetWidth,c=n;if(r)for(let u=0;u<n;u++)r[u]&&(l-=r[u],c--);return l/c}function domCellAround(t){for(;t&&t.nodeName!="TD"&&t.nodeName!="TH";)t=t.classList&&t.classList.contains("ProseMirror")?null:t.parentNode;return t}function edgeCell(t,e,n,r){const o=n=="right"?-r:r,s=t.posAtCoords({left:e.clientX+o,top:e.clientY});if(!s)return-1;const{pos:a}=s,l=cellAround(t.state.doc.resolve(a));if(!l)return-1;if(n=="right")return l.pos;const c=TableMap.get(l.node(-1)),u=l.start(-1),g=c.map.indexOf(l.pos-u);return g%c.width==0?-1:u+c.map[g-1]}function draggedWidth(t,e,n){const r=e.clientX-t.startX;return Math.max(n,t.startWidth+r)}function updateHandle(t,e){t.dispatch(t.state.tr.setMeta(columnResizingPluginKey,{setHandle:e}))}function updateColumnWidth(t,e,n){const r=t.state.doc.resolve(e),o=r.node(-1),s=TableMap.get(o),a=r.start(-1),l=s.colCount(r.pos-a)+r.nodeAfter.attrs.colspan-1,c=t.state.tr;for(let u=0;u<s.height;u++){const g=u*s.width+l;if(u&&s.map[g]==s.map[g-s.width])continue;const C=s.map[g],v=o.nodeAt(C).attrs,m=v.colspan==1?0:l-s.colCount(C);if(v.colwidth&&v.colwidth[m]==n)continue;const S=v.colwidth?v.colwidth.slice():zeroes(v.colspan);S[m]=n,c.setNodeMarkup(a+C,null,{...v,colwidth:S})}c.docChanged&&t.dispatch(c)}function displayColumnWidth(t,e,n,r){const o=t.state.doc.resolve(e),s=o.node(-1),a=o.start(-1),l=TableMap.get(s).colCount(o.pos-a)+o.nodeAfter.attrs.colspan-1;let c=t.domAtPos(o.start(-1)).node;for(;c&&c.nodeName!="TABLE";)c=c.parentNode;c&&updateColumnsOnResize(s,c.firstChild,c,r,l,n)}function zeroes(t){return Array(t).fill(0)}function handleDecorations(t,e){var n;const r=[],o=t.doc.resolve(e),s=o.node(-1);if(!s)return DecorationSet.empty;const a=TableMap.get(s),l=o.start(-1),c=a.colCount(o.pos-l)+o.nodeAfter.attrs.colspan-1;for(let u=0;u<a.height;u++){const g=c+u*a.width;if((c==a.width-1||a.map[g]!=a.map[g+1])&&(u==0||a.map[g]!=a.map[g-a.width])){const C=a.map[g],v=l+C+s.nodeAt(C).nodeSize-1,m=document.createElement("div");m.className="column-resize-handle",(n=columnResizingPluginKey.getState(t))!=null&&n.dragging&&r.push(Decoration.node(l+C,l+C+s.nodeAt(C).nodeSize,{class:"column-resize-dragging"})),r.push(Decoration.widget(v,m))}}return DecorationSet.create(t.doc,r)}function tableEditing({allowTableNodeSelection:t=!1}={}){return new Plugin({key:tableEditingKey,state:{init(){return null},apply(e,n){const r=e.getMeta(tableEditingKey);if(r!=null)return r==-1?null:r;if(n==null||!e.docChanged)return n;const{deleted:o,pos:s}=e.mapping.mapResult(n);return o?null:s}},props:{decorations:drawCellSelection,handleDOMEvents:{mousedown:handleMouseDown},createSelectionBetween(e){return tableEditingKey.getState(e.state)!=null?e.state.selection:null},handleTripleClick,handleKeyDown,handlePaste},appendTransaction(e,n,r){return normalizeSelection(r,fixTables(r,n),t)}})}function getColStyleDeclaration(t,e){return e?["width",`${Math.max(e,t)}px`]:["min-width",`${t}px`]}function updateColumns(t,e,n,r,o,s){var a;let l=0,c=!0,u=e.firstChild;const g=t.firstChild;if(g!==null)for(let C=0,v=0;C<g.childCount;C+=1){const{colspan:m,colwidth:S}=g.child(C).attrs;for(let T=0;T<m;T+=1,v+=1){const w=o===v?s:S&&S[T],N=w?`${w}px`:"";if(l+=w||r,w||(c=!1),u){if(u.style.width!==N){const[D,k]=getColStyleDeclaration(r,w);u.style.setProperty(D,k)}u=u.nextSibling}else{const D=document.createElement("col"),[k,L]=getColStyleDeclaration(r,w);D.style.setProperty(k,L),e.appendChild(D)}}}for(;u;){const C=u.nextSibling;(a=u.parentNode)===null||a===void 0||a.removeChild(u),u=C}c?(n.style.width=`${l}px`,n.style.minWidth=""):(n.style.width="",n.style.minWidth=`${l}px`)}class TableView{constructor(e,n){this.node=e,this.cellMinWidth=n,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),updateColumns(e,this.colgroup,this.table,n),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type!==this.node.type?!1:(this.node=e,updateColumns(e,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(e){return e.type==="attributes"&&(e.target===this.table||this.colgroup.contains(e.target))}}function createColGroup(t,e,n,r){let o=0,s=!0;const a=[],l=t.firstChild;if(!l)return{};for(let C=0,v=0;C<l.childCount;C+=1){const{colspan:m,colwidth:S}=l.child(C).attrs;for(let T=0;T<m;T+=1,v+=1){const w=n===v?r:S&&S[T];o+=w||e,w||(s=!1);const[N,D]=getColStyleDeclaration(e,w);a.push(["col",{style:`${N}: ${D}`}])}}const c=s?`${o}px`:"",u=s?"":`${o}px`;return{colgroup:["colgroup",{},...a],tableWidth:c,tableMinWidth:u}}function createCell(t,e){return e?t.createChecked(null,e):t.createAndFill()}function getTableNodeTypes(t){if(t.cached.tableNodeTypes)return t.cached.tableNodeTypes;const e={};return Object.keys(t.nodes).forEach(n=>{const r=t.nodes[n];r.spec.tableRole&&(e[r.spec.tableRole]=r)}),t.cached.tableNodeTypes=e,e}function createTable(t,e,n,r,o){const s=getTableNodeTypes(t),a=[],l=[];for(let u=0;u<n;u+=1){const g=createCell(s.cell,o);if(g&&l.push(g),r){const C=createCell(s.header_cell,o);C&&a.push(C)}}const c=[];for(let u=0;u<e;u+=1)c.push(s.row.createChecked(null,r&&u===0?a:l));return s.table.createChecked(null,c)}function isCellSelection(t){return t instanceof CellSelection}const deleteTableWhenAllCellsSelected=({editor:t})=>{const{selection:e}=t.state;if(!isCellSelection(e))return!1;let n=0;const r=findParentNodeClosestToPos(e.ranges[0].$from,s=>s.type.name==="table");return r==null||r.node.descendants(s=>{if(s.type.name==="table")return!1;["tableCell","tableHeader"].includes(s.type.name)&&(n+=1)}),n===e.ranges.length?(t.commands.deleteTable(),!0):!1},Table=Node$1.create({name:"table",addOptions(){return{HTMLAttributes:{},resizable:!1,handleWidth:5,cellMinWidth:25,View:TableView,lastColumnResizable:!0,allowTableNodeSelection:!1}},content:"tableRow+",tableRole:"table",isolating:!0,group:"block",parseHTML(){return[{tag:"table"}]},renderHTML({node:t,HTMLAttributes:e}){const{colgroup:n,tableWidth:r,tableMinWidth:o}=createColGroup(t,this.options.cellMinWidth);return["table",mergeAttributes(this.options.HTMLAttributes,e,{style:r?`width: ${r}`:`min-width: ${o}`}),n,["tbody",0]]},addCommands(){return{insertTable:({rows:t=3,cols:e=3,withHeaderRow:n=!0}={})=>({tr:r,dispatch:o,editor:s})=>{const a=createTable(s.schema,t,e,n);if(o){const l=r.selection.from+1;r.replaceSelectionWith(a).scrollIntoView().setSelection(TextSelection.near(r.doc.resolve(l)))}return!0},addColumnBefore:()=>({state:t,dispatch:e})=>addColumnBefore(t,e),addColumnAfter:()=>({state:t,dispatch:e})=>addColumnAfter(t,e),deleteColumn:()=>({state:t,dispatch:e})=>deleteColumn(t,e),addRowBefore:()=>({state:t,dispatch:e})=>addRowBefore(t,e),addRowAfter:()=>({state:t,dispatch:e})=>addRowAfter(t,e),deleteRow:()=>({state:t,dispatch:e})=>deleteRow(t,e),deleteTable:()=>({state:t,dispatch:e})=>deleteTable(t,e),mergeCells:()=>({state:t,dispatch:e})=>mergeCells(t,e),splitCell:()=>({state:t,dispatch:e})=>splitCell(t,e),toggleHeaderColumn:()=>({state:t,dispatch:e})=>toggleHeader("column")(t,e),toggleHeaderRow:()=>({state:t,dispatch:e})=>toggleHeader("row")(t,e),toggleHeaderCell:()=>({state:t,dispatch:e})=>toggleHeaderCell(t,e),mergeOrSplit:()=>({state:t,dispatch:e})=>mergeCells(t,e)?!0:splitCell(t,e),setCellAttribute:(t,e)=>({state:n,dispatch:r})=>setCellAttr(t,e)(n,r),goToNextCell:()=>({state:t,dispatch:e})=>goToNextCell(1)(t,e),goToPreviousCell:()=>({state:t,dispatch:e})=>goToNextCell(-1)(t,e),fixTables:()=>({state:t,dispatch:e})=>(e&&fixTables(t),!0),setCellSelection:t=>({tr:e,dispatch:n})=>{if(n){const r=CellSelection.create(e.doc,t.anchorCell,t.headCell);e.setSelection(r)}return!0}}},addKeyboardShortcuts(){return{Tab:()=>this.editor.commands.goToNextCell()?!0:this.editor.can().addRowAfter()?this.editor.chain().addRowAfter().goToNextCell().run():!1,"Shift-Tab":()=>this.editor.commands.goToPreviousCell(),Backspace:deleteTableWhenAllCellsSelected,"Mod-Backspace":deleteTableWhenAllCellsSelected,Delete:deleteTableWhenAllCellsSelected,"Mod-Delete":deleteTableWhenAllCellsSelected}},addProseMirrorPlugins(){return[...this.options.resizable&&this.editor.isEditable?[columnResizing({handleWidth:this.options.handleWidth,cellMinWidth:this.options.cellMinWidth,defaultCellMinWidth:this.options.cellMinWidth,View:this.options.View,lastColumnResizable:this.options.lastColumnResizable})]:[],tableEditing({allowTableNodeSelection:this.options.allowTableNodeSelection})]},extendNodeSchema(t){const e={name:t.name,options:t.options,storage:t.storage};return{tableRole:callOrReturn(getExtensionField(t,"tableRole",e))}}}),TableCell=Node$1.create({name:"tableCell",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{const e=t.getAttribute("colwidth");return e?e.split(",").map(r=>parseInt(r,10)):null}}}},tableRole:"cell",isolating:!0,parseHTML(){return[{tag:"td"}]},renderHTML({HTMLAttributes:t}){return["td",mergeAttributes(this.options.HTMLAttributes,t),0]}}),TableHeader=Node$1.create({name:"tableHeader",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{const e=t.getAttribute("colwidth");return e?e.split(",").map(r=>parseInt(r,10)):null}}}},tableRole:"header_cell",isolating:!0,parseHTML(){return[{tag:"th"}]},renderHTML({HTMLAttributes:t}){return["th",mergeAttributes(this.options.HTMLAttributes,t),0]}}),TableRow=Node$1.create({name:"tableRow",addOptions(){return{HTMLAttributes:{}}},content:"(tableCell | tableHeader)*",tableRole:"row",parseHTML(){return[{tag:"tr"}]},renderHTML({HTMLAttributes:t}){return["tr",mergeAttributes(this.options.HTMLAttributes,t),0]}}),TiptapEditor_vue_vue_type_style_index_0_lang="",_sfc_main$4={components:{EditorContent},props:{inputvalue:{type:[String,Object],default:""},inputname:{type:String,required:!0},height:{type:String,default:"400px"}},data(){return{editor:null,textColor:"#000000",isFullscreen:!1}},computed:{editorContent(){var t;return JSON.stringify(((t=this.editor)==null?void 0:t.getJSON())||{})},currentTextSize(){var o;const t=(o=this.editor)==null?void 0:o.state.selection;if(!t)return"Default";const{from:e,to:n}=t;let r="Default";return this.editor.state.doc.nodesBetween(e,n,s=>{s.marks&&s.marks.forEach(a=>{a.type.name==="textStyle"&&a.attrs.fontSize&&(r=a.attrs.fontSize)})}),r},currentTextColor(){if(!this.editor)return"#000000";const{from:t,to:e}=this.editor.state.selection;let n="#000000";return this.editor.state.doc.nodesBetween(t,e,r=>{r.marks&&r.marks.forEach(o=>{o.type.name==="textStyle"&&o.attrs.color&&(n=o.attrs.color)})}),n},isBoldActive(){var t;return(t=this.editor)==null?void 0:t.isActive("bold")},isItalicActive(){var t;return(t=this.editor)==null?void 0:t.isActive("italic")},isUnderlineActive(){var t;return(t=this.editor)==null?void 0:t.isActive("underline")},isStrikeActive(){var t;return(t=this.editor)==null?void 0:t.isActive("strike")}},mounted(){let t;try{!this.inputvalue||this.inputvalue===""?t={type:"doc",content:[]}:t=typeof this.inputvalue=="string"?JSON.parse(this.inputvalue):this.inputvalue}catch(e){console.error("Failed to parse JSON:",e),t={type:"doc",content:[]}}this.editor=new Editor({extensions:[TextStyle.extend({addAttributes(){return{fontSize:{default:null,parseHTML:e=>e.style.fontSize||null,renderHTML:e=>e.fontSize?{style:`font-size: ${e.fontSize};`}:{}}}},addCommands(){return{setFontSize:e=>({chain:n})=>n().setMark("textStyle",{fontSize:e}).run()}}}),Color,StarterKit.configure({bold:!0,italic:!0}),TextAlign.configure({types:["heading","paragraph"]}),Link,Underline,Table.configure({resizable:!0,allowTableNodeSelection:!0}),TableRow,TableHeader,TableCell.extend({addCommands(){return{mergeCells:()=>({state:e,dispatch:n})=>mergeCells(e,n),splitCell:()=>({state:e,dispatch:n})=>splitCell(e,n)}}}),FloatingMenu.configure({shouldShow:({editor:e,state:n})=>{const{$from:r}=n.selection;return r.node(r.depth).type.name==="table"}})],content:t}),this.editor.on("selectionUpdate",()=>{this.$forceUpdate()})},beforeUnmount(){this.editor.destroy()},methods:{toggleFullscreen(){this.isFullscreen=!this.isFullscreen,document.body.classList.toggle("editor-fullscreen-active",this.isFullscreen)},setTextSize(t){this.editor.chain().focus().setMark("textStyle",{fontSize:t}).run()},setTextColor(t){this.textColor=t,this.editor.chain().focus().setMark("textStyle",{color:this.textColor}).run()},toggleBold(){this.editor.chain().focus().toggleBold().run()},toggleItalic(){this.editor.chain().focus().toggleItalic().run()},toggleUnderline(){this.editor.chain().focus().toggleUnderline().run()},toggleStrike(){this.editor.chain().focus().toggleStrike().run()},setTextAlign(t){this.editor.chain().focus().setTextAlign(t).run()},toggleBulletList(){this.editor.chain().focus().toggleBulletList().run()},toggleOrderedList(){this.editor.chain().focus().toggleOrderedList().run()},setLink(){const t=prompt("Enter a URL");t&&this.editor.chain().focus().extendMarkRange("link").setLink({href:t}).run()},unsetLink(){this.editor.chain().focus().unsetLink().run()},undo(){this.editor.chain().focus().undo().run()},redo(){this.editor.chain().focus().redo().run()},addTable(){this.editor.chain().focus().insertTable({rows:3,cols:3,withHeaderRow:!0}).run()},addColumnBefore(){this.editor.chain().focus().addColumnBefore().run()},addColumnAfter(){this.editor.chain().focus().addColumnAfter().run()},deleteColumn(){this.editor.chain().focus().deleteColumn().run()},addRowBefore(){this.editor.chain().focus().addRowBefore().run()},addRowAfter(){this.editor.chain().focus().addRowAfter().run()},deleteRow(){this.editor.chain().focus().deleteRow().run()},deleteTable(){this.editor.chain().focus().deleteTable().run()},mergeCells(){this.editor.chain().focus().mergeCells().run()},splitCell(){this.editor.chain().focus().splitCell().run()}}},_hoisted_1$3={class:"tiptap-container rounded-3"},_hoisted_2$2={class:"editor-toolbar border rounded p-2 mb-0",style:{"background-color":"lightgoldenrodyellow"}},_hoisted_3$2={class:"btn-toolbar mb-0",role:"toolbar"},_hoisted_4$2={class:"btn-group me-3",role:"group"},_hoisted_5$1=createBaseVNode("i",{class:"fa-solid fa-rotate-left"},null,-1),_hoisted_6=[_hoisted_5$1],_hoisted_7=createBaseVNode("i",{class:"fa-solid fa-rotate-right"},null,-1),_hoisted_8=[_hoisted_7],_hoisted_9={class:"btn-group me-3"},_hoisted_10={type:"button",class:"btn dropdown-toggle","data-bs-toggle":"dropdown"},_hoisted_11={class:"dropdown-menu"},_hoisted_12={class:"btn-group me-3",role:"group"},_hoisted_13=createBaseVNode("i",{class:"fa-solid fa-bold"},null,-1),_hoisted_14=[_hoisted_13],_hoisted_15=createBaseVNode("i",{class:"fa-solid fa-italic"},null,-1),_hoisted_16=[_hoisted_15],_hoisted_17=createBaseVNode("i",{class:"fa-solid fa-underline"},null,-1),_hoisted_18=[_hoisted_17],_hoisted_19=createBaseVNode("i",{class:"fa-solid fa-strikethrough"},null,-1),_hoisted_20=[_hoisted_19],_hoisted_21={class:"btn-group me-3"},_hoisted_22=createBaseVNode("button",{type:"button",class:"btn dropdown-toggle","data-bs-toggle":"dropdown"},[createBaseVNode("i",{class:"fa-solid fa-align-left"})],-1),_hoisted_23={class:"dropdown-menu"},_hoisted_24=createBaseVNode("i",{class:"fa-solid fa-align-left me-1"},null,-1),_hoisted_25=[_hoisted_24],_hoisted_26=createBaseVNode("i",{class:"fa-solid fa-align-center me-1"},null,-1),_hoisted_27=[_hoisted_26],_hoisted_28=createBaseVNode("i",{class:"fa-solid fa-align-right me-1"},null,-1),_hoisted_29=[_hoisted_28],_hoisted_30=createBaseVNode("i",{class:"fa-solid fa-align-justify me-1"},null,-1),_hoisted_31=[_hoisted_30],_hoisted_32={class:"btn-group me-2 d-flex align-items-center"},_hoisted_33=createBaseVNode("label",{class:"form-label mb-0 me-1"},"Culoare text:",-1),_hoisted_34=["value"],_hoisted_35={class:"btn-group me-3",role:"group"},_hoisted_36=createBaseVNode("i",{class:"fa-solid fa-list-ul"},null,-1),_hoisted_37=[_hoisted_36],_hoisted_38=createBaseVNode("i",{class:"fa-solid fa-list-ol"},null,-1),_hoisted_39=[_hoisted_38],_hoisted_40={class:"btn-group me-3",role:"group"},_hoisted_41=createBaseVNode("i",{class:"fa-solid fa-link"},null,-1),_hoisted_42=[_hoisted_41],_hoisted_43=createBaseVNode("i",{class:"fa-solid fa-link-slash"},null,-1),_hoisted_44=[_hoisted_43],_hoisted_45={class:"btn-group me-3",role:"group"},_hoisted_46=createBaseVNode("i",{class:"fa-solid fa-table"},null,-1),_hoisted_47=[_hoisted_46],_hoisted_48={class:"btn-group me-2"},_hoisted_49=createBaseVNode("div",{class:"w-100"},null,-1),_hoisted_50={key:0,class:"btn-toolbar mb-0",role:"toolbar"},_hoisted_51={class:"btn-group btn-group-sm",role:"group"},_hoisted_52={class:"btn-group btn-group-sm",role:"group"},_hoisted_53={class:"btn-group btn-group-sm",role:"group"},_hoisted_54={class:"btn-group btn-group-sm",role:"group"},_hoisted_55=["name","value"];function _sfc_render$4(t,e,n,r,o,s){var l;const a=resolveComponent("editor-content");return openBlock(),createElementBlock("div",_hoisted_1$3,[createBaseVNode("div",_hoisted_2$2,[createBaseVNode("div",_hoisted_3$2,[createBaseVNode("div",_hoisted_4$2,[createBaseVNode("button",{type:"button",onClick:e[0]||(e[0]=(...c)=>s.undo&&s.undo(...c)),title:"Undo"},_hoisted_6),createBaseVNode("button",{type:"button",onClick:e[1]||(e[1]=(...c)=>s.redo&&s.redo(...c)),title:"Redo"},_hoisted_8)]),createBaseVNode("div",_hoisted_9,[createBaseVNode("button",_hoisted_10," Mărime text: "+toDisplayString(s.currentTextSize),1),createBaseVNode("ul",_hoisted_11,[createBaseVNode("button",{type:"button",class:"btn",onClick:e[2]||(e[2]=c=>s.setTextSize("12px"))},"12px"),createBaseVNode("button",{type:"button",class:"btn",onClick:e[3]||(e[3]=c=>s.setTextSize("14px"))},"14px"),createBaseVNode("button",{type:"button",class:"btn",onClick:e[4]||(e[4]=c=>s.setTextSize("16px"))},"16px"),createBaseVNode("button",{type:"button",class:"btn",onClick:e[5]||(e[5]=c=>s.setTextSize("18px"))},"18px"),createBaseVNode("button",{type:"button",class:"btn",onClick:e[6]||(e[6]=c=>s.setTextSize("20px"))},"20px"),createBaseVNode("button",{type:"button",class:"btn",onClick:e[7]||(e[7]=c=>s.setTextSize("26px"))},"26px")])]),createBaseVNode("div",_hoisted_12,[createBaseVNode("button",{type:"button",class:normalizeClass(["btn",{active:s.isBoldActive}]),onClick:e[8]||(e[8]=(...c)=>s.toggleBold&&s.toggleBold(...c)),title:"Bold"},_hoisted_14,2),createBaseVNode("button",{type:"button",class:normalizeClass(["btn",{active:s.isItalicActive}]),onClick:e[9]||(e[9]=(...c)=>s.toggleItalic&&s.toggleItalic(...c)),title:"Italic"},_hoisted_16,2),createBaseVNode("button",{type:"button",class:normalizeClass(["btn",{active:s.isUnderlineActive}]),onClick:e[10]||(e[10]=(...c)=>s.toggleUnderline&&s.toggleUnderline(...c)),title:"Underline"},_hoisted_18,2),createBaseVNode("button",{type:"button",class:normalizeClass(["btn",{active:s.isStrikeActive}]),onClick:e[11]||(e[11]=(...c)=>s.toggleStrike&&s.toggleStrike(...c)),title:"Strikethrough"},_hoisted_20,2)]),createBaseVNode("div",_hoisted_21,[_hoisted_22,createBaseVNode("ul",_hoisted_23,[createBaseVNode("button",{type:"button",class:"btn",onClick:e[12]||(e[12]=c=>s.setTextAlign("left")),title:"Align left"},_hoisted_25),createBaseVNode("button",{type:"button",class:"btn",onClick:e[13]||(e[13]=c=>s.setTextAlign("center")),title:"Align center"},_hoisted_27),createBaseVNode("button",{type:"button",class:"btn",onClick:e[14]||(e[14]=c=>s.setTextAlign("right")),title:"Align right"},_hoisted_29),createBaseVNode("button",{type:"button",class:"btn",onClick:e[15]||(e[15]=c=>s.setTextAlign("justify")),title:"Text justify"},_hoisted_31)])]),createBaseVNode("div",_hoisted_32,[_hoisted_33,createBaseVNode("input",{type:"color",value:s.currentTextColor,onInput:e[16]||(e[16]=c=>s.setTextColor(c.target.value)),class:"form-control-color"},null,40,_hoisted_34)]),createBaseVNode("div",_hoisted_35,[createBaseVNode("button",{type:"button",onClick:e[17]||(e[17]=(...c)=>s.toggleBulletList&&s.toggleBulletList(...c)),title:"Bullet list"},_hoisted_37),createBaseVNode("button",{type:"button",onClick:e[18]||(e[18]=(...c)=>s.toggleOrderedList&&s.toggleOrderedList(...c)),title:"Ordered list"},_hoisted_39)]),createBaseVNode("div",_hoisted_40,[createBaseVNode("button",{type:"button",onClick:e[19]||(e[19]=(...c)=>s.setLink&&s.setLink(...c)),title:"Set link"},_hoisted_42),createBaseVNode("button",{type:"button",onClick:e[20]||(e[20]=(...c)=>s.unsetLink&&s.unsetLink(...c)),title:"Unset link"},_hoisted_44)]),createBaseVNode("div",_hoisted_45,[createBaseVNode("button",{type:"button",class:"btn border-0",onClick:e[21]||(e[21]=(...c)=>s.addTable&&s.addTable(...c)),title:"Adaugă tabel"},_hoisted_47)]),createBaseVNode("div",_hoisted_48,[createBaseVNode("button",{type:"button",class:"btn",onClick:e[22]||(e[22]=(...c)=>s.toggleFullscreen&&s.toggleFullscreen(...c)),title:"Fullscreen"},toDisplayString(o.isFullscreen?"Ieșire Fullscreen":"Fullscreen")+" ",1)])]),_hoisted_49,(l=o.editor)!=null&&l.isActive("table")?(openBlock(),createElementBlock("div",_hoisted_50,[createBaseVNode("div",_hoisted_51,[createBaseVNode("button",{type:"button",class:"btn",onClick:e[23]||(e[23]=(...c)=>s.addRowBefore&&s.addRowBefore(...c))},"↑ Rând înainte"),createBaseVNode("button",{type:"button",class:"btn",onClick:e[24]||(e[24]=(...c)=>s.addRowAfter&&s.addRowAfter(...c))},"↓ Rând după"),createBaseVNode("button",{type:"button",class:"btn",onClick:e[25]||(e[25]=(...c)=>s.deleteRow&&s.deleteRow(...c))},"❌ Șterge rând")]),createBaseVNode("div",_hoisted_52,[createBaseVNode("button",{type:"button",class:"btn",onClick:e[26]||(e[26]=(...c)=>s.addColumnBefore&&s.addColumnBefore(...c))},"← Coloană înainte"),createBaseVNode("button",{type:"button",class:"btn",onClick:e[27]||(e[27]=(...c)=>s.addColumnAfter&&s.addColumnAfter(...c))},"→ Coloană după"),createBaseVNode("button",{type:"button",class:"btn",onClick:e[28]||(e[28]=(...c)=>s.deleteColumn&&s.deleteColumn(...c))},"❌ Șterge coloană")]),createBaseVNode("div",_hoisted_53,[createBaseVNode("button",{type:"button",class:"btn",onClick:e[29]||(e[29]=(...c)=>s.mergeCells&&s.mergeCells(...c))},"🔗 Lipește celule"),createBaseVNode("button",{type:"button",class:"btn",onClick:e[30]||(e[30]=(...c)=>s.splitCell&&s.splitCell(...c))},"✂️ Desparte celule")]),createBaseVNode("div",_hoisted_54,[createBaseVNode("button",{type:"button",class:"btn text-danger",onClick:e[31]||(e[31]=(...c)=>s.deleteTable&&s.deleteTable(...c))},"🗑️ Șterge tabel")])])):createCommentVNode("",!0)]),createBaseVNode("div",{class:"editor-container border rounded p-2 bg-white",style:normalizeStyle({height:n.height})},[createVNode(a,{editor:o.editor},null,8,["editor"])],4),createBaseVNode("input",{type:"hidden",name:n.inputname,value:s.editorContent},null,8,_hoisted_55)])}const TiptapEditor=_export_sfc(_sfc_main$4,[["render",_sfc_render$4]]),TogglePredat_vue_vue_type_style_index_0_scoped_f8643aac_lang="",_sfc_main$3={props:{comandaId:{type:Number,required:!0},initialStatus:{type:Number,required:!0}},data(){return{predatStatus:this.initialStatus}},computed:{badgeText(){return this.predatStatus?"DA":"NU"},badgeClass(){return this.predatStatus?"badge bg-success":"badge bg-danger"}},methods:{async togglePredat(){try{const e=await(await fetch(`/intermedieri/schimbaPredatLaContabilitate/${this.comandaId}`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}})).json();e.success?(console.log("Toggling Status:",e.predat_la_contabilitate),this.predatStatus=e.predat_la_contabilitate):alert("Error updating status")}catch(t){console.error("Error:",t),alert("An error occurred while updating the status.")}}}};function _sfc_render$3(t,e,n,r,o,s){return openBlock(),createElementBlock("button",{onClick:e[0]||(e[0]=(...a)=>s.togglePredat&&s.togglePredat(...a)),class:"btn-toggle-predat border-0 flex"},[createBaseVNode("span",{class:normalizeClass(s.badgeClass)},toDisplayString(s.badgeText),3)])}const TogglePredat=_export_sfc(_sfc_main$3,[["render",_sfc_render$3],["__scopeId","data-v-f8643aac"]]),InlineObservatiiEditor_vue_vue_type_style_index_0_scoped_167fabc9_lang="",_sfc_main$2={props:{kpiId:{type:Number,required:!0},userId:{type:Number,required:!0},observatii:{type:String,required:!0},searchMonth:{type:Number,required:!0},searchYear:{type:Number,required:!0}},data(){return{localObservatii:this.observatii,loading:!1,showCheckMark:!1}},methods:{autoResize(t=null){const e=t?t.target:this.$refs.textarea;e.style.height="auto",e.style.height=`${e.scrollHeight}px`},updateObservatii(){this.loading=!0,this.showCheckMark=!1;const t={user_id:this.userId,month:this.searchMonth,year:this.searchYear,observatii:this.localObservatii};axios.post("/key-performance-indicators/update-observatii",t).then(()=>{this.loading=!1,this.showCheckMark=!0,setTimeout(()=>{this.showCheckMark=!1},5e3)}).catch(e=>{console.error("Error updating observatii:",e),this.loading=!1})}},mounted(){this.autoResize()}},_hoisted_1$2={class:"d-flex align-items-start"},_hoisted_2$1={class:"status-icon me-2"},_hoisted_3$1={key:0,class:"fas fa-spinner fa-spin text-primary"},_hoisted_4$1={key:1,class:"fas fa-check-circle text-success"};function _sfc_render$2(t,e,n,r,o,s){return openBlock(),createElementBlock("div",_hoisted_1$2,[createBaseVNode("span",_hoisted_2$1,[o.loading?(openBlock(),createElementBlock("i",_hoisted_3$1)):o.showCheckMark?(openBlock(),createElementBlock("i",_hoisted_4$1)):createCommentVNode("",!0)]),withDirectives(createBaseVNode("textarea",{ref:"textarea",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=a=>o.localObservatii=a),onInput:e[1]||(e[1]=(...a)=>s.autoResize&&s.autoResize(...a)),onBlur:e[2]||(e[2]=(...a)=>s.updateObservatii&&s.updateObservatii(...a)),rows:"1"},null,544),[[vModelText,o.localObservatii]])])}const InlineObservatiiEditor=_export_sfc(_sfc_main$2,[["render",_sfc_render$2],["__scopeId","data-v-167fabc9"]]),DirectoryTree_vue_vue_type_style_index_0_scoped_eeaa7619_lang="",_sfc_main$1={name:"DirectoryTree",props:{nodes:{type:Array,required:!0},level:{type:Number,default:0}},data(){return{localNodes:JSON.parse(JSON.stringify(this.nodes))}},methods:{toggle(t){t.children&&t.children.length&&(t.isOpen=!t.isOpen,localStorage.setItem(`directoryTree_${t.path}`,t.isOpen))},restoreStates(t){t.forEach(e=>{const n=localStorage.getItem(`directoryTree_${e.path}`);n!==null&&(e.isOpen=n==="true"),e.children&&e.children.length&&this.restoreStates(e.children)})}},mounted(){this.restoreStates(this.localNodes)}},_withScopeId=t=>(pushScopeId("data-v-eeaa7619"),t=t(),popScopeId(),t),_hoisted_1$1={class:"directory-label"},_hoisted_2=["onClick"],_hoisted_3={key:1,class:"toggle-icon",style:{width:"16px",display:"inline-block"}},_hoisted_4=_withScopeId(()=>createBaseVNode("i",{class:"fa-solid fa-folder text-warning"},null,-1)),_hoisted_5=["href"];function _sfc_render$1(t,e,n,r,o,s){return openBlock(),createElementBlock("ul",{class:"directory-tree",style:normalizeStyle({paddingLeft:n.level===0?"0px":"20px",margin:n.level===0?"0px":"initial"})},[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(o.localNodes,a=>(openBlock(),createElementBlock("li",{key:a.path},[createBaseVNode("div",_hoisted_1$1,[a.children&&a.children.length?(openBlock(),createElementBlock("span",{key:0,class:"toggle-icon",onClick:l=>s.toggle(a)},[createBaseVNode("i",{class:normalizeClass(["fa-solid",a.isOpen?"fa-caret-down":"fa-caret-right","text-warning"])},null,2)],8,_hoisted_2)):(openBlock(),createElementBlock("span",_hoisted_3)),_hoisted_4,createBaseVNode("a",{href:`/file-manager-personalizat/${a.path}`,class:"directory-link"},toDisplayString(a.name),9,_hoisted_5)]),a.children&&a.children.length&&a.isOpen?(openBlock(),createBlock(resolveDynamicComponent(t.$options.name),{key:0,nodes:a.children,level:n.level+1},null,8,["nodes","level"])):createCommentVNode("",!0)]))),128))],4)}const DirectoryTree=_export_sfc(_sfc_main$1,[["render",_sfc_render$1],["__scopeId","data-v-eeaa7619"]]);function commonjsRequire(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var distExports={},dist={get exports(){return distExports},set exports(t){distExports=t}},jsuitesExports={},jsuites={get exports(){return jsuitesExports},set exports(t){jsuitesExports=t}},hasRequiredJsuites;function requireJsuites(){return hasRequiredJsuites||(hasRequiredJsuites=1,function(t,e){(function(n,r){t.exports=r()})(commonjsGlobal,function(){var n;return function(){var r={195:function(l){(function(c,u){l.exports=u()})(this,function(){return function(St){function u(Ze,et){this.highOrder=Ze,this.lowOrder=et}var g=[new u(1779033703,4089235720),new u(3144134277,2227873595),new u(1013904242,4271175723),new u(2773480762,1595750129),new u(1359893119,2917565137),new u(2600822924,725511199),new u(528734635,4215389547),new u(1541459225,327033209)],C=[new u(1116352408,3609767458),new u(1899447441,602891725),new u(3049323471,3964484399),new u(3921009573,2173295548),new u(961987163,4081628472),new u(1508970993,3053834265),new u(2453635748,2937671579),new u(2870763221,3664609560),new u(3624381080,2734883394),new u(310598401,1164996542),new u(607225278,1323610764),new u(1426881987,3590304994),new u(1925078388,4068182383),new u(2162078206,991336113),new u(2614888103,633803317),new u(3248222580,3479774868),new u(3835390401,2666613458),new u(4022224774,944711139),new u(264347078,2341262773),new u(604807628,2007800933),new u(770255983,1495990901),new u(1249150122,1856431235),new u(1555081692,3175218132),new u(1996064986,2198950837),new u(2554220882,3999719339),new u(2821834349,766784016),new u(2952996808,2566594879),new u(3210313671,3203337956),new u(3336571891,1034457026),new u(3584528711,2466948901),new u(113926993,3758326383),new u(338241895,168717936),new u(666307205,1188179964),new u(773529912,1546045734),new u(1294757372,1522805485),new u(1396182291,2643833823),new u(1695183700,2343527390),new u(1986661051,1014477480),new u(2177026350,1206759142),new u(2456956037,344077627),new u(2730485921,1290863460),new u(2820302411,3158454273),new u(3259730800,3505952657),new u(3345764771,106217008),new u(3516065817,3606008344),new u(3600352804,1432725776),new u(4094571909,1467031594),new u(275423344,851169720),new u(430227734,3100823752),new u(506948616,1363258195),new u(659060556,3750685593),new u(883997877,3785050280),new u(958139571,3318307427),new u(1322822218,3812723403),new u(1537002063,2003034995),new u(1747873779,3602036899),new u(1955562222,1575990012),new u(2024104815,1125592928),new u(2227730452,2716904306),new u(2361852424,442776044),new u(2428436474,593698344),new u(2756734187,3733110249),new u(3204031479,2999351573),new u(3329325298,3815920427),new u(3391569614,3928383900),new u(3515267271,566280711),new u(3940187606,3454069534),new u(4118630271,4000239992),new u(116418474,1914138554),new u(174292421,2731055270),new u(289380356,3203993006),new u(460393269,320620315),new u(685471733,587496836),new u(852142971,1086792851),new u(1017036298,365543100),new u(1126000580,2618297676),new u(1288033470,3409855158),new u(1501505948,4234509866),new u(1607167915,987167468),new u(1816402316,1246189591)],v=new Array(64),m,S,T,w,N,D,k,L,H,R,B,Y,K=8;function se(Ze){return unescape(encodeURIComponent(Ze))}function pe(Ze){for(var et=[],ht=(1<<K)-1,Tt=Ze.length*K,jt=0;jt<Tt;jt+=K)et[jt>>5]|=(Ze.charCodeAt(jt/K)&ht)<<32-K-jt%32;return et}function le(Ze){for(var et="0123456789abcdef",ht="",Tt=Ze.length*4,jt,ge=0;ge<Tt;ge+=1)jt=Ze[ge>>2]>>(3-ge%4)*8,ht+=et.charAt(jt>>4&15)+et.charAt(jt&15);return ht}function Ee(Ze,et){var ht,Tt,jt,ge;return ht=(Ze.lowOrder&65535)+(et.lowOrder&65535),Tt=(Ze.lowOrder>>>16)+(et.lowOrder>>>16)+(ht>>>16),jt=(Tt&65535)<<16|ht&65535,ht=(Ze.highOrder&65535)+(et.highOrder&65535)+(Tt>>>16),Tt=(Ze.highOrder>>>16)+(et.highOrder>>>16)+(ht>>>16),ge=(Tt&65535)<<16|ht&65535,new u(ge,jt)}function Ne(Ze,et,ht,Tt){var jt,ge,Te,Ie;return jt=(Ze.lowOrder&65535)+(et.lowOrder&65535)+(ht.lowOrder&65535)+(Tt.lowOrder&65535),ge=(Ze.lowOrder>>>16)+(et.lowOrder>>>16)+(ht.lowOrder>>>16)+(Tt.lowOrder>>>16)+(jt>>>16),Te=(ge&65535)<<16|jt&65535,jt=(Ze.highOrder&65535)+(et.highOrder&65535)+(ht.highOrder&65535)+(Tt.highOrder&65535)+(ge>>>16),ge=(Ze.highOrder>>>16)+(et.highOrder>>>16)+(ht.highOrder>>>16)+(Tt.highOrder>>>16)+(jt>>>16),Ie=(ge&65535)<<16|jt&65535,new u(Ie,Te)}function _e(Ze,et,ht,Tt,jt){var ge,Te,Ie,$e;return ge=(Ze.lowOrder&65535)+(et.lowOrder&65535)+(ht.lowOrder&65535)+(Tt.lowOrder&65535)+(jt.lowOrder&65535),Te=(Ze.lowOrder>>>16)+(et.lowOrder>>>16)+(ht.lowOrder>>>16)+(Tt.lowOrder>>>16)+(jt.lowOrder>>>16)+(ge>>>16),Ie=(Te&65535)<<16|ge&65535,ge=(Ze.highOrder&65535)+(et.highOrder&65535)+(ht.highOrder&65535)+(Tt.highOrder&65535)+(jt.highOrder&65535)+(Te>>>16),Te=(Ze.highOrder>>>16)+(et.highOrder>>>16)+(ht.highOrder>>>16)+(Tt.highOrder>>>16)+(jt.highOrder>>>16)+(ge>>>16),$e=(Te&65535)<<16|ge&65535,new u($e,Ie)}function me(Ze,et,ht){return new u(Ze.highOrder&et.highOrder^Ze.highOrder&ht.highOrder^et.highOrder&ht.highOrder,Ze.lowOrder&et.lowOrder^Ze.lowOrder&ht.lowOrder^et.lowOrder&ht.lowOrder)}function Ke(Ze,et,ht){return new u(Ze.highOrder&et.highOrder^~Ze.highOrder&ht.highOrder,Ze.lowOrder&et.lowOrder^~Ze.lowOrder&ht.lowOrder)}function Ye(Ze,et){return et<=32?new u(Ze.highOrder>>>et|Ze.lowOrder<<32-et,Ze.lowOrder>>>et|Ze.highOrder<<32-et):new u(Ze.lowOrder>>>et|Ze.highOrder<<32-et,Ze.highOrder>>>et|Ze.lowOrder<<32-et)}function pt(Ze){var et=Ye(Ze,28),ht=Ye(Ze,34),Tt=Ye(Ze,39);return new u(et.highOrder^ht.highOrder^Tt.highOrder,et.lowOrder^ht.lowOrder^Tt.lowOrder)}function ut(Ze){var et=Ye(Ze,14),ht=Ye(Ze,18),Tt=Ye(Ze,41);return new u(et.highOrder^ht.highOrder^Tt.highOrder,et.lowOrder^ht.lowOrder^Tt.lowOrder)}function It(Ze){var et=Ye(Ze,1),ht=Ye(Ze,8),Tt=ot(Ze,7);return new u(et.highOrder^ht.highOrder^Tt.highOrder,et.lowOrder^ht.lowOrder^Tt.lowOrder)}function te(Ze){var et=Ye(Ze,19),ht=Ye(Ze,61),Tt=ot(Ze,6);return new u(et.highOrder^ht.highOrder^Tt.highOrder,et.lowOrder^ht.lowOrder^Tt.lowOrder)}function ot(Ze,et){return et<=32?new u(Ze.highOrder>>>et,Ze.lowOrder>>>et|Ze.highOrder<<32-et):new u(0,Ze.highOrder<<32-et)}var St=se(St),Gt=St.length*K;St=pe(St),St[Gt>>5]|=128<<24-Gt%32,St[(Gt+128>>10<<5)+31]=Gt;for(var H=0;H<St.length;H+=32){m=g[0],S=g[1],T=g[2],w=g[3],N=g[4],D=g[5],k=g[6],L=g[7];for(var R=0;R<80;R++)R<16?v[R]=new u(St[R*2+H],St[R*2+H+1]):v[R]=Ne(te(v[R-2]),v[R-7],It(v[R-15]),v[R-16]),B=_e(L,ut(N),Ke(N,D,k),C[R],v[R]),Y=Ee(pt(m),me(m,S,T)),L=k,k=D,D=N,N=Ee(w,B),w=T,T=S,S=m,m=Ee(B,Y);g[0]=Ee(m,g[0]),g[1]=Ee(S,g[1]),g[2]=Ee(T,g[2]),g[3]=Ee(w,g[3]),g[4]=Ee(N,g[4]),g[5]=Ee(D,g[5]),g[6]=Ee(k,g[6]),g[7]=Ee(L,g[7])}for(var _t=[],H=0;H<g.length;H++)_t.push(g[H].highOrder),_t.push(g[H].lowOrder);return le(_t)}})}},o={};function s(l){var c=o[l];if(c!==void 0)return c.exports;var u=o[l]={exports:{}};return r[l].call(u.exports,u,u.exports,s),u.exports}(function(){s.n=function(l){var c=l&&l.__esModule?function(){return l.default}:function(){return l};return s.d(c,{a:c}),c}})(),function(){s.d=function(l,c){for(var u in c)s.o(c,u)&&!s.o(l,u)&&Object.defineProperty(l,u,{enumerable:!0,get:c[u]})}}(),function(){s.o=function(l,c){return Object.prototype.hasOwnProperty.call(l,c)}}();var a={};(function(){s.d(a,{default:function(){return mt}});var l=function(F){document.dictionary||(document.dictionary={});var V=null,O=Object.keys(F);for(V=0;V<O.length;V++)document.dictionary[O[V]]=F[O[V]]},c=function(F){return typeof document<"u"&&document.dictionary&&document.dictionary[F]||F},u={setDictionary:l,translate:c},C=function(F,V){if(V===!0)window.jSuitesStateControl=window.jSuitesStateControl.filter(function(A){return A!==null}),setTimeout(function(){window.jSuitesStateControl.push(F)},0);else{var O=window.jSuitesStateControl.indexOf(F);O>=0&&window.jSuitesStateControl.splice(O,1)}},v={};v.two=function(F){return F=""+F,F.length==1&&(F="0"+F),F},v.focus=function(F){if(F.innerText.length){var V=document.createRange(),O=window.getSelection(),A=F.childNodes[F.childNodes.length-1];V.setStart(A,A.length),V.collapse(!0),O.removeAllRanges(),O.addRange(V),F.scrollLeft=F.scrollWidth}},v.isNumeric=function(F){return typeof F=="string"&&(F=F.trim()),!isNaN(F)&&F!==null&&F!==""},v.guid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(F){var V=Math.random()*16|0,O=F=="x"?V:V&3|8;return O.toString(16)})},v.getNode=function(){var F=document.getSelection().anchorNode;return F?F.nodeType==3?F.parentNode:F:null},v.hash=function(F){var V=0,O,A;if(F.length===0)return V;for(O=0;O<F.length;O++)A=F.charCodeAt(O),A>32&&(V=(V<<5)-V+A,V|=0);return V},v.randomColor=function(F){var V=-.25,O=String("#"+Math.random().toString(16).slice(2,8).toUpperCase()).replace(/[^0-9a-f]/gi,"");O.length<6&&(O=O[0]+O[0]+O[1]+O[1]+O[2]+O[2]);var A=[],J,he;for(he=0;he<3;he++)J=parseInt(O.substr(he*2,2),16),J=Math.round(Math.min(Math.max(0,J+J*V),255)).toString(16),A.push(("00"+J).substr(J.length));return F==!0?"#"+v.two(A[0].toString(16))+v.two(A[1].toString(16))+v.two(A[2].toString(16)):A},v.getWindowWidth=function(){var F=window,V=document,O=V.documentElement,A=V.getElementsByTagName("body")[0],J=F.innerWidth||O.clientWidth||A.clientWidth;return J},v.getWindowHeight=function(){var F=window,V=document,O=V.documentElement,A=V.getElementsByTagName("body")[0],J=F.innerHeight||O.clientHeight||A.clientHeight;return J},v.getPosition=function(F){if(F.changedTouches&&F.changedTouches[0])var V=F.changedTouches[0].pageX,O=F.changedTouches[0].pageY;else var V=window.Event?F.pageX:F.clientX+(document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft),O=window.Event?F.pageY:F.clientY+(document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop);return[V,O]},v.click=function(F){if(F.click)F.click();else{var V=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});F.dispatchEvent(V)}},v.findElement=function(F,V){var O=!1;function A(J){J&&!O&&(typeof V=="function"?O=V(J):typeof V=="string"&&J.classList&&J.classList.contains(V)&&(O=J)),J.parentNode&&!O&&A(J.parentNode)}return A(F),O};var m=v;function S(F,V,O){if(F=F.split("."),F.length){let A=this,J=null;for(;F.length>1;)if(J=F.shift(),A.hasOwnProperty(J))A=A[J];else{if(typeof V>"u")return;A[J]={},A=A[J]}if(J=F.shift(),typeof V<"u")return O===!0?delete A[J]:A[J]=V,!0;if(A)return A[J]}return!1}function T(F,V){var O={};O.options={};var A={pointer:null,direction:null,ondragstart:null,ondragend:null,ondrop:null},J=null;for(var he in A)V&&V.hasOwnProperty(he)?O.options[he]=V[he]:O.options[he]=A[he];F.classList.add("jsorting"),F.addEventListener("dragstart",function(z){let ee=z.target;if(ee.nodeType===3)if(ee.parentNode.getAttribute("draggable")==="true")ee=ee.parentNode;else{z.preventDefault(),z.stopPropagation();return}if(ee.getAttribute("draggable")==="true"){let Z=Array.prototype.indexOf.call(ee.parentNode.children,ee);J={element:ee,o:Z,d:Z},ee.style.opacity="0.25",typeof O.options.ondragstart=="function"&&O.options.ondragstart(F,ee,z),z.dataTransfer.setDragImage(ee,0,0)}}),F.addEventListener("dragover",function(z){if(z.preventDefault(),J&&be(z.target)&&z.target.getAttribute("draggable")=="true"&&J.element!=z.target){if(O.options.direction)var ee=z.target.clientWidth/2>z.offsetX;else var ee=z.target.clientHeight/2>z.offsetY;ee?z.target.parentNode.insertBefore(J.element,z.target):z.target.parentNode.insertBefore(J.element,z.target.nextSibling),J.d=Array.prototype.indexOf.call(z.target.parentNode.children,J.element)}}),F.addEventListener("dragleave",function(z){z.preventDefault()}),F.addEventListener("dragend",function(z){z.preventDefault(),J&&(typeof O.options.ondragend=="function"&&O.options.ondragend(F,J.element,z),J.o<J.d?z.target.parentNode.insertBefore(J.element,z.target.parentNode.children[J.o]):z.target.parentNode.insertBefore(J.element,z.target.parentNode.children[J.o].nextSibling),J.element.style.opacity="",J=null)}),F.addEventListener("drop",function(z){z.preventDefault(),J&&(J.o!==J.d&&typeof O.options.ondrop=="function"&&O.options.ondrop(F,J.o,J.d,J.element,z.target,z),J.element.style.opacity="",J=null)});for(var be=function(z){var ee=!1;function Z(ue){ue.className&&ue.classList.contains("jsorting")&&(ee=!0),ee||Z(ue.parentNode)}return Z(z),ee},q=0;q<F.children.length;q++)F.children[q].hasAttribute("draggable")||F.children[q].setAttribute("draggable","true");return F.val=function(){for(var z=null,ee=[],Z=0;Z<F.children.length;Z++)(z=F.children[Z].getAttribute("data-id"))&&ee.push(z);return ee},F}function w(F,V){var O={};(!V.loadUp||typeof V.loadUp!="function")&&(V.loadUp=function(){return!1}),(!V.loadDown||typeof V.loadDown!="function")&&(V.loadDown=function(){return!1}),V.timer||(V.timer=100);var A=null,J=function(he){if(A==null){var be=!1,q=F.scrollTop;F.scrollTop+F.clientHeight*2>=F.scrollHeight?V.loadDown()&&(q==F.scrollTop&&(F.scrollTop=F.scrollTop-F.clientHeight),be=!0):F.scrollTop<=F.clientHeight&&V.loadUp()&&(q==F.scrollTop&&(F.scrollTop=F.scrollTop+F.clientHeight),be=!0),A=setTimeout(function(){A=null},V.timer),be&&typeof V.onupdate=="function"&&V.onupdate()}};return F.onscroll=function(he){J()},F.onwheel=function(he){J()},O}function N(){var F=function(V,O){if(Array.isArray(V)){var A={instance:[],complete:O};if(V.length>0)for(var J=0;J<V.length;J++)V[J].multiple=A,A.instance.push(F(V[J]));return A}if(V.data||(V.data={}),V.type&&(V.method=V.type),V.method||(V.method="GET"),V.dataType||(V.dataType="json"),V.data){var he=function(ue,we){var Ae=[];if(ue){var je=Object.keys(ue);if(je.length)for(var ze=0;ze<je.length;ze++){if(we)var it=we+"["+je[ze]+"]";else var it=je[ze];if(ue[it]instanceof FileList)Ae[it]=ue[je[ze]];else if(ue[je[ze]]===null||ue[je[ze]]===void 0)Ae[it]="";else if(typeof ue[je[ze]]=="object")for(var ct=he(ue[je[ze]],it),Nt=Object.keys(ct),Ot=0;Ot<Nt.length;Ot++)Ae[Nt[Ot]]=ct[Nt[Ot]];else Ae[it]=ue[je[ze]]}}return Ae},be=he(V.data),q=Object.keys(be);if(V.method=="GET"){if(q.length){for(var z=[],J=0;J<q.length;J++)z.push(q[J]+"="+encodeURIComponent(be[q[J]]));V.url.indexOf("?")<0&&(V.url+="?"),V.url+=z.join("&")}}else for(var z=new FormData,J=0;J<q.length;J++)if(be[q[J]]instanceof FileList){if(be[q[J]].length)for(var ee=0;ee<be[q[J]].length;ee++)z.append(q[J],be[q[J]][ee],be[q[J]][ee].name)}else z.append(q[J],be[q[J]])}var Z=new XMLHttpRequest;return Z.open(V.method,V.url,!0),V.requestedWith?Z.setRequestHeader("X-Requested-With",V.requestedWith):V.requestedWith!==!1&&Z.setRequestHeader("X-Requested-With","XMLHttpRequest"),V.contentType&&Z.setRequestHeader("Content-Type",V.contentType),V.method==="POST"?Z.setRequestHeader("Accept","application/json"):V.dataType==="blob"?Z.responseType="blob":V.contentType||(V.dataType==="json"?Z.setRequestHeader("Content-Type","text/json"):V.dataType==="html"&&Z.setRequestHeader("Content-Type","text/html")),V.cache!==!0&&(Z.setRequestHeader("pragma","no-cache"),Z.setRequestHeader("cache-control","no-cache")),V.withCredentials===!0&&(Z.withCredentials=!0),typeof V.beforeSend=="function"&&V.beforeSend(Z),typeof F.beforeSend=="function"&&F.beforeSend(Z),document.ajax&&typeof document.ajax.beforeSend=="function"&&document.ajax.beforeSend(Z),Z.onerror=function(){V.error&&typeof V.error=="function"&&V.error({message:"Network error: Unable to reach the server.",status:0})},Z.ontimeout=function(){V.error&&typeof V.error=="function"&&V.error({message:"Request timed out after "+Z.timeout+"ms.",status:0})},Z.onload=function(){if(Z.status>=200&&Z.status<300)if(V.dataType==="json")try{var ue=JSON.parse(Z.responseText);V.success&&typeof V.success=="function"&&V.success(ue)}catch(Ae){V.error&&typeof V.error=="function"&&V.error(Ae,ue)}else{if(V.dataType==="blob")var ue=Z.response;else var ue=Z.responseText;V.success&&typeof V.success=="function"&&V.success(ue)}else V.error&&typeof V.error=="function"&&V.error(Z.responseText,Z.status);if(F.queue&&F.queue.length>0&&F.send(F.queue.shift()),F.requests&&F.requests.length){var we=F.requests.indexOf(Z);if(F.requests.splice(we,1),F.requests.length||V.complete&&typeof V.complete=="function"&&V.complete(ue),V.group&&F.oncomplete&&typeof F.oncomplete[V.group]=="function"&&(F.pending(V.group)||(F.oncomplete[V.group](),F.oncomplete[V.group]=null)),V.multiple&&V.multiple.instance){var we=V.multiple.instance.indexOf(Z);V.multiple.instance.splice(we,1),V.multiple.instance.length||V.multiple.complete&&typeof V.multiple.complete=="function"&&V.multiple.complete(ue)}}},Z.options=V,Z.data=z,V.queue===!0&&F.requests.length>0?F.queue.push(Z):F.send(Z),Z};return F.send=function(V){V.data?Array.isArray(V.data)?V.send(V.data.join("&")):V.send(V.data):V.send(),F.requests.push(V)},F.exists=function(V,O){var A=new XMLHttpRequest;A.open("HEAD",V,!1),A.send(),A.status&&O(A.status)},F.pending=function(V){var O=0,A=F.requests;if(A&&A.length)for(var J=0;J<A.length;J++)(!V||V==A[J].options.group)&&O++;return O},F.oncomplete={},F.requests=[],F.queue=[],F}var D=N();function k(){const F={loading:{}};return F.loading.show=function(V){F.loading.element||(F.loading.element=document.createElement("div"),F.loading.element.className="jloading"),document.body.appendChild(F.loading.element),V>0&&setTimeout(function(){F.loading.hide()},V*1e3)},F.loading.hide=function(){F.loading.element&&F.loading.element.parentNode&&document.body.removeChild(F.loading.element)},F.slideLeft=function(V,O,A){O==!0?(V.classList.add("jslide-left-in"),setTimeout(function(){V.classList.remove("jslide-left-in"),typeof A=="function"&&A()},400)):(V.classList.add("jslide-left-out"),setTimeout(function(){V.classList.remove("jslide-left-out"),typeof A=="function"&&A()},400))},F.slideRight=function(V,O,A){O===!0?(V.classList.add("jslide-right-in"),setTimeout(function(){V.classList.remove("jslide-right-in"),typeof A=="function"&&A()},400)):(V.classList.add("jslide-right-out"),setTimeout(function(){V.classList.remove("jslide-right-out"),typeof A=="function"&&A()},400))},F.slideTop=function(V,O,A){O===!0?(V.classList.add("jslide-top-in"),setTimeout(function(){V.classList.remove("jslide-top-in"),typeof A=="function"&&A()},400)):(V.classList.add("jslide-top-out"),setTimeout(function(){V.classList.remove("jslide-top-out"),typeof A=="function"&&A()},400))},F.slideBottom=function(V,O,A){O===!0?(V.classList.add("jslide-bottom-in"),setTimeout(function(){V.classList.remove("jslide-bottom-in"),typeof A=="function"&&A()},400)):(V.classList.add("jslide-bottom-out"),setTimeout(function(){V.classList.remove("jslide-bottom-out"),typeof A=="function"&&A()},100))},F.fadeIn=function(V,O){V.style.display="",V.classList.add("jfade-in"),setTimeout(function(){V.classList.remove("jfade-in"),typeof O=="function"&&O()},2e3)},F.fadeOut=function(V,O){V.classList.add("jfade-out"),setTimeout(function(){V.style.display="none",V.classList.remove("jfade-out"),typeof O=="function"&&O()},1e3)},F}var L=k();function H(){var F={};F.now=function(be,q){var z=null,ee=null,Z=null,ue=null,we=null,Ae=null;return Array.isArray(be)?(z=be[0],ee=be[1],Z=be[2],ue=be[3],we=be[4],Ae=be[5]):(be||(be=new Date),z=be.getFullYear(),ee=be.getMonth()+1,Z=be.getDate(),ue=be.getHours(),we=be.getMinutes(),Ae=be.getSeconds()),q==!0?m.two(z)+"-"+m.two(ee)+"-"+m.two(Z):m.two(z)+"-"+m.two(ee)+"-"+m.two(Z)+" "+m.two(ue)+":"+m.two(we)+":"+m.two(Ae)},F.toArray=function(be){var z=be.split(be.indexOf("T")!==-1?"T":" "),q=z[1],z=z[0].split("-"),ee=parseInt(z[0]),Z=parseInt(z[1]),ue=parseInt(z[2]),we=0,Ae=0;return q&&(q=q.split(":"),we=parseInt(q[0]),Ae=parseInt(q[1])),[ee,Z,ue,we,Ae,0]};var V=Date.UTC(1900,0,0),O=Date.UTC(1900,1,29),A=864e5;F.dateToNum=function(be){typeof be=="string"&&(be=new Date(be+"  GMT+0"));var q=be.getTime();return q>=O&&(q+=A),q-=V,q/A},F.numToDate=function(be){var q=V+be*A;q>=O&&(q-=A);const z=new Date(q);var ee=[z.getUTCFullYear(),z.getUTCMonth()+1,z.getUTCDate(),z.getUTCHours(),z.getUTCMinutes(),z.getUTCSeconds()];return F.now(ee)};let J=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],he=["January","February","March","April","May","June","July","August","September","October","November","December"];return Object.defineProperty(F,"weekdays",{get:function(){return J.map(function(be){return u.translate(be)})}}),Object.defineProperty(F,"weekdaysShort",{get:function(){return J.map(function(be){return u.translate(be).substring(0,3)})}}),Object.defineProperty(F,"months",{get:function(){return he.map(function(be){return u.translate(be)})}}),Object.defineProperty(F,"monthsShort",{get:function(){return he.map(function(be){return u.translate(be).substring(0,3)})}}),F}var R=H();function B(){var F={text:["@"],currency:["#(.{1})##0?(.{1}0+)?( ?;(.*)?)?","#"],scientific:["0{1}(.{1}0+)?E{1}\\+0+"],percentage:["0{1}(.{1}0+)?%"],numeric:["0{1}(.{1}0+)?"],datetime:["YYYY","YYY","YY","MMMMM","MMMM","MMM","MM","DDDDD","DDDD","DDD","DD","DY","DAY","WD","D","Q","MONTH","MON","HH24","HH12","HH","\\[H\\]","H","AM/PM","MI","SS","MS","Y","M"],general:["A","0","[0-9a-zA-Z$]+","."]},V=function(){if(this.mask.toLowerCase().indexOf("[h]")!==-1){var P=0;this.date[4]&&(P=parseFloat(this.date[4]/60));var G=parseInt(this.date[3])+P;G/=24}else!(this.date[0]&&this.date[1]&&this.date[2])&&(this.date[3]||this.date[4])?G=m.two(this.date[3])+":"+m.two(this.date[4])+":"+m.two(this.date[5]):(this.date[0]&&this.date[1]&&!this.date[2]&&(this.date[2]=1),G=m.two(this.date[0])+"-"+m.two(this.date[1])+"-"+m.two(this.date[2]),(this.date[3]||this.date[4]||this.date[5])&&(G+=" "+m.two(this.date[3])+":"+m.two(this.date[4])+":"+m.two(this.date[5])));return G},O=function(){var P="";if(!(this.date[0]&&this.date[1]&&this.date[2])&&(this.date[3]||this.date[4])){if(this.mask.toLowerCase().indexOf("[h]")!==-1)P=parseInt(this.date[3]);else{let ce=parseInt(this.date[3]);ce<13&&this.values.indexOf("PM")!==-1?P=(ce+12)%24:P=ce%24}this.date[4]&&(P+=parseFloat(this.date[4]/60)),this.date[5]&&(P+=parseFloat(this.date[5]/3600)),P/=24}else if(this.date[0]||this.date[1]||this.date[2]||this.date[3]||this.date[4]||this.date[5]){this.date[0]&&this.date[1]&&!this.date[2]&&(this.date[2]=1);var G=R.now(this.date);P=R.dateToNum(G)}return isNaN(P)&&(P=""),P},A=function(P){return P===null||P===""||P===void 0},J=function(P){var G=(""+P)[0];return G=="="},he=function(P){return P==="currency"||P==="percentage"||P==="scientific"||P==="numeric"},be=function(P){if(P&&Number(P)==P)return".";if(this.options.decimal)return this.options.decimal;if(this.locale){var G=Intl.NumberFormat(this.locale).format(1.1);return this.options.decimal=G[1]}else{P||(P=this.mask);var ce=new RegExp("0{1}(.{1})0+","ig"),G=ce.exec(P);if(G&&G[1]&&G[1].length==1)return this.options.decimal=G[1],G[1];var ce=new RegExp("#{1}(.{1})#+","ig"),G=ce.exec(P);G&&G[1]&&G[1].length==1?G[1]===","?this.options.decimal=".":this.options.decimal=",":this.options.decimal="1.1".toLocaleString().substring(1,2)}return this.options.decimal?this.options.decimal:null},q=function(P,G){if(P=="")return"";G||(G=be.call(this)),P=(""+P).split(G);var ce=P[0].match(/[-]+/g);if(ce&&ce.length?ce=!0:ce=!1,P[0]=P[0].match(/[0-9]+/g),P[0]?(ce&&P[0].unshift("-"),P[0]=P[0].join("")):ce&&(P[0]="-"),P[0]||P[1])P[1]!==void 0&&(P[1]=P[1].match(/[0-9]+/g),P[1]?P[1]=P[1].join(""):P[1]="");else return"";return P},z=function(P,G){if(P==="")return"";var ce=be.call(this),De=this.options;if(P=q.call(this,P),P==="")return"";var de=null;if(P[0]&&(De.style==="percent"?de=parseFloat(P[0])/100:de=parseFloat(P[0]+".1")),(P[0]==="-"||P[0]==="-00")&&!P[1]&&G&&G.inputType=="deleteContentBackward")return"";var Me=new Intl.NumberFormat(this.locale,De).format(de);if(Me=Me.split(ce),De.style==="percent"&&Me[0].indexOf("%")!==-1&&(Me[0]=Me[0].replace("%",""),Me[2]="%"),typeof Me[1]<"u"){var He=Me[1].replace(/[0-9]*/g,"");He&&(Me[2]=He)}return P[1]!==void 0?Me[1]=ce+P[1]:Me[1]="",Me.join("")},ee=function(P,G){var ce=we.call(P);if(ce){var De=z.call(this,ce,G),de=De.length-ce.length,Me=ue.call(P)+de;we.call(P,De,Me,!0)}},Z=function(P){var G=q.call(this,P);return G?(G[0]==="-"&&(G[0]="-0"),parseFloat(G.join("."))):null},ue=function(P,G){if(P===void 0)if(this.tagName=="DIV"){var ce=0,De=window.getSelection();if(De&&De.rangeCount!==0){var de=De.getRangeAt(0),Me=de.cloneRange();Me.selectNodeContents(this),Me.setEnd(de.endContainer,de.endOffset),ce=Me.toString().length}return ce}else return this.selectionStart;else{var He=we.call(this);if(G){for(var Me=null,lt=0;lt<He.length;lt++)(He[lt].match(/[\-0-9]/g)||He[lt]==="."||He[lt]===",")&&(Me=lt);Me===null&&(Me=He.indexOf(" ")),P>=Me&&(P=Me+1)}if(P>He.length&&(P=He.length),P)if(this.tagName=="DIV"){var De=window.getSelection(),de=document.createRange();this.childNodes[0]&&(de.setStart(this.childNodes[0],P),De.removeAllRanges(),De.addRange(de))}else this.selectionStart=P,this.selectionEnd=P}},we=function(P,G,ce){if(this.tagName=="DIV")if(P===void 0){var P=this.innerText;return this.value&&this.value.length>P.length&&(P=this.value),P}else this.innerText!==P&&(this.innerText=P,G&&ue.call(this,G,ce));else{if(P===void 0)return this.value;this.value!==P&&(this.value=P,G&&ue.call(this,G,ce))}},Ae=R.weekdays,je=R.weekdaysShort,ze=R.months,it=R.monthsShort,ct={YEAR:function(P,G){var ce=""+new Date().getFullYear();if(typeof this.values[this.index]>"u"&&(this.values[this.index]=""),parseInt(P)>=0&&parseInt(P)<=10&&this.values[this.index].length<G&&(this.values[this.index]+=P),this.values[this.index].length==G){if(G==2)var ce=ce.substr(0,2)+this.values[this.index];else if(G==3)var ce=ce.substr(0,1)+this.values[this.index];else if(G==4)var ce=this.values[this.index];this.date[0]=ce,this.index++}},YYYY:function(P){ct.YEAR.call(this,P,4)},YYY:function(P){ct.YEAR.call(this,P,3)},YY:function(P){ct.YEAR.call(this,P,2)},FIND:function(P,G){if(A(this.values[this.index])&&(this.values[this.index]=""),this.event&&this.event.inputType&&this.event.inputType.indexOf("delete")>-1){this.values[this.index]+=P;return}for(var ce=0,De=0,de=(this.values[this.index]+P).toLowerCase(),Me=0;Me<G.length;Me++)G[Me].toLowerCase().indexOf(de)==0&&(ce=Me,De++);if(De>1)this.values[this.index]+=P;else if(De==1){var He=G[ce].length-this.values[this.index].length-1;return this.position+=He,this.values[this.index]=G[ce],this.index++,ce}},MMM:function(P){var G=ct.FIND.call(this,P,it);G!==void 0&&(this.date[1]=G+1)},MON:function(P){ct.MMM.call(this,P)},MMMM:function(P){var G=ct.FIND.call(this,P,ze);G!==void 0&&(this.date[1]=G+1)},MONTH:function(P){ct.MMMM.call(this,P)},MMMMM:function(P){A(this.values[this.index])&&(this.values[this.index]="");for(var G=(this.values[this.index]+P).toLowerCase(),ce=0;ce<ze.length;ce++)if(ze[ce][0].toLowerCase().indexOf(G)==0){this.values[this.index]=ze[ce][0],this.date[1]=ce+1,this.index++;break}},MM:function(P){A(this.values[this.index])?parseInt(P)>1&&parseInt(P)<10?(this.date[1]=this.values[this.index]="0"+P,this.index++):parseInt(P)<2&&(this.values[this.index]=P):this.values[this.index]==1&&parseInt(P)<3?(this.date[1]=this.values[this.index]+=P,this.index++):this.values[this.index]==0&&parseInt(P)>0&&parseInt(P)<10&&(this.date[1]=this.values[this.index]+=P,this.index++)},M:function(P){var G=!1;if(parseInt(P)>=0&&parseInt(P)<10)if(A(this.values[this.index]))this.values[this.index]=P,P>1&&(this.date[1]=this.values[this.index],this.index++);else if(this.values[this.index]==1&&parseInt(P)<3)this.date[1]=this.values[this.index]+=P,this.index++;else if(this.values[this.index]==0&&parseInt(P)>0)this.date[1]=this.values[this.index]+=P,this.index++;else var G=!0;else var G=!0;if(G==!0){var ce=parseInt(this.values[this.index]);ce>0&&ce<12&&(this.date[1]=this.values[this.index],this.index++,this.position--)}},D:function(P){var G=!1;if(parseInt(P)>=0&&parseInt(P)<10)if(A(this.values[this.index]))this.values[this.index]=P,parseInt(P)>3&&(this.date[2]=this.values[this.index],this.index++);else if(this.values[this.index]==3&&parseInt(P)<2)this.date[2]=this.values[this.index]+=P,this.index++;else if(this.values[this.index]==1||this.values[this.index]==2)this.date[2]=this.values[this.index]+=P,this.index++;else if(this.values[this.index]==0&&parseInt(P)>0)this.date[2]=this.values[this.index]+=P,this.index++;else var G=!0;else var G=!0;if(G==!0){var ce=parseInt(this.values[this.index]);ce>0&&ce<32&&(this.date[2]=this.values[this.index],this.index++,this.position--)}},DD:function(P){A(this.values[this.index])?parseInt(P)>3&&parseInt(P)<10?(this.date[2]=this.values[this.index]="0"+P,this.index++):parseInt(P)<10&&(this.values[this.index]=P):this.values[this.index]==3&&parseInt(P)<2?(this.date[2]=this.values[this.index]+=P,this.index++):(this.values[this.index]==1||this.values[this.index]==2)&&parseInt(P)<10?(this.date[2]=this.values[this.index]+=P,this.index++):this.values[this.index]==0&&parseInt(P)>0&&parseInt(P)<10&&(this.date[2]=this.values[this.index]+=P,this.index++)},DDD:function(P){ct.FIND.call(this,P,je)},DY:function(P){ct.DDD.call(this,P)},DDDD:function(P){ct.FIND.call(this,P,Ae)},DAY:function(P){ct.DDDD.call(this,P)},HH12:function(P,G){A(this.values[this.index])?parseInt(P)>1&&parseInt(P)<10?(G&&(P=0+P),this.date[3]=this.values[this.index]=P,this.index++):parseInt(P)<10&&(this.values[this.index]=P):this.values[this.index]==1&&parseInt(P)<3?(this.date[3]=this.values[this.index]+=P,this.index++):this.values[this.index]<1&&parseInt(P)<10&&(this.date[3]=this.values[this.index]+=P,this.index++)},HH24:function(P,G){parseInt(P)>=0&&parseInt(P)<10&&(this.values[this.index]==null||this.values[this.index]==""?parseInt(P)>2&&parseInt(P)<10?(G&&(P=0+P),this.date[3]=this.values[this.index]=P,this.index++):parseInt(P)<10&&(this.values[this.index]=P):this.values[this.index]==2&&parseInt(P)<4?(!G&&this.values[this.index]==="0"&&(this.values[this.index]=""),this.date[3]=this.values[this.index]+=P,this.index++):this.values[this.index]<2&&parseInt(P)<10&&(!G&&this.values[this.index]==="0"&&(this.values[this.index]=""),this.date[3]=this.values[this.index]+=P,this.index++))},HH:function(P){ct.HH24.call(this,P,1)},H:function(P){ct.HH24.call(this,P,0)},"\\[H\\]":function(P){this.values[this.index]==null&&(this.values[this.index]=""),P.match(/[0-9]/g)?this.date[3]=this.values[this.index]+=P:this.values[this.index].match(/[0-9]/g)&&(this.date[3]=this.values[this.index],this.index++,this.position--)},N60:function(P,G){this.values[this.index]==null||this.values[this.index]==""?parseInt(P)>5&&parseInt(P)<10?(this.date[G]=this.values[this.index]="0"+P,this.index++):parseInt(P)<10&&(this.values[this.index]=P):parseInt(P)<10&&(this.date[G]=this.values[this.index]+=P,this.index++)},MI:function(P){ct.N60.call(this,P,4)},SS:function(P){ct.N60.call(this,P,5)},"AM/PM":function(P){typeof this.values[this.index]>"u"&&(this.values[this.index]=""),this.values[this.index]===""?P.match(/a/i)&&this.date[3]<13?this.values[this.index]+="A":P.match(/p/i)&&(this.values[this.index]+="P"):(this.values[this.index]==="A"||this.values[this.index]==="P")&&(this.values[this.index]+="M",this.index++)},WD:function(P){typeof this.values[this.index]>"u"&&(this.values[this.index]=""),parseInt(P)>=0&&parseInt(P)<7&&(this.values[this.index]=P),this.values[this.index].length==1&&this.index++},"0{1}(.{1}0+)?":function(P){var G=be.call(this),ce=!1;A(this.values[this.index])?this.values[this.index]="":this.values[this.index]=="-"&&(ce=!0);var De=q.call(this,this.values[this.index],G);De&&(this.values[this.index]=De.join(G)),parseInt(P)>=0&&parseInt(P)<10?(this.values[this.index]=="0"&&P>0?this.values[this.index]="":this.values[this.index]=="-0"&&P>0&&(this.values[this.index]="-"),(this.values[this.index]!="0"&&this.values[this.index]!="-0"||P==G)&&(this.values[this.index]+=P)):G&&P==G?this.values[this.index].indexOf(G)==-1&&(this.values[this.index]||(this.values[this.index]="0"),this.values[this.index]+=P):P=="-"&&(ce=!0),ce===!0&&this.values[this.index][0]!=="-"&&(this.values[this.index]="-"+this.values[this.index])},"0{1}(.{1}0+)?E{1}\\+0+":function(P){ct["0{1}(.{1}0+)?"].call(this,P)},"0{1}(.{1}0+)?%":function(P){ct["0{1}(.{1}0+)?"].call(this,P),this.values[this.index].match(/[\-0-9]/g)?this.values[this.index]&&this.values[this.index].indexOf("%")==-1&&(this.values[this.index]+="%"):this.values[this.index]=""},"#(.{1})##0?(.{1}0+)?( ?;(.*)?)?":function(P){ct["0{1}(.{1}0+)?"].call(this,P);var G=be.call(this),ce=this.tokens[this.index].substr(1,1),De=this.values[this.index][0]==="-",de=q.call(this,this.values[this.index],G);if(de!==""){var Me=de[0].match(/[0-9]/g);if(Me){Me=Me.join("");for(var He=[],lt=0,qe=Me.length-1;qe>=0;qe--)He.push(Me[qe]),lt++,lt%3||He.push(ce);He=He.reverse(),de[0]=He.join(""),de[0].substr(0,1)==ce&&(de[0]=de[0].substr(1))}else de[0]="";this.values[this.index]=de.join(G),De&&(this.values[this.index]="-"+this.values[this.index])}},0:function(P){P.match(/[0-9]/g)&&(this.values[this.index]=P,this.index++)},"[0-9a-zA-Z$]+":function(P){A(this.values[this.index])&&(this.values[this.index]="");var G=this.tokens[this.index],ce=this.values[this.index],De=ce.length;G[De]==P?(this.values[this.index]+=P,this.values[this.index]==G&&this.index++):(this.values[this.index]=G,this.index++,P.match(/[\-0-9]/g)&&this.position--)},A:function(P){P.match(/[a-zA-Z]/gi)&&(this.values[this.index]=P,this.index++)},".":function(P){ct["[0-9a-zA-Z$]+"].call(this,P)},"@":function(P){A(this.values[this.index])&&(this.values[this.index]=""),this.values[this.index]+=P}},Nt=function(P){if(this.type=="general")var G=[].concat(F.general);else var G=[].concat(F.currency,F.datetime,F.percentage,F.scientific,F.numeric,F.text,F.general);var ce=new RegExp(G.join("|"),"gi");return P.match(ce)},Ot=function(P){if(this.type)if(this.type=="text")var G=["text"];else if(this.type=="general")var G=["general"];else if(this.type=="datetime")var G=["numeric","datetime","general"];else var G=["currency","percentage","scientific","numeric","general"];else var G=Object.keys(F);for(var ce=0;ce<G.length;ce++)for(var De=G[ce],de=0;de<F[De].length;de++){var Me=new RegExp(F[De][de],"gi"),He=P.match(Me);if(He)return{type:De,method:F[De][de]}}},ve=function(P){for(var G=[],ce=0;ce<P.length;ce++){var De=Ot.call(this,P[ce]);De?G.push(De.method):G.push(null)}for(var ce=0;ce<G.length;ce++)G[ce]=="MM"&&(G[ce-1]&&G[ce-1].indexOf("H")>=0||G[ce-2]&&G[ce-2].indexOf("H")>=0||G[ce+1]&&G[ce+1].indexOf("S")>=0||G[ce+2]&&G[ce+2].indexOf("S")>=0)&&(G[ce]="MI");return G},Le=function(P){var G=Ot.call(this,P);if(G)var ce=G.type;if(ce){for(var De=0,de=Nt.call(this,P),Me=0;Me<de.length;Me++)G=Ot.call(this,de[Me]),G&&he(G.type)&&De++;De>1&&(ce="general")}return ce},Xe=function(){typeof ct[this.methods[this.index]]=="function"?(ct[this.methods[this.index]].call(this,this.value[this.position]),this.position++):(this.values[this.index]=this.tokens[this.index],this.index++)},ne=function(P){return(""+ +P).replace(/(-?)(\d*)\.?(\d*)e([+-]\d+)/,function(G,ce,De,de,Me){return Me<0?ce+"0."+Array(1-Me-De.length).join(0)+De+de:ce+De+de+Array(Me-de.length+1).join(0)})},fe=function(P,G,ce){var De=null,de={input:null,value:null,options:{},values:[],index:0,position:0,date:[0,0,0,0,0,0],number:0};if(typeof P=="object"){if(de.input=P.target,de.value=we.call(P.target),de.caret=ue.call(P.target),(De=P.target.getAttribute("data-mask"))&&(de.mask=De),(De=P.target.getAttribute("data-type"))&&(de.type=De),P.target.mask?(P.target.mask.options&&(de.options=P.target.mask.options),P.target.mask.locale&&(de.locale=P.target.mask.locale)):(De=P.target.getAttribute("data-locale"))&&(de.locale=De,de.mask&&(de.options.style=de.mask)),P.target.attributes&&P.target.attributes.length)for(var Me=0;Me<P.target.attributes.length;Me++){var He=P.target.attributes[Me].name,lt=P.target.attributes[Me].value;He.substr(0,4)=="data"&&(de.options[He.substr(5)]=lt)}}else{if(typeof G=="string")de.mask=G;else for(var He=Object.keys(G),Me=0;Me<He.length;Me++)de[He[Me]]=G[He[Me]];typeof P=="number"&&(be.call(de,de.mask),P=(""+P).replace(".",de.options.decimal)),de.value=P,de.input&&(we.call(de.input,P),m.focus(de.input),de.caret=ue.call(de.input))}if(!J(de.value)&&(de.mask||de.locale)){if(de.mask){if(de.mask=de.mask.replace(new RegExp(/\[h]/),"|h|"),de.mask=de.mask.replace(new RegExp(/\[.*?\]/),""),de.mask=de.mask.replace(new RegExp(/\|h\|/),"[h]"),de.mask.indexOf(";")!==-1){var De=de.mask.split(";");de.mask=De[0]}if(de.mask.indexOf("##")!==-1){var qe=de.mask.split(";");qe[0]&&(typeof P=="object"&&(qe[0]=qe[0].replace(new RegExp(/_\)/g),""),qe[0]=qe[0].replace(new RegExp(/_\(/g),"")),qe[0]=qe[0].replace("*","	"),qe[0]=qe[0].replace(new RegExp(/_-/g),""),qe[0]=qe[0].replace(new RegExp(/_/g),""),qe[0]=qe[0].replace(new RegExp(/"/g),""),qe[0]=qe[0].replace("##0.###","##0.000"),qe[0]=qe[0].replace("##0.##","##0.00"),qe[0]=qe[0].replace("##0.#","##0.0"),qe[0]=qe[0].replace("##0,###","##0,000"),qe[0]=qe[0].replace("##0,##","##0,00"),qe[0]=qe[0].replace("##0,#","##0,0")),de.mask=qe[0]}if(de.mask.indexOf("\\")!==-1){var qe=de.mask.split(";");qe[0]=qe[0].replace(new RegExp(/\\/g),""),de.mask=qe[0]}de.type||(de.type=Le.call(de,de.mask)),de.tokens=Nt.call(de,de.mask)}if(typeof P!="object"||!P.inputType||!P.inputType.indexOf("insert")||!P.inputType.indexOf("delete"))if(de.locale)if(de.input)ee.call(de,de.input,P);else var dt=z.call(de,de.value);else{for(de.methods=ve.call(de,de.tokens),de.event=P;de.position<de.value.length&&typeof de.tokens[de.index]<"u";)Xe.call(de);var dt=de.values.join("");if(he(de.type)&&dt!==""){for(;typeof de.tokens[de.index]<"u";){var De=Ot.call(de,de.tokens[de.index]);De&&De.type=="general"&&(de.values[de.index]=de.tokens[de.index]),de.index++}var gt=!0}else var gt=!1;if(dt=de.values.join(""),de.input){if(De=dt.length-de.value.length,De>0)var Ft=de.caret+De;else var Ft=de.caret;we.call(de.input,dt,Ft,gt)}}if(de.input){var Ce=null;if(he(de.type)){let We=we.call(de.input);de.number=Z.call(de,We),de.type=="percentage"&&(""+We).indexOf("%")!==-1?Ce=fe.adjustPrecision(de.number/100):Ce=de.number}else de.type=="datetime"&&(Ce=V.call(de),de.date[0]&&de.date[1]&&de.date[2]&&de.input.setAttribute("data-completed",!0));Ce&&de.input.setAttribute("data-value",Ce)}if(dt!==void 0)return ce?de:dt}};return fe.adjustPrecision=function(P){if(typeof P=="number"&&!Number.isInteger(P)){const G=P.toString().split(".");if(G[1]&&G[1].length>10){let ce=0;const De=G[1][G[1].length-2];if(De==0||De==9){for(let de=G[1].length-2;de>0;de--)if(ce>=0&&G[1][de]==De){if(ce++,ce>6)break}else{ce=0;break}if(ce)return parseFloat(parseFloat(P).toFixed(G[1].length-1))}}}return P},fe.getType=Le,fe.prepare=function(P,G){return G||(G={}),Nt.call(G,P)},fe.apply=function(P){var G=we.call(P.target);P.key.length==1&&(G+=P.key),we.call(P.target,fe(G,P.target.getAttribute("data-mask")))},fe.run=function(P,G,ce){return fe(P,{mask:G,decimal:ce})},fe.extract=function(P,G,ce){if(A(P)||typeof G!="object")return P;if(G=Object.assign({},G),G.options||(G.options={}),!G.mask&&G.format&&(G.mask=G.format),G.mask){if(G.mask.indexOf(";")!==-1){var De=G.mask.split(";");G.mask=De[0]}G.mask=G.mask.replace(new RegExp(/\[h]/),"|h|"),G.mask=G.mask.replace(new RegExp(/\[.*?\]/),""),G.mask=G.mask.replace(new RegExp(/\|h\|/),"[h]")}be.call(G,G.mask);var de=null,Me=null;if(G.type=="percent"||G.options.style=="percent"?de="percentage":G.mask&&(de=Le.call(G,G.mask)),de==="text"){var He={};Me=P}else if(de==="general"){var He=fe(P,G,!0);Me=P}else if(de==="datetime"){P instanceof Date&&(P=fe.getDateString(P,G.mask));var He=fe(P,G,!0);m.isNumeric(P)?Me=P:Me=O.call(He)}else if(de==="scientific"){Me=P,typeof P=="string"&&(Me=Number(Me));var He=G}else{Me=Z.call(G,P),de==="percentage"&&(""+P).indexOf("%")!==-1&&(Me/=100);var He=G}return He.value=Me,!He.type&&de&&(He.type=de),ce?He:Me},fe.render=function(P,G,ce,De){if(A(P)||typeof G!="object")return P;if(G=Object.assign({},G),G.options||(G.options={}),!G.mask&&G.format&&(G.mask=G.format),G.mask){if(G.mask.indexOf(";")!==-1){var de=G.mask.split(";");ce||(de[0]=de[0].replace(new RegExp(/_\)/g),""),de[0]=de[0].replace(new RegExp(/_\(/g),"")),G.mask=de[0]}G.mask=G.mask.replace(new RegExp(/\[h]/),"|h|"),G.mask=G.mask.replace(new RegExp(/\[.*?\]/),""),G.mask=G.mask.replace(new RegExp(/\|h\|/),"[h]")}var Me=null;G.type=="percent"||G.options.style=="percent"?Me="percentage":G.mask?Me=Le.call(G,G.mask):P instanceof Date&&(Me="datetime");var He=!1;if(Me=="datetime"||G.type=="calendar"){var de=fe.getDateString(P,G.mask);de&&(P=de),G.mask&&ce&&(He=!0)}else if(Me==="text")typeof P=="number"&&(P=P.toString());else if(typeof P=="string"&&n.isNumeric(P)&&(P=Number(P)),Me==="percentage"&&(P=fe.adjustPrecision(P*100)),typeof P=="number"){var de=null;if(G.mask&&ce){var lt=be.call(G,G.mask);if(Me==="scientific")if(G.mask.indexOf(lt)!==-1){let Ue=G.mask.split("E");Ue=Ue[0].split(lt),Ue=""+Ue[1].match(/[0-9]+/g),Ue=Ue.length,de=P.toExponential(Ue)}else de=P.toExponential(0);else{if(G.mask.indexOf(lt)!==-1){lt=G.mask.split(lt),lt=""+lt[1].match(/[0-9]+/g),lt=lt.length,de=P.toFixed(lt);let Ue=P.toString().split("."),Et=Ue[1];Et&&Et.length>lt&&Et[Et.length-1]==="5"&&(de=parseFloat(Ue[0]+"."+Et+"1").toFixed(lt))}else de=P.toFixed(0);(""+de).indexOf("e")!==-1&&(de=ne(de))}}else if(G.locale&&ce){var lt=(""+P).split(".");if(G.options){typeof lt[1]>"u"&&(lt[1]="");var dt=lt[1].length;if(G.options.minimumFractionDigits>dt)for(var qe=0;qe<G.options.minimumFractionDigits-dt;qe++)lt[1]+="0"}lt[1].length?de=lt.join("."):de=lt[0];var dt=lt[1].length;G.options&&G.options.maximumFractionDigits<dt&&(de=parseFloat(de).toFixed(G.options.maximumFractionDigits))}else de=ne(P);de!==null&&(P=de,be.call(G,G.mask),G.options.decimal&&(P=P.replace(".",G.options.decimal)))}else G.mask&&ce&&(He=!0);if(He){var gt=G.mask.length-P.length;if(gt>0)for(var qe=0;qe<gt;qe++)P+=" "}if(Me==="scientific")if(!ce)P=ne(P);else return P;if(Me==="numeric"&&De===!1&&typeof P=="string")return P;if(P=fe(P,G),ce&&Me==="numeric"){var Ft=G.mask.match(new RegExp(/^[0]+$/gm));if(Ft&&Ft.length===1){var Ce=Ft[0].length;if(Ce>3)for(P=""+P;P.length<Ce;)P="0"+P}}return P},fe.set=function(P,G){if(G){P.setAttribute("data-mask",G);var ce=new Event("input",{bubbles:!0,cancelable:!0});P.dispatchEvent(ce)}},fe.extractDateFromString=function(P,G){var ce=fe(P,{mask:G},!0);if(P>0&&Number(P)==P&&(ce.values.join("")!==ce.value||ce.type=="numeric")){var De=new Date(Math.round((P-25569)*86400*1e3));return De.getFullYear()+"-"+m.two(De.getMonth())+"-"+m.two(De.getDate())+" 00:00:00"}var de=!1;return ce.values&&ce.values.length===ce.tokens.length&&ce.values[ce.values.length-1].length>=ce.tokens[ce.tokens.length-1].length&&(de=!0),ce.date[0]&&ce.date[1]&&(ce.date[2]||de)?(ce.date[2]||(ce.date[2]=1),ce.date[0]+"-"+m.two(ce.date[1])+"-"+m.two(ce.date[2])+" "+m.two(ce.date[3])+":"+m.two(ce.date[4])+":"+m.two(ce.date[5])):""},fe.getDateString=function(P,G){if(!G)var G={};if(G&&typeof G=="object"){if(G.format)var ce=G.format;else if(G.mask)var ce=G.mask}else var ce=G;if(ce||(ce="YYYY-MM-DD"),ce.indexOf("[h]")>=0){var De=0;if(P&&m.isNumeric(P)&&(De=parseFloat(24*Number(P)),ce.indexOf("mm")>=0)){var de=(""+De).split(".");if(de[1]){var Me=60*parseFloat("0."+de[1]);Me=parseFloat(Me.toFixed(2))}else var Me=0;De=parseInt(de[0])+":"+m.two(Me)}return De}P instanceof Date?P=R.now(P):P&&m.isNumeric(P)&&(P=R.numToDate(P));for(var He=["DAY","WD","DDDD","DDD","DD","D","Q","HH24","HH12","HH","H","AM/PM","MI","SS","MS","YYYY","YYY","YY","Y","MONTH","MON","MMMMM","MMMM","MMM","MM","M","."],lt=new RegExp(He.join("|"),"gi"),qe=ce.match(lt),dt=0;dt<qe.length;dt++)qe[dt].toUpperCase()=="MM"&&(qe[dt-1]&&qe[dt-1].toUpperCase().indexOf("H")>=0||qe[dt-2]&&qe[dt-2].toUpperCase().indexOf("H")>=0||qe[dt+1]&&qe[dt+1].toUpperCase().indexOf("S")>=0||qe[dt+2]&&qe[dt+2].toUpperCase().indexOf("S")>=0)&&(qe[dt]="mi");var gt={tokens:qe};if(P){var Me=""+P,Ft=Me.indexOf("T")!==-1?"T":" ";Me=Me.split(Ft);var de=0,Ce=0,We=0;Me[1]&&(de=Me[1].split(":"),Ce=de[1]?de[1]:0,We=de[2]?de[2]:0,de=de[0]?de[0]:0),Me=Me[0].split("-");let ln=new Date(Me[0],Me[1],0).getDate();if(Me[0]&&Me[1]&&Me[2]&&Me[0]>0&&Me[1]>0&&Me[1]<13&&Me[2]>0&&Me[2]<=ln){gt.data=[Me[0],Me[1],Me[2],de,Ce,We],gt.value=[];for(var Ue=new Date(gt.data[0],gt.data[1]-1,gt.data[2],gt.data[3],gt.data[4],gt.data[5]),Et=function(dn){var Vt=this.tokens[dn],on=Vt.toUpperCase(),Lt=null;on==="YYYY"?Lt=this.data[0]:on==="YYY"?Lt=this.data[0].substring(1,4):on==="YY"?Lt=this.data[0].substring(2,4):on==="Y"?Lt=this.data[0].substring(3,4):Vt==="MON"?Lt=R.months[Ue.getMonth()].substr(0,3).toUpperCase():Vt==="mon"?Lt=R.months[Ue.getMonth()].substr(0,3).toLowerCase():Vt==="MONTH"?Lt=R.months[Ue.getMonth()].toUpperCase():Vt==="month"?Lt=R.months[Ue.getMonth()].toLowerCase():on==="MMMMM"?Lt=R.months[Ue.getMonth()].substr(0,1):on==="MMMM"||Vt==="Month"?Lt=R.months[Ue.getMonth()]:on==="MMM"||Vt=="Mon"?Lt=R.months[Ue.getMonth()].substr(0,3):on==="MM"?Lt=m.two(this.data[1]):on==="M"?Lt=Ue.getMonth()+1:Vt==="DAY"?Lt=R.weekdays[Ue.getDay()].toUpperCase():Vt==="day"?Lt=R.weekdays[Ue.getDay()].toLowerCase():on==="DDDD"||Vt=="Day"?Lt=R.weekdays[Ue.getDay()]:on==="DDD"?Lt=R.weekdays[Ue.getDay()].substr(0,3):on==="DD"?Lt=m.two(this.data[2]):on==="D"?Lt=parseInt(this.data[2]):on==="Q"?Lt=Math.floor((Ue.getMonth()+3)/3):on==="HH24"||on==="HH"?(Lt=this.data[3],Lt>12&&this.tokens.indexOf("am/pm")!==-1&&(Lt-=12),Lt=m.two(Lt)):on==="HH12"?this.data[3]>12?Lt=m.two(this.data[3]-12):Lt=m.two(this.data[3]):on==="H"?(Lt=this.data[3],Lt>12&&this.tokens.indexOf("am/pm")!==-1&&(Lt-=12,Lt=m.two(Lt))):on==="MI"?Lt=m.two(this.data[4]):on==="SS"?Lt=m.two(this.data[5]):on==="MS"?Lt=Ue.getMilliseconds():on==="AM/PM"?this.data[3]>=12?Lt="PM":Lt="AM":on==="WD"&&(Lt=R.weekdays[Ue.getDay()]),Lt===null?this.value[dn]=this.tokens[dn]:this.value[dn]=Lt},dt=0;dt<gt.tokens.length;dt++)Et.call(gt,dt);P=gt.value.join("")}else P=""}return P},fe}var Y=B();function K(){var F=function(V,O){if(V.calendar)return V.calendar.setOptions(O,!0);var A={type:"calendar"};A.options={},A.date=null,A.setOptions=function(ne,fe){var P={type:"default",validRange:null,startingDay:null,format:"DD/MM/YYYY",readonly:!0,today:!1,time:!1,resetButton:!0,placeholder:"",months:R.monthsShort,monthsFull:R.months,weekdays:R.weekdays,textDone:u.translate("Done"),textReset:u.translate("Reset"),textUpdate:u.translate("Update"),value:null,fullscreen:!1,opened:!1,onopen:null,onclose:null,onchange:null,onupdate:null,mode:null,position:null,dataType:null,controls:!0,autoSelect:!0};for(var G in P)ne&&ne.hasOwnProperty(G)?A.options[G]=ne[G]:(typeof A.options[G]>"u"||fe===!0)&&(A.options[G]=P[G]);if(A.options.resetButton==!1?z.style.display="none":z.style.display="",A.options.readonly?V.setAttribute("readonly","readonly"):V.removeAttribute("readonly"),A.options.placeholder?V.setAttribute("placeholder",A.options.placeholder):V.removeAttribute("placeholder"),m.isNumeric(A.options.value)&&A.options.value>0&&(A.options.value=F.numToDate(A.options.value),A.options.dataType="numeric"),z.innerHTML=A.options.textReset,ee.innerHTML=A.options.textDone,Ot.innerHTML=A.options.textUpdate,A.options.format&&V.setAttribute("data-mask",A.options.format.toLowerCase()),!A.options.value&&A.options.today)var ce=F.now();else var ce=A.options.value;return ce&&(A.options.value=null,A.setValue(ce)),A},A.open=function(ne){if(!q.classList.contains("jcalendar-focus")&&!q.classList.contains("jcalendar-inline")){if(F.current=A,C(A,!0),A.getDays(),A.options.type=="year-month-picker"&&A.getMonths(),A.options.time&&(ve.value=A.date[3],Le.value=A.date[4]),q.classList.add("jcalendar-focus"),m.getWindowWidth()<800||A.options.fullscreen)q.classList.add("jcalendar-fullsize"),L.slideBottom(ue,1);else{q.classList.remove("jcalendar-fullsize");var fe=V.getBoundingClientRect(),P=ue.getBoundingClientRect();if(A.options.position)Z.style.position="fixed",window.innerHeight<fe.bottom+P.height?Z.style.top=fe.top-(P.height+2)+"px":Z.style.top=fe.top+fe.height+2+"px",Z.style.left=fe.left+"px";else{if(window.innerHeight<fe.bottom+P.height){var G=-1*(fe.height+P.height+2);G+fe.top<0&&(G=-1*(fe.top+fe.height)),Z.style.top=G+"px"}else Z.style.top=2+"px";if(window.innerWidth<fe.left+P.width){var G=window.innerWidth-(fe.left+P.width+20);Z.style.left=G+"px"}else Z.style.left="0px"}}typeof A.options.onopen=="function"&&A.options.onopen(V)}},A.close=function(ne,fe){if(A.options.autoSelect!==!0&&typeof fe>"u"&&(fe=!1),q.classList.contains("jcalendar-focus")){if(fe!==!1){var P=q.querySelector(".jcalendar-selected");if(typeof fe=="string")var G=fe;else if(!P||P.classList.contains("jcalendar-disabled"))var G=A.options.value;else var G=A.getValue();A.setValue(G)}else{let ce=A.options.value||"";A.options.value=null,A.setValue(ce)}!ne&&typeof A.options.onclose=="function"&&A.options.onclose(V),q.classList.remove("jcalendar-focus"),C(A,!1),F.current=null}return A.options.value},A.prev=function(){A.options.mode=="years"?(A.date[0]=A.date[0]-12,A.getYears()):A.options.mode=="months"?(A.date[0]=parseInt(A.date[0])-1,A.getMonths()):(A.date[1]<2?(A.date[0]=A.date[0]-1,A.date[1]=12):A.date[1]=A.date[1]-1,A.getDays())},A.next=function(){A.options.mode=="years"?(A.date[0]=parseInt(A.date[0])+12,A.getYears()):A.options.mode=="months"?(A.date[0]=parseInt(A.date[0])+1,A.getMonths()):(A.date[1]>11?(A.date[0]=parseInt(A.date[0])+1,A.date[1]=1):A.date[1]=parseInt(A.date[1])+1,A.getDays())},A.setToday=function(){var ne=new Date().toISOString().substr(0,10);return A.setValue(ne),ne},A.setValue=function(ne){ne||(ne=""+ne);var fe=ne,P=A.options.value;if(P!=fe){if(fe){A.setLabel(fe,A.options);var ce=fe.split(" ");ce[1]||(ce[1]="00:00:00");var G=ce[1].split(":"),ce=ce[0].split("-"),De=parseInt(ce[0]),de=parseInt(ce[1]),Me=parseInt(ce[2]),He=parseInt(G[0]),lt=parseInt(G[1]);A.date=[De,de,Me,He,lt,0];var ne=A.setLabel(fe,A.options),qe=F.now(new Date(De,de-1,Me),!0);if(A.options.validRange){if(!A.options.validRange[0]||qe>=A.options.validRange[0])var dt=!0;else var dt=!1;if(!A.options.validRange[1]||qe<=A.options.validRange[1])var gt=!0;else var gt=!1;dt&&gt?(V.classList.remove("jcalendar_warning"),V.title=""):(V.classList.add("jcalendar_warning"),V.title=u.translate("Date outside the valid range"))}else V.classList.remove("jcalendar_warning"),V.title=""}else{A.date=null;var ne="";V.classList.remove("jcalendar_warning"),V.title=""}A.options.value=fe,typeof A.options.onchange=="function"&&A.options.onchange(V,fe,P),V.value!=ne&&(V.value=ne,typeof V.oninput=="function"&&V.oninput({type:"input",target:V,value:V.value}))}A.date&&(A.getDays(),A.options.type=="year-month-picker"&&A.getMonths())},A.getValue=function(){return A.date?A.options.time?m.two(A.date[0])+"-"+m.two(A.date[1])+"-"+m.two(A.date[2])+" "+m.two(A.date[3])+":"+m.two(A.date[4])+":"+m.two(0):m.two(A.date[0])+"-"+m.two(A.date[1])+"-"+m.two(A.date[2])+" "+m.two(0)+":"+m.two(0)+":"+m.two(0):""},A.update=function(ne,fe){if(!ne.classList.contains("jcalendar-disabled")){var P=q.querySelector(".jcalendar-selected");P&&P.classList.remove("jcalendar-selected"),ne.classList.add("jcalendar-selected"),ne.classList.contains("jcalendar-set-month")?(A.date[1]=fe,A.date[2]=1):A.date[2]=ne.innerText,A.options.time?(A.date[3]=ve.value,A.date[4]=Le.value):A.close(null,!0)}be()},A.reset=function(){A.setValue(""),A.date=null,A.close(!1,!1)},A.getDays=function(){A.options.mode="days";var He=new Date,ne=A.date&&m.isNumeric(A.date[0])?A.date[0]:parseInt(He.getFullYear()),fe=A.date&&m.isNumeric(A.date[1])?A.date[1]:parseInt(He.getMonth())+1,P=A.date&&m.isNumeric(A.date[2])?A.date[2]:parseInt(He.getDate()),G=A.date&&m.isNumeric(A.date[3])?A.date[3]:parseInt(He.getHours()),ce=A.date&&m.isNumeric(A.date[4])?A.date[4]:parseInt(He.getMinutes());A.date=[ne,fe,P,G,ce,0],we.innerHTML=ne,Ae.innerHTML=A.options.months[fe-1];var De=He.getMonth()==fe-1&&He.getFullYear()==ne,de=He.getDate(),He=new Date(ne,fe,0,0,0),Me=He.getDate(),He=new Date(ne,fe-1,0,0,0),lt=He.getDay()+1,Ft=A.options.startingDay||0;lt=lt-Ft,ze.innerHTML="";var qe=document.createElement("tr");qe.setAttribute("align","center"),ze.appendChild(qe);for(var dt=0;dt<7;dt++){var gt=document.createElement("td");gt.classList.add("jcalendar-weekday"),gt.innerHTML=A.options.weekdays[Ft].substr(0,1),qe.appendChild(gt),Ft++,Ft>6&&(Ft=0)}for(var Ft=0,Ce=0,We=0;We<6;We++){var qe=document.createElement("tr");qe.setAttribute("align","center"),qe.style.height="34px";for(var dt=0;dt<7;dt++){var gt=document.createElement("td");if(gt.classList.add("jcalendar-set-day"),Ft>=lt&&Ft<lt+Me){Ce++,gt.innerHTML=Ce,Ce==P&&gt.classList.add("jcalendar-selected"),De&&de==Ce&&(gt.style.fontWeight="bold");var Ue=F.now(new Date(ne,fe-1,Ce),!0);if(A.options.validRange){if(!A.options.validRange[0]||Ue>=A.options.validRange[0])var Et=!0;else var Et=!1;if(!A.options.validRange[1]||Ue<=A.options.validRange[1])var Pt=!0;else var Pt=!1;Et&&Pt||gt.classList.add("jcalendar-disabled")}}qe.appendChild(gt),Ft++}ze.appendChild(qe)}A.options.time?ct.style.display="":ct.style.display="none",be()},A.getMonths=function(){A.options.mode="months";var ne=A.options.months;A.options.value;var fe=new Date,P=parseInt(fe.getFullYear()),G=parseInt(fe.getMonth())+1,ce=A.date&&m.isNumeric(A.date[0])?A.date[0]:P,De=A.date&&m.isNumeric(A.date[1])?A.date[1]:G;we.innerHTML=A.date[0],Ae.innerHTML=ne[De-1];var de=document.createElement("table");de.setAttribute("width","100%");for(var Me=null,He=0;He<12;He++){if(!(He%4)){var Me=document.createElement("tr");Me.setAttribute("align","center"),de.appendChild(Me)}var lt=document.createElement("td");if(lt.classList.add("jcalendar-set-month"),lt.setAttribute("data-value",He+1),lt.innerText=ne[He],A.options.validRange){var qe=ce+"-"+m.two(He+1);if(!A.options.validRange[0]||qe>=A.options.validRange[0].substr(0,7))var dt=!0;else var dt=!1;if(!A.options.validRange[1]||qe<=A.options.validRange[1].substr(0,7))var gt=!0;else var gt=!1;dt&&gt||lt.classList.add("jcalendar-disabled")}He+1==De&&lt.classList.add("jcalendar-selected"),P==ce&&He+1==G&&(lt.style.fontWeight="bold"),Me.appendChild(lt)}ze.innerHTML='<tr><td colspan="7"></td></tr>',ze.children[0].children[0].appendChild(de),be()},A.getYears=function(){A.options.mode="years";for(var ne=new Date,fe=ne.getFullYear(),P=A.date&&m.isNumeric(A.date[0])?A.date[0]:parseInt(ne.getFullYear()),G=[],ce=0;ce<25;ce++)G[ce]=parseInt(A.date[0])+(ce-12);var De=document.createElement("table");De.setAttribute("width","100%");for(var ce=0;ce<25;ce++){if(!(ce%5)){var de=document.createElement("tr");de.setAttribute("align","center"),De.appendChild(de)}var Me=document.createElement("td");Me.classList.add("jcalendar-set-year"),Me.innerText=G[ce],P==G[ce]&&Me.classList.add("jcalendar-selected"),fe==G[ce]&&(Me.style.fontWeight="bold"),de.appendChild(Me)}ze.innerHTML='<tr><td colspan="7"></td></tr>',ze.firstChild.firstChild.appendChild(De),be()},A.setLabel=function(ne,fe){return F.getDateString(ne,fe)},A.fromFormatted=function(ne,fe){return F.extractDateFromString(ne,fe)};var J=function(ne){var fe=m.findElement(ne.target,"jcalendar-container");if(fe){var P=ne.target.className;if(P=="jcalendar-prev")A.prev();else if(P=="jcalendar-next")A.next();else if(P=="jcalendar-month")A.getMonths();else if(P=="jcalendar-year")A.getYears();else if(P=="jcalendar-set-year")A.date[0]=ne.target.innerText,A.options.type=="year-month-picker"?A.getMonths():A.getDays();else if(ne.target.classList.contains("jcalendar-set-month")){var G=parseInt(ne.target.getAttribute("data-value"));A.options.type=="year-month-picker"?A.update(ne.target,G):(A.date[1]=G,A.getDays())}else P=="jcalendar-confirm"||P=="jcalendar-update"||P=="jcalendar-close"?A.close(null,!0):P=="jcalendar-backdrop"?A.close(!1,!1):P=="jcalendar-reset"?A.reset():ne.target.classList.contains("jcalendar-set-day")&&ne.target.innerText&&A.update(ne.target)}else A.close(!1,!1)},he=function(ne){if(ne.target.value&&ne.target.value.length>3){var fe=F.extractDateFromString(ne.target.value,A.options.format);fe&&A.setValue(fe)}},be=function(){var ne=q.querySelector(".jcalendar-selected");ne&&ne.classList.contains("jcalendar-disabled")?(Ot.setAttribute("disabled","disabled"),ve.setAttribute("disabled","disabled"),Le.setAttribute("disabled","disabled")):(Ot.removeAttribute("disabled"),ve.removeAttribute("disabled"),Le.removeAttribute("disabled")),typeof A.options.onupdate=="function"&&A.options.onupdate(V,A.getValue())},q=null,z=null,ee=null,Z=null,ue=null,we=null,Ae=null,je=null,ze=null,it=null,ct=null,Nt=null,Ot=null,ve=null,Le=null,Xe=function(){V.tagName=="INPUT"&&V.value&&(O.value=V.value),z=document.createElement("div"),z.className="jcalendar-reset",ee=document.createElement("div"),ee.className="jcalendar-confirm",it=document.createElement("div"),it.className="jcalendar-controls",it.style.borderBottom="1px solid #ddd",it.appendChild(z),it.appendChild(ee),Z=document.createElement("div"),Z.className="jcalendar-container",ue=document.createElement("div"),ue.className="jcalendar-content",Z.appendChild(ue),V.tagName=="DIV"?(q=V,q.classList.add("jcalendar-inline")):(ue.appendChild(it),q=document.createElement("div"),q.className="jcalendar"),q.classList.add("jcalendar-container"),q.appendChild(Z);var ne=document.createElement("div");ne.className="jcalendar-table",ue.appendChild(ne);var fe=document.createElement("td");fe.setAttribute("colspan","2"),fe.className="jcalendar-prev",we=document.createElement("span"),we.className="jcalendar-year",Ae=document.createElement("span"),Ae.className="jcalendar-month";var P=document.createElement("td");P.className="jcalendar-header",P.setAttribute("colspan","3"),P.appendChild(Ae),P.appendChild(we);var G=document.createElement("td");G.setAttribute("colspan","2"),G.className="jcalendar-next";var ce=document.createElement("thead"),De=document.createElement("tr");De.appendChild(fe),De.appendChild(P),De.appendChild(G),ce.appendChild(De),je=document.createElement("table"),ze=document.createElement("tbody"),je.setAttribute("cellpadding","0"),je.setAttribute("cellspacing","0"),je.appendChild(ce),je.appendChild(ze),ne.appendChild(je),ve=document.createElement("select"),ve.className="jcalendar-select",ve.onchange=function(){A.date[3]=this.value,typeof A.options.onupdate=="function"&&A.options.onupdate(V,A.getValue())};for(var de=0;de<24;de++){var Me=document.createElement("option");Me.value=de,Me.innerHTML=m.two(de),ve.appendChild(Me)}Le=document.createElement("select"),Le.className="jcalendar-select",Le.onchange=function(){A.date[4]=this.value,typeof A.options.onupdate=="function"&&A.options.onupdate(V,A.getValue())};for(var de=0;de<60;de++){var Me=document.createElement("option");Me.value=de,Me.innerHTML=m.two(de),Le.appendChild(Me)}var He=document.createElement("div");He.className="jcalendar-controls",ct=document.createElement("div"),ct.className="jcalendar-time",ct.style.maxWidth="140px",ct.appendChild(ve),ct.appendChild(Le),Ot=document.createElement("button"),Ot.setAttribute("type","button"),Ot.className="jcalendar-update",Nt=document.createElement("div"),Nt.style.flexGrow="10",Nt.appendChild(Ot),He.appendChild(ct),V.tagName=="INPUT"&&He.appendChild(Nt),ue.appendChild(He);var lt=document.createElement("div");lt.className="jcalendar-backdrop",q.appendChild(lt),V.addEventListener("keyup",he),q.addEventListener("swipeleft",function(qe){L.slideLeft(je,0,function(){A.next(),L.slideRight(je,1)}),qe.preventDefault(),qe.stopPropagation()}),q.addEventListener("swiperight",function(qe){L.slideRight(je,0,function(){A.prev(),L.slideLeft(je,1)}),qe.preventDefault(),qe.stopPropagation()}),"ontouchend"in document.documentElement?(q.addEventListener("touchend",J),V.addEventListener("touchend",A.open)):(q.addEventListener("mouseup",J),V.addEventListener("mouseup",A.open)),F.hasEvents||(F.hasEvents=!0,document.addEventListener("keydown",F.keydown)),A.setOptions(O),V.tagName=="INPUT"?(V.parentNode.insertBefore(q,V.nextSibling),V.setAttribute("autocomplete","off"),V.classList.add("jcalendar-input"),V.value=A.setLabel(A.getValue(),A.options)):(A.getDays(),A.options.time&&(ve.value=A.date[3],Le.value=A.date[4])),A.options.opened==!0&&A.open(),A.options.controls==!1&&Z.classList.add("jcalendar-hide-controls"),V.change=A.setValue,V.val=function(qe){if(qe===void 0)return A.getValue();A.setValue(qe)},V.calendar=q.calendar=A};return Xe(),A};return F.keydown=function(V){var O=null;(O=F.current)&&(V.which==13?O.close(!1,!0):V.which==27&&O.close(!1,!1))},F.prettify=function(V,O){if(!O)var O={justNow:"Just now",xMinutesAgo:"{0}m ago",xHoursAgo:"{0}h ago",xDaysAgo:"{0}d ago",xWeeksAgo:"{0}w ago",xMonthsAgo:"{0} mon ago",xYearsAgo:"{0}y ago"};V.indexOf("GMT")===-1&&V.indexOf("Z")===-1&&(V+=" GMT");var A=new Date,J=new Date(V),he=parseInt((A-J)/1e3/60);if(String.prototype.format=function(q){return this.replace("{0}",q)},he==0)var be=O.justNow;else if(he<90)var be=O.xMinutesAgo.format(he);else if(he<1440)var be=O.xHoursAgo.format(Math.round(he/60));else if(he<20160)var be=O.xDaysAgo.format(Math.round(he/1440));else if(he<43200)var be=O.xWeeksAgo.format(Math.round(he/10080));else if(he<1036800)var be=O.xMonthsAgo.format(Math.round(he/43200));else var be=O.xYearsAgo.format(Math.round(he/525600));return be},F.prettifyAll=function(){for(var V=document.querySelectorAll(".prettydate"),O=0;O<V.length;O++)V[O].getAttribute("data-date")?V[O].innerHTML=F.prettify(V[O].getAttribute("data-date")):V[O].innerHTML&&(V[O].setAttribute("title",V[O].innerHTML),V[O].setAttribute("data-date",V[O].innerHTML),V[O].innerHTML=F.prettify(V[O].innerHTML))},F.now=R.now,F.toArray=R.toArray,F.dateToNum=R.dateToNum,F.numToDate=R.numToDate,F.weekdays=R.weekdays,F.months=R.months,F.weekdaysShort=R.weekdaysShort,F.monthsShort=R.monthsShort,F.extractDateFromString=Y.extractDateFromString,F.getDateString=Y.getDateString,F}var se=K();function pe(){var F={material:[["#ffebee","#fce4ec","#f3e5f5","#e8eaf6","#e3f2fd","#e0f7fa","#e0f2f1","#e8f5e9","#f1f8e9","#f9fbe7","#fffde7","#fff8e1","#fff3e0","#fbe9e7","#efebe9","#fafafa","#eceff1"],["#ffcdd2","#f8bbd0","#e1bee7","#c5cae9","#bbdefb","#b2ebf2","#b2dfdb","#c8e6c9","#dcedc8","#f0f4c3","#fff9c4","#ffecb3","#ffe0b2","#ffccbc","#d7ccc8","#f5f5f5","#cfd8dc"],["#ef9a9a","#f48fb1","#ce93d8","#9fa8da","#90caf9","#80deea","#80cbc4","#a5d6a7","#c5e1a5","#e6ee9c","#fff59d","#ffe082","#ffcc80","#ffab91","#bcaaa4","#eeeeee","#b0bec5"],["#e57373","#f06292","#ba68c8","#7986cb","#64b5f6","#4dd0e1","#4db6ac","#81c784","#aed581","#dce775","#fff176","#ffd54f","#ffb74d","#ff8a65","#a1887f","#e0e0e0","#90a4ae"],["#ef5350","#ec407a","#ab47bc","#5c6bc0","#42a5f5","#26c6da","#26a69a","#66bb6a","#9ccc65","#d4e157","#ffee58","#ffca28","#ffa726","#ff7043","#8d6e63","#bdbdbd","#78909c"],["#f44336","#e91e63","#9c27b0","#3f51b5","#2196f3","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722","#795548","#9e9e9e","#607d8b"],["#e53935","#d81b60","#8e24aa","#3949ab","#1e88e5","#00acc1","#00897b","#43a047","#7cb342","#c0ca33","#fdd835","#ffb300","#fb8c00","#f4511e","#6d4c41","#757575","#546e7a"],["#d32f2f","#c2185b","#7b1fa2","#303f9f","#1976d2","#0097a7","#00796b","#388e3c","#689f38","#afb42b","#fbc02d","#ffa000","#f57c00","#e64a19","#5d4037","#616161","#455a64"],["#c62828","#ad1457","#6a1b9a","#283593","#1565c0","#00838f","#00695c","#2e7d32","#558b2f","#9e9d24","#f9a825","#ff8f00","#ef6c00","#d84315","#4e342e","#424242","#37474f"],["#b71c1c","#880e4f","#4a148c","#1a237e","#0d47a1","#006064","#004d40","#1b5e20","#33691e","#827717","#f57f17","#ff6f00","#e65100","#bf360c","#3e2723","#212121","#263238"]],fire:[["0b1a6d","840f38","b60718","de030b","ff0c0c","fd491c","fc7521","faa331","fbb535","ffc73a"],["071147","5f0b28","930513","be0309","ef0000","fa3403","fb670b","f9991b","faad1e","ffc123"],["03071e","370617","6a040f","9d0208","d00000","dc2f02","e85d04","f48c06","faa307","ffba08"],["020619","320615","61040d","8c0207","bc0000","c82a02","d05203","db7f06","e19405","efab00"],["020515","2d0513","58040c","7f0206","aa0000","b62602","b94903","c57205","ca8504","d89b00"]],baby:[["eddcd2","fff1e6","fde2e4","fad2e1","c5dedd","dbe7e4","f0efeb","d6e2e9","bcd4e6","99c1de"],["e1c4b3","ffd5b5","fab6ba","f5a8c4","aacecd","bfd5cf","dbd9d0","baceda","9dc0db","7eb1d5"],["daa990","ffb787","f88e95","f282a9","8fc4c3","a3c8be","cec9b3","9dbcce","82acd2","649dcb"],["d69070","ff9c5e","f66770","f05f8f","74bbb9","87bfae","c5b993","83aac3","699bca","4d89c2"],["c97d5d","f58443","eb4d57","e54a7b","66a9a7","78ae9c","b5a67e","7599b1","5c88b7","4978aa"]],chart:[["#C1D37F","#4C5454","#FFD275","#66586F","#D05D5B","#C96480","#95BF8F","#6EA240","#0F0F0E","#EB8258","#95A3B3","#995D81"]]},V=function(O){return F[O]?F[O]:F.material};return V.get=function(O){return F[O]?F[O]:F},V.set=function(O,A){F[O]=A},V}var le=pe();function Ee(F,V){var O={};O.options={};var A={data:[],position:null,allowCreate:!1,allowChangePosition:!1,onclick:null,onload:null,onchange:null,oncreate:null,ondelete:null,onbeforecreate:null,onchangeposition:null,animation:!1,hideHeaders:!1,padding:null,palette:null,maxWidth:null};for(var J in A)V&&V.hasOwnProperty(J)?O.options[J]=V[J]:O.options[J]=A[J];F.classList.add("jtabs");var he=null,be=null,q=null;const z=function(Ae){O.options.animation&&setTimeout(function(){let je=O.headers.children[Ae].getBoundingClientRect();O.options.palette==="modern"?(q.style.width=je.width-4+"px",q.style.left=O.headers.children[Ae].offsetLeft+2+"px"):(q.style.width=je.width+"px",q.style.left=O.headers.children[Ae].offsetLeft+"px"),O.options.position==="bottom"?q.style.top="0px":q.style.bottom="0px"},50)};var ee=function(Ae){typeof O.headers.scrollTo=="function"?O.headers.scrollTo({left:Ae,behavior:"smooth"}):O.headers.scrollLeft=Ae,Ae<=1?he.classList.add("disabled"):he.classList.remove("disabled"),Ae>=O.headers.scrollWidth-O.headers.offsetWidth?be.classList.add("disabled"):be.classList.remove("disabled"),O.headers.scrollWidth<=O.headers.offsetWidth?(he.style.display="none",be.style.display="none"):(he.style.display="",be.style.display="")};if(O.setBorder=z,O.open=function(Ae){if(Array.from(O.content.children),!!O.content.children[Ae]){for(var je=null,ze=0;ze<O.headers.children.length;ze++)O.headers.children[ze].classList.contains("jtabs-selected")&&(je=ze),O.headers.children[ze].classList.remove("jtabs-selected"),O.headers.children[ze].removeAttribute("aria-selected"),O.content.children[ze]&&O.content.children[ze].classList.remove("jtabs-selected");if(O.headers.children[Ae].classList.add("jtabs-selected"),O.headers.children[Ae].setAttribute("aria-selected","true"),O.content.children[Ae]&&O.content.children[Ae].classList.add("jtabs-selected"),je!=Ae&&typeof O.options.onchange=="function"&&O.content.children[Ae]&&O.options.onchange(F,O,Ae,O.headers.children[Ae],O.content.children[Ae]),O.options.hideHeaders==!0&&O.headers.children.length<3&&O.options.allowCreate==!1)O.headers.parentNode.style.display="none";else{O.headers.parentNode.style.display="";var it=O.headers.children[Ae].offsetLeft,ct=it+O.headers.children[Ae].offsetWidth,Nt=O.headers.scrollLeft,Ot=Nt+O.headers.offsetWidth;Nt<=it&&Ot>=ct||ee(it-1),z(Ae)}}},O.selectIndex=function(Ae){var je=Array.prototype.indexOf.call(O.headers.children,Ae);return je>=0&&O.open(je),je},O.rename=function(Ae,je){je||(je=prompt("New title",O.headers.children[Ae].innerText)),O.headers.children[Ae].innerText=je,z(O.getActive())},O.create=function(Ae,je){if(typeof O.options.onbeforecreate=="function"){var ze=O.options.onbeforecreate(F,Ae);if(ze===!1)return!1;Ae=ze}var it=O.appendElement(Ae);return typeof O.options.oncreate=="function"&&O.options.oncreate(F,it),z(O.getActive()),it},O.remove=function(Ae){return O.deleteElement(Ae)},O.nextNumber=function(){for(var Ae=0,je=0;je<O.headers.children.length;je++){var ze=O.headers.children[je].innerText.match(/[0-9].*/);ze>Ae&&(Ae=parseInt(ze))}return Ae?Ae++:Ae=1,Ae},O.deleteElement=function(Ae){let je=O.getActive();if(O.headers.children[Ae])O.headers.removeChild(O.headers.children[Ae]),O.content.removeChild(O.content.children[Ae]);else return!1;if(je===Ae)O.open(0);else{let ze=O.getActive()||0;z(ze)}typeof O.options.ondelete=="function"&&O.options.ondelete(F,Ae)},O.appendElement=function(Ae,je,ze,it){if(!Ae)var Ae=prompt("Title?","");if(Ae){let Ot=m.guid(),ve=m.guid();var ct=document.createElement("div");ct.setAttribute("id",ve),ct.setAttribute("role","tabpanel"),ct.setAttribute("aria-labelledby",Ot);var Nt=document.createElement("div");if(Nt.setAttribute("id",Ot),Nt.setAttribute("role","tab"),Nt.setAttribute("aria-controls",ve),Nt.innerHTML=Ae,Nt.content=ct,typeof it>"u")O.content.appendChild(ct),O.headers.insertBefore(Nt,O.headers.lastChild);else{let Le=O.content.children[it];Le?O.content.insertBefore(ct,Le):O.content.appendChild(ct),Le=O.headers.children[it]||O.headers.lastChild,O.headers.insertBefore(Nt,Le)}return O.options.allowChangePosition&&Nt.setAttribute("draggable","true"),ze!==!1&&O.selectIndex(Nt),typeof je=="function"&&je(ct,Nt),ct}},O.getActive=function(){for(var Ae=0;Ae<O.headers.children.length;Ae++)if(O.headers.children[Ae].classList.contains("jtabs-selected"))return Ae;return!1},O.updateContent=function(Ae,je){if(typeof je!="string")var ze=je;else{var ze=document.createElement("div");ze.innerHTML=je}O.content.children[Ae].classList.contains("jtabs-selected")&&je.classList.add("jtabs-selected"),O.content.replaceChild(je,O.content.children[Ae]),z()},O.updatePosition=function(Ae,je,ze,it){if(Ae>je?O.content.insertBefore(O.content.children[Ae],O.content.children[je]):O.content.insertBefore(O.content.children[Ae],O.content.children[je].nextSibling),it!==!1)O.open(je);else{const ct=O.getActive();je<ct&&O.setBorder(ct)}!ze&&typeof O.options.onchangeposition=="function"&&O.options.onchangeposition(O.headers,Ae,je)},O.move=function(Ae,je,ze,it){Ae>je?O.headers.insertBefore(O.headers.children[Ae],O.headers.children[je]):O.headers.insertBefore(O.headers.children[Ae],O.headers.children[je].nextSibling),O.updatePosition(Ae,je,ze,it)},O.setBorder=z,O.init=function(){F.innerHTML="",O.headers=document.createElement("div"),O.content=document.createElement("div"),O.headers.classList.add("jtabs-headers"),O.headers.setAttribute("role","tablist"),O.content.classList.add("jtabs-content"),O.content.setAttribute("role","region"),O.content.setAttribute("aria-label","Tab Panels"),O.options.palette?F.classList.add("jtabs-modern"):F.classList.remove("jtabs-modern"),O.options.padding&&(O.content.style.padding=parseInt(O.options.padding)+"px");var Ae=document.createElement("div");Ae.className="jtabs-headers-container",Ae.appendChild(O.headers),O.options.maxWidth&&(Ae.style.maxWidth=parseInt(O.options.maxWidth)+"px");var je=document.createElement("div");if(je.className="jtabs-controls",je.setAttribute("draggable","false"),Ae.appendChild(je),O.options.position=="bottom"?(F.appendChild(O.content),F.appendChild(Ae)):(F.appendChild(Ae),F.appendChild(O.content)),O.options.allowCreate==!0){var ze=document.createElement("div");ze.className="jtabs-add",ze.onclick=function(){O.create()},je.appendChild(ze)}he=document.createElement("div"),he.className="jtabs-prev",he.onclick=function(){ee(O.headers.scrollLeft-O.headers.offsetWidth)},je.appendChild(he),be=document.createElement("div"),be.className="jtabs-next",be.onclick=function(){ee(O.headers.scrollLeft+O.headers.offsetWidth)},je.appendChild(be);for(var it=0;it<O.options.data.length;it++){if(O.options.data[it].titleElement)var ct=O.options.data[it].titleElement;else var ct=document.createElement("div");if(O.options.data[it].icon){var Nt=document.createElement("div"),Ot=document.createElement("i");Ot.classList.add("material-icons"),Ot.innerHTML=O.options.data[it].icon,Nt.appendChild(Ot),ct.appendChild(Nt)}if(O.options.data[it].title){var ve=document.createTextNode(O.options.data[it].title);ct.appendChild(ve)}if(O.options.data[it].width&&(ct.style.width=O.options.data[it].width),O.options.data[it].contentElement)var Le=O.options.data[it].contentElement;else{var Le=document.createElement("div");Le.innerHTML=O.options.data[it].content}O.headers.appendChild(ct),O.content.appendChild(Le)}q=document.createElement("div"),q.className="jtabs-border",O.headers.appendChild(q),O.options.animation&&F.classList.add("jtabs-animation"),O.headers.addEventListener("click",function(Xe){if(Xe.target.parentNode.classList.contains("jtabs-headers"))var ne=Xe.target;else if(Xe.target.tagName=="I")var ne=Xe.target.parentNode.parentNode;else var ne=Xe.target.parentNode;var fe=O.selectIndex(ne);typeof O.options.onclick=="function"&&O.options.onclick(F,O,fe,O.headers.children[fe],O.content.children[fe])}),O.headers.addEventListener("contextmenu",function(Xe){O.selectIndex(Xe.target)}),O.headers.children.length&&O.open(0),ee(0),O.options.allowChangePosition==!0&&T(O.headers,{direction:1,ondrop:function(Xe,ne,fe){O.updatePosition(ne,fe)}}),typeof O.options.onload=="function"&&O.options.onload(F,O)},F.children[0]&&F.children[0].children.length)for(var Z=0;Z<F.children[0].children.length;Z++){var ue=O.options.data&&O.options.data[Z]?O.options.data[Z]:{};F.children[1]&&F.children[1].children[Z]?(ue.titleElement=F.children[0].children[Z],ue.contentElement=F.children[1].children[Z]):ue.contentElement=F.children[0].children[Z],O.options.data[Z]=ue}var we=!1;if(O.options.data)for(var Z=0;Z<O.options.data.length;Z++)O.options.data[Z].url&&(D({url:O.options.data[Z].url,type:"GET",dataType:"text/html",index:Z,success:function(je){O.options.data[this.index].content=je},complete:function(){O.init()}}),we=!0);return we||O.init(),F.tabs=O,O}function Ne(F,V){if(F.color)return F.color.setOptions(V,!0);var O={type:"color"};O.options={};var A=null,J=null,he=null,be=null,q=null,z=null,ee=null;O.setOptions=function(P,G){var ce={placeholder:"",value:null,onopen:null,onclose:null,onchange:null,closeOnChange:!0,palette:null,position:null,doneLabel:"Done",resetLabel:"Reset",fullscreen:!1,opened:!1};P||(P={}),P&&!P.palette&&(P.palette=le());for(var De in ce)P&&P.hasOwnProperty(De)?O.options[De]=P[De]:(typeof O.options[De]>"u"||G===!0)&&(O.options[De]=ce[De]);return be&&(be.innerHTML=O.options.resetLabel),q&&(q.innerHTML=O.options.doneLabel),O.options.palette&&ee&&ee.updateContent(0,je()),typeof O.options.value=="string"&&(F.value=O.options.value,F.tagName==="INPUT"&&(F.style.color=F.value,F.style.backgroundColor=F.value)),O.options.placeholder?F.setAttribute("placeholder",O.options.placeholder):F.getAttribute("placeholder")&&F.removeAttribute("placeholder"),O},O.select=function(P){var G=A.querySelector(".jcolor-selected");G&&G.classList.remove("jcolor-selected"),O.values[P]&&O.values[P].classList.add("jcolor-selected"),O.options.value=P},O.open=function(){if(!A.classList.contains("jcolor-focus")){C(O,!0),A.classList.add("jcolor-focus"),O.options.value&&O.select(O.options.value),he.style.marginTop="",he.style.marginLeft="";var P=he.getBoundingClientRect(),G=m.getWindowWidth(),ce=m.getWindowHeight();if(G<800||O.options.fullscreen==!0?(he.classList.add("jcolor-fullscreen"),L.slideBottom(he,1),J.style.display="block"):(he.classList.contains("jcolor-fullscreen")&&(he.classList.remove("jcolor-fullscreen"),J.style.display=""),O.options.position?he.style.position="fixed":he.style.position="",P.left+P.width>G&&(he.style.marginLeft=-1*(P.left+P.width-(G-20))+"px"),P.top+P.height>ce&&(he.style.marginTop=-1*(P.top+P.height-(ce-20))+"px")),typeof O.options.onopen=="function"&&O.options.onopen(F,O),ee.setBorder(ee.getActive()),O.options.value){var De=Ae(O.options.value);Le.forEach(function(de,Me){de.value=De[Me],de.dispatchEvent(new Event("input"))})}}},O.close=function(P){return A.classList.contains("jcolor-focus")&&(A.classList.remove("jcolor-focus"),J.style.display="",!P&&typeof O.options.onclose=="function"&&O.options.onclose(F,O),C(O,!1)),O.options.value},O.setValue=function(P){P||(P=""),P!=O.options.value&&(O.options.value=P,ve=P,O.select(P),typeof O.options.onchange=="function"&&O.options.onchange(F,P,O),F.value!=O.options.value&&(F.value=O.options.value,F.tagName==="INPUT"&&(F.style.color=F.value,F.style.backgroundColor=F.value),typeof F.oninput=="function"&&F.oninput({type:"input",target:F,value:F.value})),O.options.closeOnChange==!0&&O.close())},O.getValue=function(){return O.options.value};var Z=function(P){var G=P.toString(16);return G.length===1?"0"+G:G},ue=function(P,G,ce){return"#"+Z(P)+Z(G)+Z(ce)},we=function(P){return parseInt("0x"+P)},Ae=function(P){return[we(P.substr(1,2)),we(P.substr(3,2)),we(P.substr(5,2))]},je=function(){var P=document.createElement("div");P.className="jcolor-grid",O.values=[];var G=document.createElement("table");G.setAttribute("cellpadding","7"),G.setAttribute("cellspacing","0");for(var ce=0;ce<O.options.palette.length;ce++){for(var De=document.createElement("tr"),de=0;de<O.options.palette[ce].length;de++){var Me=document.createElement("td"),He=O.options.palette[ce][de];He.length<7&&He.substr(0,1)!=="#"&&(He="#"+He),Me.style.backgroundColor=He,Me.setAttribute("data-value",He),Me.innerHTML="",De.appendChild(Me),O.options.value==He&&Me.classList.add("jcolor-selected"),O.values[He]=Me}G.appendChild(De)}return P.appendChild(G),P},ze=document.createElement("canvas");ze.width=200,ze.height=160;var it=ze.getContext("2d"),ct=function(){var P=z.firstChild.getBoundingClientRect();ze.width=P.width-14,Nt()},Nt=function(){var P=it.createLinearGradient(0,0,ze.width,0);P.addColorStop(0,"rgb(255,0,0)"),P.addColorStop(.15,"rgb(255,0,255)"),P.addColorStop(.33,"rgb(0,0,255)"),P.addColorStop(.49,"rgb(0,255,255)"),P.addColorStop(.67,"rgb(0,255,0)"),P.addColorStop(.84,"rgb(255,255,0)"),P.addColorStop(1,"rgb(255,0,0)"),it.fillStyle=P,it.fillRect(0,0,ze.width,ze.height),P=it.createLinearGradient(0,0,0,ze.height),P.addColorStop(0,"rgba(255,255,255,1)"),P.addColorStop(.5,"rgba(255,255,255,0)"),P.addColorStop(.5,"rgba(0,0,0,0)"),P.addColorStop(1,"rgba(0,0,0,1)"),it.fillStyle=P,it.fillRect(0,0,ze.width,ze.height)},Ot=function(){var P=document.createElement("div");P.className="jcolor-hsl";var G=document.createElement("div");G.className="jcolor-point";var ce=document.createElement("div");ce.appendChild(ze),ce.appendChild(G),P.appendChild(ce);var De=function(de,Me,He){if(de===1){var lt=P.getBoundingClientRect(),qe=Me-lt.left,dt=He-lt.top;qe<0&&(qe=0),dt<0&&(dt=0),qe>lt.width&&(qe=lt.width),dt>lt.height&&(dt=lt.height),G.style.left=qe+"px",G.style.top=dt+"px";var gt=it.getImageData(qe,dt,1,1).data;ve=ue(gt[0],gt[1],gt[2])}};return P.addEventListener("mousedown",function(de){De(de.buttons,de.clientX,de.clientY)}),P.addEventListener("mousemove",function(de){De(de.buttons,de.clientX,de.clientY)}),P.addEventListener("touchmove",function(de){De(1,de.changedTouches[0].clientX,de.changedTouches[0].clientY)}),P},ve="",Le=[],Xe=function(){if(ve!=="")for(var P=0;P<Le.length;P++){var G=Ae(ve);G[P]=0;var ce="linear-gradient(90deg, rgb(";ce+=G.join(", "),ce+="), rgb(",G[P]=255,ce+=G.join(", "),ce+="))",Le[P].style.backgroundImage=ce}},ne=function(){var P=document.createElement("div");P.className="jcolor-sliders";var G=document.createElement("div"),ce=function(He){var lt=document.createElement("div");lt.className="jcolor-sliders-input-container";var qe=document.createElement("label");qe.innerText=He;var dt=document.createElement("div");dt.className="jcolor-sliders-input-subcontainer";var gt=document.createElement("input");gt.type="range",gt.min=0,gt.max=255,gt.value=0,gt.setAttribute("aria-label","Color value"),gt.setAttribute("aria-valuemin","0"),gt.setAttribute("aria-valuemax","255"),gt.setAttribute("aria-valuenow","0"),lt.appendChild(qe),dt.appendChild(gt);var Ft=document.createElement("div");return Ft.innerText=gt.value,gt.addEventListener("input",function(){Ft.innerText=gt.value}),dt.appendChild(Ft),lt.appendChild(dt),G.appendChild(lt),gt};Le=[ce("Red"),ce("Green"),ce("Blue")],P.appendChild(G);var De=document.createElement("div");De.className="jcolor-sliders-final-color";var de=document.createElement("div");de.style.visibility="hidden",de.innerText="a",De.appendChild(de);var Me=function(){var He=ue(parseInt(Le[0].value),parseInt(Le[1].value),parseInt(Le[2].value));de.innerText=He,de.style.color=He,de.style.removeProperty("visibility"),ve=He};return Le.forEach(function(He){He.addEventListener("input",function(){Me(),Xe()})}),P.appendChild(De),P},fe=function(){O.setOptions(V),F.tagName=="INPUT"&&(F.classList.add("jcolor-input"),F.readOnly=!0),A=document.createElement("div"),A.className="jcolor",J=document.createElement("div"),J.className="jcolor-backdrop",A.appendChild(J),he=document.createElement("div"),he.className="jcolor-content";var P=document.createElement("div");P.className="jcolor-controls",he.appendChild(P),be=document.createElement("div"),be.className="jcolor-reset",be.innerHTML=O.options.resetLabel,P.appendChild(be),q=document.createElement("div"),q.className="jcolor-close",q.innerHTML=O.options.doneLabel,P.appendChild(q),z=document.createElement("div"),he.appendChild(z),ee=Ee(z,{animation:!0,data:[{title:"Grid",contentElement:je()},{title:"Spectrum",contentElement:Ot()},{title:"Sliders",contentElement:ne()}],onchange:function(G,ce,De){if(De===1)ct();else{var de=ve!==""?ve:O.getValue();if(De===2&&de){var Me=Ae(de);Le.forEach(function(He,lt){He.value=Me[lt],He.dispatchEvent(new Event("input"))})}}},palette:"modern"}),A.appendChild(he),F.tagName=="INPUT"?F.parentNode.insertBefore(A,F.nextSibling):F.appendChild(A),A.addEventListener("click",function(G){if(G.target.tagName=="TD"){var ce=G.target.getAttribute("data-value");ce&&O.setValue(ce)}else G.target.classList.contains("jcolor-reset")?(O.setValue(""),O.close()):G.target.classList.contains("jcolor-close")?(ee.getActive()>0&&O.setValue(ve),O.close()):G.target.classList.contains("jcolor-backdrop")?O.close():O.open()}),F.addEventListener("mouseup",function(G){O.open()}),window.addEventListener("resize",function(){A.classList.contains("jcolor-focus")&&ee.getActive()==1&&ct()}),O.options.opened==!0&&O.open(),F.change=O.setValue,F.val=function(G){if(G===void 0)return O.getValue();O.setValue(G)},F.color=O,A.color=O};return O.toHex=function(P){var G=function(ce){return("0"+parseInt(ce).toString(16)).slice(-2)};if(P)return/^#[0-9A-F]{6}$/i.test(P)?P:(P=P.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/),P&&P.length?"#"+G(P[1])+G(P[2])+G(P[3]):"")},fe(),O}function _e(){var F=function(V,O){var A={type:"contextmenu"};A.options={};var J={items:null,onclick:null};for(var he in J)O&&O.hasOwnProperty(he)?A.options[he]=O[he]:A.options[he]=J[he];V.classList.add("jcontextmenu"),A.open=function(z,ee){if(ee&&(A.options.items=ee,A.create(ee)),F.current&&F.current.close(),C(A,!0),V.classList.add("jcontextmenu-focus"),F.current=A,A.options.items&&A.options.items.length>0||V.children.length){if(z.target)if(z.changedTouches&&z.changedTouches[0])Z=z.changedTouches[0].clientX,ue=z.changedTouches[0].clientY;else var Z=z.clientX,ue=z.clientY;else var Z=z.x,ue=z.y;var we=V.getBoundingClientRect();if(window.innerHeight<ue+we.height){var Ae=ue-we.height;Ae<0&&(Ae=0),V.style.top=Ae+"px"}else V.style.top=ue+"px";window.innerWidth<Z+we.width?Z-we.width>0?V.style.left=Z-we.width+"px":V.style.left="10px":V.style.left=Z+"px"}},A.isOpened=function(){return!!V.classList.contains("jcontextmenu-focus")},A.close=function(){V.classList.contains("jcontextmenu-focus")&&V.classList.remove("jcontextmenu-focus"),C(A,!1)},A.create=function(z){V.innerHTML="";var ee=be();V.appendChild(ee);for(var Z=0;Z<z.length;Z++){var ue=q(z[Z]);V.appendChild(ue)}};function be(){var z=document.createElement("div");z.classList.add("header"),z.addEventListener("click",function(ue){ue.preventDefault(),ue.stopPropagation()});var ee=document.createElement("a");ee.classList.add("title"),ee.innerHTML=u.translate("Menu"),z.appendChild(ee);var Z=document.createElement("a");return Z.classList.add("close"),Z.innerHTML=u.translate("close"),Z.addEventListener("click",function(ue){A.close()}),z.appendChild(Z),z}function q(z){if(z.type&&(z.type=="line"||z.type=="divisor"))var ee=document.createElement("hr");else{var ee=document.createElement("div"),Z=document.createElement("a");if(Z.innerHTML=z.title,z.tooltip&&ee.setAttribute("title",z.tooltip),z.icon&&ee.setAttribute("data-icon",z.icon),z.id&&(ee.id=z.id),z.disabled?ee.className="jcontextmenu-disabled":z.onclick&&(ee.method=z.onclick,ee.addEventListener("mousedown",function(Nt){Nt.preventDefault()}),ee.addEventListener("mouseup",function(Nt){this.method(this,Nt)})),ee.appendChild(Z),z.submenu){var ue=document.createElement("span");ue.innerHTML="&#9658;",ee.appendChild(ue),ee.classList.add("jcontexthassubmenu");var we=document.createElement("div");we.classList.add("jcontextmenu"),we.setAttribute("tabindex","900");for(var Ae=z.submenu,je=0;je<Ae.length;je++){var ze=q(Ae[je]);we.appendChild(ze)}ee.appendChild(we)}else if(z.shortcut){var it=document.createElement("span");it.innerHTML=z.shortcut,ee.appendChild(it)}}return ee}return typeof A.options.onclick=="function"&&V.addEventListener("click",function(z){A.options.onclick(A,z)}),A.options.items&&A.create(A.options.items),window.addEventListener("mousewheel",function(){A.close()}),V.contextmenu=A,A};return F}var me=_e();function Ke(){var F=function(V,O){if(V.dropdown)return V.dropdown.setOptions(O,!0);var A={type:"dropdown"};A.options={};var J=function(ne,fe){ne&&ne.length&&(A.options.sortResults!==!1&&(typeof A.options.sortResults=="function"?ne.sort(A.options.sortResults):ne.sort(he)),A.setData(ne)),typeof A.options.onload=="function"&&A.options.onload(V,A,ne,fe),fe&&q(fe),fe==null&&(A.options.value=""),V.value=A.options.value,A.options.opened==!0&&A.open()},he=function(ne,fe){var P,G;return typeof ne=="string"?P=ne:ne.text?P=ne.text:ne.name&&(P=ne.name),typeof fe=="string"?G=fe:fe.text?G=fe.text:fe.name&&(G=fe.name),typeof P=="string"||typeof G=="string"?(typeof P!="string"&&(P=""+P),typeof G!="string"&&(G=""+G),P.localeCompare(G)):P-G},be=function(){A.value={};for(var ne=0;ne<A.items.length;ne++)A.items[ne].selected==!0&&(A.items[ne].element&&A.items[ne].element.classList.remove("jdropdown-selected"),A.items[ne].selected=null);A.options.value="",V.value=""},q=function(ne){if(be(),ne!==null)if(!ne)typeof A.value[""]<"u"&&(A.value[""]="");else{Array.isArray(ne)||(ne=(""+ne).split(";"));for(var fe=0;fe<ne.length;fe++)A.value[ne[fe]]=""}for(var fe=0;fe<A.items.length;fe++)typeof A.value[z(fe)]<"u"&&(A.items[fe].element&&A.items[fe].element.classList.add("jdropdown-selected"),A.items[fe].selected=!0,A.value[z(fe)]=ee(fe));A.options.value=Object.keys(A.value).join(";"),A.header.value=A.getText()},z=function(ne,fe){if(A.options.format)var P="id";else var P="value";return A.items[ne]?fe!==void 0?A.items[ne].data[P]=fe:A.items[ne].data[P]:""},ee=function(ne,fe){if(A.options.format)var P="name";else var P="text";return A.items[ne]?fe!==void 0?A.items[ne].data[P]=fe:A.items[ne].data[P]:""},Z=function(){return Object.keys(A.value)},ue=function(){for(var ne=[],fe=Object.keys(A.value),P=0;P<fe.length;P++)ne.push(A.value[fe[P]]);return ne};A.setOptions=function(ne,fe){ne||(ne={});var P={url:null,data:[],format:0,multiple:!1,autocomplete:!1,remoteSearch:!1,lazyLoading:!1,type:null,width:null,maxWidth:null,opened:!1,value:null,placeholder:"",newOptions:!1,position:!1,onchange:null,onload:null,onopen:null,onclose:null,onfocus:null,onblur:null,oninsert:null,onbeforeinsert:null,onsearch:null,onbeforesearch:null,sortResults:!1,autofocus:!1,prompt:null,allowEmpty:!0};for(var G in P)ne&&ne.hasOwnProperty(G)?A.options[G]=ne[G]:(typeof A.options[G]>"u"||fe===!0)&&(A.options[G]=P[G]);return(A.options.remoteSearch==!0||A.options.type==="searchbar")&&(A.options.autocomplete=!0),A.options.newOptions==!0?A.header.classList.add("jdropdown-add"):A.header.classList.remove("jdropdown-add"),A.options.autocomplete==!0?A.header.removeAttribute("readonly"):A.header.setAttribute("readonly","readonly"),A.options.placeholder?A.header.setAttribute("placeholder",A.options.placeholder):A.header.removeAttribute("placeholder"),V.classList.remove("jdropdown-searchbar"),V.classList.remove("jdropdown-picker"),V.classList.remove("jdropdown-list"),A.options.type=="searchbar"?V.classList.add("jdropdown-searchbar"):A.options.type=="list"?V.classList.add("jdropdown-list"):A.options.type=="picker"?V.classList.add("jdropdown-picker"):m.getWindowWidth()<800?A.options.autocomplete?(V.classList.add("jdropdown-searchbar"),A.options.type="searchbar"):(V.classList.add("jdropdown-picker"),A.options.type="picker"):(A.options.width?(V.style.width=A.options.width,V.style.minWidth=A.options.width):(V.style.removeProperty("width"),V.style.removeProperty("min-width")),V.classList.add("jdropdown-default"),A.options.type="default"),A.options.type=="searchbar"?we.appendChild(ze):Ae.insertBefore(ze,Ae.firstChild),A.options.url&&!ne.data?D({url:A.options.url,method:"GET",dataType:"json",success:function(ce){ce&&J(ce,A.options.value)}}):J(A.options.data,A.options.value),A};var we=null,Ae=null,je=null,ze=null,it=null,ct=null,Nt=null,Ot=function(){if(O||(O={}),V.tagName=="SELECT"){var ne=F.extractFromDom(V,O);V=ne.el,O=ne.options}!O.placeholder&&V.getAttribute("placeholder")&&(O.placeholder=V.getAttribute("placeholder")),A.value={},A.items=[],A.groups=[],A.search="",A.results=null,V.classList.add("jdropdown"),we=document.createElement("div"),we.className="jdropdown-container-header",A.header=document.createElement("input"),A.header.className="jdropdown-header jss_object",A.header.type="text",A.header.setAttribute("autocomplete","off"),A.header.onfocus=function(){typeof A.options.onfocus=="function"&&A.options.onfocus(V)},A.header.onblur=function(){typeof A.options.onblur=="function"&&A.options.onblur(V)},A.header.onkeyup=function(fe){A.options.autocomplete==!0&&!Nt?(A.search!=A.header.value.trim()&&(Nt=setTimeout(function(){A.find(A.header.value.trim()),Nt=null},400)),V.classList.contains("jdropdown-focus")||A.open()):A.options.autocomplete||A.next(fe.key)},F.hasEvents||(F.hasEvents=!0,document.addEventListener("keydown",F.keydown)),Ae=document.createElement("div"),Ae.className="jdropdown-container",je=document.createElement("div"),je.className="jdropdown-content",ze=document.createElement("div"),ze.className="jdropdown-close",ze.textContent="Done",it=document.createElement("div"),it.className="jdropdown-reset",it.textContent="x",it.onclick=function(){A.reset(),A.close()},ct=document.createElement("div"),ct.className="jdropdown-backdrop",we.appendChild(A.header),Ae.appendChild(je),V.appendChild(we),V.appendChild(Ae),V.appendChild(ct),A.setOptions(O),"ontouchsend"in document.documentElement?V.addEventListener("touchsend",F.mouseup):V.addEventListener("mouseup",F.mouseup),A.options.lazyLoading==!0&&w(je,{loadUp:A.loadUp,loadDown:A.loadDown}),je.onwheel=function(fe){fe.stopPropagation()},V.change=A.setValue,V.val=function(fe){if(fe===void 0)return A.getValue(!!A.options.multiple);A.setValue(fe)},V.dropdown=A};A.getUrl=function(){return A.options.url},A.setUrl=function(ne,fe){A.options.url=ne,D({url:A.options.url,method:"GET",dataType:"json",success:function(P){A.setData(P),typeof fe=="function"&&fe(A)}})},A.setId=function(ne,fe){if(A.options.format)var P="id";else var P="value";typeof ne=="object"?ne[P]=fe:A.items[ne].data[P]=fe};const ve=function(ne,fe){if(!ne){let ce=A.options.autocomplete==!0?A.header.value:"";if(ne=prompt(u.translate("Add A New Option"),ce),!ne)return!1}if(fe||(fe=m.guid()),A.options.format)var P={id:fe,name:ne};else var P={value:fe,text:ne};if(typeof A.options.onbeforeinsert=="function"){let ce=A.options.onbeforeinsert(A,P);if(ce===!1)return!1;ce&&(P=ce)}A.options.data.push(P);var G=A.createItem(P);return je.appendChild(G.element),typeof A.options.oninsert=="function"&&A.options.oninsert(A,P,G),je.style.display=="none"&&(je.style.display=""),A.results&&A.results.push(G),P};A.add=function(ne,fe){return typeof A.options.prompt=="function"?A.options.prompt.call(A,ve):ve(ne,fe)},A.createItem=function(ne,fe,P){A.options.format?(!ne.id&&ne.value!==void 0&&(ne.id=ne.value),!ne.name&&ne.text!==void 0&&(ne.name=ne.text)):(!ne.value&&ne.id!==void 0&&(ne.value=ne.id),!ne.text&&ne.name!==void 0&&(ne.text=ne.name));var G={};if(G.element=document.createElement("div"),G.element.className="jdropdown-item",G.element.indexValue=A.items.length,G.data=ne,fe&&(G.group=fe),ne.id&&G.element.setAttribute("id",ne.id),ne.disabled==!0&&G.element.setAttribute("data-disabled",!0),ne.tooltip&&G.element.setAttribute("title",ne.tooltip),ne.image){var ce=document.createElement("img");ce.className="jdropdown-image",ce.src=ne.image,ne.title||ce.classList.add("jdropdown-image-small"),G.element.appendChild(ce)}else if(ne.icon){var De=document.createElement("span");De.className="jdropdown-icon material-icons",De.innerText=ne.icon,ne.title||De.classList.add("jdropdown-icon-small"),ne.color&&(De.style.color=ne.color),G.element.appendChild(De)}else if(ne.color){var de=document.createElement("div");de.className="jdropdown-color",de.style.backgroundColor=ne.color,G.element.appendChild(de)}if(A.options.format)var Me=ne.name;else var Me=ne.text;var He=document.createElement("div");if(He.className="jdropdown-description",He.textContent=Me||"&nbsp;",ne.title){var lt=document.createElement("div");lt.className="jdropdown-title",lt.innerText=ne.title,He.appendChild(lt)}if(A.options.format)var qe=ne.id;else var qe=ne.value;return A.value[qe]&&(G.element.classList.add("jdropdown-selected"),G.selected=!0),A.items.push(G),G.element.appendChild(He),G},A.appendData=function(ne){if(ne.length){for(var fe=[],P=[],G=0;G<ne.length;G++)ne[G].group?(P[ne[G].group]||(P[ne[G].group]=[]),P[ne[G].group].push(G)):fe.push(G);var ce=0,De=Object.keys(P);if(De.length>0)for(var G=0;G<De.length;G++){var de=document.createElement("div");de.className="jdropdown-group";var Me=document.createElement("div");Me.className="jdropdown-group-name",Me.textContent=De[G];var He=document.createElement("i");He.className="jdropdown-group-arrow jdropdown-group-arrow-down",Me.appendChild(He);var lt=document.createElement("div");lt.className="jdropdown-group-items";for(var qe=0;qe<P[De[G]].length;qe++){var dt=A.createItem(ne[P[De[G]][qe]],de,De[G]);(A.options.lazyLoading==!1||ce<200)&&(lt.appendChild(dt.element),ce++)}de.appendChild(Me),de.appendChild(lt),A.groups.push(de),lt.children.length>0&&je.appendChild(de)}if(fe.length)for(var G=0;G<fe.length;G++){var dt=A.createItem(ne[fe[G]]);(A.options.lazyLoading==!1||ce<200)&&(je.appendChild(dt.element),ce++)}}},A.setData=function(ne){if(be(),je.textContent="",A.header.value="",A.items=[],ne&&ne.length){for(var fe=0;fe<ne.length;fe++)typeof ne[fe]!="object"&&(A.options.format?ne[fe]={id:ne[fe],name:ne[fe]}:ne[fe]={value:ne[fe],text:ne[fe]});A.appendData(ne),A.options.data=ne}else A.options.data=[];A.close()},A.getData=function(){return A.options.data},A.getPosition=function(ne){for(var fe=0;fe<A.items.length;fe++)if(z(fe)==ne)return fe;return!1},A.getText=function(ne){var fe=ue();return ne?fe:fe.join("; ")},A.getValue=function(ne){var fe=Z();return ne?fe:fe.join(";")};var Le=function(ne){V.value!=A.options.value&&(V.value=A.options.value,typeof V.oninput=="function"&&V.oninput({type:"input",target:V,value:V.value})),typeof A.options.onchange=="function"&&A.options.onchange(V,A,ne,A.options.value)};A.setValue=function(ne){var fe=A.getValue();Array.isArray(ne)&&(ne=ne.join(";")),fe!==ne&&(q(ne),Le(fe))},A.resetSelected=function(){A.setValue(null)},A.selectIndex=function(P,fe){var P=parseInt(P);if(A.items&&A.items[P]&&(fe===!0||A.items[P].data.disabled!==!0))if(A.setCursor(P,!1),!A.options.multiple)A.items[P].selected?A.options.allowEmpty!==!1&&A.setValue(null):A.setValue(z(P)),A.close();else{var G=A.options.value;A.items[P].selected?(A.items[P].element.classList.remove("jdropdown-selected"),A.items[P].selected=!1,delete A.value[z(P)]):(A.items[P].element.classList.add("jdropdown-selected"),A.items[P].selected=!0,A.value[z(P)]=ee(P)),A.options.value=Object.keys(A.value).join(";"),A.options.autocomplete==!1&&(A.header.value=ue().join("; ")),Le(G)}},A.selectItem=function(ne){A.selectIndex(ne.indexValue)};var Xe=function(ne,fe){for(var P=0;P<fe.length;P++)if(A.options.format){if(fe[P].id==ne)return!0}else if(fe[P].value==ne)return!0;return!1};return A.find=function(ne){if(A.search==ne.trim())return!1;if(A.search=ne,A.setCursor(),A.groups.length)for(var fe=0;fe<A.groups.length;fe++)A.groups[fe].lastChild.textContent="";if(je.textContent="",A.options.remoteSearch==!0){A.results=null;var P=A.options.url;let lt={url:P,method:"GET",data:{q:ne},dataType:"json",success:function(qe){A.items=[];var dt=Object.keys(A.value);if(dt.length)for(var gt=0;gt<dt.length;gt++)Xe(dt[gt],qe)||(A.options.format?qe.unshift({id:dt[gt],name:A.value[dt[gt]]}):qe.unshift({value:dt[gt],text:A.value[dt[gt]]}));A.appendData(qe),qe.length?je.style.display="":je.style.display="none",typeof A.options.onsearch=="function"&&A.options.onsearch(A,qe)}};if(typeof A.options.onbeforesearch=="function"){let qe=A.options.onbeforesearch(A,lt);if(qe===!1)return;typeof qe=="object"&&(lt=qe)}D(lt)}else{ne=new RegExp(ne,"gi");for(var G=[],fe=0;fe<A.items.length;fe++){var ce=ee(fe),De=A.items[fe].data.title||"",de=A.items[fe].data.group||"",Me=A.items[fe].data.synonym||"";Me&&(Me=Me.join(" ")),(ne==null||A.items[fe].selected==!0||ce.toString().match(ne)||De.match(ne)||de.match(ne)||Me.match(ne))&&G.push(A.items[fe])}if(!G.length)je.style.display="none",A.results=null;else{je.style.display="",A.results=G;var He=G.length||0;A.options.lazyLoading==!0&&He>200&&(He=200);for(var fe=0;fe<He;fe++)A.results[fe].group?(A.results[fe].group.parentNode||je.appendChild(A.results[fe].group),A.results[fe].group.lastChild.appendChild(A.results[fe].element)):je.appendChild(A.results[fe].element)}}A.options.autofocus==!0&&A.first()},A.open=function(){if(!V.classList.contains("jdropdown-focus")){F.current=A,C(A,!0),V.classList.add("jdropdown-focus"),m.getWindowWidth()<800&&(A.options.type==null||A.options.type=="picker")&&L.slideBottom(Ae,1),A.options.autocomplete==!0&&(A.header.value=A.search,A.header.focus());var ne=Z();if(ne[0]){var fe=A.getPosition(ne[0]);fe!==!1&&A.setCursor(fe)}if(!A.options.type||A.options.type=="default"){var P=V.getBoundingClientRect(),G=Ae.getBoundingClientRect();A.options.position?(Ae.style.position="fixed",window.innerHeight<P.bottom+G.height?(Ae.style.top="",Ae.style.bottom=window.innerHeight-P.top+1+"px"):(Ae.style.top=P.bottom+"px",Ae.style.bottom=""),Ae.style.left=P.left+"px"):window.innerHeight<P.bottom+G.height?(Ae.style.top="",Ae.style.bottom=P.height+1+"px"):(Ae.style.top="",Ae.style.bottom=""),Ae.style.minWidth=P.width+"px",A.options.maxWidth&&(Ae.style.maxWidth=A.options.maxWidth),!A.items.length&&A.options.autocomplete==!0?je.style.display="none":je.style.display=""}}typeof A.options.onopen=="function"&&A.options.onopen(V)},A.close=function(ne){return V.classList.contains("jdropdown-focus")&&(A.header.value=A.getText(),A.setCursor(),!ne&&typeof A.options.onclose=="function"&&A.options.onclose(V),A.header.blur&&A.header.blur(),V.classList.remove("jdropdown-focus"),C(A,!1),F.current=null),A.getValue()},A.setCursor=function(ne,fe){if(A.currentIndex!=null&&A.items&&A.items[A.currentIndex]&&A.items[A.currentIndex].element.classList.remove("jdropdown-cursor"),ne==null)A.currentIndex=null;else if(ne=parseInt(ne),A.items[ne].element.parentNode&&(A.items[ne].element.classList.add("jdropdown-cursor"),A.currentIndex=ne,fe!==!1&&A.items[A.currentIndex].element)){je.scrollTop;var P=A.items[A.currentIndex].element;je.scrollTop=P.offsetTop-P.scrollTop+P.clientTop-95}},A.resetCursor=A.setCursor,A.updateCursor=A.setCursor,A.reset=function(){A.setCursor(),A.setValue(null)},A.first=function(){A.options.lazyLoading===!0&&A.loadFirst();var ne=je.querySelectorAll(".jdropdown-item");if(ne.length){var fe=ne[0].indexValue;A.setCursor(fe)}},A.last=function(){A.options.lazyLoading===!0&&A.loadLast();var ne=je.querySelectorAll(".jdropdown-item");if(ne.length){var fe=ne[ne.length-1].indexValue;A.setCursor(fe)}},A.next=function(ne){var fe=null;if(ne){if(ne.length==1){var P=A.currentIndex||-1;ne=ne.toLowerCase();var G=null,ce=null,De=je.querySelectorAll(".jdropdown-item");if(De.length){for(var de=0;de<De.length;de++)if(De[de].indexValue>P&&(G=A.items[De[de].indexValue])&&(ce=G.element.innerText[0])&&(ce=ce.toLowerCase(),ne==ce)){fe=De[de].indexValue;break}A.setCursor(fe)}}}else if(A.currentIndex==null||A.currentIndex==null)A.first();else{var Me=A.items[A.currentIndex].element,He=Me.nextElementSibling;He?(He.classList.contains("jdropdown-group")&&(He=He.lastChild.firstChild),fe=He.indexValue):Me.parentNode.classList.contains("jdropdown-group-items")&&((He=Me.parentNode.parentNode.nextElementSibling)&&(He.classList.contains("jdropdown-group")?He=He.lastChild.firstChild:He.classList.contains("jdropdown-item")?fe=He.indexValue:He=null),He&&(fe=He.indexValue)),fe!==null&&A.setCursor(fe)}},A.prev=function(){var ne=null;if(A.currentIndex===null)A.first();else{var fe=A.items[A.currentIndex].element,P=fe.previousElementSibling;P?(P.classList.contains("jdropdown-group")&&(P=P.lastChild.lastChild),ne=P.indexValue):fe.parentNode.classList.contains("jdropdown-group-items")&&((P=fe.parentNode.parentNode.previousElementSibling)&&(P.classList.contains("jdropdown-group")?P=P.lastChild.lastChild:P.classList.contains("jdropdown-item")?ne=P.indexValue:P=null),P&&(ne=P.indexValue))}ne!==null&&A.setCursor(ne)},A.loadFirst=function(){if(A.results)var ne=A.results;else var ne=A.items;var fe=ne.length||0;A.options.lazyLoading==!0&&fe>200&&(fe=200),je.textContent="";for(var P=0;P<fe;P++)ne[P].group?(ne[P].group.parentNode||je.appendChild(ne[P].group),ne[P].group.lastChild.appendChild(ne[P].element)):je.appendChild(ne[P].element);je.scrollTop=0},A.loadLast=function(){if(A.results)var ne=A.results;else var ne=A.items;var fe=ne.length;if(fe>200){fe=fe-200,je.textContent="";for(var P=fe;P<ne.length;P++)ne[P].group?(ne[P].group.parentNode||je.appendChild(ne[P].group),ne[P].group.lastChild.appendChild(ne[P].element)):je.appendChild(ne[P].element);je.scrollTop=je.scrollHeight}},A.loadUp=function(){var ne=!1;if(A.results)var fe=A.results;else var fe=A.items;var P=je.querySelectorAll(".jdropdown-item"),G=P[0].indexValue;G=A.items[G];var ce=fe.indexOf(G)-1;if(ce>0){for(var De=0;ce>0&&fe[ce]&&De<200;)fe[ce].group?(fe[ce].group.parentNode||je.insertBefore(fe[ce].group,je.firstChild),fe[ce].group.lastChild.insertBefore(fe[ce].element,fe[ce].group.lastChild.firstChild)):je.insertBefore(fe[ce].element,je.firstChild),ce--,De++;ne=!0}return ne},A.loadDown=function(){var ne=!1;if(A.results)var fe=A.results;else var fe=A.items;var P=je.querySelectorAll(".jdropdown-item"),G=P[P.length-1].indexValue;G=A.items[G];var ce=fe.indexOf(G)+1;if(ce<fe.length){for(var De=0;ce<fe.length&&fe[ce]&&De<200;)fe[ce].group?(fe[ce].group.parentNode||je.appendChild(fe[ce].group),fe[ce].group.lastChild.appendChild(fe[ce].element)):je.appendChild(fe[ce].element),ce++,De++;ne=!0}return ne},Ot(),A};return F.keydown=function(V){var O=null;if(O=F.current){if(V.which==13||V.which==9)O.header.value&&O.currentIndex==null&&O.options.newOptions?O.add():(O.currentIndex==null&&O.options.autocomplete==!0&&O.header.value!=""&&O.find(O.header.value),O.selectIndex(O.currentIndex));else if(V.which==38)O.currentIndex==null?O.first():O.currentIndex>0&&O.prev(),V.preventDefault();else if(V.which==40)O.currentIndex==null?O.first():O.currentIndex+1<O.items.length&&O.next(),V.preventDefault();else if(V.which==36)O.first(),V.target.classList.contains("jdropdown-header")||V.preventDefault();else if(V.which==35)O.last(),V.target.classList.contains("jdropdown-header")||V.preventDefault();else if(V.which==27)O.close();else if(V.which==33){if(O.currentIndex==null)O.first();else if(O.currentIndex>0)for(var A=0;A<7;A++)O.prev();V.preventDefault()}else if(V.which==34){if(O.currentIndex==null)O.first();else if(O.currentIndex+1<O.items.length)for(var A=0;A<7;A++)O.next();V.preventDefault()}}},F.mouseup=function(V){var O=m.findElement(V.target,"jdropdown");if(O){var A=O.dropdown;if(V.target.classList.contains("jdropdown-header"))if(O.classList.contains("jdropdown-focus")&&O.classList.contains("jdropdown-default")){var J=O.getBoundingClientRect();if(V.changedTouches&&V.changedTouches[0]){var he=V.changedTouches[0].clientX;V.changedTouches[0].clientY}else{var he=V.clientX;V.clientY}J.width-(he-J.left)<30?V.target.classList.contains("jdropdown-add")?A.add():A.close():A.options.autocomplete==!1&&A.close()}else A.open();else if(V.target.classList.contains("jdropdown-group-name")){var be=V.target.nextSibling.children;if(V.target.nextSibling.style.display!="none")for(var q=0;q<be.length;q++)be[q].style.display!="none"&&A.selectItem(be[q])}else V.target.classList.contains("jdropdown-group-arrow")?V.target.classList.contains("jdropdown-group-arrow-down")?(V.target.classList.remove("jdropdown-group-arrow-down"),V.target.classList.add("jdropdown-group-arrow-up"),V.target.parentNode.nextSibling.style.display="none"):(V.target.classList.remove("jdropdown-group-arrow-up"),V.target.classList.add("jdropdown-group-arrow-down"),V.target.parentNode.nextSibling.style.display=""):V.target.classList.contains("jdropdown-item")?A.selectItem(V.target):V.target.classList.contains("jdropdown-image")||V.target.classList.contains("jdropdown-description")?A.selectItem(V.target.parentNode):V.target.classList.contains("jdropdown-title")?A.selectItem(V.target.parentNode.parentNode):(V.target.classList.contains("jdropdown-close")||V.target.classList.contains("jdropdown-backdrop"))&&A.close()}},F.extractFromDom=function(V,O){var A=V;if(O||(O={}),V.getAttribute("multiple")&&(!O||O.multiple==null)&&(O.multiple=!0),V.getAttribute("placeholder")&&(!O||O.placeholder==null)&&(O.placeholder=V.getAttribute("placeholder")),V.getAttribute("data-autocomplete")&&(!O||O.autocomplete==null)&&(O.autocomplete=!0),(!O||O.width==null)&&(O.width=V.offsetWidth),V.value&&(!O||O.value==null)&&(O.value=V.value),!O||O.data==null){O.data=[];for(var J=0;J<V.children.length;J++)if(V.children[J].tagName=="OPTGROUP")for(var he=0;he<V.children[J].children.length;he++)O.data.push({value:V.children[J].children[he].value,text:V.children[J].children[he].textContent,group:V.children[J].getAttribute("label")});else O.data.push({value:V.children[J].value,text:V.children[J].textContent})}(!O||O.onchange==null)&&(O.onchange=function(q,z,ee,Z){O.multiple==!0?obj.items[z].classList.contains("jdropdown-selected")?A.options[z].setAttribute("selected","selected"):A.options[z].removeAttribute("selected"):A.value=Z});var be=document.createElement("div");return V.parentNode.insertBefore(be,V),V.style.display="none",V=be,{el:V,options:O}},F}var Ye=Ke();function pt(F,V){if(F.picker)return F.picker.setOptions(V,!0);var O={type:"picker"};O.options={};var A=null,J=null,he=function(z){return z instanceof Element||z instanceof HTMLDocument},be=function(){J.innerHTML="";for(var z=Object.keys(O.options.data),ee=0;ee<z.length;ee++){var Z=document.createElement("div");Z.classList.add("jpicker-item"),Z.setAttribute("role","option"),Z.k=z[ee],Z.v=O.options.data[z[ee]];var ue=O.getLabel(z[ee],Z);he(ue)?Z.appendChild(ue):Z.innerHTML=ue,J.appendChild(Z)}};O.setOptions=function(z,ee){var Z={value:0,data:null,render:null,onchange:null,onmouseover:null,onselect:null,onopen:null,onclose:null,onload:null,width:null,header:!0,right:!1,bottom:!1,content:!1,columns:null,grid:null,height:null};z&&z.options&&(z.data=z.options);for(var ue in Z)z&&z.hasOwnProperty(ue)?O.options[ue]=z[ue]:(typeof O.options[ue]>"u"||ee===!0)&&(O.options[ue]=Z[ue]);return O.options.header===!1?A.style.display="none":A.style.display="",O.options.width?A.style.width=parseInt(O.options.width)+"px":A.style.width="",O.options.height?(J.style.maxHeight=O.options.height+"px",J.style.overflow="scroll"):J.style.overflow="",O.options.columns>0&&(O.options.grid?(J.classList.add("jpicker-grid"),J.style.gridTemplateColumns="repeat("+O.options.grid+", 1fr)"):(J.classList.add("jpicker-columns"),J.style.width=O.options.width?O.options.width:36*O.options.columns+"px")),isNaN(parseInt(O.options.value))&&(O.options.value=0),be(),O.setValue(O.options.value),O},O.getValue=function(){return O.options.value},O.setValue=function(z,ee){if(O.setLabel(z),O.options.value=String(z),F.value!=O.options.value&&(F.value=O.options.value,typeof F.oninput=="function"&&F.oninput({type:"input",target:F,value:F.value})),J.children[z]&&J.children[z].getAttribute("type")!=="generic"&&O.close(),ee&&typeof O.options.onchange=="function"){var Z=O.options.data[z];O.options.onchange(F,O,Z,Z,z,ee)}},O.getLabel=function(z,ee){var Z=O.options.data[z]||null;return typeof O.options.render=="function"&&(Z=O.options.render(Z,ee)),Z},O.setLabel=function(z){var ee;O.options.content?ee='<i class="material-icons">'+O.options.content+"</i>":ee=O.getLabel(z,null),he(ee)?(A.innerHTML="",A.appendChild(ee)):A.innerHTML=ee},O.open=function(){if(!F.classList.contains("jpicker-focus")){C(O,!0),F.classList.add("jpicker-focus"),F.focus();var z=0,ee=0;J.style.marginLeft="";var Z=A.getBoundingClientRect(),ue=J.getBoundingClientRect();window.innerHeight<Z.bottom+ue.height||O.options.bottom?z=-1*(ue.height+4):z=Z.height+4,O.options.right===!0&&(ee=-1*ue.width+Z.width),ue.left+ee<0&&(ee=ee+ue.left+10),ue.left+ue.width>window.innerWidth&&(ee=-1*(10+ue.left+ue.width-window.innerWidth)),J.style.marginTop=parseInt(z)+"px",J.style.marginLeft=parseInt(ee)+"px",typeof O.options.onopen=="function"&&O.options.onopen(F,O)}},O.close=function(){F.classList.contains("jpicker-focus")&&(F.classList.remove("jpicker-focus"),C(O,!1),typeof O.options.onclose=="function"&&O.options.onclose(F,O))};var q=function(){let z=m.guid();F.classList.add("jpicker"),F.setAttribute("role","combobox"),F.setAttribute("aria-haspopup","listbox"),F.setAttribute("aria-expanded","false"),F.setAttribute("aria-controls",z),F.setAttribute("tabindex","0"),F.onmousedown=function(ee){F.classList.contains("jpicker-focus")||O.open()},A=document.createElement("div"),A.classList.add("jpicker-header"),J=document.createElement("div"),J.setAttribute("id",z),J.setAttribute("role","listbox"),J.classList.add("jpicker-content"),J.onclick=function(ee){var Z=m.findElement(ee.target,"jpicker-item");Z&&Z.parentNode===J&&O.setValue(Z.k,ee)},F.appendChild(A),F.appendChild(J),F.value=V.value||0,O.setOptions(V),typeof O.options.onload=="function"&&O.options.onload(F,O),F.change=O.setValue,F.val=function(ee){if(ee===void 0)return O.getValue();O.setValue(ee)},F.picker=O};return q(),O}function ut(F,V){var O={type:"toolbar"};O.options={};var A={app:null,container:!1,badge:!1,title:!1,responsive:!1,maxWidth:null,bottom:!0,items:[]};for(var J in A)V&&V.hasOwnProperty(J)?O.options[J]=V[J]:O.options[J]=A[J];!F&&V.app&&V.app.el&&(F=document.createElement("div"),V.app.el.appendChild(F));var he=document.createElement("div");he.classList.add("jtoolbar-item"),he.classList.add("jtoolbar-arrow");var be=document.createElement("div");be.classList.add("jtoolbar-floating"),he.appendChild(be),O.selectItem=function(z){for(var ee=q.children,Z=0;Z<ee.length;Z++)z!=ee[Z]&&ee[Z].classList.remove("jtoolbar-selected");z.classList.add("jtoolbar-selected")},O.hide=function(){L.slideBottom(F,0,function(){F.style.display="none"})},O.show=function(){F.style.display="",L.slideBottom(F,1)},O.get=function(){return F},O.setBadge=function(z,ee){q.children[z].children[1].firstChild.innerHTML=ee},O.destroy=function(){toolbar.remove(),F.innerHTML=""},O.update=function(z,ee){for(var Z=0;Z<q.children.length;Z++){var ue=q.children[Z];typeof ue.updateState=="function"&&ue.updateState(F,O,ue,z,ee)}for(var Z=0;Z<be.children.length;Z++){var ue=be.children[Z];typeof ue.updateState=="function"&&ue.updateState(F,O,ue,z,ee)}},O.create=function(z){q.innerHTML="";for(var ee=0;ee<z.length;ee++){var Z=document.createElement("div");if(Z.classList.add("jtoolbar-item"),z[ee].width&&(Z.style.width=parseInt(z[ee].width)+"px"),z[ee].k&&(Z.k=z[ee].k),z[ee].tooltip&&(Z.setAttribute("title",z[ee].tooltip),Z.setAttribute("aria-label",z[ee].tooltip)),z[ee].id&&Z.setAttribute("id",z[ee].id),z[ee].updateState&&(Z.updateState=z[ee].updateState),z[ee].active&&Z.classList.add("jtoolbar-active"),z[ee].disabled&&Z.classList.add("jtoolbar-disabled"),z[ee].type=="select"||z[ee].type=="dropdown")pt(Z,z[ee]);else if(z[ee].type=="divisor")Z.classList.add("jtoolbar-divisor");else if(z[ee].type=="label")Z.classList.add("jtoolbar-label"),Z.innerHTML=z[ee].content;else{var ue=document.createElement("i");if(typeof z[ee].class>"u")ue.classList.add("material-icons");else for(var we=z[ee].class.split(" "),Ae=0;Ae<we.length;Ae++)ue.classList.add(we[Ae]);if(ue.innerHTML=z[ee].content?z[ee].content:"",Z.setAttribute("role","button"),Z.appendChild(ue),O.options.badge==!0){var je=document.createElement("div");je.classList.add("jbadge");var ze=document.createElement("div");ze.innerHTML=z[ee].badge?z[ee].badge:"",je.appendChild(ze),Z.appendChild(je)}if(z[ee].title)if(O.options.title==!0){var it=document.createElement("span");it.innerHTML=z[ee].title,Z.appendChild(it)}else Z.setAttribute("title",z[ee].title);O.options.app&&z[ee].route&&(Z.route=z[ee].route,Z.onclick=function(){O.options.app.pages(this.route)},O.options.app.pages(z[ee].route,{toolbarItem:Z,closed:!0})),typeof z[ee].render=="function"&&z[ee].render(Z,z[ee])}z[ee].onclick&&(Z.onclick=z[ee].onclick.bind(z[ee],F,O,Z)),q.appendChild(Z)}setTimeout(function(){O.refresh()},0)},O.open=function(){he.classList.add("jtoolbar-arrow-selected"),F.getBoundingClientRect();var z=be.getBoundingClientRect();z.bottom>window.innerHeight||O.options.bottom?be.style.bottom="0":be.style.removeProperty("bottom"),be.style.right="0",he.children[0].focus(),C(O,!0)},O.close=function(){he.classList.remove("jtoolbar-arrow-selected"),C(O,!1)},O.refresh=function(){if(O.options.responsive==!0){var z=F.parentNode.getBoundingClientRect();O.options.maxWidth||(O.options.maxWidth=z.width);var ee=parseInt(O.options.maxWidth);for(he.parentNode&&he.parentNode.removeChild(he);be.firstChild;)q.appendChild(be.firstChild);if(ee<q.offsetWidth)for(ee-=50;q.lastChild&&ee<q.offsetWidth;)be.insertBefore(q.lastChild,be.firstChild);be.children.length>0&&q.appendChild(he)}},O.setReadonly=function(z){z=z?"add":"remove",F.classList[z]("jtoolbar-disabled")},F.onclick=function(z){var ee=m.findElement(z.target,"jtoolbar-item");ee&&O.selectItem(ee),z.target.classList.contains("jtoolbar-arrow")&&O.open()},window.addEventListener("resize",function(){O.refresh()}),F.classList.add("jtoolbar"),F.innerHTML="",O.options.container==!0&&F.classList.add("jtoolbar-container");var q=document.createElement("div");return F.appendChild(q),O.options.app&&F.classList.add("jtoolbar-mobile"),O.create(O.options.items),F.toolbar=O,O}function It(){var F=function(V,O){var A={type:"editor"};A.options={};var J={url:null,value:"",snippet:null,toolbar:!0,toolbarOnTop:!1,remoteParser:null,placeholder:null,filterPaste:!0,dropZone:!0,dropAsSnippet:!1,acceptImages:!0,acceptFiles:!1,maxFileSize:5e6,allowImageResize:!0,maxHeight:null,height:null,focus:!1,onclick:null,onfocus:null,onblur:null,onload:null,onkeyup:null,onkeydown:null,onchange:null,extensions:null,type:null};for(var he in J)O&&O.hasOwnProperty(he)?A.options[he]=O[he]:A.options[he]=J[he];var be=null,q=null,z=[];A.el=V,typeof A.options.onclick=="function"&&(V.onclick=function(Ce){A.options.onclick(V,A,Ce)}),V.classList.add("jeditor-container");var ee=document.createElement("div");ee.className="jsnippet",ee.setAttribute("contenteditable",!1);var Z=document.createElement("div");if(Z.className="jeditor-toolbar",A.editor=document.createElement("div"),A.editor.setAttribute("contenteditable",!0),A.editor.setAttribute("spellcheck",!1),A.editor.classList.add("jeditor"),A.options.placeholder&&A.editor.setAttribute("data-placeholder",A.options.placeholder),(A.options.maxHeight||A.options.height)&&(A.editor.style.overflowY="auto",A.options.maxHeight&&(A.editor.style.maxHeight=A.options.maxHeight),A.options.height&&(A.editor.style.height=A.options.height)),A.options.url)D({url:A.options.url,dataType:"html",success:function(Ce){A.editor.innerHTML=Ce,F.setCursor(A.editor,A.options.focus=="initial")}});else if(A.options.value)A.editor.innerHTML=A.options.value;else for(var ue=0;ue<V.children.length;ue++)A.editor.appendChild(V.children[ue]);V.innerHTML="";var we=function(Ce){typeof A.options.onchange=="function"&&A.options.onchange(V,A,Ce),A.options.value=A.getData(),V.value!=A.options.value&&(V.value=A.options.value,typeof V.oninput=="function"&&V.oninput({type:"input",target:V,value:V.value}))},Ae=function(Ce){var We=document.createElement("div");We.innerHTML=Ce;var Ue=We.querySelectorAll("img");if(Ue.length)for(var Et=0;Et<Ue.length;Et++)A.addImage(Ue[Et].src)},je=function(){var Ce=null;if(Ce=ee.children[0]){Ce.classList.contains("jslider-grid")||Ce.classList.add("jslider-grid");var We=Ce.children.length;Ce.setAttribute("data-number",We>4?4:We),We>4?Ce.setAttribute("data-total",We-4):Ce.removeAttribute("data-total")}},ze=function(Ce){ee.innerHTML||A.appendSnippet({}),ee.children[0].appendChild(Ce),je()};A.appendSnippet=function(Ce){ee.innerHTML="";for(var We=["image","title","description","host","url"],Ue=0;Ue<We.length;Ue++){var Et=document.createElement("div");if(Et.className="jsnippet-"+We[Ue],Et.setAttribute("data-k",We[Ue]),ee.appendChild(Et),Ce[We[Ue]])if(We[Ue]=="image"){Array.isArray(Ce.image)||(Ce.image=[Ce.image]);for(var Pt=0;Pt<Ce.image.length;Pt++){var Ht=document.createElement("img");Ht.src=Ce.image[Pt],Et.appendChild(Ht)}}else Et.innerHTML=Ce[We[Ue]]}A.editor.appendChild(document.createElement("br")),A.editor.appendChild(ee)},A.setData=function(Ce){typeof Ce=="object"?A.editor.innerHTML=Ce.content:A.editor.innerHTML=Ce,A.options.focus&&F.setCursor(A.editor,!0),z=[]},A.getFiles=function(){for(var Ce=A.editor.querySelectorAll(".jfile"),We=[],Ue=0;Ue<Ce.length;Ue++)z[Ce[Ue].src]&&We.push(z[Ce[Ue].src]);return We},A.getText=function(){return A.editor.innerText},A.getData=function(Ce){if(Ce){var We={content:""};if(ee.innerHTML){We.snippet={};for(var Ue=0;Ue<ee.children.length;Ue++){var Et=ee.children[Ue].getAttribute("data-k");if(Et)if(Et=="image"){We.snippet.image||(We.snippet.image=[]);for(var Pt=0;Pt<ee.children[Ue].children.length;Pt++)We.snippet.image.push(ee.children[Ue].children[Pt].getAttribute("src"))}else We.snippet[Et]=ee.children[Ue].innerHTML}}var Ht=Object.keys(z);if(Ht.length){We.files=[];for(var Ue=0;Ue<Ht.length;Ue++)We.files.push(z[Ht[Ue]])}var ln=document.createElement("div");ln.innerHTML=A.editor.innerHTML;var dn=ln.querySelector(".jsnippet");dn&&dn.remove();var Vt=ln.innerHTML;Vt=Vt.replace(/<br>/g,`
`),Vt=Vt.replace(/<\/div>/g,`</div>
`),Vt=Vt.replace(/<(?:.|\n)*?>/gm,""),We.content=Vt.trim(),dt("getData",We)}else var We=A.editor.innerHTML;return We},A.reset=function(){A.editor.innerHTML="",ee.innerHTML="",z=[]},A.addPdf=function(Ce){if(Ce.result.substr(0,4)!="data")console.error("Invalid source");else{var We=document.createElement("canvas");We.width=60,We.height=60;var Ue=new Image,Et=We.getContext("2d");Et.drawImage(Ue,0,0,We.width,We.height),We.toBlob(function(Pt){var Ht=document.createElement("img");Ht.src=window.URL.createObjectURL(Pt),Ht.title=Ce.name,Ht.className="jfile pdf",z[Ht.src]={file:Ht.src,extension:"pdf",content:Ce.result},document.execCommand("insertHtml",!1,Ht.outerHTML)})}},A.addImage=function(Ce,We){if(A.options.acceptImages)if(Ce||(Ce=""),Ce.substr(0,4)!="data"&&!A.options.remoteParser)console.error("remoteParser not defined in your initialization");else{if(Ce.substr(0,4)=="data"){var Ue=Ce.split(";");Ue=Ue[0].split("/"),Ue=Ue[1]}else{var Ue=Ce.substr(Ce.lastIndexOf(".")+1);Ce=A.options.remoteParser+Ce}var Et=new Image;Et.onload=function(){var Ht=document.createElement("canvas");Ht.width=Et.width,Ht.height=Et.height;var ln=Ht.getContext("2d");ln.drawImage(Et,0,0,Ht.width,Ht.height),Ht.toBlob(function(dn){var Vt=document.createElement("img");Vt.src=window.URL.createObjectURL(dn),Vt.classList.add("jfile"),Vt.setAttribute("tabindex","900"),Vt.setAttribute("width",Et.width),Vt.setAttribute("height",Et.height),z[Vt.src]={file:Vt.src,extension:Ue,content:Ht.toDataURL()},A.options.dropAsSnippet||We?(ze(Vt),z[Vt.src].snippet=!0):document.execCommand("insertHtml",!1,Vt.outerHTML),we()})},Et.src=Ce}},A.addFile=function(Ce){for(var We=[],Ue=0;Ue<Ce.length;Ue++)if(Ce[Ue].size>A.options.maxFileSize)alert("The file is too big");else{var Et=Ce[Ue].type.split("/");Et[0]=="image"?Et=1:Et[1]=="pdf"?Et=2:Et=0,Et?(We[Ue]=new FileReader,We[Ue].index=Ue,We[Ue].type=Et,We[Ue].name=Ce[Ue].name,We[Ue].date=Ce[Ue].lastModified,We[Ue].size=Ce[Ue].size,We[Ue].addEventListener("load",function(Pt){Pt.target.type==2?A.options.acceptFiles==!0&&A.addPdf(Pt.target):A.addImage(Pt.target.result)},!1),We[Ue].readAsDataURL(Ce[Ue])):alert("The extension is not allowed")}},A.destroy=function(){A.editor.removeEventListener("mouseup",He),A.editor.removeEventListener("mousedown",lt),A.editor.removeEventListener("mousemove",qe),A.editor.removeEventListener("keyup",de),A.editor.removeEventListener("keydown",Me),A.editor.removeEventListener("dragstart",ne),A.editor.removeEventListener("dragenter",fe),A.editor.removeEventListener("dragover",P),A.editor.removeEventListener("drop",G),A.editor.removeEventListener("paste",Xe),A.editor.removeEventListener("blur",ce),A.editor.removeEventListener("focus",De),V.editor=null,V.classList.remove("jeditor-container"),Z.remove(),ee.remove(),A.editor.remove()},A.upload=function(){m.click(A.file)};const it=["html","body","address","span","div","h1","h2","h3","h4","h5","h6","p","b","i","blockquote","strong","em","ul","ol","li","a","code","pre","hr","br","img","figure","picture","figcaption","iframe","table","thead","tbody","tfoot","tr","th","td","caption","u","del","ins","sub","sup","small","mark","input","textarea","select","option","button","label","fieldset","legend","audio","video","abbr","cite","kbd","section","article","nav","aside","header","footer","main","details","summary","svg","line","source"],ct=["width","height","align","border","src","tabindex"],Nt=["color","font-weight","font-size","background","background-color","margin"],Ot=function(Ce){if(Ce.tagName&&it.indexOf(Ce.tagName.toLowerCase())===-1&&Ce.innerText&&(Ce.innerHTML=Ce.innerText),Ce.attributes&&Ce.attributes.length){let We=null,Ue=Ce.getAttribute("style");if(Ue){We=[];let Pt=Ue.split(";");for(let Ht=0;Ht<Pt.length;Ht++){let ln=Pt[Ht].trim().split(":");if(Nt.indexOf(ln[0].trim())>=0){let dn=ln.shift();ln=ln.join(":"),We.push(dn+":"+ln)}}}Ce.tagName.toUpperCase()==="IMG"&&(!A.options.acceptImages||!Ce.src?Ce.parentNode.removeChild(Ce):(Ce.setAttribute("tabindex","900"),A.addImage(Ce.src)));let Et=[];for(let Pt=0;Pt<Ce.attributes.length;Pt++)Et.push(Ce.attributes[Pt].name);Et.length&&Et.forEach(function(Pt){ct.indexOf(Pt)===-1?Ce.removeAttribute(Pt):Ce.attributes&&Ce.attributes[ue]&&Ce.attributes[ue].value.indexOf("<")!==-1&&Ce.attributes[ue].value.replace("<","&#60;")}),Ce.style="",We&&We.length&&Ce.setAttribute("style",We.join(";"))}if(Ce.children.length)for(let We=Ce.children.length;We>0;We--)Ot(Ce.children[We-1])};var ve=function(Ce){var We=window.getSelection(),Ue=document.createRange();Ue.selectNode(Ce),We.addRange(Ue)},Le=function(Ce){Ce&&(Ce=Ce.replace(new RegExp("<!--(.*?)-->","gsi"),""));var We=new DOMParser,Ue=We.parseFromString(Ce,"text/html");Ot(Ue);var Et=document.createElement("div");return Et.innerHTML=Ue.firstChild.innerHTML,Et},Xe=function(Ce){if(A.options.filterPaste==!0){if(Ce.clipboardData||Ce.originalEvent.clipboardData)var We=(Ce.originalEvent||Ce).clipboardData.getData("text/html"),Ue=(Ce.originalEvent||Ce).clipboardData.getData("text/plain"),Et=(Ce.originalEvent||Ce).clipboardData.files;else if(window.clipboardData)var We=window.clipboardData.getData("Html"),Ue=window.clipboardData.getData("Text"),Et=window.clipboardData.files;if(Et.length)A.addFile(Et);else if(!We)We=Ue.split(`\r
`),Ce.target.innerText?(We=We.map(function(Ht){return"<div>"+Ht+"</div>"}),document.execCommand("insertText",!1,We.join(""))):We.map(function(Ht){var ln=document.createElement("div");ln.innerText=Ht,A.editor.appendChild(ln)});else{var Pt=Le(We);document.execCommand("insertHtml",!1,Pt.innerHTML)}Ce.preventDefault()}},ne=function(Ce){q&&q.e&&Ce.preventDefault()},fe=function(Ce){q||A.options.dropZone==!1||(V.classList.add("jeditor-dragging"),Ce.preventDefault())},P=function(Ce){q||A.options.dropZone==!1||(be&&clearTimeout(be),be=setTimeout(function(){V.classList.remove("jeditor-dragging")},100),Ce.preventDefault())},G=function(Ce){if(!(q||A.options.dropZone==!1)){var We=null;document.caretRangeFromPoint?We=document.caretRangeFromPoint(Ce.clientX,Ce.clientY):Ce.rangeParent&&(We=document.createRange(),We.setStart(Ce.rangeParent,Ce.rangeOffset));var Ue=window.getSelection();Ue.removeAllRanges(),Ue.addRange(We),Ue.anchorNode.parentNode.focus();var Et=(Ce.originalEvent||Ce).dataTransfer.getData("text/html"),Pt=(Ce.originalEvent||Ce).dataTransfer.getData("text/plain"),Ht=(Ce.originalEvent||Ce).dataTransfer.files;Ht.length?A.addFile(Ht):Pt&&Ae(Et),V.classList.remove("jeditor-dragging"),Ce.preventDefault()}},ce=function(Ce){dt("onevent",Ce),we(Ce),typeof A.options.onblur=="function"&&A.options.onblur(V,A,Ce)},De=function(Ce){typeof A.options.onfocus=="function"&&A.options.onfocus(V,A,Ce)},de=function(Ce){A.editor.innerHTML||(A.editor.innerHTML="<div><br></div>"),typeof A.options.onkeyup=="function"&&A.options.onkeyup(V,A,Ce)},Me=function(Ce){if(dt("onevent",Ce),Ce.key=="Delete"&&Ce.target.tagName=="IMG"){var We=Ce.target.parentNode;ve(Ce.target),We.classList.contains("jsnippet-image")&&je()}typeof A.options.onkeydown=="function"&&A.options.onkeydown(V,A,Ce)},He=function(Ce){if(q&&q.e&&(q.e.classList.remove("resizing"),q.e.changed==!0)){var We=q.e.cloneNode();We.width=parseInt(q.e.style.width)||q.e.getAttribute("width"),We.height=parseInt(q.e.style.height)||q.e.getAttribute("height"),q.e.style.width="",q.e.style.height="",ve(q.e),document.execCommand("insertHtml",!1,We.outerHTML)}q=!1},lt=function(Ce){var We=function(Ht){var ln=Ht.getBoundingClientRect();ln.width-(Ce.clientX-ln.left)<40&&Ce.clientY-ln.top<40&&(Ht.innerHTML="",Ht.remove())};if(Ce.target.tagName=="IMG")if(Ce.target.style.cursor){var Ue=Ce.target.getBoundingClientRect();q={e:Ce.target,x:Ce.clientX,y:Ce.clientY,w:Ue.width,h:Ue.height,d:Ce.target.style.cursor},Ce.target.getAttribute("width")||Ce.target.setAttribute("width",Ue.width),Ce.target.getAttribute("height")||Ce.target.setAttribute("height",Ue.height);var Et=window.getSelection();if(Et.rangeCount)for(var Pt=0;Pt<Et.rangeCount;Pt++)Et.removeRange(Et.getRangeAt(Pt));Ce.target.classList.add("resizing")}else q=!0;else Ce.target.classList.contains("jsnippet")?We(Ce.target):Ce.target.parentNode.classList.contains("jsnippet")&&We(Ce.target.parentNode),q=!0},qe=function(Ce){if(Ce.target.tagName=="IMG"&&!Ce.target.parentNode.classList.contains("jsnippet-image")&&A.options.allowImageResize==!0&&Ce.target.getAttribute("tabindex")){var We=Ce.target.getBoundingClientRect();Ce.clientY-We.top<5?We.width-(Ce.clientX-We.left)<5?Ce.target.style.cursor="ne-resize":Ce.clientX-We.left<5?Ce.target.style.cursor="nw-resize":Ce.target.style.cursor="n-resize":We.height-(Ce.clientY-We.top)<5?We.width-(Ce.clientX-We.left)<5?Ce.target.style.cursor="se-resize":Ce.clientX-We.left<5?Ce.target.style.cursor="sw-resize":Ce.target.style.cursor="s-resize":We.width-(Ce.clientX-We.left)<5?Ce.target.style.cursor="e-resize":Ce.clientX-We.left<5?Ce.target.style.cursor="w-resize":Ce.target.style.cursor=""}if(Ce.which==1&&q&&q.d){if(q.d=="e-resize"||q.d=="ne-resize"||q.d=="se-resize")if(q.e.style.width=q.w+(Ce.clientX-q.x),Ce.shiftKey){var Ue=(Ce.clientX-q.x)*(q.h/q.w);q.e.style.height=q.h+Ue}else var Ue=null;Ue||(q.d=="s-resize"||q.d=="se-resize"||q.d=="sw-resize")&&(Ce.shiftKey||(q.e.style.height=q.h+(Ce.clientY-q.y))),q.e.changed=!0}},dt=function(Ce,We){if(A.options.extensions){var Ue=Object.keys(A.options.extensions);if(Ue.length)for(var Et=0;Et<Ue.length;Et++)A.options.extensions[Ue[Et]]&&typeof A.options.extensions[Ue[Et]][Ce]=="function"&&A.options.extensions[Ue[Et]][Ce].call(A,We)}},gt=function(){if(A.options.extensions){var Ce=Object.keys(A.options.extensions);if(Ce.length)for(var We=0;We<Ce.length;We++)A.options.extensions[Ce[We]]&&typeof A.options.extensions[Ce[We]]=="function"&&(A.options.extensions[Ce[We]]=A.options.extensions[Ce[We]](V,A))}};if(document.addEventListener("mouseup",He),document.addEventListener("mousemove",qe),A.editor.addEventListener("mousedown",lt),A.editor.addEventListener("keyup",de),A.editor.addEventListener("keydown",Me),A.editor.addEventListener("dragstart",ne),A.editor.addEventListener("dragenter",fe),A.editor.addEventListener("dragover",P),A.editor.addEventListener("drop",G),A.editor.addEventListener("paste",Xe),A.editor.addEventListener("focus",De),A.editor.addEventListener("blur",ce),V.appendChild(A.editor),A.options.snippet&&A.appendSnippet(A.options.snippet),A.options.toolbar){if(Array.isArray(A.options.toolbar))var Ft={container:!0,responsive:!0,items:A.options.toolbar};else if(A.options.toolbar===!0)var Ft={container:!0,responsive:!0,items:[]};else var Ft=A.options.toolbar;Ft.items&&Ft.items.length||(Ft.items=F.getDefaultToolbar(A)),A.options.toolbarOnTop?(V.classList.add("toolbar-on-top"),V.insertBefore(Z,V.firstChild)):(A.editor.style.padding="15px",V.appendChild(Z)),ut(Z,Ft),Z.addEventListener("click",function(){A.editor.focus()})}return A.file=document.createElement("input"),A.file.style.display="none",A.file.type="file",A.file.setAttribute("accept","image/*"),A.file.onchange=function(){A.addFile(this.files)},V.appendChild(A.file),A.options.focus&&F.setCursor(A.editor,A.options.focus=="initial"),V.change=A.setData,V.val=function(Ce){if(Ce===void 0){var We=V.getAttribute("data-html")!=="true";return A.getData(We)}else A.setData(Ce)},gt(),V.editor=A,typeof A.options.onload=="function"&&A.options.onload(V,A,A.editor),A};return F.setCursor=function(V,O){V.focus(),document.execCommand("selectAll");var A=window.getSelection(),J=A.getRangeAt(0);if(O==!0)var he=J.startContainer,be=0;else var he=J.endContainer,be=he.length;J.setStart(he,be),J.setEnd(he,be),A.removeAllRanges(),A.addRange(J)},F.getDefaultToolbar=function(V){var O=function(J,he,be){be.color||(Ne(be,{onchange:function(q,z){be.k==="color"?document.execCommand("foreColor",!1,z):document.execCommand("backColor",!1,z)}}),be.color.open())},A=[];return A.push({content:"undo",onclick:function(){document.execCommand("undo")}}),A.push({content:"redo",onclick:function(){document.execCommand("redo")}}),A.push({type:"divisor"}),V.options.toolbarOnTop&&(A.push({type:"select",width:"140px",options:["Default","Verdana","Arial","Courier New"],render:function(J){return'<span style="font-family:'+J+'">'+J+"</span>"},onchange:function(J,he,be,q,z){document.execCommand("fontName",!1,q)}}),A.push({type:"select",content:"format_size",options:["x-small","small","medium","large","x-large"],render:function(J){return'<span style="font-size:'+J+'">'+J+"</span>"},onchange:function(J,he,be,q,z){document.execCommand("fontSize",!1,parseInt(z)+1)}}),A.push({type:"select",options:["format_align_left","format_align_center","format_align_right","format_align_justify"],render:function(J){return'<i class="material-icons">'+J+"</i>"},onchange:function(J,he,be,q,z){var ee=["JustifyLeft","justifyCenter","justifyRight","justifyFull"];document.execCommand(ee[z])}}),A.push({type:"divisor"}),A.push({content:"format_color_text",k:"color",onclick:O}),A.push({content:"format_color_fill",k:"background-color",onclick:O})),A.push({content:"format_bold",onclick:function(J,he,be){document.execCommand("bold"),document.queryCommandState("bold")?be.classList.add("selected"):be.classList.remove("selected")}}),A.push({content:"format_italic",onclick:function(J,he,be){document.execCommand("italic"),document.queryCommandState("italic")?be.classList.add("selected"):be.classList.remove("selected")}}),A.push({content:"format_underline",onclick:function(J,he,be){document.execCommand("underline"),document.queryCommandState("underline")?be.classList.add("selected"):be.classList.remove("selected")}}),A.push({type:"divisor"}),A.push({content:"format_list_bulleted",onclick:function(J,he,be){document.execCommand("insertUnorderedList"),document.queryCommandState("insertUnorderedList")?be.classList.add("selected"):be.classList.remove("selected")}}),A.push({content:"format_list_numbered",onclick:function(J,he,be){document.execCommand("insertOrderedList"),document.queryCommandState("insertOrderedList")?be.classList.add("selected"):be.classList.remove("selected")}}),A.push({content:"format_indent_increase",onclick:function(J,he,be){document.execCommand("indent",!0,null),document.queryCommandState("indent")?be.classList.add("selected"):be.classList.remove("selected")}}),A.push({content:"format_indent_decrease",onclick:function(){document.execCommand("outdent"),document.queryCommandState("outdent")?this.classList.add("selected"):this.classList.remove("selected")}}),V.options.toolbarOnTop&&(A.push({type:"divisor"}),A.push({content:"photo",onclick:function(){V.upload()}}),A.push({type:"select",content:"table_view",columns:8,grid:8,right:!0,options:["0x0","1x0","2x0","3x0","4x0","5x0","6x0","7x0","0x1","1x1","2x1","3x1","4x1","5x1","6x1","7x1","0x2","1x2","2x2","3x2","4x2","5x2","6x2","7x2","0x3","1x3","2x3","3x3","4x3","5x3","6x3","7x3","0x4","1x4","2x4","3x4","4x4","5x4","6x4","7x4","0x5","1x5","2x5","3x5","4x5","5x5","6x5","7x5","0x6","1x6","2x6","3x6","4x6","5x6","6x6","7x6","0x7","1x7","2x7","3x7","4x7","5x7","6x7","7x7"],render:function(J,he){he&&(he.onmouseover=this.onmouseover,J=J.split("x"),he.setAttribute("data-x",J[0]),he.setAttribute("data-y",J[1]));var be=document.createElement("div");return he.style.margin="1px",he.style.border="1px solid #ddd",be},onmouseover:function(J){for(var he=parseInt(J.target.getAttribute("data-x")),be=parseInt(J.target.getAttribute("data-y")),q=0;q<J.target.parentNode.children.length;q++){var z=J.target.parentNode.children[q],ee=parseInt(z.getAttribute("data-x")),Z=parseInt(z.getAttribute("data-y"));ee<=he&&Z<=be?(z.style.backgroundColor="#cae1fc",z.style.borderColor="#2977ff"):(z.style.backgroundColor="",z.style.borderColor="#ddd")}},onchange:function(J,he,be){be=be.split("x");for(var q=document.createElement("table"),z=document.createElement("tbody"),ee=0;ee<=be[1];ee++){for(var Z=document.createElement("tr"),ue=0;ue<=be[0];ue++){var we=document.createElement("td");we.innerHTML="",Z.appendChild(we)}z.appendChild(Z)}q.appendChild(z),q.setAttribute("width","100%"),q.setAttribute("cellpadding","6"),q.setAttribute("cellspacing","0"),document.execCommand("insertHTML",!1,q.outerHTML)}})),A},F}var te=It();function ot(){var F=function(V,O){var A={};A.options={};var J={type:"big",title:"Untitled",width:510,height:472};for(var he in J)O&&O.hasOwnProperty(he)?A.options[he]=O[he]:A.options[he]=J[he];var be=function(){for(var ee=document.createElement("div");V.children[0];)ee.appendChild(V.children[0]);for(A.content=document.createElement("div"),A.content.className="jfloating_content",A.content.innerHTML=V.innerHTML;ee.children[0];)A.content.appendChild(ee.children[0]);A.container=document.createElement("div"),A.container.className="jfloating",A.container.appendChild(A.content),A.options.title?A.container.setAttribute("title",A.options.title):A.container.classList.add("no-title"),A.options.width&&(A.container.style.width=parseInt(A.options.width)+"px"),A.options.height&&(A.container.style.height=parseInt(A.options.height)+"px"),V.innerHTML="",V.appendChild(A.container)},q=function(){A.container&&A.container.addEventListener("click",function(ee){var Z=ee.target.getBoundingClientRect();if(ee.target.classList.contains("jfloating")){if(ee.changedTouches&&ee.changedTouches[0])var ue=ee.changedTouches[0].clientX,we=ee.changedTouches[0].clientY;else var ue=ee.clientX,we=ee.clientY;Z.width-(ue-Z.left)<50&&we-Z.top<50?setTimeout(function(){A.close()},100):A.setState()}})},z=function(){A.container.classList.add("jfloating-"+A.options.type)};return A.state={isMinized:!1},A.setState=function(){A.state.isMinized?A.container.classList.remove("jfloating-minimized"):A.container.classList.add("jfloating-minimized"),A.state.isMinized=!A.state.isMinized},A.close=function(){Components.elements.splice(F.elements.indexOf(A.container),1),A.updatePosition(),V.remove()},A.updatePosition=function(){for(var ee=0;ee<F.elements.length;ee++){var Z=F.elements[ee],ue=F.elements[ee-1];Z.style.right=ee*(ue?ue.offsetWidth:Z.offsetWidth)*1.01+"px"}},A.init=function(){be(),q(),z(),F.elements.push(A.container),A.updatePosition(),V.floating=A},A.init(),A};return F.elements=[],F}var St=ot();function Gt(){const F=function(q){return!isNaN(q)&&q!==null&&(typeof q!="string"||q.trim()!=="")},V={between:function(q,z){return q>=z[0]&&q<=z[1]},"not between":function(q,z){return q<z[0]||q>z[1]},"<":function(q,z){return q<z[0]},"<=":function(q,z){return q<=z[0]},">":function(q,z){return q>z[0]},">=":function(q,z){return q>=z[0]},"=":function(q,z){return q==z[0]},"!=":function(q,z){return q!=z[0]}},O={"valid date":function(){return!0},"=":function(q,z){return q===z[0]},"!=":function(q,z){return q!==z[0]},"<":function(q,z){return q<z[0]},"<=":function(q,z){return q<=z[0]},">":function(q,z){return q>z[0]},">=":function(q,z){return q>=z[0]},between:function(q,z){return q>=z[0]&&q<=z[1]},"not between":function(q,z){return q<z[0]||q>z[1]}},A={contains:function(q,z){return q.includes(z[0])},"not contains":function(q,z){return!q.includes(z[0])},"begins with":function(q,z){return q.startsWith(z[0])},"ends with":function(q,z){return q.endsWith(z[0])},"=":function(q,z){return q===z[0]},"!=":function(q,z){return q!==z[0]},"valid email":function(q){var z=new RegExp(/^[^\s@]+@[^\s@]+\.[^\s@]+$/);return z.test(q)},"valid url":function(q){var z=new RegExp(/(((https?:\/\/)|(www\.))[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|]+)/ig);return z.test(q)}},J=function(q,z){return typeof J[z.type]=="function"?z.allowBlank&&(typeof q>"u"||q===""||q===null)?!0:J[z.type].call(this,q,z):null};J.url=function(q){var z=new RegExp(/(((https?:\/\/)|(www\.))[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|]+)/ig);return!!z.test(q)},J.email=function(q){var z=new RegExp(/^[^\s@]+@[^\s@]+\.[^\s@]+$/);return!!(q&&z.test(q))},J.required=function(q){return!!(q&&q.trim())},J.empty=function(q){return typeof q>"u"||q===null||typeof q=="string"&&!q.toString().trim()},J["not exist"]=J.empty,J.notEmpty=function(q){return!J.empty(q)},J.exist=J.notEmpty,J.number=function(q,z){if(!F(q))return!1;if(!z||!z.criteria)return!0;if(!V[z.criteria])return!1;let ee=z.value.map(function(Z){return parseFloat(Z)});return V[z.criteria](q,ee)},J.login=function(q){let z=new RegExp(/^[a-zA-Z0-9._-]+$/);return!!(q&&z.test(q))},J.list=function(q,z){let ee=typeof q;if(ee!=="string"&&ee!=="number")return!1;let Z;return typeof z.value[0]=="string"?z.source?Z=z.source:Z=z.value[0].split(","):Z=z.value[0],Array.isArray(Z)?Z.findIndex(function(we){return we==q})>-1:!1};const he=function(){let q=new Date;return q.setHours(0,0,0,0),q},be={"one year ago":function(){let q=he();return q.setFullYear(q.getFullYear()-1),q},"one month ago":function(){let q=he();return q.setMonth(q.getMonth()-1),q},"one week ago":function(){let q=he();return q.setDate(q.getDate()-7),q},yesterday:function(){let q=he();return q.setDate(q.getDate()-1),q},today:he,tomorrow:function(){let q=he();return q.setDate(q.getDate()+1),q}};return J.date=function(q,z){if(F(q)&&q>0&&q<1e6&&(q=R.numToDate(q)),new Date(q)=="Invalid Date")return!1;if(!z||!z.criteria)return!0;if(!O[z.criteria])return!1;let ee=z.value.map(function(Z){return typeof Z=="string"&&be[Z]?be[Z]().getTime():new Date(Z).getTime()});return O[z.criteria](new Date(q).getTime(),ee)},J.text=function(q,z){if(typeof q>"u"||q===null)q="";else if(typeof q!="string")return!1;return!z||!z.criteria?!0:A[z.criteria]?A[z.criteria](q,z.value):!1},J.textLength=function(q,z){let ee;return typeof q=="string"?ee=q.length:typeof q<"u"&&q!==null&&typeof q.toString=="function"?ee=q.toString().length:ee=0,J.number(ee,z)},J}var _t=Gt();function Ze(){var F=function(V,O){var A={};A.options={};var J={url:null,message:"Are you sure? There are unsaved information in your form",ignore:!1,currentHash:null,submitButton:null,validations:null,onbeforeload:null,onload:null,onbeforesave:null,onsave:null,onbeforeremove:null,onremove:null,onerror:function(z,ee){alert(ee)}};for(var he in J)O&&O.hasOwnProperty(he)?A.options[he]=O[he]:A.options[he]=J[he];A.options.validations||(A.options.validations={}),A.options.submitButton||(A.options.submitButton=V.querySelector("input[type=submit]")),A.options.submitButton&&A.options.url&&(A.options.submitButton.onclick=function(){A.save()}),A.options.validations.email||(A.options.validations.email=_t.email),A.options.validations.length||(A.options.validations.length=_t.length),A.options.validations.required||(A.options.validations.required=_t.required),A.setUrl=function(z){A.options.url=z},A.load=function(){D({url:A.options.url,method:"GET",dataType:"json",queue:!0,success:function(z){if(typeof A.options.onbeforeload=="function"){var ee=A.options.onbeforeload(V,z);ee&&(z=ee)}F.setElements(V,z),typeof A.options.onload=="function"&&A.options.onload(V,z)}})},A.save=function(){var z=A.validate();if(z)A.options.onerror(V,z);else{var ee=F.getElements(V,!0);if(typeof A.options.onbeforesave=="function"){var ee=A.options.onbeforesave(V,ee);if(ee===!1)return}D({url:A.options.url,method:"POST",dataType:"json",data:ee,success:function(Z){typeof A.options.onsave=="function"&&A.options.onsave(V,ee,Z)}})}},A.remove=function(){if(typeof A.options.onbeforeremove=="function"){var z=A.options.onbeforeremove(V,A);if(z===!1)return!1}D({url:A.options.url,method:"DELETE",dataType:"json",success:function(ee){typeof A.options.onremove=="function"&&A.options.onremove(V,A,ee),A.reset()}})};var be=function(z){z.classList.add("error"),A.options.submitButton&&A.options.submitButton.setAttribute("disabled",!0);var ee=z.getAttribute("data-error")||"There is an error in the form";return z.setAttribute("title",ee),ee},q=function(z){var ee=!1;z.classList.remove("error"),z.removeAttribute("title");for(var Z=V.querySelectorAll("input, select, textarea, div[name]"),ue=0;ue<Z.length;ue++)Z[ue].getAttribute("data-validation")&&Z[ue].classList.contains("error")&&(ee=!0);A.options.submitButton&&(ee?A.options.submitButton.setAttribute("disabled",!0):A.options.submitButton.removeAttribute("disabled"))};return A.validateElement=function(z){var ee=!1,Z=F.getValue(z),ue=z.getAttribute("data-validation");return typeof A.options.validations[ue]=="function"&&!A.options.validations[ue](Z,z)?ee=be(z):z.classList.contains("error")&&q(z),ee},A.reset=function(){for(var z=V.querySelectorAll("input, select, textarea, div[name]"),ee=0;ee<z.length;ee++)z[ee].getAttribute("name")&&(z[ee].type=="checkbox"||z[ee].type=="radio"?z[ee].checked=!1:typeof z[ee].val=="function"?z[ee].val(""):z[ee].value="")},A.validate=function(){for(var z=[],ee=V.querySelectorAll("input, select, textarea, div[name]"),Z=0;Z<ee.length;Z++)if(ee[Z].getAttribute("data-validation")){var ue=A.validateElement(ee[Z]);ue&&z.push(ue)}return z.length>0?z.join("<br>"):!1},A.getError=function(){return!!A.validation()},A.setHash=function(){return A.getHash(F.getElements(V))},A.getHash=function(z){var ee=0,Z,ue;if(z.length===0)return ee;for(Z=0;Z<z.length;Z++)ue=z.charCodeAt(Z),ee=(ee<<5)-ee+ue,ee|=0;return ee},A.isChanged=function(){var z=A.setHash();return A.options.currentHash!=z},A.resetTracker=function(){A.options.currentHash=A.setHash(),A.options.ignore=!1},A.setIgnore=function(z){A.options.ignore=!!z},setTimeout(function(){A.options.currentHash=A.setHash()},1e3),V.addEventListener("keyup",function(z){z.target.getAttribute("data-validation")&&A.validateElement(z.target)}),F.hasEvents||(window.addEventListener("beforeunload",function(z){if(A.isChanged()&&A.options.ignore==!1){var ee=A.options.message?A.options.message:"o/";return ee?(typeof z>"u"&&(z=window.event),z&&(z.returnValue=ee),ee):void 0}}),F.hasEvents=!0),V.form=A,A};return F.getValue=function(V){var O=null;if(V.type=="checkbox")V.checked==!0&&(O=V.value||!0);else if(V.type=="radio")V.checked==!0&&(O=V.value);else if(V.type=="file")O=V.files;else if(V.tagName=="select"&&V.multiple==!0){O=[];for(var A=V.querySelectorAll("options[selected]"),J=0;J<A.length;J++)O.push(A[J].value)}else typeof V.val=="function"?O=V.val():O=V.value||"";return O},F.getElements=function(V,O){for(var A={},J=null,he=V.querySelectorAll("input, select, textarea, div[name]"),be=0;be<he.length;be++)(J=he[be].getAttribute("name"))&&(A[J]=F.getValue(he[be])||"");return O==!0?A:JSON.stringify(A)},F.setElements=function(V,O){for(var A=null,J=null,he=V.querySelectorAll("input, select, textarea, div[name]"),be=0;be<he.length;be++){var q=he[be].getAttribute("type");if(A=he[be].getAttribute("name")){if(A=A.replace(new RegExp(/\[(.*?)\]/ig),".$1"),J=null,A.match(/\./)){var z=S.call(O,A)||"";typeof z<"u"&&(J=z)}else typeof O[A]<"u"&&(J=O[A]);J!==null&&(q=="checkbox"||q=="radio"?he[be].checked=!!J:q=="file"||(typeof he[be].val=="function"?he[be].val(J):he[be].value=J))}}},F}var et=Ze();function ht(){var F=function(){var O=null,A=function(q){if(q.which==27)for(var z=document.querySelectorAll(".jmodal"),ee=0;ee<z.length;ee++)z[ee].parentNode.modal.close()},J=function(q){let z=q.composedPath();var ee=m.findElement(z[0],"jmodal");if(ee){var Z=ee.getBoundingClientRect();if(q.changedTouches&&q.changedTouches[0])var ue=q.changedTouches[0].clientX,we=q.changedTouches[0].clientY;else var ue=q.clientX,we=q.clientY;Z.width-(ue-Z.left)<50&&we-Z.top<50&&ee.parentNode.modal.close()}O&&(O.element.style.cursor="auto",O=null)},he=function(q){let z=q.composedPath();var ee=m.findElement(z[0],"jmodal");if(ee){var Z=ee.getBoundingClientRect();if(q.changedTouches&&q.changedTouches[0])var ue=q.changedTouches[0].clientX,we=q.changedTouches[0].clientY;else var ue=q.clientX,we=q.clientY;Z.width-(ue-Z.left)<50&&we-Z.top<50||we-Z.top<50&&(document.selection?document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges(),O={left:Z.left,top:Z.top,x:q.clientX,y:q.clientY,width:Z.width,height:Z.height,element:ee})}},be=function(q){if(O){if(q=q||window.event,q.buttons)var z=q.buttons;else if(q.button)var z=q.button;else var z=q.which;z?(O.element.style.top=O.top+(q.clientY-O.y)+O.height/2+"px",O.element.style.left=O.left+(q.clientX-O.x)+O.width/2+"px",O.element.style.cursor="move"):O.element.style.cursor="auto"}};document.addEventListener("keydown",A),document.addEventListener("mouseup",J),document.addEventListener("mousedown",he),document.addEventListener("mousemove",be)},V=function(O,A){var J={};J.options={};var he={url:null,onopen:null,onclose:null,onload:null,closed:!1,width:null,height:null,title:null,padding:null,backdrop:!0,icon:null};for(var be in he)A&&A.hasOwnProperty(be)?J.options[be]=A[be]:J.options[be]=he[be];!J.options.title&&O.getAttribute("title")&&(J.options.title=O.getAttribute("title"));for(var q=document.createElement("div");O.children[0];)q.appendChild(O.children[0]);for(J.title=document.createElement("div"),J.title.className="jmodal_title",J.options.icon&&J.title.setAttribute("data-icon",J.options.icon),J.content=document.createElement("div"),J.content.className="jmodal_content",J.content.innerHTML=O.innerHTML;q.children[0];)J.content.appendChild(q.children[0]);if(J.container=document.createElement("div"),J.container.className="jmodal",J.container.appendChild(J.title),J.container.appendChild(J.content),J.options.padding&&(J.content.style.padding=J.options.padding),J.options.width&&(J.container.style.width=J.options.width),J.options.height&&(J.container.style.height=J.options.height),J.options.title){var z=document.createElement("h4");z.innerText=J.options.title,J.title.appendChild(z)}if(O.innerHTML="",O.style.display="none",O.appendChild(J.container),J.options.backdrop){var ee=document.createElement("div");ee.className="jmodal_backdrop",ee.onclick=function(){J.close()},O.appendChild(ee)}return J.open=function(){O.style.display="block";var Z=J.container.getBoundingClientRect();m.getWindowWidth()<Z.width?(J.container.style.top="",J.container.style.left="",J.container.classList.add("jmodal_fullscreen"),L.slideBottom(J.container,1)):J.options.backdrop&&(ee.style.display="block"),typeof J.options.onopen=="function"&&J.options.onopen(O,J)},J.resetPosition=function(){J.container.style.top="",J.container.style.left=""},J.isOpen=function(){return O.style.display!="none"},J.close=function(){J.isOpen()&&(O.style.display="none",J.options.backdrop&&(ee.style.display=""),J.container.classList.remove("jmodal_fullscreen"),typeof J.options.onclose=="function"&&J.options.onclose(O,J))},J.options.url?D({url:J.options.url,method:"GET",dataType:"text/html",success:function(Z){J.content.innerHTML=Z,J.options.closed||J.open(),typeof J.options.onload=="function"&&J.options.onload(J)}}):(J.options.closed||J.open(),typeof J.options.onload=="function"&&J.options.onload(J)),O.modal=J,F(),F=function(){},J};return V}var Tt=ht();function jt(){var F=function(V){var O={};O.options={};var A={icon:null,name:"Notification",date:null,error:null,title:null,message:null,timeout:4e3,autoHide:!0,closeable:!0};for(var J in A)V&&V.hasOwnProperty(J)?O.options[J]=V[J]:O.options[J]=A[J];var he=document.createElement("div");he.className="jnotification",O.options.error&&he.classList.add("jnotification-error");var be=document.createElement("div");be.className="jnotification-container",he.appendChild(be);var q=document.createElement("div");q.className="jnotification-header",be.appendChild(q);var z=document.createElement("div");if(z.className="jnotification-image",q.appendChild(z),O.options.icon){var ee=document.createElement("img");ee.src=O.options.icon,z.appendChild(ee)}var Z=document.createElement("div");if(Z.className="jnotification-name",Z.innerHTML=O.options.name,q.appendChild(Z),O.options.closeable==!0){var ue=document.createElement("div");ue.className="jnotification-close",ue.onclick=function(){O.hide()},q.appendChild(ue)}var we=document.createElement("div");we.className="jnotification-date",q.appendChild(we);var Ae=document.createElement("div");if(Ae.className="jnotification-content",be.appendChild(Ae),O.options.title){var je=document.createElement("div");je.className="jnotification-title",je.innerHTML=O.options.title,Ae.appendChild(je)}var ze=document.createElement("div");if(ze.className="jnotification-message",ze.innerHTML=O.options.message,Ae.appendChild(ze),O.show=function(){document.body.appendChild(he),m.getWindowWidth()>800?L.fadeIn(he):L.slideTop(he,1)},O.hide=function(){m.getWindowWidth()>800?L.fadeOut(he,function(){he.parentNode&&(he.parentNode.removeChild(he),it&&clearTimeout(it))}):L.slideTop(he,0,function(){he.parentNode&&(he.parentNode.removeChild(he),it&&clearTimeout(it))})},O.show(),O.options.autoHide==!0)var it=setTimeout(function(){O.hide()},O.options.timeout);return m.getWindowWidth()<800&&he.addEventListener("swipeup",function(ct){O.hide(),ct.preventDefault(),ct.stopPropagation()}),O};return F.isVisible=function(){var V=document.querySelector(".jnotification");return!!(V&&V.parentNode)},F}var ge=jt();function Te(F,V){var O={};O.options={};var A={value:0,onchange:null,width:null};for(var J in A)V&&V.hasOwnProperty(J)?O.options[J]=V[J]:O.options[J]=A[J];F.classList.add("jprogressbar"),F.setAttribute("tabindex",1),F.setAttribute("data-value",O.options.value);var he=document.createElement("div");he.style.width=O.options.value+"%",he.style.color="#fff",F.appendChild(he),O.options.width&&(F.style.width=O.options.width),O.setValue=function(q){q=parseInt(q),O.options.value=q,he.style.width=q+"%",F.setAttribute("data-value",q+"%"),q<6?F.style.color="#000":F.style.color="#fff",O.options.value=q,typeof O.options.onchange=="function"&&O.options.onchange(F,q),F.value!=O.options.value&&(F.value=O.options.value,typeof F.oninput=="function"&&F.oninput({type:"input",target:F,value:F.value}))},O.getValue=function(){return O.options.value};var be=function(q){if(q.which){var z=F.getBoundingClientRect();if(q.changedTouches&&q.changedTouches[0]){var ee=q.changedTouches[0].clientX;q.changedTouches[0].clientY}else{var ee=q.clientX;q.clientY}O.setValue(Math.round((ee-z.left)/z.width*100))}};return"touchstart"in document.documentElement?(F.addEventListener("touchstart",be),F.addEventListener("touchend",be)):(F.addEventListener("mousedown",be),F.addEventListener("mousemove",be)),F.change=O.setValue,F.val=function(q){if(q===void 0)return O.getValue();O.setValue(q)},F.progressbar=O,O}function Ie(F,V){if(F.rating)return F.rating.setOptions(V,!0);var O={};O.options={},O.setOptions=function(J,he){var be={number:5,value:0,tooltip:["Very bad","Bad","Average","Good","Very good"],onchange:null};for(var q in be)J&&J.hasOwnProperty(q)?O.options[q]=J[q]:(typeof O.options[q]>"u"||he===!0)&&(O.options[q]=be[q]);F.innerHTML="";for(var z=0;z<O.options.number;z++){var ee=document.createElement("div");ee.setAttribute("data-index",z+1),ee.setAttribute("title",O.options.tooltip[z]),F.appendChild(ee)}if(O.options.value)for(var z=0;z<O.options.number;z++)z<O.options.value&&F.children[z].classList.add("jrating-selected");return O},O.setValue=function(J){for(var he=0;he<O.options.number;he++)he<J?F.children[he].classList.add("jrating-selected"):(F.children[he].classList.remove("jrating-over"),F.children[he].classList.remove("jrating-selected"));O.options.value=J,typeof O.options.onchange=="function"&&O.options.onchange(F,J),F.value!=O.options.value&&(F.value=O.options.value,typeof F.oninput=="function"&&F.oninput({type:"input",target:F,value:F.value}))},O.getValue=function(){return O.options.value};var A=function(){O.setOptions(V),F.classList.add("jrating"),F.addEventListener("click",function(J){var he=J.target.getAttribute("data-index");he!=null&&(he==O.options.value?O.setValue(0):O.setValue(he))}),F.addEventListener("mouseover",function(J){for(var he=J.target.getAttribute("data-index"),be=0;be<O.options.number;be++)be<he?F.children[be].classList.add("jrating-over"):F.children[be].classList.remove("jrating-over")}),F.addEventListener("mouseout",function(J){for(var he=0;he<O.options.number;he++)F.children[he].classList.remove("jrating-over")}),F.change=O.setValue,F.val=function(J){if(J===void 0)return O.getValue();O.setValue(J)},F.rating=O};return A(),O}function $e(F,V){if(F.search)return F.search;var O=null,A=function(ee){if(ee.target.classList.contains("jsearch_item"))var Z=ee.target;else var Z=ee.target.parentNode;q.selectIndex(Z),ee.preventDefault()},J=function(ee){if(typeof q.options.onsearch=="function"){var Z=q.options.onsearch(q,ee);Z&&(ee=Z)}if(z.innerHTML="",!ee.length)F.style.display="";else{F.style.display="block";for(var ue=ee.length<11?ee.length:10,we=0;we<ue;we++){if(typeof ee[we]=="string")var Ae=ee[we],je=ee[we];else{var Ae=ee[we].text;!Ae&&ee[we].name&&(Ae=ee[we].name);var je=ee[we].value;!je&&ee[we].id&&(je=ee[we].id)}var ze=document.createElement("div");ze.setAttribute("data-value",je),ze.setAttribute("data-text",Ae),ze.className="jsearch_item",ee[we].id&&ze.setAttribute("id",ee[we].id),q.options.forceSelect&&we==0&&ze.classList.add("selected");var it=document.createElement("img");ee[we].image?it.src=ee[we].image:it.style.display="none",ze.appendChild(it);var ct=document.createElement("div");ct.innerHTML=Ae,ze.appendChild(ct),z.appendChild(ze)}}},he=function(ee){if(ee!=q.terms)if(q.terms=ee,q.options.forceSelect?O=0:O=null,Array.isArray(q.options.data)){var Z=function(we){if(typeof we=="string"){if((""+we).toLowerCase().search(ee.toLowerCase())>=0)return!0}else for(var Ae in we){var je=we[Ae];if((""+je).toLowerCase().search(ee.toLowerCase())>=0)return!0}return!1},ue=q.options.data.filter(function(we){return Z(we)});J(ue)}else D({url:q.options.data+ee,method:"GET",dataType:"json",success:function(we){J(we)}})},be=null,q=function(ee){be&&clearTimeout(be),be=setTimeout(function(){he(ee)},500)};V.forceSelect===null&&(V.forceSelect=!0),q.options={data:V.data||null,input:V.input||null,searchByNode:V.searchByNode||null,onselect:V.onselect||null,forceSelect:V.forceSelect,onsearch:V.onsearch||null,onbeforesearch:V.onbeforesearch||null},q.selectIndex=function(ee){var Z=ee.getAttribute("id"),ue=ee.getAttribute("data-text"),we=ee.getAttribute("data-value"),Ae=ee.children[0].src||"";typeof q.options.onselect=="function"&&q.options.onselect(q,ue,we,Z,Ae),q.close()},q.open=function(){F.style.display="block"},q.close=function(){be&&clearTimeout(be),q.terms="",z.innerHTML="",F.style.display=""},q.isOpened=function(){return!!F.style.display},q.keydown=function(ee){q.isOpened()&&(ee.key=="Enter"?O!==null&&z.children[O]?(q.selectIndex(z.children[O]),ee.preventDefault()):q.close():ee.key==="ArrowUp"?(O!==null&&z.children[0]&&(z.children[O].classList.remove("selected"),!q.options.forceSelect&&O===0?O=null:(O=Math.max(0,O-1),z.children[O].classList.add("selected"))),ee.preventDefault()):ee.key==="ArrowDown"&&(O==null?O=-1:z.children[O].classList.remove("selected"),O<9&&z.children[O+1]&&O++,z.children[O].classList.add("selected"),ee.preventDefault()))},q.keyup=function(ee){if(!q.options.searchByNode&&q.options.input)if(q.options.input.tagName==="DIV")var Z=q.options.input.innerText;else var Z=q.options.input.value;else{var ue=m.getNode();if(ue)var Z=ue.innerText}if(typeof q.options.onbeforesearch=="function"){var we=q.options.onbeforesearch(q,Z);if(we)Z=we;else if(we===!1)return}q(Z)},q.blur=function(ee){q.close()},q.options.input&&(q.options.input.addEventListener("keyup",q.keyup),q.options.input.addEventListener("keydown",q.keydown),q.options.input.addEventListener("blur",q.blur));var z=document.createElement("div");return z.classList.add("jsearch_container"),z.onmousedown=A,F.appendChild(z),F.classList.add("jsearch"),F.search=q,q}function Be(F,V){var O={};if(O.options={},O.currentImage=null,V&&(O.options=V),F.setAttribute("tabindex","900"),O.options.items=[],!F.classList.contains("jslider")){if(F.classList.add("jslider"),F.classList.add("unselectable"),O.options.height&&(F.style.minHeight=parseInt(O.options.height)+"px"),O.options.width&&(F.style.width=parseInt(O.options.width)+"px"),O.options.grid){F.classList.add("jslider-grid");var A=F.children.length;A>4&&F.setAttribute("data-total",A-4),F.setAttribute("data-number",A>4?4:A)}var J=document.createElement("div");if(J.classList.add("jslider-counter"),F.children.length>0)for(var he=0;he<F.children.length;he++){O.options.items.push(F.children[he]);var be=document.createElement("div");be.onclick=function(){var ue=Array.prototype.slice.call(J.children).indexOf(this);O.show(O.currentImage=O.options.items[ue])},J.appendChild(be)}var q=document.createElement("div");q.className="jslider-caption";var z=document.createElement("div"),ee=document.createElement("div");ee.className="jslider-close",ee.innerHTML="",ee.onclick=function(){O.close()},z.appendChild(q),z.appendChild(ee)}O.updateCounter=function(ue){for(var we=0;we<J.children.length;we++)if(J.children[we].classList.contains("jslider-counter-focus")){J.children[we].classList.remove("jslider-counter-focus");break}J.children[ue].classList.add("jslider-counter-focus")},O.show=function(ue){if(!ue)var ue=F.children[0];F.classList.add("jslider-focus"),F.classList.remove("jslider-grid"),F.appendChild(z),F.appendChild(J);var we=O.options.items.indexOf(ue);O.updateCounter(we);for(var Ae=0;Ae<F.children.length;Ae++)F.children[Ae].style.display="";ue.style.display="block",ue.previousElementSibling?F.classList.add("jslider-left"):F.classList.remove("jslider-left"),ue.nextElementSibling&&ue.nextElementSibling.tagName=="IMG"?F.classList.add("jslider-right"):F.classList.remove("jslider-right"),O.currentImage=ue,O.currentImage.offsetHeight>O.currentImage.offsetWidth&&O.currentImage.classList.add("jslider-vertical"),z.children[0].innerText=O.currentImage.getAttribute("title")},O.open=function(){O.show(),typeof O.options.onopen=="function"&&O.options.onopen(F)},O.close=function(){F.classList.remove("jslider-focus"),F.classList.remove("jslider-left"),F.classList.remove("jslider-right"),O.options.grid&&F.classList.add("jslider-grid");for(var ue=0;ue<F.children.length;ue++)F.children[ue].style.display="";J.remove(),z.remove(),O.currentImage=null,typeof O.options.onclose=="function"&&O.options.onclose(F)},O.reset=function(){F.innerHTML=""},O.next=function(){var ue=O.currentImage.nextElementSibling;ue&&ue.tagName==="IMG"&&O.show(O.currentImage.nextElementSibling)},O.prev=function(){O.currentImage.previousElementSibling&&O.show(O.currentImage.previousElementSibling)};var Z=function(ue){if(ue.target.tagName=="IMG")O.show(ue.target);else if(!ue.target.classList.contains("jslider-close")&&!(ue.target.parentNode.classList.contains("jslider-counter")||ue.target.classList.contains("jslider-counter"))){var we=ue.offsetX||ue.changedTouches[0].clientX;ue.target.clientWidth-we<40?O.next():we<40&&O.prev()}};return"ontouchend"in document.documentElement?F.addEventListener("touchend",Z):F.addEventListener("mouseup",Z),F.addEventListener("swipeleft",function(ue){O.next(),ue.preventDefault(),ue.stopPropagation()}),F.addEventListener("swiperight",function(ue){O.prev(),ue.preventDefault(),ue.stopPropagation()}),F.addEventListener("keydown",function(ue){ue.which==27&&O.close()}),F.slider=O,O}function nt(F,V){if(F.tags)return F.tags.setOptions(V,!0);var O={type:"tags"};O.options={};var A=function(){return!!(O.options.limit&&F.children.length>=O.options.limit)},J=null,he=null;O.setOptions=function(ve,Le){var Xe={value:"",limit:null,search:null,placeholder:null,validation:null,onbeforepaste:null,onbeforechange:null,onremoveitem:null,onlimit:null,onchange:null,onfocus:null,onblur:null,onload:null};for(var ne in Xe)ve&&ve.hasOwnProperty(ne)?O.options[ne]=ve[ne]:(typeof O.options[ne]>"u"||Le===!0)&&(O.options[ne]=Xe[ne]);return O.options.placeholder?F.setAttribute("data-placeholder",O.options.placeholder):F.removeAttribute("data-placeholder"),F.placeholder=O.options.placeholder,O.setValue(O.options.value),ee(),O.options.search?he||(he=document.createElement("div"),F.parentNode.insertBefore(he,F.nextSibling),J=$e(he,{data:O.options.search,onselect:function(fe,P,G){O.selectIndex(P,G)}})):he&&(J=null,he.remove(),he=null),O},O.add=function(ve,Le){if(typeof O.options.onbeforechange=="function"){var Xe=O.options.onbeforechange(F,O,O.options.value,ve);if(Xe===!1)return!1;Xe!=null&&(ve=Xe)}if(J&&J.close(),A())typeof O.options.onlimit=="function"?O.options.onlimit(O,O.options.limit):alert(u.translate("You reach the limit number of entries")+" "+O.options.limit);else{var ne=m.getNode();if(ne&&ne.parentNode&&ne.parentNode.classList.contains("jtags")&&ne.nextSibling&&!(ne.nextSibling.innerText&&ne.nextSibling.innerText.trim()))fe=ne.nextSibling;else{if(F.lastChild&&(F.lastChild.innerText.trim()||F.removeChild(F.lastChild)),!ve||typeof ve=="string")var fe=q(ve,ve,ne);else for(var P=0;P<=ve.length;P++)if(!A()){if(!ve[P]||typeof ve[P]=="string")var G=ve[P]||"",ce=null;else var G=ve[P].text,ce=ve[P].value;var fe=q(G,ce)}z()}Le&&be(fe)}},O.setLimit=function(ve){for(O.options.limit=ve,F.children.length-ve;F.children.length>ve;)F.removeChild(F.lastChild)},O.remove=function(ve){ve.parentNode.removeChild(ve),F.children.length?z():O.add("",!0),typeof O.options.onremoveitem=="function"&&O.options.onremoveitem(F,O,ve)},O.getData=function(){for(var ve=[],Le=0;Le<F.children.length;Le++){var Xe=F.children[Le].innerText.replace(`
`,""),ne=F.children[Le].getAttribute("data-value");ne||(ne=Xe),(Xe||ne)&&ve.push({text:Xe,value:ne})}return ve},O.getValue=function(ve){var Le=null;if(ve!=null)Le=F.children[ve].getAttribute("data-value"),Le||(Le=F.children[ve].innerText.replace(`
`,""));else{for(var Xe=[],ne=0;ne<F.children.length;ne++)Le=F.children[ne].innerText.replace(`
`,""),Le&&Xe.push(O.getValue(ne));Le=Xe.join(",")}return Le},O.setValue=function(ve){if(!ve)O.reset();else if(F.value!=ve)if(Array.isArray(ve))O.add(ve);else{var Le=(""+ve).trim(),Xe=ue(Le);F.innerHTML="",O.add(Xe)}},O.reset=function(){F.classList.add("jtags-empty"),F.innerHTML="<div></div>",z()},O.isValid=function(){for(var ve=0,Le=0;Le<F.children.length;Le++)F.children[Le].classList.contains("jtags_error")&&ve++;return ve==0},O.selectIndex=function(ve,Le){var Xe=m.getNode();Xe&&(Xe.innerText=ve,Le&&Xe.setAttribute("data-value",Le),Xe.classList.remove("jtags_error"),A()||O.add("",!0))},O.search=function(ve){ve.innerText},O.destroy=function(){F.removeEventListener("mouseup",it),F.removeEventListener("keydown",Ae),F.removeEventListener("keyup",je),F.removeEventListener("paste",ze),F.removeEventListener("focus",ct),F.removeEventListener("blur",Nt),F.parentNode.removeChild(F)};var be=function(ve){if(F.children.length){var Le=document.createRange(),Xe=window.getSelection();if(!ve)var ve=F.childNodes[F.childNodes.length-1];Le.setStart(ve,ve.length),Le.collapse(!0),Xe.removeAllRanges(),Xe.addRange(Le),F.scrollLeft=F.scrollWidth}},q=function(ve,Le,Xe){var ne=document.createElement("div");return ne.textContent=ve||"",Le&&ne.setAttribute("data-value",Le),Xe&&Xe.parentNode.classList.contains("jtags")?F.insertBefore(ne,Xe.nextSibling):F.appendChild(ne),ne},z=function(){var ve=O.getValue();ve!=O.options.value&&(O.options.value=ve,typeof O.options.onchange=="function"&&O.options.onchange(F,O,O.options.value),F.value!=O.options.value&&(F.value=O.options.value,typeof F.oninput=="function"&&F.oninput({type:"input",target:F,value:F.value}))),ee()},ee=function(){for(var ve=0;ve<F.children.length;ve++)F.children[ve].tagName==="DIV"&&(O.getValue(ve)?(F.children[ve].classList.add("jtags_label"),typeof O.options.validation=="function"&&O.getValue(ve)?O.options.validation(F.children[ve],F.children[ve].innerText,F.children[ve].getAttribute("data-value"))?F.children[ve].classList.remove("jtags_error"):F.children[ve].classList.add("jtags_error"):F.children[ve].classList.remove("jtags_error")):F.children[ve].classList.remove("jtags_label"));Z()},Z=function(){F.innerText.trim()?F.classList.remove("jtags-empty"):(!F.children.length||F.children[0].tagName==="BR")&&(F.innerHTML="",be(q()))},ue=function(ve){var Le=[],Xe="";if(ve=ve.trim(),ve){for(var ne=0;ne<ve.length;ne++)ve[ne]==","||ve[ne]==";"||ve[ne]==`
`?Xe&&(Le.push(Xe.trim()),Xe=""):Xe+=ve[ne];Xe&&Le.push(Xe)}return Le},we=0,Ae=function(ve){if(we=window.getSelection().anchorOffset,Z(),ve.key==="Tab"||ve.key===";"||ve.key===","){var Le=window.getSelection().anchorOffset;Le>1&&(A()?typeof O.options.onlimit=="function"&&O.options.onlimit(O,O.options.limit):O.add("",!0)),ve.preventDefault()}else if(ve.key=="Enter"){if(!J||!J.isOpened()){var Le=window.getSelection().anchorOffset;Le>1&&(A()||O.add("",!0)),ve.preventDefault()}}else ve.key=="Backspace"&&F.children.length==1&&window.getSelection().anchorOffset<1&&ve.preventDefault();J&&J.keydown(ve),Z()},je=function(ve){if(ve.which==39){var Le=window.getSelection().anchorOffset;Le>1&&Le==we&&O.add("",!0)}else ve.which==13||ve.which==38||ve.which==40?ve.preventDefault():J&&J.keyup(ve);ee()},ze=function(ve){if(ve.clipboardData||ve.originalEvent.clipboardData)var Le=(ve.originalEvent||ve).clipboardData.getData("text/plain");else if(window.clipboardData)var Le=window.clipboardData.getData("Text");var Xe=ue(Le);if(typeof O.options.onbeforepaste=="function"){var ne=O.options.onbeforepaste(F,O,Xe);if(ne===!1)return ve.preventDefault(),!1;ne&&(Xe=ne)}Xe.length>1?(O.add(Xe,!0),ve.preventDefault()):Xe[0]&&(document.execCommand("insertText",!1,Xe[0]),ve.preventDefault())},it=function(ve){if(ve.target.parentNode&&ve.target.parentNode.classList.contains("jtags")&&(ve.target.classList.contains("jtags_label")||ve.target.classList.contains("jtags_error"))){var Le=ve.target.getBoundingClientRect();Le.width-(ve.clientX-Le.left)<16&&O.remove(ve.target)}ve.target==F&&be()},ct=function(){F.classList.contains("jtags-focus")||((!F.children.length||O.getValue(F.children.length-1))&&(A()||q("")),typeof O.options.onfocus=="function"&&O.options.onfocus(F,O,O.getValue()),F.classList.add("jtags-focus"))},Nt=function(){if(F.classList.contains("jtags-focus")){J&&J.close();for(var ve=0;ve<F.children.length-1;ve++)O.getValue(ve)||F.removeChild(F.children[ve]);z(),F.classList.remove("jtags-focus"),typeof O.options.onblur=="function"&&O.options.onblur(F,O,O.getValue())}},Ot=function(){"touchend"in document.documentElement?F.addEventListener("touchend",it):F.addEventListener("mouseup",it),F.addEventListener("keydown",Ae),F.addEventListener("keyup",je),F.addEventListener("paste",ze),F.addEventListener("focus",ct),F.addEventListener("blur",Nt),F.setAttribute("contenteditable",!0),F.classList.add("jtags"),O.setOptions(V),typeof O.options.onload=="function"&&O.options.onload(F,O),F.change=O.setValue,F.val=function(ve){if(ve===void 0)return O.getValue();O.setValue(ve)},F.tags=O};return Ot(),O}function ft(F,V){var O={};O.options={};var A={type:"image",extension:"*",input:!1,minWidth:!1,maxWidth:null,maxHeight:null,maxJpegSizeBytes:null,onchange:null,multiple:!1,remoteParser:null};for(var J in A)V&&V.hasOwnProperty(J)?O.options[J]=V[J]:O.options[J]=A[J];O.options.multiple==!0&&F.setAttribute("data-multiple",!0),F.content=[],F.classList.add("jupload"),O.options.input==!0&&F.classList.add("input"),O.add=function(z){if(O.options.multiple==!1&&(F.content=[],F.innerText=""),O.options.type=="image"){var ee=document.createElement("img");ee.setAttribute("src",z.file),ee.setAttribute("tabindex",-1),F.getAttribute("name")||(ee.className="jfile",ee.content=z),F.appendChild(ee)}else{if(z.name)var Z=z.name;else var Z=z.file;var ue=document.createElement("div");ue.innerText=Z||O.options.type,ue.classList.add("jupload-item"),ue.setAttribute("tabindex",-1),F.appendChild(ue)}z.content&&(z.file=m.guid()),F.content.push(z),typeof O.options.onchange=="function"&&O.options.onchange(F,z)},O.addFromFile=function(z){var ee=z.type.split("/");if(ee[0]==O.options.type){var Z=new FileReader;Z.addEventListener("load",function(ue){var we={file:ue.srcElement.result,extension:z.name.substr(z.name.lastIndexOf(".")+1),name:z.name,size:z.size,lastmodified:z.lastModified,content:ue.srcElement.result};O.add(we)}),Z.readAsDataURL(z)}else alert(u.translate("This extension is not allowed"))},O.addFromUrl=function(z){if(z.substr(0,4)!="data"&&!O.options.remoteParser)console.error("remoteParser not defined in your initialization");else if(z.substr(0,4)=="data"){var ee=z.split(";");ee=ee[0].split("/");var Z=ee[0].replace("data:","");if(Z==O.options.type){var ue={file:z,name:"",extension:ee[1],content:z};O.add(ue)}else alert(O.options.text.extensionNotAllowed)}else{var ee=z.substr(z.lastIndexOf(".")+1);z=O.options.remoteParser+z,D({url:z,type:"GET",dataType:"blob",success:function(Ae){}})}};var he=O.options.type+"/"+O.options.extension,be=document.createElement("input");be.type="file",be.setAttribute("accept",he),be.onchange=function(){for(var z=0;z<this.files.length;z++)O.addFromFile(this.files[z])},O.options.multiple==!0&&be.setAttribute("multiple",!0);var q=null;return F.addEventListener("click",function(z){q=null,!F.children.length||z.target===F?m.click(be):z.target.parentNode==F&&(q=z.target)}),F.addEventListener("dblclick",function(z){m.click(be)}),F.addEventListener("dragenter",function(z){F.style.border="1px dashed #000"}),F.addEventListener("dragleave",function(z){F.style.border="1px solid #eee"}),F.addEventListener("dragstop",function(z){F.style.border="1px solid #eee"}),F.addEventListener("dragover",function(z){z.preventDefault()}),F.addEventListener("keydown",function(z){if(q&&z.which==46){var ee=Array.prototype.indexOf.call(F.children,q);ee>=0&&(F.content.splice(ee,1),q.remove(),q=null)}}),F.addEventListener("drop",function(z){z.preventDefault(),z.stopPropagation();var ee=(z.originalEvent||z).dataTransfer.getData("text/html"),Z=(z.originalEvent||z).dataTransfer.files;if(Z.length)for(var ue=0;ue<z.dataTransfer.files.length;ue++)O.addFromFile(z.dataTransfer.files[ue]);else if(ee){O.options.multiple==!1&&(F.innerText="");var we=document.createElement("div");we.innerHTML=ee;var Ae=we.querySelectorAll("img");if(Ae.length)for(var ue=0;ue<Ae.length;ue++)O.addFromUrl(Ae[ue].src)}return F.style.border="1px solid #eee",!1}),F.val=function(z){if(z===void 0)return F.content&&F.content.length?F.content:null;if(F.innerText="",F.content=[],z)if(Array.isArray(z))for(var ee=0;ee<z.length;ee++)typeof z[ee]=="string"?O.add({file:z[ee]}):O.add(z[ee]);else typeof z=="string"&&O.add({file:z})},F.upload=F.image=O,O}var st=s(195),at=s.n(st),Fe={...u,...m,version:"5.9.2",setExtensions:function(F){if(typeof F=="object")for(var V=Object.keys(F),O=0;O<V.length;O++)Fe[V[O]]=F[V[O]]},tracking:C,path:S,sorting:T,lazyLoading:w,ajax:D,animation:L,calendar:se,color:Ne,contextmenu:me,dropdown:Ye,editor:te,floating:St,form:et,mask:Y,modal:Tt,notification:ge,palette:le,picker:pt,progressbar:Te,rating:Ie,search:$e,slider:Be,tabs:Ee,tags:nt,toolbar:ut,upload:ft,validations:_t};Fe.image=ft,Fe.image.create=function(F){var V=document.createElement("img");return V.setAttribute("src",F.file),V.className="jfile",V.setAttribute("tabindex",-1),V.content=F,V},Fe.tracker=et,Fe.loading=L.loading,Fe.sha512=at(),typeof document<"u"&&function(){if(typeof window.jSuitesStateControl>"u")window.jSuitesStateControl=[];else return;const F=function(ve,Le){return ve[Le.type]&&ve[Le.type]==Le||ve.component&&ve.component==Le?!0:ve.parentNode?F(ve.parentNode,Le):!1},V=function(ve){let Le=window.jSuitesStateControl;if(Le&&Le.length>0)for(let Xe=0;Xe<Le.length;Xe++)Le[Xe]&&!F(ve,Le[Xe])&&Le[Xe].close()};let O=15,A=!1,J={x:null,y:null},he=document.createElement("div");he.classList.add("jtooltip");const be=function(ve){return ve&&(ve.shadowRoot||ve.tagName&&ve.tagName.includes("-"))},q=function(ve){let Le,Xe,ne=ve.path||ve.composedPath&&ve.composedPath();return ne?(Xe=ne[0],Xe&&be(Xe)&&!Xe.shadowRoot&&ve.toElement&&(Xe=ve.toElement)):(ve.target&&be(ve.target)?Le=ve.target.shadowRoot:Le=document,Xe=Le.elementFromPoint(x,y)),Xe},z=function(ve){if(ve.changedTouches&&ve.changedTouches[0])var Le=ve.changedTouches[0].clientX,Xe=ve.changedTouches[0].clientY;else var Le=ve.clientX,Xe=ve.clientY;let ne=q(ve),fe=ne&&ne.tagName==="DIV"&&ne.getAttribute("contentEditable"),P=Fe.findElement(ne,"jpanel");if(P&&!P.classList.contains("readonly")&&!fe){let G=P.getBoundingClientRect(),ce=0;P.style.rotate&&(ce=parseFloat(P.style.rotate));let De="move";ne.getAttribute("data-action")?De=ne.getAttribute("data-action"):P.style.cursor?De="resize":P.style.cursor="move",A={action:De,a:ce,e:P,x:Le,y:Xe,l:G.left,t:G.top,b:G.bottom,r:G.right,w:G.width,h:G.height,d:P.style.cursor,actioned:!1},P.style.width||(P.style.width=G.width+"px"),P.style.height||(P.style.height=G.height+"px")}else A=!1;V(ne),je(ve)},ee=function(ve,Le,Xe,ne,fe,P){const G=Xe-ve,ce=ne-Le,De=fe-ve,de=P-Le;let Me=Math.atan2(ce,G),lt=Math.atan2(de,De)-Me;return lt=lt*(180/Math.PI),lt<0&&(lt+=360),lt},Z=function(ve){A&&A.e&&(typeof A.e.refresh=="function"&&J.actioned&&A.e.refresh(),A.e.style.cursor=""),J={x:null,y:null},A=!1},ue=function(ve){if(A){let P=ve.clientX||ve.pageX,G=ve.clientY||ve.pageY;if(J.x==null&&J.y==null&&(J.x=P,J.y=G),A.action==="move"){var Le=P-J.x,Xe=G-J.y,ne=A.e.offsetTop+Xe,fe=A.e.offsetLeft+Le;A.e.style.top=ne+"px",A.e.style.left=fe+"px",typeof A.e.refresh=="function"&&(J.actioned=!0,A.e.refresh("position",ne,fe))}else if(A.action==="rotate"){let ce=A.l+A.w/2,De=A.t+A.h/2,de=ee(ce,De,A.x,A.y,P,G);de=de+A.a%360,de=Math.round(de/2)*2,A.e.style.rotate=`${de}deg`,typeof A.e.refresh=="function"&&(J.actioned=!0,A.e.refresh("rotate",de))}else if(A.action==="resize"){let ce=null,De=null,de=null,Me=null;A.d=="e-resize"||A.d=="ne-resize"||A.d=="se-resize"?(de=A.e.offsetWidth+(P-J.x),ve.shiftKey&&(Me=A.e.offsetHeight+(P-J.x)*(A.e.offsetHeight/A.e.offsetWidth))):(A.d==="w-resize"||A.d=="nw-resize"||A.d=="sw-resize")&&(De=A.e.offsetLeft+(P-J.x),de=A.e.offsetLeft+A.e.offsetWidth-De,ve.shiftKey&&(Me=A.e.offsetHeight-(P-J.x)*(A.e.offsetHeight/A.e.offsetWidth))),A.d=="s-resize"||A.d=="se-resize"||A.d=="sw-resize"?Me||(Me=A.e.offsetHeight+(G-J.y)):(A.d==="n-resize"||A.d=="ne-resize"||A.d=="nw-resize")&&(ce=A.e.offsetTop+(G-J.y),Me=A.e.offsetTop+A.e.offsetHeight-ce),ce&&(A.e.style.top=ce+"px"),De&&(A.e.style.left=De+"px"),de&&(A.e.style.width=de+"px"),Me&&(A.e.style.height=Me+"px"),typeof A.e.refresh=="function"&&(J.actioned=!0,A.e.refresh("dimensions",de,Me))}J.x=P,J.y=G}else{let P=q(ve),G=Fe.findElement(P,"jpanel");if(G){if(G.classList.contains("jpanel-controls")){let De=P.getAttribute("data-position");De?G.style.cursor=De:G.style.cursor=""}else if(G.getAttribute("tabindex")){let De=G.getBoundingClientRect();ve.clientY-De.top<O?De.width-(ve.clientX-De.left)<O?G.style.cursor="ne-resize":ve.clientX-De.left<O?G.style.cursor="nw-resize":G.style.cursor="n-resize":De.height-(ve.clientY-De.top)<O?De.width-(ve.clientX-De.left)<O?G.style.cursor="se-resize":ve.clientX-De.left<O?G.style.cursor="sw-resize":G.style.cursor="s-resize":De.width-(ve.clientX-De.left)<O?G.style.cursor="e-resize":ve.clientX-De.left<O?G.style.cursor="w-resize":G.style.cursor=""}}}};let we=["n","ne","e","se","s","sw","w","nw","rotate"];we.forEach(function(ve,Le){we[Le]=document.createElement("div"),we[Le].classList.add("jpanel-action"),ve==="rotate"?we[Le].setAttribute("data-action","rotate"):(we[Le].setAttribute("data-action","resize"),we[Le].setAttribute("data-position",ve+"-resize"))});let Ae;const je=function(ve){let Le=q(ve),Xe=Fe.findElement(Le,"jpanel");Xe&&!Xe.classList.contains("readonly")&&Xe.classList.contains("jpanel-controls")?(Xe.append(...we),Xe.classList.contains("jpanel-rotate")||we[we.length-1].remove(),Ae=Xe):ze()},ze=function(ve){Ae&&(we.forEach(function(Le){Le.remove()}),Ae=null)},it=function(ve){var Xe=q(ve).getAttribute("data-tooltip");if(Xe){if(he.innerText=Xe,ve.changedTouches&&ve.changedTouches[0])var ne=ve.changedTouches[0].clientX,fe=ve.changedTouches[0].clientY;else var ne=ve.clientX,fe=ve.clientY;he.style.top=fe+"px",he.style.left=ne+"px",document.body.appendChild(he)}else he.innerText&&(he.innerText="",document.body.removeChild(he))},ct=function(ve){var Le=document.activeElement;if(Le&&typeof Le.contextmenu=="function")Le.contextmenu(ve),ve.preventDefault(),ve.stopImmediatePropagation();else if(Le=Fe.findElement(ve.target,function(ne){return ne.tagName&&ne.getAttribute("aria-contextmenu-id")}),Le){var Xe=document.querySelector("#"+Le);Xe?(Xe.contextmenu.open(ve),ve.preventDefault(),ve.stopImmediatePropagation()):console.error("JSUITES: contextmenu id not found: "+Le)}},Nt=function(ve){let Le=document.activeElement;Le&&ve.key==="Delete"&&typeof Le.delete=="function"&&(Le.delete(),ve.preventDefault(),ve.stopImmediatePropagation());let Xe=window.jSuitesStateControl;Xe&&Xe.length>0&&(Le=Xe[Xe.length-1],Le&&ve.key==="Escape"&&typeof Le.isOpened=="function"&&typeof Le.close=="function"&&Le.isOpened()&&(Le.close(),ve.preventDefault(),ve.stopImmediatePropagation()))},Ot=function(ve){(ve.target.getAttribute("data-mask")||ve.target.mask)&&Fe.mask(ve)};document.addEventListener("focusin",je),document.addEventListener("mouseup",Z),document.addEventListener("mousedown",z),document.addEventListener("mousemove",ue),document.addEventListener("mouseover",it),document.addEventListener("keydown",Nt),document.addEventListener("contextmenu",ct),document.addEventListener("input",Ot)}();var mt=Fe})(),n=a.default}(),n})}(jsuites)),jsuitesExports}(function(module,exports){if(!jSuites&&typeof commonjsRequire=="function")var jSuites=requireJsuites();(function(t,e){module.exports=e()})(commonjsGlobal,function(){var jspreadsheet;return function(){var __webpack_modules__={463:function(t){var e;t.exports=(function(){var n={765:function(a,l){var c;c=function(u){u.version="1.0.2";var g=Math;function C(_e,me){for(var Ke=0,Ye=0;Ke<_e.length;++Ke)Ye=me*Ye+_e[Ke];return Ye}function v(_e,me,Ke,Ye,pt){if(me===0)return Ke;if(me===1)return Ye;for(var ut=2/_e,It=Ye,te=1;te<me;++te)It=Ye*te*ut+pt*Ke,Ke=Ye,Ye=It;return It}function m(_e,me,Ke,Ye,pt){return function(ut,It){if(Ye){if(ut===0)return Ye==1?-1/0:1/0;if(ut<0)return NaN}return It===0?_e(ut):It===1?me(ut):It<0?NaN:v(ut,It|=0,_e(ut),me(ut),pt)}}var S,T,w,N,D,k,L,H,R,B,Y,K,se,pe=function(){var _e=.636619772,me=[57568490574,-13362590354,6516196407e-1,-1121442418e-2,77392.33017,-184.9052456].reverse(),Ke=[57568490411,1029532985,9494680718e-3,59272.64853,267.8532712,1].reverse(),Ye=[1,-.001098628627,2734510407e-14,-2073370639e-15,2093887211e-16].reverse(),pt=[-.01562499995,.0001430488765,-6911147651e-15,7621095161e-16,-934935152e-16].reverse();function ut(_t){var Ze=0,et=0,ht=0,Tt=_t*_t;if(_t<8)Ze=(et=C(me,Tt))/(ht=C(Ke,Tt));else{var jt=_t-.785398164;et=C(Ye,Tt=64/Tt),ht=C(pt,Tt),Ze=g.sqrt(_e/_t)*(g.cos(jt)*et-g.sin(jt)*ht*8/_t)}return Ze}var It=[72362614232,-7895059235,2423968531e-1,-2972611439e-3,15704.4826,-30.16036606].reverse(),te=[144725228442,2300535178,1858330474e-2,99447.43394,376.9991397,1].reverse(),ot=[1,.00183105,-3516396496e-14,2457520174e-15,-240337019e-15].reverse(),St=[.04687499995,-.0002002690873,8449199096e-15,-88228987e-14,105787412e-15].reverse();function Gt(_t){var Ze=0,et=0,ht=0,Tt=_t*_t,jt=g.abs(_t)-2.356194491;return Math.abs(_t)<8?Ze=(et=_t*C(It,Tt))/(ht=C(te,Tt)):(et=C(ot,Tt=64/Tt),ht=C(St,Tt),Ze=g.sqrt(_e/g.abs(_t))*(g.cos(jt)*et-g.sin(jt)*ht*8/g.abs(_t)),_t<0&&(Ze=-Ze)),Ze}return function _t(Ze,et){if(et=Math.round(et),!isFinite(Ze))return isNaN(Ze)?Ze:0;if(et<0)return(et%2?-1:1)*_t(Ze,-et);if(Ze<0)return(et%2?-1:1)*_t(-Ze,et);if(et===0)return ut(Ze);if(et===1)return Gt(Ze);if(Ze===0)return 0;var ht=0;if(Ze>et)ht=v(Ze,et,ut(Ze),Gt(Ze),-1);else{for(var Tt=!1,jt=0,ge=0,Te=1,Ie=0,$e=2/Ze,Be=2*g.floor((et+g.floor(g.sqrt(40*et)))/2);Be>0;Be--)Ie=Be*$e*Te-jt,jt=Te,Te=Ie,g.abs(Te)>1e10&&(Te*=1e-10,jt*=1e-10,ht*=1e-10,ge*=1e-10),Tt&&(ge+=Te),Tt=!Tt,Be==et&&(ht=jt);ht/=ge=2*ge-Te}return ht}}(),le=(S=.636619772,T=[-2957821389,7062834065,-5123598036e-1,1087988129e-2,-86327.92757,228.4622733].reverse(),w=[40076544269,7452499648e-1,7189466438e-3,47447.2647,226.1030244,1].reverse(),N=[1,-.001098628627,2734510407e-14,-2073370639e-15,2093887211e-16].reverse(),D=[-.01562499995,.0001430488765,-6911147651e-15,7621095161e-16,-934945152e-16].reverse(),k=[-4900604943e3,127527439e4,-51534381390,7349264551e-1,-4237922726e-3,8511.937935].reverse(),L=[249958057e5,424441966400,3733650367,2245904002e-2,102042.605,354.9632885,1].reverse(),H=[1,.00183105,-3516396496e-14,2457520174e-15,-240337019e-15].reverse(),R=[.04687499995,-.0002002690873,8449199096e-15,-88228987e-14,105787412e-15].reverse(),m(function(_e){var me=0,Ke=0,Ye=0,pt=_e*_e,ut=_e-.785398164;return _e<8?me=(Ke=C(T,pt))/(Ye=C(w,pt))+S*pe(_e,0)*g.log(_e):(Ke=C(N,pt=64/pt),Ye=C(D,pt),me=g.sqrt(S/_e)*(g.sin(ut)*Ke+g.cos(ut)*Ye*8/_e)),me},function(_e){var me=0,Ke=0,Ye=0,pt=_e*_e,ut=_e-2.356194491;return _e<8?me=(Ke=_e*C(k,pt))/(Ye=C(L,pt))+S*(pe(_e,1)*g.log(_e)-1/_e):(Ke=C(H,pt=64/pt),Ye=C(R,pt),me=g.sqrt(S/_e)*(g.sin(ut)*Ke+g.cos(ut)*Ye*8/_e)),me},0,1,-1)),Ee=(B=[1,3.5156229,3.0899424,1.2067492,.2659732,.0360768,.0045813].reverse(),Y=[.39894228,.01328592,.00225319,-.00157565,.00916281,-.02057706,.02635537,-.01647633,.00392377].reverse(),K=[.5,.87890594,.51498869,.15084934,.02658733,.00301532,32411e-8].reverse(),se=[.39894228,-.03988024,-.00362018,.00163801,-.01031555,.02282967,-.02895312,.01787654,-.00420059].reverse(),function _e(me,Ke){if((Ke=Math.round(Ke))===0)return function(St){return St<=3.75?C(B,St*St/14.0625):g.exp(g.abs(St))/g.sqrt(g.abs(St))*C(Y,3.75/g.abs(St))}(me);if(Ke===1)return function(St){return St<3.75?St*C(K,St*St/14.0625):(St<0?-1:1)*g.exp(g.abs(St))/g.sqrt(g.abs(St))*C(se,3.75/g.abs(St))}(me);if(Ke<0)return NaN;if(g.abs(me)===0)return 0;if(me==1/0)return 1/0;var Ye,pt=0,ut=2/g.abs(me),It=0,te=1,ot=0;for(Ye=2*g.round((Ke+g.round(g.sqrt(40*Ke)))/2);Ye>0;Ye--)ot=Ye*ut*te+It,It=te,te=ot,g.abs(te)>1e10&&(te*=1e-10,It*=1e-10,pt*=1e-10),Ye==Ke&&(pt=It);return pt*=_e(me,0)/te,me<0&&Ke%2?-pt:pt}),Ne=function(){var _e=[-.57721566,.4227842,.23069756,.0348859,.00262698,1075e-7,74e-7].reverse(),me=[1.25331414,-.07832358,.02189568,-.01062446,.00587872,-.0025154,53208e-8].reverse(),Ke=[1,.15443144,-.67278579,-.18156897,-.01919402,-.00110404,-4686e-8].reverse(),Ye=[1.25331414,.23498619,-.0365562,.01504268,-.00780353,.00325614,-68245e-8].reverse();return m(function(pt){return pt<=2?-g.log(pt/2)*Ee(pt,0)+C(_e,pt*pt/4):g.exp(-pt)/g.sqrt(pt)*C(me,2/pt)},function(pt){return pt<=2?g.log(pt/2)*Ee(pt,1)+1/pt*C(Ke,pt*pt/4):g.exp(-pt)/g.sqrt(pt)*C(Ye,2/pt)},0,2,1)}();u.besselj=pe,u.bessely=le,u.besseli=Ee,u.besselk=Ne},c(typeof DO_NOT_EXPORT_BESSEL>"u"?l:{})},162:function(a){var l;a.exports=(l=function(c,u){var g=Array.prototype.concat,C=Array.prototype.slice,v=Object.prototype.toString;function m(R,B){var Y=R>B?R:B;return c.pow(10,17-~~(c.log(Y>0?Y:-Y)*c.LOG10E))}var S=Array.isArray||function(R){return v.call(R)==="[object Array]"};function T(R){return v.call(R)==="[object Function]"}function w(R){return typeof R=="number"&&R-R==0}function N(){return new N._init(arguments)}function D(){return 0}function k(){return 1}function L(R,B){return R===B?1:0}N.fn=N.prototype,N._init=function(R){if(S(R[0]))if(S(R[0][0])){T(R[1])&&(R[0]=N.map(R[0],R[1]));for(var B=0;B<R[0].length;B++)this[B]=R[0][B];this.length=R[0].length}else this[0]=T(R[1])?N.map(R[0],R[1]):R[0],this.length=1;else if(w(R[0]))this[0]=N.seq.apply(null,R),this.length=1;else{if(R[0]instanceof N)return N(R[0].toArray());this[0]=[],this.length=1}return this},N._init.prototype=N.prototype,N._init.constructor=N,N.utils={calcRdx:m,isArray:S,isFunction:T,isNumber:w,toVector:function(R){return g.apply([],R)}},N._random_fn=c.random,N.setRandom=function(R){if(typeof R!="function")throw new TypeError("fn is not a function");N._random_fn=R},N.extend=function(R){var B,Y;if(arguments.length===1){for(Y in R)N[Y]=R[Y];return this}for(B=1;B<arguments.length;B++)for(Y in arguments[B])R[Y]=arguments[B][Y];return R},N.rows=function(R){return R.length||1},N.cols=function(R){return R[0].length||1},N.dimensions=function(R){return{rows:N.rows(R),cols:N.cols(R)}},N.row=function(R,B){return S(B)?B.map(function(Y){return N.row(R,Y)}):R[B]},N.rowa=function(R,B){return N.row(R,B)},N.col=function(R,B){if(S(B)){var Y=N.arange(R.length).map(function(){return new Array(B.length)});return B.forEach(function(pe,le){N.arange(R.length).forEach(function(Ee){Y[Ee][le]=R[Ee][pe]})}),Y}for(var K=new Array(R.length),se=0;se<R.length;se++)K[se]=[R[se][B]];return K},N.cola=function(R,B){return N.col(R,B).map(function(Y){return Y[0]})},N.diag=function(R){for(var B=N.rows(R),Y=new Array(B),K=0;K<B;K++)Y[K]=[R[K][K]];return Y},N.antidiag=function(R){for(var B=N.rows(R)-1,Y=new Array(B),K=0;B>=0;B--,K++)Y[K]=[R[K][B]];return Y},N.transpose=function(R){var B,Y,K,se,pe,le=[];for(S(R[0])||(R=[R]),Y=R.length,K=R[0].length,pe=0;pe<K;pe++){for(B=new Array(Y),se=0;se<Y;se++)B[se]=R[se][pe];le.push(B)}return le.length===1?le[0]:le},N.map=function(R,B,Y){var K,se,pe,le,Ee;for(S(R[0])||(R=[R]),se=R.length,pe=R[0].length,le=Y?R:new Array(se),K=0;K<se;K++)for(le[K]||(le[K]=new Array(pe)),Ee=0;Ee<pe;Ee++)le[K][Ee]=B(R[K][Ee],K,Ee);return le.length===1?le[0]:le},N.cumreduce=function(R,B,Y){var K,se,pe,le,Ee;for(S(R[0])||(R=[R]),se=R.length,pe=R[0].length,le=Y?R:new Array(se),K=0;K<se;K++)for(le[K]||(le[K]=new Array(pe)),pe>0&&(le[K][0]=R[K][0]),Ee=1;Ee<pe;Ee++)le[K][Ee]=B(le[K][Ee-1],R[K][Ee]);return le.length===1?le[0]:le},N.alter=function(R,B){return N.map(R,B,!0)},N.create=function(R,B,Y){var K,se,pe=new Array(R);for(T(B)&&(Y=B,B=R),K=0;K<R;K++)for(pe[K]=new Array(B),se=0;se<B;se++)pe[K][se]=Y(K,se);return pe},N.zeros=function(R,B){return w(B)||(B=R),N.create(R,B,D)},N.ones=function(R,B){return w(B)||(B=R),N.create(R,B,k)},N.rand=function(R,B){return w(B)||(B=R),N.create(R,B,N._random_fn)},N.identity=function(R,B){return w(B)||(B=R),N.create(R,B,L)},N.symmetric=function(R){var B,Y,K=R.length;if(R.length!==R[0].length)return!1;for(B=0;B<K;B++)for(Y=0;Y<K;Y++)if(R[Y][B]!==R[B][Y])return!1;return!0},N.clear=function(R){return N.alter(R,D)},N.seq=function(R,B,Y,K){T(K)||(K=!1);var se,pe=[],le=m(R,B),Ee=(B*le-R*le)/((Y-1)*le),Ne=R;for(se=0;Ne<=B&&se<Y;Ne=(R*le+Ee*le*++se)/le)pe.push(K?K(Ne,se):Ne);return pe},N.arange=function(R,B,Y){var K,se=[];if(Y=Y||1,B===u&&(B=R,R=0),R===B||Y===0)return[];if(R<B&&Y<0)return[];if(R>B&&Y>0)return[];if(Y>0)for(K=R;K<B;K+=Y)se.push(K);else for(K=R;K>B;K+=Y)se.push(K);return se},N.slice=function(){function R(B,Y,K,se){var pe,le=[],Ee=B.length;if(Y===u&&K===u&&se===u)return N.copy(B);if(se=se||1,(Y=(Y=Y||0)>=0?Y:Ee+Y)===(K=(K=K||B.length)>=0?K:Ee+K)||se===0)return[];if(Y<K&&se<0)return[];if(Y>K&&se>0)return[];if(se>0)for(pe=Y;pe<K;pe+=se)le.push(B[pe]);else for(pe=Y;pe>K;pe+=se)le.push(B[pe]);return le}return function(B,Y){var K,se;return w((Y=Y||{}).row)?w(Y.col)?B[Y.row][Y.col]:R(N.rowa(B,Y.row),(K=Y.col||{}).start,K.end,K.step):w(Y.col)?R(N.cola(B,Y.col),(se=Y.row||{}).start,se.end,se.step):(se=Y.row||{},K=Y.col||{},R(B,se.start,se.end,se.step).map(function(pe){return R(pe,K.start,K.end,K.step)}))}}(),N.sliceAssign=function(R,B,Y){var K,se;if(w(B.row)){if(w(B.col))return R[B.row][B.col]=Y;B.col=B.col||{},B.col.start=B.col.start||0,B.col.end=B.col.end||R[0].length,B.col.step=B.col.step||1,K=N.arange(B.col.start,c.min(R.length,B.col.end),B.col.step);var pe=B.row;return K.forEach(function(Ee,Ne){R[pe][Ee]=Y[Ne]}),R}if(w(B.col)){B.row=B.row||{},B.row.start=B.row.start||0,B.row.end=B.row.end||R.length,B.row.step=B.row.step||1,se=N.arange(B.row.start,c.min(R[0].length,B.row.end),B.row.step);var le=B.col;return se.forEach(function(Ee,Ne){R[Ee][le]=Y[Ne]}),R}return Y[0].length===u&&(Y=[Y]),B.row.start=B.row.start||0,B.row.end=B.row.end||R.length,B.row.step=B.row.step||1,B.col.start=B.col.start||0,B.col.end=B.col.end||R[0].length,B.col.step=B.col.step||1,se=N.arange(B.row.start,c.min(R.length,B.row.end),B.row.step),K=N.arange(B.col.start,c.min(R[0].length,B.col.end),B.col.step),se.forEach(function(Ee,Ne){K.forEach(function(_e,me){R[Ee][_e]=Y[Ne][me]})}),R},N.diagonal=function(R){var B=N.zeros(R.length,R.length);return R.forEach(function(Y,K){B[K][K]=Y}),B},N.copy=function(R){return R.map(function(B){return w(B)?B:B.map(function(Y){return Y})})};var H=N.prototype;return H.length=0,H.push=Array.prototype.push,H.sort=Array.prototype.sort,H.splice=Array.prototype.splice,H.slice=Array.prototype.slice,H.toArray=function(){return this.length>1?C.call(this):C.call(this)[0]},H.map=function(R,B){return N(N.map(this,R,B))},H.cumreduce=function(R,B){return N(N.cumreduce(this,R,B))},H.alter=function(R){return N.alter(this,R),this},function(R){for(var B=0;B<R.length;B++)(function(Y){H[Y]=function(K){var se,pe=this;return K?(setTimeout(function(){K.call(pe,H[Y].call(pe))}),this):(se=N[Y](this),S(se)?N(se):se)}})(R[B])}("transpose clear symmetric rows cols dimensions diag antidiag".split(" ")),function(R){for(var B=0;B<R.length;B++)(function(Y){H[Y]=function(K,se){var pe=this;return se?(setTimeout(function(){se.call(pe,H[Y].call(pe,K))}),this):N(N[Y](this,K))}})(R[B])}("row col".split(" ")),function(R){for(var B=0;B<R.length;B++)(function(Y){H[Y]=function(){return N(N[Y].apply(null,arguments))}})(R[B])}("create zeros ones rand identity".split(" ")),N}(Math),function(c,u){var g=c.utils.isFunction;function C(S,T){return S-T}function v(S,T,w){return u.max(T,u.min(S,w))}c.sum=function(S){for(var T=0,w=S.length;--w>=0;)T+=S[w];return T},c.sumsqrd=function(S){for(var T=0,w=S.length;--w>=0;)T+=S[w]*S[w];return T},c.sumsqerr=function(S){for(var T,w=c.mean(S),N=0,D=S.length;--D>=0;)N+=(T=S[D]-w)*T;return N},c.sumrow=function(S){for(var T=0,w=S.length;--w>=0;)T+=S[w];return T},c.product=function(S){for(var T=1,w=S.length;--w>=0;)T*=S[w];return T},c.min=function(S){for(var T=S[0],w=0;++w<S.length;)S[w]<T&&(T=S[w]);return T},c.max=function(S){for(var T=S[0],w=0;++w<S.length;)S[w]>T&&(T=S[w]);return T},c.unique=function(S){for(var T={},w=[],N=0;N<S.length;N++)T[S[N]]||(T[S[N]]=!0,w.push(S[N]));return w},c.mean=function(S){return c.sum(S)/S.length},c.meansqerr=function(S){return c.sumsqerr(S)/S.length},c.geomean=function(S){var T=S.map(u.log),w=c.mean(T);return u.exp(w)},c.median=function(S){var T=S.length,w=S.slice().sort(C);return 1&T?w[T/2|0]:(w[T/2-1]+w[T/2])/2},c.cumsum=function(S){return c.cumreduce(S,function(T,w){return T+w})},c.cumprod=function(S){return c.cumreduce(S,function(T,w){return T*w})},c.diff=function(S){var T,w=[],N=S.length;for(T=1;T<N;T++)w.push(S[T]-S[T-1]);return w},c.rank=function(S){var T,w=[],N={};for(T=0;T<S.length;T++)N[H=S[T]]?N[H]++:(N[H]=1,w.push(H));var D=w.sort(C),k={},L=1;for(T=0;T<D.length;T++){var H,R=N[H=D[T]],B=(L+(L+R-1))/2;k[H]=B,L+=R}return S.map(function(Y){return k[Y]})},c.mode=function(S){var T,w=S.length,N=S.slice().sort(C),D=1,k=0,L=0,H=[];for(T=0;T<w;T++)N[T]===N[T+1]?D++:(D>k?(H=[N[T]],k=D,L=0):D===k&&(H.push(N[T]),L++),D=1);return L===0?H[0]:H},c.range=function(S){return c.max(S)-c.min(S)},c.variance=function(S,T){return c.sumsqerr(S)/(S.length-(T?1:0))},c.pooledvariance=function(S){return S.reduce(function(T,w){return T+c.sumsqerr(w)},0)/(S.reduce(function(T,w){return T+w.length},0)-S.length)},c.deviation=function(S){for(var T=c.mean(S),w=S.length,N=new Array(w),D=0;D<w;D++)N[D]=S[D]-T;return N},c.stdev=function(S,T){return u.sqrt(c.variance(S,T))},c.pooledstdev=function(S){return u.sqrt(c.pooledvariance(S))},c.meandev=function(S){for(var T=c.mean(S),w=[],N=S.length-1;N>=0;N--)w.push(u.abs(S[N]-T));return c.mean(w)},c.meddev=function(S){for(var T=c.median(S),w=[],N=S.length-1;N>=0;N--)w.push(u.abs(S[N]-T));return c.median(w)},c.coeffvar=function(S){return c.stdev(S)/c.mean(S)},c.quartiles=function(S){var T=S.length,w=S.slice().sort(C);return[w[u.round(T/4)-1],w[u.round(T/2)-1],w[u.round(3*T/4)-1]]},c.quantiles=function(S,T,w,N){var D,k,L,H,R,B=S.slice().sort(C),Y=[T.length],K=S.length;for(w===void 0&&(w=.375),N===void 0&&(N=.375),D=0;D<T.length;D++)L=K*(k=T[D])+(w+k*(1-w-N)),H=u.floor(v(L,1,K-1)),R=v(L-H,0,1),Y[D]=(1-R)*B[H-1]+R*B[H];return Y},c.percentile=function(S,T,w){var N=S.slice().sort(C),D=T*(N.length+(w?1:-1))+(w?0:1),k=parseInt(D),L=D-k;return k+1<N.length?N[k-1]+L*(N[k]-N[k-1]):N[k-1]},c.percentileOfScore=function(S,T,w){var N,D,k=0,L=S.length,H=!1;for(w==="strict"&&(H=!0),D=0;D<L;D++)N=S[D],(H&&N<T||!H&&N<=T)&&k++;return k/L},c.histogram=function(S,T){T=T||4;var w,N=c.min(S),D=(c.max(S)-N)/T,k=S.length,L=[];for(w=0;w<T;w++)L[w]=0;for(w=0;w<k;w++)L[u.min(u.floor((S[w]-N)/D),T-1)]+=1;return L},c.covariance=function(S,T){var w,N=c.mean(S),D=c.mean(T),k=S.length,L=new Array(k);for(w=0;w<k;w++)L[w]=(S[w]-N)*(T[w]-D);return c.sum(L)/(k-1)},c.corrcoeff=function(S,T){return c.covariance(S,T)/c.stdev(S,1)/c.stdev(T,1)},c.spearmancoeff=function(S,T){return S=c.rank(S),T=c.rank(T),c.corrcoeff(S,T)},c.stanMoment=function(S,T){for(var w=c.mean(S),N=c.stdev(S),D=S.length,k=0,L=0;L<D;L++)k+=u.pow((S[L]-w)/N,T);return k/S.length},c.skewness=function(S){return c.stanMoment(S,3)},c.kurtosis=function(S){return c.stanMoment(S,4)-3};var m=c.prototype;(function(S){for(var T=0;T<S.length;T++)(function(w){m[w]=function(N,D){var k=[],L=0,H=this;if(g(N)&&(D=N,N=!1),D)return setTimeout(function(){D.call(H,m[w].call(H,N))}),this;if(this.length>1){for(H=N===!0?this:this.transpose();L<H.length;L++)k[L]=c[w](H[L]);return k}return c[w](this[0],N)}})(S[T])})("cumsum cumprod".split(" ")),function(S){for(var T=0;T<S.length;T++)(function(w){m[w]=function(N,D){var k=[],L=0,H=this;if(g(N)&&(D=N,N=!1),D)return setTimeout(function(){D.call(H,m[w].call(H,N))}),this;if(this.length>1){for(w!=="sumrow"&&(H=N===!0?this:this.transpose());L<H.length;L++)k[L]=c[w](H[L]);return N===!0?c[w](c.utils.toVector(k)):k}return c[w](this[0],N)}})(S[T])}("sum sumsqrd sumsqerr sumrow product min max unique mean meansqerr geomean median diff rank mode range variance deviation stdev meandev meddev coeffvar quartiles histogram skewness kurtosis".split(" ")),function(S){for(var T=0;T<S.length;T++)(function(w){m[w]=function(){var N,D=[],k=0,L=this,H=Array.prototype.slice.call(arguments);if(g(H[H.length-1])){N=H[H.length-1];var R=H.slice(0,H.length-1);return setTimeout(function(){N.call(L,m[w].apply(L,R))}),this}N=void 0;var B=function(Y){return c[w].apply(L,[Y].concat(H))};if(this.length>1){for(L=L.transpose();k<L.length;k++)D[k]=B(L[k]);return D}return B(this[0])}})(S[T])}("quantiles percentileOfScore".split(" "))}(l,Math),function(c,u){c.gammaln=function(g){var C,v,m,S=0,T=[76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],w=1.000000000190015;for(m=(v=C=g)+5.5,m-=(C+.5)*u.log(m);S<6;S++)w+=T[S]/++v;return u.log(2.5066282746310007*w/C)-m},c.loggam=function(g){var C,v,m,S,T,w,N,D=[.08333333333333333,-.002777777777777778,.0007936507936507937,-.0005952380952380952,.0008417508417508418,-.001917526917526918,.00641025641025641,-.02955065359477124,.1796443723688307,-1.3924322169059];if(C=g,N=0,g==1||g==2)return 0;for(g<=7&&(C=g+(N=u.floor(7-g))),v=1/(C*C),m=2*u.PI,T=D[9],w=8;w>=0;w--)T*=v,T+=D[w];if(S=T/C+.5*u.log(m)+(C-.5)*u.log(C)-C,g<=7)for(w=1;w<=N;w++)S-=u.log(C-1),C-=1;return S},c.gammafn=function(g){var C,v,m,S,T=[-1.716185138865495,24.76565080557592,-379.80425647094563,629.3311553128184,866.9662027904133,-31451.272968848367,-36144.413418691176,66456.14382024054],w=[-30.8402300119739,315.35062697960416,-1015.1563674902192,-3107.771671572311,22538.11842098015,4755.846277527881,-134659.9598649693,-115132.2596755535],N=!1,D=0,k=0,L=0,H=g;if(g>171.6243769536076)return 1/0;if(H<=0){if(!(S=H%1+36e-17))return 1/0;N=(1&H?-1:1)*u.PI/u.sin(u.PI*S),H=1-H}for(m=H,v=H<1?H++:(H-=D=(0|H)-1)-1,C=0;C<8;++C)L=(L+T[C])*v,k=k*v+w[C];if(S=L/k+1,m<H)S/=m;else if(m>H)for(C=0;C<D;++C)S*=H,H++;return N&&(S=N/S),S},c.gammap=function(g,C){return c.lowRegGamma(g,C)*c.gammafn(g)},c.lowRegGamma=function(g,C){var v,m=c.gammaln(g),S=g,T=1/g,w=T,N=C+1-g,D=1/1e-30,k=1/N,L=k,H=1,R=-~(8.5*u.log(g>=1?g:1/g)+.4*g+17);if(C<0||g<=0)return NaN;if(C<g+1){for(;H<=R;H++)T+=w*=C/++S;return T*u.exp(-C+g*u.log(C)-m)}for(;H<=R;H++)L*=(k=1/(k=(v=-H*(H-g))*k+(N+=2)))*(D=N+v/D);return 1-L*u.exp(-C+g*u.log(C)-m)},c.factorialln=function(g){return g<0?NaN:c.gammaln(g+1)},c.factorial=function(g){return g<0?NaN:c.gammafn(g+1)},c.combination=function(g,C){return g>170||C>170?u.exp(c.combinationln(g,C)):c.factorial(g)/c.factorial(C)/c.factorial(g-C)},c.combinationln=function(g,C){return c.factorialln(g)-c.factorialln(C)-c.factorialln(g-C)},c.permutation=function(g,C){return c.factorial(g)/c.factorial(g-C)},c.betafn=function(g,C){if(!(g<=0||C<=0))return g+C>170?u.exp(c.betaln(g,C)):c.gammafn(g)*c.gammafn(C)/c.gammafn(g+C)},c.betaln=function(g,C){return c.gammaln(g)+c.gammaln(C)-c.gammaln(g+C)},c.betacf=function(g,C,v){var m,S,T,w,N=1e-30,D=1,k=C+v,L=C+1,H=C-1,R=1,B=1-k*g/L;for(u.abs(B)<N&&(B=N),w=B=1/B;D<=100&&(B=1+(S=D*(v-D)*g/((H+(m=2*D))*(C+m)))*B,u.abs(B)<N&&(B=N),R=1+S/R,u.abs(R)<N&&(R=N),w*=(B=1/B)*R,B=1+(S=-(C+D)*(k+D)*g/((C+m)*(L+m)))*B,u.abs(B)<N&&(B=N),R=1+S/R,u.abs(R)<N&&(R=N),w*=T=(B=1/B)*R,!(u.abs(T-1)<3e-7));D++);return w},c.gammapinv=function(g,C){var v,m,S,T,w,N,D=0,k=C-1,L=c.gammaln(C);if(g>=1)return u.max(100,C+100*u.sqrt(C));if(g<=0)return 0;for(C>1?(w=u.log(k),N=u.exp(k*(w-1)-L),T=g<.5?g:1-g,v=(2.30753+.27061*(m=u.sqrt(-2*u.log(T))))/(1+m*(.99229+.04481*m))-m,g<.5&&(v=-v),v=u.max(.001,C*u.pow(1-1/(9*C)-v/(3*u.sqrt(C)),3))):v=g<(m=1-C*(.253+.12*C))?u.pow(g/m,1/C):1-u.log(1-(g-m)/(1-m));D<12;D++){if(v<=0)return 0;if((v-=m=(S=(c.lowRegGamma(C,v)-g)/(m=C>1?N*u.exp(-(v-k)+k*(u.log(v)-w)):u.exp(-v+k*u.log(v)-L)))/(1-.5*u.min(1,S*((C-1)/v-1))))<=0&&(v=.5*(v+m)),u.abs(m)<1e-8*v)break}return v},c.erf=function(g){var C,v,m,S,T=[-1.3026537197817094,.6419697923564902,.019476473204185836,-.00956151478680863,-.000946595344482036,.000366839497852761,42523324806907e-18,-20278578112534e-18,-1624290004647e-18,130365583558e-17,15626441722e-18,-85238095915e-18,6529054439e-18,5059343495e-18,-991364156e-18,-227365122e-18,96467911e-18,2394038e-18,-6886027e-18,894487e-18,313092e-18,-112708e-18,381e-18,7106e-18,-1523e-18,-94e-18,121e-18,-28e-18],w=T.length-1,N=!1,D=0,k=0;for(g<0&&(g=-g,N=!0),v=4*(C=2/(2+g))-2;w>0;w--)m=D,D=v*D-k+T[w],k=m;return S=C*u.exp(-g*g+.5*(T[0]+v*D)-k),N?S-1:1-S},c.erfc=function(g){return 1-c.erf(g)},c.erfcinv=function(g){var C,v,m,S,T=0;if(g>=2)return-100;if(g<=0)return 100;for(S=g<1?g:2-g,C=-.70711*((2.30753+.27061*(m=u.sqrt(-2*u.log(S/2))))/(1+m*(.99229+.04481*m))-m);T<2;T++)C+=(v=c.erfc(C)-S)/(1.1283791670955126*u.exp(-C*C)-C*v);return g<1?C:-C},c.ibetainv=function(g,C,v){var m,S,T,w,N,D,k,L,H,R,B=C-1,Y=v-1,K=0;if(g<=0)return 0;if(g>=1)return 1;for(C>=1&&v>=1?(T=g<.5?g:1-g,D=(2.30753+.27061*(w=u.sqrt(-2*u.log(T))))/(1+w*(.99229+.04481*w))-w,g<.5&&(D=-D),k=(D*D-3)/6,L=2/(1/(2*C-1)+1/(2*v-1)),H=D*u.sqrt(k+L)/L-(1/(2*v-1)-1/(2*C-1))*(k+.8333333333333334-2/(3*L)),D=C/(C+v*u.exp(2*H))):(m=u.log(C/(C+v)),S=u.log(v/(C+v)),D=g<(w=u.exp(C*m)/C)/(H=w+(N=u.exp(v*S)/v))?u.pow(C*H*g,1/C):1-u.pow(v*H*(1-g),1/v)),R=-c.gammaln(C)-c.gammaln(v)+c.gammaln(C+v);K<10;K++){if(D===0||D===1)return D;if((D-=w=(N=(c.ibeta(D,C,v)-g)/(w=u.exp(B*u.log(D)+Y*u.log(1-D)+R)))/(1-.5*u.min(1,N*(B/D-Y/(1-D)))))<=0&&(D=.5*(D+w)),D>=1&&(D=.5*(D+w+1)),u.abs(w)<1e-8*D&&K>0)break}return D},c.ibeta=function(g,C,v){var m=g===0||g===1?0:u.exp(c.gammaln(C+v)-c.gammaln(C)-c.gammaln(v)+C*u.log(g)+v*u.log(1-g));return!(g<0||g>1)&&(g<(C+1)/(C+v+2)?m*c.betacf(g,C,v)/C:1-m*c.betacf(1-g,v,C)/v)},c.randn=function(g,C){var v,m,S,T,w;if(C||(C=g),g)return c.create(g,C,function(){return c.randn()});do v=c._random_fn(),m=1.7156*(c._random_fn()-.5),w=(S=v-.449871)*S+(T=u.abs(m)+.386595)*(.196*T-.25472*S);while(w>.27597&&(w>.27846||m*m>-4*u.log(v)*v*v));return m/v},c.randg=function(g,C,v){var m,S,T,w,N,D,k=g;if(v||(v=C),g||(g=1),C)return(D=c.zeros(C,v)).alter(function(){return c.randg(g)}),D;g<1&&(g+=1),m=g-.3333333333333333,S=1/u.sqrt(9*m);do{do w=1+S*(N=c.randn());while(w<=0);w*=w*w,T=c._random_fn()}while(T>1-.331*u.pow(N,4)&&u.log(T)>.5*N*N+m*(1-w+u.log(w)));if(g==k)return m*w;do T=c._random_fn();while(T===0);return u.pow(T,1/k)*m*w},function(g){for(var C=0;C<g.length;C++)(function(v){c.fn[v]=function(){return c(c.map(this,function(m){return c[v](m)}))}})(g[C])}("gammaln gammafn factorial factorialln".split(" ")),function(g){for(var C=0;C<g.length;C++)(function(v){c.fn[v]=function(){return c(c[v].apply(null,arguments))}})(g[C])}("randn".split(" "))}(l,Math),function(c,u){function g(v,m,S,T){for(var w,N=0,D=1,k=1,L=1,H=0,R=0;u.abs((k-R)/k)>T;)R=k,D=L+(w=-(m+H)*(m+S+H)*v/(m+2*H)/(m+2*H+1))*D,k=(N=k+w*N)+(w=(H+=1)*(S-H)*v/(m+2*H-1)/(m+2*H))*k,N/=L=D+w*L,D/=L,k/=L,L=1;return k/m}function C(v,m,S){var T=[.9815606342467192,.9041172563704749,.7699026741943047,.5873179542866175,.3678314989981802,.1252334085114689],w=[.04717533638651183,.10693932599531843,.16007832854334622,.20316742672306592,.2334925365383548,.24914704581340277],N=.5*v;if(N>=8)return 1;var D,k=2*c.normal.cdf(N,0,1,1,0)-1;k=k>=u.exp(-50/S)?u.pow(k,S):0;for(var L=N,H=(8-N)/(D=v>3?2:3),R=L+H,B=0,Y=S-1,K=1;K<=D;K++){for(var se=0,pe=.5*(R+L),le=.5*(R-L),Ee=1;Ee<=12;Ee++){var Ne,_e=pe+le*(6<Ee?T[(Ne=12-Ee+1)-1]:-T[(Ne=Ee)-1]),me=_e*_e;if(me>60)break;var Ke=2*c.normal.cdf(_e,0,1,1,0)*.5-2*c.normal.cdf(_e,v,1,1,0)*.5;Ke>=u.exp(-30/Y)&&(se+=Ke=w[Ne-1]*u.exp(-.5*me)*u.pow(Ke,Y))}B+=se*=2*le*S/u.sqrt(2*u.PI),L=R,R+=H}return(k+=B)<=u.exp(-30/m)?0:(k=u.pow(k,m))>=1?1:k}(function(v){for(var m=0;m<v.length;m++)(function(S){c[S]=function T(w,N,D){return this instanceof T?(this._a=w,this._b=N,this._c=D,this):new T(w,N,D)},c.fn[S]=function(T,w,N){var D=c[S](T,w,N);return D.data=this,D},c[S].prototype.sample=function(T){var w=this._a,N=this._b,D=this._c;return T?c.alter(T,function(){return c[S].sample(w,N,D)}):c[S].sample(w,N,D)},function(T){for(var w=0;w<T.length;w++)(function(N){c[S].prototype[N]=function(D){var k=this._a,L=this._b,H=this._c;return D||D===0||(D=this.data),typeof D!="number"?c.fn.map.call(D,function(R){return c[S][N](R,k,L,H)}):c[S][N](D,k,L,H)}})(T[w])}("pdf cdf inv".split(" ")),function(T){for(var w=0;w<T.length;w++)(function(N){c[S].prototype[N]=function(){return c[S][N](this._a,this._b,this._c)}})(T[w])}("mean median mode variance".split(" "))})(v[m])})("beta centralF cauchy chisquare exponential gamma invgamma kumaraswamy laplace lognormal noncentralt normal pareto studentt weibull uniform binomial negbin hypgeom poisson triangular tukey arcsine".split(" ")),c.extend(c.beta,{pdf:function(v,m,S){return v>1||v<0?0:m==1&&S==1?1:m<512&&S<512?u.pow(v,m-1)*u.pow(1-v,S-1)/c.betafn(m,S):u.exp((m-1)*u.log(v)+(S-1)*u.log(1-v)-c.betaln(m,S))},cdf:function(v,m,S){return v>1||v<0?1*(v>1):c.ibeta(v,m,S)},inv:function(v,m,S){return c.ibetainv(v,m,S)},mean:function(v,m){return v/(v+m)},median:function(v,m){return c.ibetainv(.5,v,m)},mode:function(v,m){return(v-1)/(v+m-2)},sample:function(v,m){var S=c.randg(v);return S/(S+c.randg(m))},variance:function(v,m){return v*m/(u.pow(v+m,2)*(v+m+1))}}),c.extend(c.centralF,{pdf:function(v,m,S){var T;return v<0?0:m<=2?v===0&&m<2?1/0:v===0&&m===2?1:1/c.betafn(m/2,S/2)*u.pow(m/S,m/2)*u.pow(v,m/2-1)*u.pow(1+m/S*v,-(m+S)/2):(T=m*v/(S+v*m),m*(S/(S+v*m))/2*c.binomial.pdf((m-2)/2,(m+S-2)/2,T))},cdf:function(v,m,S){return v<0?0:c.ibeta(m*v/(m*v+S),m/2,S/2)},inv:function(v,m,S){return S/(m*(1/c.ibetainv(v,m/2,S/2)-1))},mean:function(v,m){return m>2?m/(m-2):void 0},mode:function(v,m){return v>2?m*(v-2)/(v*(m+2)):void 0},sample:function(v,m){return 2*c.randg(v/2)/v/(2*c.randg(m/2)/m)},variance:function(v,m){if(!(m<=4))return 2*m*m*(v+m-2)/(v*(m-2)*(m-2)*(m-4))}}),c.extend(c.cauchy,{pdf:function(v,m,S){return S<0?0:S/(u.pow(v-m,2)+u.pow(S,2))/u.PI},cdf:function(v,m,S){return u.atan((v-m)/S)/u.PI+.5},inv:function(v,m,S){return m+S*u.tan(u.PI*(v-.5))},median:function(v){return v},mode:function(v){return v},sample:function(v,m){return c.randn()*u.sqrt(1/(2*c.randg(.5)))*m+v}}),c.extend(c.chisquare,{pdf:function(v,m){return v<0?0:v===0&&m===2?.5:u.exp((m/2-1)*u.log(v)-v/2-m/2*u.log(2)-c.gammaln(m/2))},cdf:function(v,m){return v<0?0:c.lowRegGamma(m/2,v/2)},inv:function(v,m){return 2*c.gammapinv(v,.5*m)},mean:function(v){return v},median:function(v){return v*u.pow(1-2/(9*v),3)},mode:function(v){return v-2>0?v-2:0},sample:function(v){return 2*c.randg(v/2)},variance:function(v){return 2*v}}),c.extend(c.exponential,{pdf:function(v,m){return v<0?0:m*u.exp(-m*v)},cdf:function(v,m){return v<0?0:1-u.exp(-m*v)},inv:function(v,m){return-u.log(1-v)/m},mean:function(v){return 1/v},median:function(v){return 1/v*u.log(2)},mode:function(){return 0},sample:function(v){return-1/v*u.log(c._random_fn())},variance:function(v){return u.pow(v,-2)}}),c.extend(c.gamma,{pdf:function(v,m,S){return v<0?0:v===0&&m===1?1/S:u.exp((m-1)*u.log(v)-v/S-c.gammaln(m)-m*u.log(S))},cdf:function(v,m,S){return v<0?0:c.lowRegGamma(m,v/S)},inv:function(v,m,S){return c.gammapinv(v,m)*S},mean:function(v,m){return v*m},mode:function(v,m){if(v>1)return(v-1)*m},sample:function(v,m){return c.randg(v)*m},variance:function(v,m){return v*m*m}}),c.extend(c.invgamma,{pdf:function(v,m,S){return v<=0?0:u.exp(-(m+1)*u.log(v)-S/v-c.gammaln(m)+m*u.log(S))},cdf:function(v,m,S){return v<=0?0:1-c.lowRegGamma(m,S/v)},inv:function(v,m,S){return S/c.gammapinv(1-v,m)},mean:function(v,m){return v>1?m/(v-1):void 0},mode:function(v,m){return m/(v+1)},sample:function(v,m){return m/c.randg(v)},variance:function(v,m){if(!(v<=2))return m*m/((v-1)*(v-1)*(v-2))}}),c.extend(c.kumaraswamy,{pdf:function(v,m,S){return v===0&&m===1?S:v===1&&S===1?m:u.exp(u.log(m)+u.log(S)+(m-1)*u.log(v)+(S-1)*u.log(1-u.pow(v,m)))},cdf:function(v,m,S){return v<0?0:v>1?1:1-u.pow(1-u.pow(v,m),S)},inv:function(v,m,S){return u.pow(1-u.pow(1-v,1/S),1/m)},mean:function(v,m){return m*c.gammafn(1+1/v)*c.gammafn(m)/c.gammafn(1+1/v+m)},median:function(v,m){return u.pow(1-u.pow(2,-1/m),1/v)},mode:function(v,m){if(v>=1&&m>=1&&v!==1&&m!==1)return u.pow((v-1)/(v*m-1),1/v)},variance:function(){throw new Error("variance not yet implemented")}}),c.extend(c.lognormal,{pdf:function(v,m,S){return v<=0?0:u.exp(-u.log(v)-.5*u.log(2*u.PI)-u.log(S)-u.pow(u.log(v)-m,2)/(2*S*S))},cdf:function(v,m,S){return v<0?0:.5+.5*c.erf((u.log(v)-m)/u.sqrt(2*S*S))},inv:function(v,m,S){return u.exp(-1.4142135623730951*S*c.erfcinv(2*v)+m)},mean:function(v,m){return u.exp(v+m*m/2)},median:function(v){return u.exp(v)},mode:function(v,m){return u.exp(v-m*m)},sample:function(v,m){return u.exp(c.randn()*m+v)},variance:function(v,m){return(u.exp(m*m)-1)*u.exp(2*v+m*m)}}),c.extend(c.noncentralt,{pdf:function(v,m,S){return u.abs(S)<1e-14?c.studentt.pdf(v,m):u.abs(v)<1e-14?u.exp(c.gammaln((m+1)/2)-S*S/2-.5*u.log(u.PI*m)-c.gammaln(m/2)):m/v*(c.noncentralt.cdf(v*u.sqrt(1+2/m),m+2,S)-c.noncentralt.cdf(v,m,S))},cdf:function(v,m,S){var T=1e-14;if(u.abs(S)<T)return c.studentt.cdf(v,m);var w=!1;v<0&&(w=!0,S=-S);for(var N=c.normal.cdf(-S,0,1),D=T+1,k=D,L=v*v/(v*v+m),H=0,R=u.exp(-S*S/2),B=u.exp(-S*S/2-.5*u.log(2)-c.gammaln(1.5))*S;H<200||k>T||D>T;)k=D,H>0&&(R*=S*S/(2*H),B*=S*S/(2*(H+.5))),N+=.5*(D=R*c.beta.cdf(L,H+.5,m/2)+B*c.beta.cdf(L,H+1,m/2)),H++;return w?1-N:N}}),c.extend(c.normal,{pdf:function(v,m,S){return u.exp(-.5*u.log(2*u.PI)-u.log(S)-u.pow(v-m,2)/(2*S*S))},cdf:function(v,m,S){return .5*(1+c.erf((v-m)/u.sqrt(2*S*S)))},inv:function(v,m,S){return-1.4142135623730951*S*c.erfcinv(2*v)+m},mean:function(v){return v},median:function(v){return v},mode:function(v){return v},sample:function(v,m){return c.randn()*m+v},variance:function(v,m){return m*m}}),c.extend(c.pareto,{pdf:function(v,m,S){return v<m?0:S*u.pow(m,S)/u.pow(v,S+1)},cdf:function(v,m,S){return v<m?0:1-u.pow(m/v,S)},inv:function(v,m,S){return m/u.pow(1-v,1/S)},mean:function(v,m){if(!(m<=1))return m*u.pow(v,m)/(m-1)},median:function(v,m){return v*(m*u.SQRT2)},mode:function(v){return v},variance:function(v,m){if(!(m<=2))return v*v*m/(u.pow(m-1,2)*(m-2))}}),c.extend(c.studentt,{pdf:function(v,m){return m=m>1e100?1e100:m,1/(u.sqrt(m)*c.betafn(.5,m/2))*u.pow(1+v*v/m,-(m+1)/2)},cdf:function(v,m){var S=m/2;return c.ibeta((v+u.sqrt(v*v+m))/(2*u.sqrt(v*v+m)),S,S)},inv:function(v,m){var S=c.ibetainv(2*u.min(v,1-v),.5*m,.5);return S=u.sqrt(m*(1-S)/S),v>.5?S:-S},mean:function(v){return v>1?0:void 0},median:function(){return 0},mode:function(){return 0},sample:function(v){return c.randn()*u.sqrt(v/(2*c.randg(v/2)))},variance:function(v){return v>2?v/(v-2):v>1?1/0:void 0}}),c.extend(c.weibull,{pdf:function(v,m,S){return v<0||m<0||S<0?0:S/m*u.pow(v/m,S-1)*u.exp(-u.pow(v/m,S))},cdf:function(v,m,S){return v<0?0:1-u.exp(-u.pow(v/m,S))},inv:function(v,m,S){return m*u.pow(-u.log(1-v),1/S)},mean:function(v,m){return v*c.gammafn(1+1/m)},median:function(v,m){return v*u.pow(u.log(2),1/m)},mode:function(v,m){return m<=1?0:v*u.pow((m-1)/m,1/m)},sample:function(v,m){return v*u.pow(-u.log(c._random_fn()),1/m)},variance:function(v,m){return v*v*c.gammafn(1+2/m)-u.pow(c.weibull.mean(v,m),2)}}),c.extend(c.uniform,{pdf:function(v,m,S){return v<m||v>S?0:1/(S-m)},cdf:function(v,m,S){return v<m?0:v<S?(v-m)/(S-m):1},inv:function(v,m,S){return m+v*(S-m)},mean:function(v,m){return .5*(v+m)},median:function(v,m){return c.mean(v,m)},mode:function(){throw new Error("mode is not yet implemented")},sample:function(v,m){return v/2+m/2+(m/2-v/2)*(2*c._random_fn()-1)},variance:function(v,m){return u.pow(m-v,2)/12}}),c.extend(c.binomial,{pdf:function(v,m,S){return S===0||S===1?m*S===v?1:0:c.combination(m,v)*u.pow(S,v)*u.pow(1-S,m-v)},cdf:function(v,m,S){var T,w=1e-10;if(v<0)return 0;if(v>=m)return 1;if(S<0||S>1||m<=0)return NaN;var N=S,D=(v=u.floor(v))+1,k=m-v,L=D+k,H=u.exp(c.gammaln(L)-c.gammaln(k)-c.gammaln(D)+D*u.log(N)+k*u.log(1-N));return T=N<(D+1)/(L+2)?H*g(N,D,k,w):1-H*g(1-N,k,D,w),u.round(1/w*(1-T))/(1/w)}}),c.extend(c.negbin,{pdf:function(v,m,S){return v===v>>>0&&(v<0?0:c.combination(v+m-1,m-1)*u.pow(1-S,v)*u.pow(S,m))},cdf:function(v,m,S){var T=0,w=0;if(v<0)return 0;for(;w<=v;w++)T+=c.negbin.pdf(w,m,S);return T}}),c.extend(c.hypgeom,{pdf:function(v,m,S,T){if(v!=v|0)return!1;if(v<0||v<S-(m-T)||v>T||v>S)return 0;if(2*S>m)return 2*T>m?c.hypgeom.pdf(m-S-T+v,m,m-S,m-T):c.hypgeom.pdf(T-v,m,m-S,T);if(2*T>m)return c.hypgeom.pdf(S-v,m,S,m-T);if(S<T)return c.hypgeom.pdf(v,m,T,S);for(var w=1,N=0,D=0;D<v;D++){for(;w>1&&N<T;)w*=1-S/(m-N),N++;w*=(T-D)*(S-D)/((D+1)*(m-S-T+D+1))}for(;N<T;N++)w*=1-S/(m-N);return u.min(1,u.max(0,w))},cdf:function(v,m,S,T){if(v<0||v<S-(m-T))return 0;if(v>=T||v>=S)return 1;if(2*S>m)return 2*T>m?c.hypgeom.cdf(m-S-T+v,m,m-S,m-T):1-c.hypgeom.cdf(T-v-1,m,m-S,T);if(2*T>m)return 1-c.hypgeom.cdf(S-v-1,m,S,m-T);if(S<T)return c.hypgeom.cdf(v,m,T,S);for(var w=1,N=1,D=0,k=0;k<v;k++){for(;w>1&&D<T;){var L=1-S/(m-D);N*=L,w*=L,D++}w+=N*=(T-k)*(S-k)/((k+1)*(m-S-T+k+1))}for(;D<T;D++)w*=1-S/(m-D);return u.min(1,u.max(0,w))}}),c.extend(c.poisson,{pdf:function(v,m){return m<0||v%1!=0||v<0?0:u.pow(m,v)*u.exp(-m)/c.factorial(v)},cdf:function(v,m){var S=[],T=0;if(v<0)return 0;for(;T<=v;T++)S.push(c.poisson.pdf(T,m));return c.sum(S)},mean:function(v){return v},variance:function(v){return v},sampleSmall:function(v){var m=1,S=0,T=u.exp(-v);do S++,m*=c._random_fn();while(m>T);return S-1},sampleLarge:function(v){var m,S,T,w,N,D,k,L,H,R,B=v;for(w=u.sqrt(B),N=u.log(B),D=.02483*(k=.931+2.53*w)-.059,L=1.1239+1.1328/(k-3.4),H=.9277-3.6224/(k-2);;)if(S=u.random()-.5,T=u.random(),R=.5-u.abs(S),m=u.floor((2*D/R+k)*S+B+.43),R>=.07&&T<=H||!(m<0||R<.013&&T>R)&&u.log(T)+u.log(L)-u.log(D/(R*R)+k)<=m*N-B-c.loggam(m+1))return m},sample:function(v){return v<10?this.sampleSmall(v):this.sampleLarge(v)}}),c.extend(c.triangular,{pdf:function(v,m,S,T){return S<=m||T<m||T>S?NaN:v<m||v>S?0:v<T?2*(v-m)/((S-m)*(T-m)):v===T?2/(S-m):2*(S-v)/((S-m)*(S-T))},cdf:function(v,m,S,T){return S<=m||T<m||T>S?NaN:v<=m?0:v>=S?1:v<=T?u.pow(v-m,2)/((S-m)*(T-m)):1-u.pow(S-v,2)/((S-m)*(S-T))},inv:function(v,m,S,T){return S<=m||T<m||T>S?NaN:v<=(T-m)/(S-m)?m+(S-m)*u.sqrt(v*((T-m)/(S-m))):m+(S-m)*(1-u.sqrt((1-v)*(1-(T-m)/(S-m))))},mean:function(v,m,S){return(v+m+S)/3},median:function(v,m,S){return S<=(v+m)/2?m-u.sqrt((m-v)*(m-S))/u.sqrt(2):S>(v+m)/2?v+u.sqrt((m-v)*(S-v))/u.sqrt(2):void 0},mode:function(v,m,S){return S},sample:function(v,m,S){var T=c._random_fn();return T<(S-v)/(m-v)?v+u.sqrt(T*(m-v)*(S-v)):m-u.sqrt((1-T)*(m-v)*(m-S))},variance:function(v,m,S){return(v*v+m*m+S*S-v*m-v*S-m*S)/18}}),c.extend(c.arcsine,{pdf:function(v,m,S){return S<=m?NaN:v<=m||v>=S?0:2/u.PI*u.pow(u.pow(S-m,2)-u.pow(2*v-m-S,2),-.5)},cdf:function(v,m,S){return v<m?0:v<S?2/u.PI*u.asin(u.sqrt((v-m)/(S-m))):1},inv:function(v,m,S){return m+(.5-.5*u.cos(u.PI*v))*(S-m)},mean:function(v,m){return m<=v?NaN:(v+m)/2},median:function(v,m){return m<=v?NaN:(v+m)/2},mode:function(){throw new Error("mode is not yet implemented")},sample:function(v,m){return(v+m)/2+(m-v)/2*u.sin(2*u.PI*c.uniform.sample(0,1))},variance:function(v,m){return m<=v?NaN:u.pow(m-v,2)/8}}),c.extend(c.laplace,{pdf:function(v,m,S){return S<=0?0:u.exp(-u.abs(v-m)/S)/(2*S)},cdf:function(v,m,S){return S<=0?0:v<m?.5*u.exp((v-m)/S):1-.5*u.exp(-(v-m)/S)},mean:function(v){return v},median:function(v){return v},mode:function(v){return v},variance:function(v,m){return 2*m*m},sample:function(v,m){var S,T=c._random_fn()-.5;return v-m*((S=T)/u.abs(S))*u.log(1-2*u.abs(T))}}),c.extend(c.tukey,{cdf:function(v,m,S){var T=m,w=[.9894009349916499,.9445750230732326,.8656312023878318,.755404408355003,.6178762444026438,.45801677765722737,.2816035507792589,.09501250983763744],N=[.027152459411754096,.062253523938647894,.09515851168249279,.12462897125553388,.14959598881657674,.16915651939500254,.18260341504492358,.1894506104550685];if(v<=0)return 0;if(S<2||T<2)return NaN;if(!Number.isFinite(v))return 1;if(S>25e3)return C(v,1,T);var D,k=.5*S,L=k*u.log(S)-S*u.log(2)-c.gammaln(k),H=k-1,R=.25*S;D=S<=100?1:S<=800?.5:S<=5e3?.25:.125,L+=u.log(D);for(var B=0,Y=1;Y<=50;Y++){for(var K=0,se=(2*Y-1)*D,pe=1;pe<=16;pe++){var le,Ee;8<pe?(le=pe-8-1,Ee=L+H*u.log(se+w[le]*D)-(w[le]*D+se)*R):(le=pe-1,Ee=L+H*u.log(se-w[le]*D)+(w[le]*D-se)*R),Ee>=-30&&(K+=C(8<pe?v*u.sqrt(.5*(w[le]*D+se)):v*u.sqrt(.5*(-w[le]*D+se)),1,T)*N[le]*u.exp(Ee))}if(Y*D>=1&&K<=1e-14)break;B+=K}if(K>1e-14)throw new Error("tukey.cdf failed to converge");return B>1&&(B=1),B},inv:function(v,m,S){if(S<2||m<2)return NaN;if(v<0||v>1)return NaN;if(v===0)return 0;if(v===1)return 1/0;var T,w=function(H,R,B){var Y=.5-.5*H,K=u.sqrt(u.log(1/(Y*Y))),se=K+((((-453642210148e-16*K-.204231210125)*K-.342242088547)*K-1)*K+.322232421088)/((((.0038560700634*K+.10353775285)*K+.531103462366)*K+.588581570495)*K+.099348462606);B<120&&(se+=(se*se*se+se)/B/4);var pe=.8832-.2368*se;return B<120&&(pe+=-1.214/B+1.208*se/B),se*(pe*u.log(R-1)+1.4142)}(v,m,S),N=c.tukey.cdf(w,m,S)-v;T=N>0?u.max(0,w-1):w+1;for(var D,k=c.tukey.cdf(T,m,S)-v,L=1;L<50;L++)if(D=T-k*(T-w)/(k-N),N=k,w=T,D<0&&(D=0,k=-v),k=c.tukey.cdf(D,m,S)-v,T=D,u.abs(T-w)<1e-4)return D;throw new Error("tukey.inv failed to converge")}})}(l,Math),function(c,u){var g,C,v=Array.prototype.push,m=c.utils.isArray;function S(T){return m(T)||T instanceof c}c.extend({add:function(T,w){return S(w)?(S(w[0])||(w=[w]),c.map(T,function(N,D,k){return N+w[D][k]})):c.map(T,function(N){return N+w})},subtract:function(T,w){return S(w)?(S(w[0])||(w=[w]),c.map(T,function(N,D,k){return N-w[D][k]||0})):c.map(T,function(N){return N-w})},divide:function(T,w){return S(w)?(S(w[0])||(w=[w]),c.multiply(T,c.inv(w))):c.map(T,function(N){return N/w})},multiply:function(T,w){var N,D,k,L,H,R,B,Y;if(T.length===void 0&&w.length===void 0)return T*w;if(H=T.length,R=T[0].length,B=c.zeros(H,k=S(w)?w[0].length:R),Y=0,S(w)){for(;Y<k;Y++)for(N=0;N<H;N++){for(L=0,D=0;D<R;D++)L+=T[N][D]*w[D][Y];B[N][Y]=L}return H===1&&Y===1?B[0][0]:B}return c.map(T,function(K){return K*w})},outer:function(T,w){return c.multiply(T.map(function(N){return[N]}),[w])},dot:function(T,w){S(T[0])||(T=[T]),S(w[0])||(w=[w]);for(var N,D,k=T[0].length===1&&T.length!==1?c.transpose(T):T,L=w[0].length===1&&w.length!==1?c.transpose(w):w,H=[],R=0,B=k.length,Y=k[0].length;R<B;R++){for(H[R]=[],N=0,D=0;D<Y;D++)N+=k[R][D]*L[R][D];H[R]=N}return H.length===1?H[0]:H},pow:function(T,w){return c.map(T,function(N){return u.pow(N,w)})},exp:function(T){return c.map(T,function(w){return u.exp(w)})},log:function(T){return c.map(T,function(w){return u.log(w)})},abs:function(T){return c.map(T,function(w){return u.abs(w)})},norm:function(T,w){var N=0,D=0;for(isNaN(w)&&(w=2),S(T[0])&&(T=T[0]);D<T.length;D++)N+=u.pow(u.abs(T[D]),w);return u.pow(N,1/w)},angle:function(T,w){return u.acos(c.dot(T,w)/(c.norm(T)*c.norm(w)))},aug:function(T,w){var N,D=[];for(N=0;N<T.length;N++)D.push(T[N].slice());for(N=0;N<D.length;N++)v.apply(D[N],w[N]);return D},inv:function(T){for(var w,N=T.length,D=T[0].length,k=c.identity(N,D),L=c.gauss_jordan(T,k),H=[],R=0;R<N;R++)for(H[R]=[],w=D;w<L[0].length;w++)H[R][w-D]=L[R][w];return H},det:function T(w){if(w.length===2)return w[0][0]*w[1][1]-w[0][1]*w[1][0];for(var N=0,D=0;D<w.length;D++){for(var k=[],L=1;L<w.length;L++){k[L-1]=[];for(var H=0;H<w.length;H++)H<D?k[L-1][H]=w[L][H]:H>D&&(k[L-1][H-1]=w[L][H])}var R=D%2?-1:1;N+=T(k)*w[0][D]*R}return N},gauss_elimination:function(T,w){var N,D,k,L,H=0,R=0,B=T.length,Y=T[0].length,K=1,se=0,pe=[];for(N=(T=c.aug(T,w))[0].length,H=0;H<B;H++){for(D=T[H][H],R=H,L=H+1;L<Y;L++)D<u.abs(T[L][H])&&(D=T[L][H],R=L);if(R!=H)for(L=0;L<N;L++)k=T[H][L],T[H][L]=T[R][L],T[R][L]=k;for(R=H+1;R<B;R++)for(K=T[R][H]/T[H][H],L=H;L<N;L++)T[R][L]=T[R][L]-K*T[H][L]}for(H=B-1;H>=0;H--){for(se=0,R=H+1;R<=B-1;R++)se+=pe[R]*T[H][R];pe[H]=(T[H][N-1]-se)/T[H][H]}return pe},gauss_jordan:function(T,w){var N,D,k,L=c.aug(T,w),H=L.length,R=L[0].length,B=0;for(D=0;D<H;D++){var Y=D;for(k=D+1;k<H;k++)u.abs(L[k][D])>u.abs(L[Y][D])&&(Y=k);var K=L[D];for(L[D]=L[Y],L[Y]=K,k=D+1;k<H;k++)for(B=L[k][D]/L[D][D],N=D;N<R;N++)L[k][N]-=L[D][N]*B}for(D=H-1;D>=0;D--){for(B=L[D][D],k=0;k<D;k++)for(N=R-1;N>D-1;N--)L[k][N]-=L[D][N]*L[k][D]/B;for(L[D][D]/=B,N=H;N<R;N++)L[D][N]/=B}return L},triaUpSolve:function(T,w){var N,D=T[0].length,k=c.zeros(1,D)[0],L=!1;return w[0].length!=null&&(w=w.map(function(H){return H[0]}),L=!0),c.arange(D-1,-1,-1).forEach(function(H){N=c.arange(H+1,D).map(function(R){return k[R]*T[H][R]}),k[H]=(w[H]-c.sum(N))/T[H][H]}),L?k.map(function(H){return[H]}):k},triaLowSolve:function(T,w){var N,D=T[0].length,k=c.zeros(1,D)[0],L=!1;return w[0].length!=null&&(w=w.map(function(H){return H[0]}),L=!0),c.arange(D).forEach(function(H){N=c.arange(H).map(function(R){return T[H][R]*k[R]}),k[H]=(w[H]-c.sum(N))/T[H][H]}),L?k.map(function(H){return[H]}):k},lu:function(T){var w,N=T.length,D=c.identity(N),k=c.zeros(T.length,T[0].length);return c.arange(N).forEach(function(L){k[0][L]=T[0][L]}),c.arange(1,N).forEach(function(L){c.arange(L).forEach(function(H){w=c.arange(H).map(function(R){return D[L][R]*k[R][H]}),D[L][H]=(T[L][H]-c.sum(w))/k[H][H]}),c.arange(L,N).forEach(function(H){w=c.arange(L).map(function(R){return D[L][R]*k[R][H]}),k[L][H]=T[w.length][H]-c.sum(w)})}),[D,k]},cholesky:function(T){var w,N=T.length,D=c.zeros(T.length,T[0].length);return c.arange(N).forEach(function(k){w=c.arange(k).map(function(L){return u.pow(D[k][L],2)}),D[k][k]=u.sqrt(T[k][k]-c.sum(w)),c.arange(k+1,N).forEach(function(L){w=c.arange(k).map(function(H){return D[k][H]*D[L][H]}),D[L][k]=(T[k][L]-c.sum(w))/D[k][k]})}),D},gauss_jacobi:function(T,w,N,D){for(var k,L,H,R,B=0,Y=0,K=T.length,se=[],pe=[],le=[];B<K;B++)for(se[B]=[],pe[B]=[],le[B]=[],Y=0;Y<K;Y++)B>Y?(se[B][Y]=T[B][Y],pe[B][Y]=le[B][Y]=0):B<Y?(pe[B][Y]=T[B][Y],se[B][Y]=le[B][Y]=0):(le[B][Y]=T[B][Y],se[B][Y]=pe[B][Y]=0);for(H=c.multiply(c.multiply(c.inv(le),c.add(se,pe)),-1),L=c.multiply(c.inv(le),w),k=N,R=c.add(c.multiply(H,N),L),B=2;u.abs(c.norm(c.subtract(R,k)))>D;)k=R,R=c.add(c.multiply(H,k),L),B++;return R},gauss_seidel:function(T,w,N,D){for(var k,L,H,R,B,Y=0,K=T.length,se=[],pe=[],le=[];Y<K;Y++)for(se[Y]=[],pe[Y]=[],le[Y]=[],k=0;k<K;k++)Y>k?(se[Y][k]=T[Y][k],pe[Y][k]=le[Y][k]=0):Y<k?(pe[Y][k]=T[Y][k],se[Y][k]=le[Y][k]=0):(le[Y][k]=T[Y][k],se[Y][k]=pe[Y][k]=0);for(R=c.multiply(c.multiply(c.inv(c.add(le,se)),pe),-1),H=c.multiply(c.inv(c.add(le,se)),w),L=N,B=c.add(c.multiply(R,N),H),Y=2;u.abs(c.norm(c.subtract(B,L)))>D;)L=B,B=c.add(c.multiply(R,L),H),Y+=1;return B},SOR:function(T,w,N,D,k){for(var L,H,R,B,Y,K=0,se=T.length,pe=[],le=[],Ee=[];K<se;K++)for(pe[K]=[],le[K]=[],Ee[K]=[],L=0;L<se;L++)K>L?(pe[K][L]=T[K][L],le[K][L]=Ee[K][L]=0):K<L?(le[K][L]=T[K][L],pe[K][L]=Ee[K][L]=0):(Ee[K][L]=T[K][L],pe[K][L]=le[K][L]=0);for(B=c.multiply(c.inv(c.add(Ee,c.multiply(pe,k))),c.subtract(c.multiply(Ee,1-k),c.multiply(le,k))),R=c.multiply(c.multiply(c.inv(c.add(Ee,c.multiply(pe,k))),w),k),H=N,Y=c.add(c.multiply(B,N),R),K=2;u.abs(c.norm(c.subtract(Y,H)))>D;)H=Y,Y=c.add(c.multiply(B,H),R),K++;return Y},householder:function(T){for(var w,N,D,k,L=T.length,H=T[0].length,R=0,B=[],Y=[];R<L-1;R++){for(w=0,k=R+1;k<H;k++)w+=T[k][R]*T[k][R];for(w=(T[R+1][R]>0?-1:1)*u.sqrt(w),N=u.sqrt((w*w-T[R+1][R]*w)/2),(B=c.zeros(L,1))[R+1][0]=(T[R+1][R]-w)/(2*N),D=R+2;D<L;D++)B[D][0]=T[D][R]/(2*N);Y=c.subtract(c.identity(L,H),c.multiply(c.multiply(B,c.transpose(B)),2)),T=c.multiply(Y,c.multiply(T,Y))}return T},QR:(g=c.sum,C=c.arange,function(T){var w,N,D,k=T.length,L=T[0].length,H=c.zeros(L,L);for(T=c.copy(T),N=0;N<L;N++){for(H[N][N]=u.sqrt(g(C(k).map(function(R){return T[R][N]*T[R][N]}))),w=0;w<k;w++)T[w][N]=T[w][N]/H[N][N];for(D=N+1;D<L;D++)for(H[N][D]=g(C(k).map(function(R){return T[R][N]*T[R][D]})),w=0;w<k;w++)T[w][D]=T[w][D]-T[w][N]*H[N][D]}return[T,H]}),lstsq:function(T,w){var N=!1;w[0].length===void 0&&(w=w.map(function(se){return[se]}),N=!0);var D=c.QR(T),k=D[0],L=D[1],H=T[0].length,R=c.slice(k,{col:{end:H}}),B=function(se){var pe=(se=c.copy(se)).length,le=c.identity(pe);return c.arange(pe-1,-1,-1).forEach(function(Ee){c.sliceAssign(le,{row:Ee},c.divide(c.slice(le,{row:Ee}),se[Ee][Ee])),c.sliceAssign(se,{row:Ee},c.divide(c.slice(se,{row:Ee}),se[Ee][Ee])),c.arange(Ee).forEach(function(Ne){var _e=c.multiply(se[Ne][Ee],-1),me=c.slice(se,{row:Ne}),Ke=c.multiply(c.slice(se,{row:Ee}),_e);c.sliceAssign(se,{row:Ne},c.add(me,Ke));var Ye=c.slice(le,{row:Ne}),pt=c.multiply(c.slice(le,{row:Ee}),_e);c.sliceAssign(le,{row:Ne},c.add(Ye,pt))})}),le}(c.slice(L,{row:{end:H}})),Y=c.transpose(R);Y[0].length===void 0&&(Y=[Y]);var K=c.multiply(c.multiply(B,Y),w);return K.length===void 0&&(K=[[K]]),N?K.map(function(se){return se[0]}):K},jacobi:function(T){for(var w,N,D,k,L,H,R,B=1,Y=T.length,K=c.identity(Y,Y),se=[];B===1;){for(L=T[0][1],D=0,k=1,w=0;w<Y;w++)for(N=0;N<Y;N++)w!=N&&L<u.abs(T[w][N])&&(L=u.abs(T[w][N]),D=w,k=N);for(H=T[D][D]===T[k][k]?T[D][k]>0?u.PI/4:-u.PI/4:u.atan(2*T[D][k]/(T[D][D]-T[k][k]))/2,(R=c.identity(Y,Y))[D][D]=u.cos(H),R[D][k]=-u.sin(H),R[k][D]=u.sin(H),R[k][k]=u.cos(H),K=c.multiply(K,R),T=c.multiply(c.multiply(c.inv(R),T),R),B=0,w=1;w<Y;w++)for(N=1;N<Y;N++)w!=N&&u.abs(T[w][N])>.001&&(B=1)}for(w=0;w<Y;w++)se.push(T[w][w]);return[K,se]},rungekutta:function(T,w,N,D,k,L){var H,R,B;if(L===2)for(;D<=N;)k+=((H=w*T(D,k))+(R=w*T(D+w,k+H)))/2,D+=w;if(L===4)for(;D<=N;)k+=((H=w*T(D,k))+2*(R=w*T(D+w/2,k+H/2))+2*(B=w*T(D+w/2,k+R/2))+w*T(D+w,k+B))/6,D+=w;return k},romberg:function(T,w,N,D){for(var k,L,H,R,B,Y=0,K=(N-w)/2,se=[],pe=[],le=[];Y<D/2;){for(B=T(w),H=w,R=0;H<=N;H+=K,R++)se[R]=H;for(k=se.length,H=1;H<k-1;H++)B+=(H%2!=0?4:2)*T(se[H]);B=K/3*(B+T(N)),le[Y]=B,K/=2,Y++}for(L=le.length,k=1;L!==1;){for(H=0;H<L-1;H++)pe[H]=(u.pow(4,k)*le[H+1]-le[H])/(u.pow(4,k)-1);L=pe.length,le=pe,pe=[],k++}return le},richardson:function(T,w,N,D){function k(Ee,Ne){for(var _e,me=0,Ke=Ee.length;me<Ke;me++)Ee[me]===Ne&&(_e=me);return _e}for(var L,H,R,B,Y,K=u.abs(N-T[k(T,N)+1]),se=0,pe=[],le=[];D>=K;)L=k(T,N+D),H=k(T,N),pe[se]=(w[L]-2*w[H]+w[2*H-L])/(D*D),D/=2,se++;for(B=pe.length,R=1;B!=1;){for(Y=0;Y<B-1;Y++)le[Y]=(u.pow(4,R)*pe[Y+1]-pe[Y])/(u.pow(4,R)-1);B=le.length,pe=le,le=[],R++}return pe},simpson:function(T,w,N,D){for(var k,L=(N-w)/D,H=T(w),R=[],B=w,Y=0,K=1;B<=N;B+=L,Y++)R[Y]=B;for(k=R.length;K<k-1;K++)H+=(K%2!=0?4:2)*T(R[K]);return L/3*(H+T(N))},hermite:function(T,w,N,D){for(var k,L=T.length,H=0,R=0,B=[],Y=[],K=[],se=[];R<L;R++){for(B[R]=1,k=0;k<L;k++)R!=k&&(B[R]*=(D-T[k])/(T[R]-T[k]));for(Y[R]=0,k=0;k<L;k++)R!=k&&(Y[R]+=1/(T[R]-T[k]));K[R]=(1-2*(D-T[R])*Y[R])*(B[R]*B[R]),se[R]=(D-T[R])*(B[R]*B[R]),H+=K[R]*w[R]+se[R]*N[R]}return H},lagrange:function(T,w,N){for(var D,k,L=0,H=0,R=T.length;H<R;H++){for(k=w[H],D=0;D<R;D++)H!=D&&(k*=(N-T[D])/(T[H]-T[D]));L+=k}return L},cubic_spline:function(T,w,N){for(var D,k,L=T.length,H=0,R=[],B=[],Y=[],K=[],se=[],pe=[];H<L-1;H++)K[H]=T[H+1]-T[H];for(Y[0]=0,H=1;H<L-1;H++)Y[H]=3/K[H]*(w[H+1]-w[H])-3/K[H-1]*(w[H]-w[H-1]);for(H=1;H<L-1;H++)R[H]=[],B[H]=[],R[H][H-1]=K[H-1],R[H][H]=2*(K[H-1]+K[H]),R[H][H+1]=K[H],B[H][0]=Y[H];for(k=c.multiply(c.inv(R),B),D=0;D<L-1;D++)se[D]=(w[D+1]-w[D])/K[D]-K[D]*(k[D+1][0]+2*k[D][0])/3,pe[D]=(k[D+1][0]-k[D][0])/(3*K[D]);for(D=0;D<L&&!(T[D]>N);D++);return w[D-=1]+(N-T[D])*se[D]+c.sq(N-T[D])*k[D]+(N-T[D])*c.sq(N-T[D])*pe[D]},gauss_quadrature:function(){throw new Error("gauss_quadrature not yet implemented")},PCA:function(T){var w,N,D,k,L,H=T.length,R=T[0].length,B=0,Y=[],K=[],se=[],pe=[],le=[],Ee=[],Ne=[];for(B=0;B<H;B++)Y[B]=c.sum(T[B])/R;for(B=0;B<R;B++)for(le[B]=[],w=0;w<H;w++)le[B][w]=T[w][B]-Y[w];for(le=c.transpose(le),B=0;B<H;B++)for(Ee[B]=[],w=0;w<H;w++)Ee[B][w]=c.dot([le[B]],[le[w]])/(R-1);for(L=(D=c.jacobi(Ee))[0],K=D[1],Ne=c.transpose(L),B=0;B<K.length;B++)for(w=B;w<K.length;w++)K[B]<K[w]&&(N=K[B],K[B]=K[w],K[w]=N,se=Ne[B],Ne[B]=Ne[w],Ne[w]=se);for(k=c.transpose(le),B=0;B<H;B++)for(pe[B]=[],w=0;w<k.length;w++)pe[B][w]=c.dot([Ne[B]],[k[w]]);return[T,K,Ne,pe]}}),function(T){for(var w=0;w<T.length;w++)(function(N){c.fn[N]=function(D,k){var L=this;return k?(setTimeout(function(){k.call(L,c.fn[N].call(L,D))},15),this):typeof c[N](this,D)=="number"?c[N](this,D):c(c[N](this,D))}})(T[w])}("add divide multiply subtract dot pow exp log abs norm angle".split(" "))}(l,Math),function(c,u){var g=[].slice,C=c.utils.isNumber,v=c.utils.isArray;function m(S,T,w,N){if(S>1||w>1||S<=0||w<=0)throw new Error("Proportions should be greater than 0 and less than 1");var D=(S*T+w*N)/(T+N);return(S-w)/u.sqrt(D*(1-D)*(1/T+1/N))}c.extend({zscore:function(){var S=g.call(arguments);return C(S[1])?(S[0]-S[1])/S[2]:(S[0]-c.mean(S[1]))/c.stdev(S[1],S[2])},ztest:function(){var S,T=g.call(arguments);return v(T[1])?(S=c.zscore(T[0],T[1],T[3]),T[2]===1?c.normal.cdf(-u.abs(S),0,1):2*c.normal.cdf(-u.abs(S),0,1)):T.length>2?(S=c.zscore(T[0],T[1],T[2]),T[3]===1?c.normal.cdf(-u.abs(S),0,1):2*c.normal.cdf(-u.abs(S),0,1)):(S=T[0],T[1]===1?c.normal.cdf(-u.abs(S),0,1):2*c.normal.cdf(-u.abs(S),0,1))}}),c.extend(c.fn,{zscore:function(S,T){return(S-this.mean())/this.stdev(T)},ztest:function(S,T,w){var N=u.abs(this.zscore(S,w));return T===1?c.normal.cdf(-N,0,1):2*c.normal.cdf(-N,0,1)}}),c.extend({tscore:function(){var S=g.call(arguments);return S.length===4?(S[0]-S[1])/(S[2]/u.sqrt(S[3])):(S[0]-c.mean(S[1]))/(c.stdev(S[1],!0)/u.sqrt(S[1].length))},ttest:function(){var S,T=g.call(arguments);return T.length===5?(S=u.abs(c.tscore(T[0],T[1],T[2],T[3])),T[4]===1?c.studentt.cdf(-S,T[3]-1):2*c.studentt.cdf(-S,T[3]-1)):C(T[1])?(S=u.abs(T[0]),T[2]==1?c.studentt.cdf(-S,T[1]-1):2*c.studentt.cdf(-S,T[1]-1)):(S=u.abs(c.tscore(T[0],T[1])),T[2]==1?c.studentt.cdf(-S,T[1].length-1):2*c.studentt.cdf(-S,T[1].length-1))}}),c.extend(c.fn,{tscore:function(S){return(S-this.mean())/(this.stdev(!0)/u.sqrt(this.cols()))},ttest:function(S,T){return T===1?1-c.studentt.cdf(u.abs(this.tscore(S)),this.cols()-1):2*c.studentt.cdf(-u.abs(this.tscore(S)),this.cols()-1)}}),c.extend({anovafscore:function(){var S,T,w,N,D,k,L,H,R=g.call(arguments);if(R.length===1){for(D=new Array(R[0].length),L=0;L<R[0].length;L++)D[L]=R[0][L];R=D}for(T=new Array,L=0;L<R.length;L++)T=T.concat(R[L]);for(w=c.mean(T),S=0,L=0;L<R.length;L++)S+=R[L].length*u.pow(c.mean(R[L])-w,2);for(S/=R.length-1,k=0,L=0;L<R.length;L++)for(N=c.mean(R[L]),H=0;H<R[L].length;H++)k+=u.pow(R[L][H]-N,2);return S/(k/(T.length-R.length))},anovaftest:function(){var S,T,w,N,D=g.call(arguments);if(C(D[0]))return 1-c.centralF.cdf(D[0],D[1],D[2]);var k=c.anovafscore(D);for(S=D.length-1,w=0,N=0;N<D.length;N++)w+=D[N].length;return T=w-S-1,1-c.centralF.cdf(k,S,T)},ftest:function(S,T,w){return 1-c.centralF.cdf(S,T,w)}}),c.extend(c.fn,{anovafscore:function(){return c.anovafscore(this.toArray())},anovaftes:function(){var S,T=0;for(S=0;S<this.length;S++)T+=this[S].length;return c.ftest(this.anovafscore(),this.length-1,T-this.length)}}),c.extend({qscore:function(){var S,T,w,N,D,k=g.call(arguments);return C(k[0])?(S=k[0],T=k[1],w=k[2],N=k[3],D=k[4]):(S=c.mean(k[0]),T=c.mean(k[1]),w=k[0].length,N=k[1].length,D=k[2]),u.abs(S-T)/(D*u.sqrt((1/w+1/N)/2))},qtest:function(){var S,T=g.call(arguments);T.length===3?(S=T[0],T=T.slice(1)):T.length===7?(S=c.qscore(T[0],T[1],T[2],T[3],T[4]),T=T.slice(5)):(S=c.qscore(T[0],T[1],T[2]),T=T.slice(3));var w=T[0],N=T[1];return 1-c.tukey.cdf(S,N,w-N)},tukeyhsd:function(S){for(var T=c.pooledstdev(S),w=S.map(function(R){return c.mean(R)}),N=S.reduce(function(R,B){return R+B.length},0),D=[],k=0;k<S.length;++k)for(var L=k+1;L<S.length;++L){var H=c.qtest(w[k],w[L],S[k].length,S[L].length,T,N,S.length);D.push([[k,L],H])}return D}}),c.extend({normalci:function(){var S,T=g.call(arguments),w=new Array(2);return S=T.length===4?u.abs(c.normal.inv(T[1]/2,0,1)*T[2]/u.sqrt(T[3])):u.abs(c.normal.inv(T[1]/2,0,1)*c.stdev(T[2])/u.sqrt(T[2].length)),w[0]=T[0]-S,w[1]=T[0]+S,w},tci:function(){var S,T=g.call(arguments),w=new Array(2);return S=T.length===4?u.abs(c.studentt.inv(T[1]/2,T[3]-1)*T[2]/u.sqrt(T[3])):u.abs(c.studentt.inv(T[1]/2,T[2].length-1)*c.stdev(T[2],!0)/u.sqrt(T[2].length)),w[0]=T[0]-S,w[1]=T[0]+S,w},significant:function(S,T){return S<T}}),c.extend(c.fn,{normalci:function(S,T){return c.normalci(S,T,this.toArray())},tci:function(S,T){return c.tci(S,T,this.toArray())}}),c.extend(c.fn,{oneSidedDifferenceOfProportions:function(S,T,w,N){var D=m(S,T,w,N);return c.ztest(D,1)},twoSidedDifferenceOfProportions:function(S,T,w,N){var D=m(S,T,w,N);return c.ztest(D,2)}})}(l,Math),l.models=function(){function c(u,g){var C=u.length,v=g[0].length-1,m=C-v-1,S=l.lstsq(g,u),T=l.multiply(g,S.map(function(H){return[H]})).map(function(H){return H[0]}),w=l.subtract(u,T),N=l.mean(u),D=l.sum(T.map(function(H){return Math.pow(H-N,2)})),k=l.sum(u.map(function(H,R){return Math.pow(H-T[R],2)})),L=D+k;return{exog:g,endog:u,nobs:C,df_model:v,df_resid:m,coef:S,predict:T,resid:w,ybar:N,SST:L,SSE:D,SSR:k,R2:D/L}}return{ols:function(u,g){var C=c(u,g),v=function(T){var w,N,D=(w=T.exog,N=w[0].length,l.arange(N).map(function(K){var se=l.arange(N).filter(function(pe){return pe!==K});return c(l.col(w,K).map(function(pe){return pe[0]}),l.col(w,se))})),k=Math.sqrt(T.SSR/T.df_resid),L=D.map(function(K){var se=K.SST,pe=K.R2;return k/Math.sqrt(se*(1-pe))}),H=T.coef.map(function(K,se){return(K-0)/L[se]}),R=H.map(function(K){var se=l.studentt.cdf(K,T.df_resid);return 2*(se>.5?1-se:se)}),B=l.studentt.inv(.975,T.df_resid),Y=T.coef.map(function(K,se){var pe=B*L[se];return[K-pe,K+pe]});return{se:L,t:H,p:R,sigmaHat:k,interval95:Y}}(C),m=function(T){var w,N,D,k=T.R2/T.df_model/((1-T.R2)/T.df_resid);return{F_statistic:k,pvalue:1-(w=k,N=T.df_model,D=T.df_resid,l.beta.cdf(w/(D/N+w),N/2,D/2))}}(C),S=1-(1-C.R2)*((C.nobs-1)/C.df_resid);return C.t=v,C.f=m,C.adjust_R2=S,C}}}(),l.extend({buildxmatrix:function(){for(var c=new Array(arguments.length),u=0;u<arguments.length;u++)c[u]=[1].concat(arguments[u]);return l(c)},builddxmatrix:function(){for(var c=new Array(arguments[0].length),u=0;u<arguments[0].length;u++)c[u]=[1].concat(arguments[0][u]);return l(c)},buildjxmatrix:function(c){for(var u=new Array(c.length),g=0;g<c.length;g++)u[g]=c[g];return l.builddxmatrix(u)},buildymatrix:function(c){return l(c).transpose()},buildjymatrix:function(c){return c.transpose()},matrixmult:function(c,u){var g,C,v,m,S;if(c.cols()==u.rows()){if(u.rows()>1){for(m=[],g=0;g<c.rows();g++)for(m[g]=[],C=0;C<u.cols();C++){for(S=0,v=0;v<c.cols();v++)S+=c.toArray()[g][v]*u.toArray()[v][C];m[g][C]=S}return l(m)}for(m=[],g=0;g<c.rows();g++)for(m[g]=[],C=0;C<u.cols();C++){for(S=0,v=0;v<c.cols();v++)S+=c.toArray()[g][v]*u.toArray()[C];m[g][C]=S}return l(m)}},regress:function(c,u){var g=l.xtranspxinv(c),C=c.transpose(),v=l.matrixmult(l(g),C);return l.matrixmult(v,u)},regresst:function(c,u,g){var C=l.regress(c,u),v={anova:{}},m=l.jMatYBar(c,C);v.yBar=m;var S=u.mean();v.anova.residuals=l.residuals(u,m),v.anova.ssr=l.ssr(m,S),v.anova.msr=v.anova.ssr/(c[0].length-1),v.anova.sse=l.sse(u,m),v.anova.mse=v.anova.sse/(u.length-(c[0].length-1)-1),v.anova.sst=l.sst(u,S),v.anova.mst=v.anova.sst/(u.length-1),v.anova.r2=1-v.anova.sse/v.anova.sst,v.anova.r2<0&&(v.anova.r2=0),v.anova.fratio=v.anova.msr/v.anova.mse,v.anova.pvalue=l.anovaftest(v.anova.fratio,c[0].length-1,u.length-(c[0].length-1)-1),v.anova.rmse=Math.sqrt(v.anova.mse),v.anova.r2adj=1-v.anova.mse/v.anova.mst,v.anova.r2adj<0&&(v.anova.r2adj=0),v.stats=new Array(c[0].length);for(var T,w,N,D=l.xtranspxinv(c),k=0;k<C.length;k++)T=Math.sqrt(v.anova.mse*Math.abs(D[k][k])),w=Math.abs(C[k]/T),N=l.ttest(w,u.length-c[0].length-1,g),v.stats[k]=[C[k],T,w,N];return v.regress=C,v},xtranspx:function(c){return l.matrixmult(c.transpose(),c)},xtranspxinv:function(c){var u=l.matrixmult(c.transpose(),c);return l.inv(u)},jMatYBar:function(c,u){var g=l.matrixmult(c,u);return new l(g)},residuals:function(c,u){return l.matrixsubtract(c,u)},ssr:function(c,u){for(var g=0,C=0;C<c.length;C++)g+=Math.pow(c[C]-u,2);return g},sse:function(c,u){for(var g=0,C=0;C<c.length;C++)g+=Math.pow(c[C]-u[C],2);return g},sst:function(c,u){for(var g=0,C=0;C<c.length;C++)g+=Math.pow(c[C]-u,2);return g},matrixsubtract:function(c,u){for(var g=new Array(c.length),C=0;C<c.length;C++){g[C]=new Array(c[C].length);for(var v=0;v<c[C].length;v++)g[C][v]=c[C][v]-u[C][v]}return l(g)}}),l.jStat=l,l)},960:function(a,l,c){const u=c(592);a.exports=function(g){function C(k,L){const H=L.split(".");let R=k;for(const B of H){if(R==null)return;R=R[B]}return R}for(let k=0;k<Object.keys(u).length;k++){let L,H=Object.keys(u)[k],R=[];if(typeof u[H]=="object"){R=Object.keys(u[H]),L=Object.values(u[H]);for(let B=0;B<L.length;B++)if(typeof L[B]=="object"){let Y=R[B];u[H][Y]&&(R=[...R,...Object.keys(u[H][Y]).map(K=>Y+"."+K)],R.splice(R.indexOf(Y),1))}}if(R.length<1)g[H]=u[H];else for(let B=0;B<R.length;B++)typeof C(u[H],R[B])=="function"&&(g[H]=C(u[H],R[B]))}let v=function(k){return typeof k=="number"&&(k=parseInt(k)),k},m=null,S=null,T=null;g.TABLE=function(){return T},g.COLUMN=g.COL=function(){return T.tracking&&T.tracking.push(D.getColumnNameFromCoords(v(m),v(S))),v(m)+1},g.ROW=function(){return T.tracking&&T.tracking.push(D.getColumnNameFromCoords(v(m),v(S))),v(S)+1},g.CELL=function(){return D.getColumnNameFromCoords(m,S)},g.VALUE=function(k,L,H){return T.getValueFromCoords(v(k)-1,v(L)-1,H)},g.THISROWCELL=function(k){return T.getValueFromCoords(v(k)-1,v(S))};const w=function(k,L){for(let H=0;H<k.length;H++){let R=D.getTokensFromRange(k[H]);L=L.replace(k[H],"["+R.join(",")+"]")}return L},N=function(k){return typeof k=="string"&&(k=k.trim()),!isNaN(k)&&k!==null&&k!==""},D=function(k,L,H,R,B){T=B,m=H,S=R;let Y="",K={};if(L)if(L.size){let le,Ee=null;L.forEach(function(Ne,_e){le=_e.replace(/!/g,"."),le.indexOf(".")!==-1&&(le=le.split("."),K[le[0]]=!0)}),le=Object.keys(K);for(let Ne=0;Ne<le.length;Ne++)Y+="var "+le[Ne]+" = {};";L.forEach(function(Ne,_e){le=_e.replace(/!/g,"."),Ne===null||N(Ne)||(Ee=Ne.match(/(('.*?'!)|(\w*!))?(\$?[A-Z]+\$?[0-9]*):(\$?[A-Z]+\$?[0-9]*)?/g),Ee&&Ee.length&&(Ne=updateRanges(Ee,Ne))),le.indexOf(".")>0?Y+=le+" = "+L.get(_e)+`;
`:Y+="var "+le+" = "+Ne+`;
`})}else{let le=Object.keys(L);if(le.length){let Ee,Ne={};for(let _e=0;_e<le.length;_e++)if(Ee=le[_e].replace(/\!/g,"."),Ee.indexOf(".")>0){let me=me.split(".");Ne[me[0]]={}}Ee=Object.keys(Ne);for(let _e=0;_e<Ee.length;_e++)Y+="var "+Ee[_e]+" = {};";for(let _e=0;_e<le.length;_e++){if(Ee=le[_e].replace(/!/g,"."),L[le[_e]]!==null&&!N(L[le[_e]])){let me=L[le[_e]].match(/(('.*?'!)|(\w*!))?(\$?[A-Z]+\$?[0-9]*):(\$?[A-Z]+\$?[0-9]*)?/g);me&&me.length&&(L[le[_e]]=w(me,L[le[_e]]))}Ee.indexOf(".")>0?Y+=Ee+" = "+L[le[_e]]+`;
`:Y+="var "+Ee+" = "+L[le[_e]]+`;
`}}}let se=(k=function(le,Ee){let Ne="",_e=0,me=["=","!",">","<"];for(let Ke=0;Ke<le.length;Ke++)le[Ke]==='"'&&(_e=_e===0?1:0),_e===1?Ne+=le[Ke]:(Ne+=le[Ke].toUpperCase(),Ke>0&&le[Ke]==="="&&me.indexOf(le[Ke-1])===-1&&me.indexOf(le[Ke+1])===-1&&(Ne+="="));return Ne=Ne.replace(/\^/g,"**"),Ne=Ne.replace(/<>/g,"!="),Ne=Ne.replace(/&/g,"+"),Ne=Ne.replace(/\$/g,""),Ne}(k=(k=k.replace(/\$/g,"")).replace(/!/g,"."))).match(/(('.*?'!)|(\w*!))?(\$?[A-Z]+\$?[0-9]*):(\$?[A-Z]+\$?[0-9]*)?/g);se&&se.length&&(k=w(se,k));let pe=new Function(Y+"; return "+k)();return pe===null&&(pe=0),pe};return D.getColumnNameFromCoords=function(k,L){return R="",(H=parseInt(k))>701?(R+=String.fromCharCode(64+parseInt(H/676)),R+=String.fromCharCode(64+parseInt(H%676/26))):H>25&&(R+=String.fromCharCode(64+parseInt(H/26))),R+String.fromCharCode(65+H%26)+(parseInt(L)+1);var H,R},D.getCoordsFromColumnName=function(k){var L=/^[a-zA-Z]+/.exec(k);if(L){for(var H=0,R=0;R<L[0].length;R++)H+=parseInt(L[0].charCodeAt(R)-64)*Math.pow(26,L[0].length-1-R);--H<0&&(H=0);var B=parseInt(/[0-9]+$/.exec(k))||null;return B>0&&B--,[H,B]}},D.getRangeFromTokens=function(k){k=k.filter(function(B){return B!="#REF!"});for(var L="",H="",R=0;R<k.length;R++)k[R].indexOf(".")>=0?L=".":k[R].indexOf("!")>=0&&(L="!"),L&&(H=k[R].split(L),k[R]=H[1],H=H[0]+L);return k.sort(function(B,Y){var K=Helpers.getCoordsFromColumnName(B),se=Helpers.getCoordsFromColumnName(Y);return K[1]>se[1]?1:K[1]<se[1]?-1:K[0]>se[0]?1:K[0]<se[0]?-1:0}),k.length?H+(k[0]+":")+k[k.length-1]:"#REF!"},D.getTokensFromRange=function(k){if(k.indexOf(".")>0){var L=k.split(".");k=L[1],L=L[0]+"."}else k.indexOf("!")>0?(L=k.split("!"),k=L[1],L=L[0]+"!"):L="";k=k.split(":");var H=D.getCoordsFromColumnName(k[0]),R=D.getCoordsFromColumnName(k[1]);if(H[0]<=R[0])var B=H[0],Y=R[0];else B=R[0],Y=H[0];if(H[1]===null&&R[1]==null)for(var K=null,se=null,pe=Object.keys(vars),le=0;le<pe.length;le++){var Ee=D.getCoordsFromColumnName(pe[le]);Ee[0]===H[0]&&(K===null||Ee[1]<K)&&(K=Ee[1]),Ee[0]===R[0]&&(se===null||Ee[1]>se)&&(se=Ee[1])}else H[1]<=R[1]?(K=H[1],se=R[1]):(K=R[1],se=H[1]);for(var Ne=[],_e=K;_e<=se;_e++){var me=[];for(le=B;le<=Y;le++)me.push(L+D.getColumnNameFromCoords(le,_e));Ne.push(me)}return Ne},D.setFormula=function(k){let L=Object.keys(k);for(let H=0;H<L.length;H++)typeof k[L[H]]=="function"&&(g[L[H]]=k[L[H]])},D.basic=!0,D}(typeof window>"u"?c.g:window)},592:function(a,l,c){var u=c(162),g=c(765);const C=new Error("#NULL!"),v=new Error("#DIV/0!"),m=new Error("#VALUE!"),S=new Error("#REF!"),T=new Error("#NAME?"),w=new Error("#NUM!"),N=new Error("#N/A"),D=new Error("#ERROR!"),k=new Error("#GETTING_DATA");var L=Object.freeze({__proto__:null,data:k,div0:v,error:D,na:N,name:T,nil:C,num:w,ref:S,value:m});function H(d){const b=[];return R(d,j=>{b.push(j)}),b}function R(d,b){let j=-1;const I=d.length;for(;++j<I&&b(d[j],j,d)!==!1;);return d}function B(d){let b,j=d.length;for(;j--;)if(b=d[j],typeof b!="number")if(b!==!0)if(b!==!1){if(typeof b=="string"){const I=te(b);d[j]=I instanceof Error?0:I}}else d[j]=0;else d[j]=1;return d}function Y(d,b){if(!d)return m;d.every(U=>Array.isArray(U))&&d.length!==0||(d=[[...d]]),d.map((U,X)=>{U.map((oe,Se)=>{oe||(d[X][Se]=0)})});const j=d.reduce((U,X,oe)=>X.length>d[U].length?oe:U,0),I=d[j].length;return d.map(U=>[...U,...Array(I-U.length).fill(b||0)])}function K(){let d;if(arguments.length===1){const j=arguments[0];d=(b=j)!=null&&typeof b.length=="number"&&typeof b!="string"?H.apply(null,arguments):[j]}else d=Array.from(arguments);for(var b;!pe(d);)d=se(d);return d}function se(d){return d&&d.reduce?d.reduce((b,j)=>{const I=Array.isArray(b),U=Array.isArray(j);return I&&U?b.concat(j):I?(b.push(j),b):U?[b].concat(j):[b,j]}):[d]}function pe(d){if(!d)return!1;for(let b=0;b<d.length;++b)if(Array.isArray(d[b]))return!1;return!0}function le(d,b){return b=b||1,d&&typeof d.slice=="function"?d.slice(b):d}function Ee(d){return d?d[0].map((b,j)=>d.map(I=>I[j])):m}function Ne(d,b){let j=null;return R(d,(I,U)=>{if(I[0]===b)return j=U,!1}),j??m}function _e(){for(let d=0;d<arguments.length;d++)if(arguments[d]instanceof Error)return arguments[d]}function me(){let d=arguments.length;for(;d--;)if(arguments[d]instanceof Error)return!0;return!1}function Ke(d){return Math.round(d*1e14)/1e14}function Ye(){return K.apply(null,arguments).filter(d=>typeof d=="number")}function pt(d){if(typeof d=="boolean"||d instanceof Error)return d;if(typeof d=="number")return d!==0;if(typeof d=="string"){const b=d.toUpperCase();if(b==="TRUE")return!0;if(b==="FALSE")return!1}return d instanceof Date&&!isNaN(d)||m}function ut(d){if(!isNaN(d)){if(d instanceof Date)return new Date(d);const b=parseFloat(d);return b<0||b>=2958466?w:function(j){j<60&&(j+=1);const I=Math.floor(j-25569),U=new Date(86400*I*1e3),X=j-Math.floor(j)+1e-7;let oe=Math.floor(86400*X);const Se=oe%60;oe-=Se;const ke=Math.floor(oe/3600),Qe=Math.floor(oe/60)%60;let bt=U.getUTCDate(),At=U.getUTCMonth();return j>=60&&j<61&&(bt=29,At=1),new Date(U.getUTCFullYear(),At,bt,ke,Qe,Se)}(b)}return typeof d!="string"||(d=/(\d{4})-(\d\d?)-(\d\d?)$/.test(d)?new Date(d+"T00:00:00.000"):new Date(d),isNaN(d))?m:d}function It(d){let b,j=d.length;for(;j--;){if(b=ut(d[j]),b===m)return b;d[j]=b}return d}function te(d){return d instanceof Error?d:d==null?0:(typeof d=="boolean"&&(d=+d),isNaN(d)||d===""?m:parseFloat(d))}function ot(d){let b,j;if(!d||(b=d.length)===0)return m;for(;b--;){if(d[b]instanceof Error)return d[b];if(j=te(d[b]),j instanceof Error)return j;d[b]=j}return d}function St(d){return d instanceof Error?d:d==null?"":d.toString()}function Gt(){let d=arguments.length;for(;d--;)if(typeof arguments[d]=="string")return!0;return!1}function _t(d){return d!=null}const Ze="=",et=[">",">=","<","<=","=","<>"],ht="operator",Tt="literal",jt=[ht,Tt],ge=ht,Te=Tt;function Ie(d,b){if(jt.indexOf(b)===-1)throw new Error("Unsupported token type: "+b);return{value:d,type:b}}function $e(d){return function(b){let j="";const I=[];for(let U=0;U<b.length;U++){const X=b[U];U===0&&et.indexOf(X)>=0?I.push(Ie(X,ge)):j+=X}return j.length>0&&I.push(Ie(function(U){return typeof U!="string"||/^\d+(\.\d+)?$/.test(U)&&(U=U.indexOf(".")===-1?parseInt(U,10):parseFloat(U)),U}(j),Te)),I.length>0&&I[0].type!==ge&&I.unshift(Ie(Ze,ge)),I}(function(b){const j=b.length,I=[];let U=0,X="",oe="";for(;U<j;){const Se=b.charAt(U);switch(Se){case">":case"<":case"=":oe+=Se,X.length>0&&(I.push(X),X="");break;default:oe.length>0&&(I.push(oe),oe=""),X+=Se}U++}return X.length>0&&I.push(X),oe.length>0&&I.push(oe),I}(d))}const Be=function(d){const b=[];let j;for(let I=0;I<d.length;I++){const U=d[I];switch(U.type){case ge:j=U.value;break;case Te:b.push(U.value)}}return function(I,U){let X=!1;switch(U){case">":X=I[0]>I[1];break;case">=":X=I[0]>=I[1];break;case"<":X=I[0]<I[1];break;case"<=":X=I[0]<=I[1];break;case"=":X=I[0]==I[1];break;case"<>":X=I[0]!=I[1]}return X}(b,j)},nt={};function ft(d){return[m,S,v,w,T,C].indexOf(d)>=0||typeof d=="number"&&(isNaN(d)||!isFinite(d))}function st(d){return ft(d)||d===N}function at(d){return d===!0||d===!1}function Fe(d){return typeof d=="number"&&!isNaN(d)&&isFinite(d)}function Ct(d){return typeof d=="string"}function mt(){const d=[];for(let b=0;b<arguments.length;++b){let j=!1;const I=arguments[b];for(let U=0;U<d.length&&(j=d[U]===I,!j);++U);j||d.push(I)}return d}function F(d,b,j,I){if(!b||!j)return N;I=!(I===0||I===!1);let U=N;const X=typeof d=="number";let oe=!1;for(let Se=0;Se<b.length;Se++){const ke=b[Se];if(ke[0]===d){U=j<ke.length+1?ke[j-1]:S;break}!oe&&(X&&I&&ke[0]<=d||I&&typeof ke[0]=="string"&&ke[0].localeCompare(d)<0)&&(U=j<ke.length+1?ke[j-1]:S),X&&ke[0]>d&&(oe=!0)}return U}function V(){const d=K(arguments).filter(_t);if(d.length===0)return v;const b=_e.apply(void 0,d);if(b)return b;const j=Ye(d),I=j.length;let U,X=0,oe=0;for(let Se=0;Se<I;Se++)X+=j[Se],oe+=1;return U=X/oe,isNaN(U)&&(U=w),U}function O(){const d=K(arguments).filter(_t);if(d.length===0)return v;const b=_e.apply(void 0,d);if(b)return b;const j=d,I=j.length;let U,X=0,oe=0;for(let Se=0;Se<I;Se++){const ke=j[Se];typeof ke=="number"&&(X+=ke),ke===!0&&X++,ke!==null&&oe++}return U=X/oe,isNaN(U)&&(U=w),U}nt.TYPE=d=>{switch(d){case C:return 1;case v:return 2;case m:return 3;case S:return 4;case T:return 5;case w:return 6;case N:return 7;case k:return 8}return N};const A={DIST:function(d,b,j,I,U,X){return arguments.length<4?m:(U=U===void 0?0:U,X=X===void 0?1:X,me(d=te(d),b=te(b),j=te(j),U=te(U),X=te(X))?m:(d=(d-U)/(X-U),I?u.beta.cdf(d,b,j):u.beta.pdf(d,b,j)))},INV:(d,b,j,I,U)=>(I=I===void 0?0:I,U=U===void 0?1:U,me(d=te(d),b=te(b),j=te(j),I=te(I),U=te(U))?m:u.beta.inv(d,b,j)*(U-I)+I)},J={DIST:(d,b,j,I)=>me(d=te(d),b=te(b),j=te(j),I=te(I))?m:I?u.binomial.cdf(d,b,j):u.binomial.pdf(d,b,j)};J.DIST.RANGE=(d,b,j,I)=>{if(I=I===void 0?j:I,me(d=te(d),b=te(b),j=te(j),I=te(I)))return m;let U=0;for(let X=j;X<=I;X++)U+=Ht(d,X)*Math.pow(b,X)*Math.pow(1-b,d-X);return U},J.INV=(d,b,j)=>{if(me(d=te(d),b=te(b),j=te(j)))return m;let I=0;for(;I<=d;){if(u.binomial.cdf(I,d,b)>=j)return I;I++}};const he={DIST:(d,b,j)=>me(d=te(d),b=te(b))?m:j?u.chisquare.cdf(d,b):u.chisquare.pdf(d,b)};he.DIST.RT=(d,b)=>!d|!b?N:d<1||b>Math.pow(10,10)?w:typeof d!="number"||typeof b!="number"?m:1-u.chisquare.cdf(d,b),he.INV=(d,b)=>me(d=te(d),b=te(b))?m:u.chisquare.inv(d,b),he.INV.RT=(d,b)=>!d|!b?N:d<0||d>1||b<1||b>Math.pow(10,10)?w:typeof d!="number"||typeof b!="number"?m:u.chisquare.inv(1-d,b),he.TEST=function(d,b){if(arguments.length!==2)return N;if(!(d instanceof Array&&b instanceof Array)||d.length!==b.length||d[0]&&b[0]&&d[0].length!==b[0].length)return m;const j=d.length;let I,U,X;for(U=0;U<j;U++)d[U]instanceof Array||(I=d[U],d[U]=[],d[U].push(I)),b[U]instanceof Array||(I=b[U],b[U]=[],b[U].push(I));const oe=d[0].length,Se=oe===1?j-1:(j-1)*(oe-1);let ke=0;const Qe=Math.PI;for(U=0;U<j;U++)for(X=0;X<oe;X++)ke+=Math.pow(d[U][X]-b[U][X],2)/b[U][X];return Math.round(1e6*function(bt,At){let vt=Math.exp(-.5*bt);At%2==1&&(vt*=Math.sqrt(2*bt/Qe));let kt=At;for(;kt>=2;)vt=vt*bt/kt,kt-=2;let Kt=vt,Xt=At;for(;Kt>1e-10*vt;)Xt+=2,Kt=Kt*bt/Xt,vt+=Kt;return 1-vt}(ke,Se))/1e6};const be={};function q(){return Ye(K(arguments)).length}function z(){const d=K(arguments);return d.length-ee(d)}function ee(){const d=K(arguments);let b,j=0;for(let I=0;I<d.length;I++)b=d[I],b!=null&&b!==""||j++;return j}be.NORM=(d,b,j)=>me(d=te(d),b=te(b),j=te(j))?m:u.normalci(1,d,b,j)[1]-1,be.T=(d,b,j)=>me(d=te(d),b=te(b),j=te(j))?m:u.tci(1,d,b,j)[1]-1;const Z={P:(d,b)=>{if(me(d=ot(K(d)),b=ot(K(b))))return m;const j=u.mean(d),I=u.mean(b);let U=0;const X=d.length;for(let oe=0;oe<X;oe++)U+=(d[oe]-j)*(b[oe]-I);return U/X},S:(d,b)=>me(d=ot(K(d)),b=ot(K(b)))?m:u.covariance(d,b)},ue={DIST:(d,b,j)=>me(d=te(d),b=te(b))?m:j?u.exponential.cdf(d,b):u.exponential.pdf(d,b)},we={};function Ae(d,b,j){if(me(d=te(d),b=ot(K(b)),j=ot(K(j))))return m;const I=u.mean(j),U=u.mean(b),X=j.length;let oe=0,Se=0;for(let Qe=0;Qe<X;Qe++)oe+=(j[Qe]-I)*(b[Qe]-U),Se+=Math.pow(j[Qe]-I,2);const ke=oe/Se;return U-ke*I+ke*d}function je(d){return(d=te(d))instanceof Error?d:d===0||parseInt(d,10)===d&&d<0?w:u.gammafn(d)}function ze(d){return(d=te(d))instanceof Error?d:u.gammaln(d)}we.DIST=(d,b,j,I)=>me(d=te(d),b=te(b),j=te(j))?m:I?u.centralF.cdf(d,b,j):u.centralF.pdf(d,b,j),we.DIST.RT=function(d,b,j){return arguments.length!==3?N:d<0||b<1||j<1?w:typeof d!="number"||typeof b!="number"||typeof j!="number"?m:1-u.centralF.cdf(d,b,j)},we.INV=(d,b,j)=>me(d=te(d),b=te(b),j=te(j))?m:d<=0||d>1?w:u.centralF.inv(d,b,j),we.INV.RT=function(d,b,j){return arguments.length!==3?N:d<0||d>1||b<1||b>Math.pow(10,10)||j<1||j>Math.pow(10,10)?w:typeof d!="number"||typeof b!="number"||typeof j!="number"?m:u.centralF.inv(1-d,b,j)},we.TEST=(d,b)=>{if(!d||!b||!(d instanceof Array&&b instanceof Array))return N;if(d.length<2||b.length<2)return v;const j=(X,oe)=>{let Se=0;for(let ke=0;ke<X.length;ke++)Se+=Math.pow(X[ke]-oe,2);return Se},I=lr(d)/d.length,U=lr(b)/b.length;return j(d,I)/(d.length-1)/(j(b,U)/(b.length-1))},je.DIST=function(d,b,j,I){return arguments.length!==4?N:d<0||b<=0||j<=0||typeof d!="number"||typeof b!="number"||typeof j!="number"?m:I?u.gamma.cdf(d,b,j,!0):u.gamma.pdf(d,b,j,!1)},je.INV=function(d,b,j){return arguments.length!==3?N:d<0||d>1||b<=0||j<=0?w:typeof d!="number"||typeof b!="number"||typeof j!="number"?m:u.gamma.inv(d,b,j)},ze.PRECISE=function(d){return arguments.length!==1?N:d<=0?w:typeof d!="number"?m:u.gammaln(d)};const it={};function ct(d,b){return me(d=ot(K(d)),b=te(b))?d:b<0||d.length<b?m:d.sort((j,I)=>I-j)[b-1]}function Nt(d,b){if(me(d=ot(K(d)),b=ot(K(b))))return m;const j=u.mean(d),I=u.mean(b),U=b.length;let X=0,oe=0;for(let ke=0;ke<U;ke++)X+=(b[ke]-I)*(d[ke]-j),oe+=Math.pow(b[ke]-I,2);const Se=X/oe;return[Se,j-Se*I]}it.DIST=(d,b,j,I,U)=>{if(me(d=te(d),b=te(b),j=te(j),I=te(I)))return m;function X(oe,Se,ke,Qe){return Ht(ke,oe)*Ht(Qe-ke,Se-oe)/Ht(Qe,Se)}return U?function(oe,Se,ke,Qe){let bt=0;for(let At=0;At<=oe;At++)bt+=X(At,Se,ke,Qe);return bt}(d,b,j,I):X(d,b,j,I)};const Ot={};function ve(){const d=K(arguments),b=_e.apply(void 0,d);if(b)return b;const j=Ye(d);return j.length===0?0:Math.max.apply(Math,j)}function Le(){const d=K(arguments),b=_e.apply(void 0,d);if(b)return b;const j=B(d);let I=u.median(j);return isNaN(I)&&(I=w),I}function Xe(){const d=K(arguments),b=_e.apply(void 0,d);if(b)return b;const j=Ye(d);return j.length===0?0:Math.min.apply(Math,j)}Ot.DIST=(d,b,j,I)=>me(d=te(d),b=te(b),j=te(j))?m:I?u.lognormal.cdf(d,b,j):u.lognormal.pdf(d,b,j),Ot.INV=(d,b,j)=>me(d=te(d),b=te(b),j=te(j))?m:u.lognormal.inv(d,b,j);const ne={MULT:function(){const d=ot(K(arguments));if(d instanceof Error)return d;const b=d.length,j={};let I,U=[],X=0;for(let oe=0;oe<b;oe++)I=d[oe],j[I]=j[I]?j[I]+1:1,j[I]>X&&(X=j[I],U=[]),j[I]===X&&(U[U.length]=I);return U},SNGL:function(){const d=ot(K(arguments));return d instanceof Error?d:ne.MULT(d).sort((b,j)=>b-j)[0]}},fe={DIST:(d,b,j,I)=>me(d=te(d),b=te(b),j=te(j))?m:I?u.negbin.cdf(d,b,j):u.negbin.pdf(d,b,j)},P={};function G(d,b){if(me(b=ot(K(b)),d=ot(K(d))))return m;const j=u.mean(d),I=u.mean(b),U=d.length;let X=0,oe=0,Se=0;for(let ke=0;ke<U;ke++)X+=(d[ke]-j)*(b[ke]-I),oe+=Math.pow(d[ke]-j,2),Se+=Math.pow(b[ke]-I,2);return X/Math.sqrt(oe*Se)}P.DIST=(d,b,j,I)=>me(d=te(d),b=te(b),j=te(j))?m:j<=0?w:I?u.normal.cdf(d,b,j):u.normal.pdf(d,b,j),P.INV=(d,b,j)=>me(d=te(d),b=te(b),j=te(j))?m:u.normal.inv(d,b,j),P.S={},P.S.DIST=(d,b)=>(d=te(d))instanceof Error?m:b?u.normal.cdf(d,0,1):u.normal.pdf(d,0,1),P.S.INV=d=>(d=te(d))instanceof Error?m:u.normal.inv(d,0,1);const ce={EXC:(d,b)=>{if(me(d=ot(K(d)),b=te(b)))return m;const j=(d=d.sort((X,oe)=>X-oe)).length;if(b<1/(j+1)||b>1-1/(j+1))return w;const I=b*(j+1)-1,U=Math.floor(I);return Ke(I===U?d[I]:d[U]+(I-U)*(d[U+1]-d[U]))},INC:(d,b)=>{if(me(d=ot(K(d)),b=te(b)))return m;const j=b*((d=d.sort((U,X)=>U-X)).length-1),I=Math.floor(j);return Ke(j===I?d[j]:d[I]+(j-I)*(d[I+1]-d[I]))}},De={EXC:(d,b,j)=>{if(j=j===void 0?3:j,me(d=ot(K(d)),b=te(b),j=te(j)))return m;d=d.sort((bt,At)=>bt-At);const I=mt.apply(null,d),U=d.length,X=I.length,oe=Math.pow(10,j);let Se=0,ke=!1,Qe=0;for(;!ke&&Qe<X;)b===I[Qe]?(Se=(d.indexOf(I[Qe])+1)/(U+1),ke=!0):b>=I[Qe]&&(b<I[Qe+1]||Qe===X-1)&&(Se=(d.indexOf(I[Qe])+1+(b-I[Qe])/(I[Qe+1]-I[Qe]))/(U+1),ke=!0),Qe++;return Math.floor(Se*oe)/oe},INC:(d,b,j)=>{if(j=j===void 0?3:j,me(d=ot(K(d)),b=te(b),j=te(j)))return m;d=d.sort((bt,At)=>bt-At);const I=mt.apply(null,d),U=d.length,X=I.length,oe=Math.pow(10,j);let Se=0,ke=!1,Qe=0;for(;!ke&&Qe<X;)b===I[Qe]?(Se=d.indexOf(I[Qe])/(U-1),ke=!0):b>=I[Qe]&&(b<I[Qe+1]||Qe===X-1)&&(Se=(d.indexOf(I[Qe])+(b-I[Qe])/(I[Qe+1]-I[Qe]))/(U-1),ke=!0),Qe++;return Math.floor(Se*oe)/oe}},de={DIST:(d,b,j)=>me(d=te(d),b=te(b))?m:j?u.poisson.cdf(d,b):u.poisson.pdf(d,b)},Me={EXC:(d,b)=>{if(me(d=ot(K(d)),b=te(b)))return m;switch(b){case 1:return ce.EXC(d,.25);case 2:return ce.EXC(d,.5);case 3:return ce.EXC(d,.75);default:return w}},INC:(d,b)=>{if(me(d=ot(K(d)),b=te(b)))return m;switch(b){case 1:return ce.INC(d,.25);case 2:return ce.INC(d,.5);case 3:return ce.INC(d,.75);default:return w}}},He={};function lt(){const d=ot(K(arguments));if(d instanceof Error)return d;const b=u.mean(d),j=d.length;let I=0;for(let U=0;U<j;U++)I+=Math.pow(d[U]-b,3);return j*I/((j-1)*(j-2)*Math.pow(u.stdev(d,!0),3))}function qe(d,b){return me(d=ot(K(d)),b=te(b))?d:d.sort((j,I)=>j-I)[b-1]}He.AVG=(d,b,j)=>{if(me(d=te(d),b=ot(K(b))))return m;const I=(j=j||!1)?(oe,Se)=>oe-Se:(oe,Se)=>Se-oe,U=(b=(b=K(b)).sort(I)).length;let X=0;for(let oe=0;oe<U;oe++)b[oe]===d&&X++;return X>1?(2*b.indexOf(d)+X+1)/2:b.indexOf(d)+1},He.EQ=(d,b,j)=>{if(me(d=te(d),b=ot(K(b))))return m;const I=(j=j||!1)?(U,X)=>U-X:(U,X)=>X-U;return(b=b.sort(I)).indexOf(d)+1},lt.P=function(){const d=ot(K(arguments));if(d instanceof Error)return d;const b=u.mean(d),j=d.length;let I=0,U=0;for(let X=0;X<j;X++)U+=Math.pow(d[X]-b,3),I+=Math.pow(d[X]-b,2);return U/=j,I/=j,U/Math.pow(I,1.5)};const dt={P:function(){const d=Ft.P.apply(this,arguments);let b=Math.sqrt(d);return isNaN(b)&&(b=w),b},S:function(){const d=Ft.S.apply(this,arguments);return Math.sqrt(d)}},gt={DIST:(d,b,j)=>j!==1&&j!==2?w:j===1?gt.DIST.RT(d,b):gt.DIST["2T"](d,b)};gt.DIST["2T"]=function(d,b){return arguments.length!==2?N:d<0||b<1?w:typeof d!="number"||typeof b!="number"?m:2*(1-u.studentt.cdf(d,b))},gt.DIST.RT=function(d,b){return arguments.length!==2?N:d<0||b<1?w:typeof d!="number"||typeof b!="number"?m:1-u.studentt.cdf(d,b)},gt.INV=(d,b)=>me(d=te(d),b=te(b))?m:u.studentt.inv(d,b),gt.INV["2T"]=(d,b)=>(d=te(d),b=te(b),d<=0||d>1||b<1?w:me(d,b)?m:Math.abs(u.studentt.inv(d/2,b))),gt.TEST=(d,b)=>{if(me(d=ot(K(d)),b=ot(K(b))))return m;const j=u.mean(d),I=u.mean(b);let U,X=0,oe=0;for(U=0;U<d.length;U++)X+=Math.pow(d[U]-j,2);for(U=0;U<b.length;U++)oe+=Math.pow(b[U]-I,2);X/=d.length-1,oe/=b.length-1;const Se=Math.abs(j-I)/Math.sqrt(X/d.length+oe/b.length);return gt.DIST["2T"](Se,d.length+b.length-2)};const Ft={};function Ce(){const d=K(arguments),b=d.length;let j=0,I=0;const U=O(d);for(let X=0;X<b;X++){const oe=d[X];j+=Math.pow(typeof oe=="number"?oe-U:oe===!0?1-U:0-U,2),oe!==null&&I++}return j/(I-1)}function We(){const d=K(arguments),b=d.length;let j=0,I=0;const U=O(d);let X;for(let oe=0;oe<b;oe++){const Se=d[oe];j+=Math.pow(typeof Se=="number"?Se-U:Se===!0?1-U:0-U,2),Se!==null&&I++}return X=j/I,isNaN(X)&&(X=w),X}Ft.P=function(){const d=Ye(K(arguments)),b=d.length;let j=0;const I=V(d);let U;for(let X=0;X<b;X++)j+=Math.pow(d[X]-I,2);return U=j/b,isNaN(U)&&(U=w),U},Ft.S=function(){const d=Ye(K(arguments)),b=d.length;let j=0;const I=V(d);for(let U=0;U<b;U++)j+=Math.pow(d[U]-I,2);return j/(b-1)};const Ue={DIST:(d,b,j,I)=>me(d=te(d),b=te(b),j=te(j))?m:I?1-Math.exp(-Math.pow(d/j,b)):Math.pow(d,b-1)*Math.exp(-Math.pow(d/j,b))*b/Math.pow(j,b)},Et={};function Pt(d,b,j){const I=_e(d=te(d),b=te(b),j=te(j));if(I)return I;if(b===0)return 0;b=Math.abs(b);const U=-Math.floor(Math.log(b)/Math.log(10));return d>=0?Vn(Math.ceil(d/b)*b,U):j===0?-Vn(Math.floor(Math.abs(d)/b)*b,U):-Vn(Math.ceil(Math.abs(d)/b)*b,U)}function Ht(d,b){return _e(d=te(d),b=te(b))||(d<b?w:dn(d)/(dn(b)*dn(d-b)))}Et.TEST=(d,b,j)=>{if(me(d=ot(K(d)),b=te(b)))return m;j=j||dt.S(d);const I=d.length;return 1-P.S.DIST((V(d)-b)/(j/Math.sqrt(I)),!0)},Pt.MATH=Pt,Pt.PRECISE=Pt;const ln=[];function dn(d){if((d=te(d))instanceof Error)return d;const b=Math.floor(d);return b===0||b===1?1:(ln[b]>0||(ln[b]=dn(b-1)*b),ln[b])}function Vt(d,b){const j=_e(d=te(d),b=te(b));if(j)return j;if(b===0)return 0;if(!(d>=0&&b>0||d<=0&&b<0))return w;b=Math.abs(b);const I=-Math.floor(Math.log(b)/Math.log(10));return d>=0?Vn(Math.floor(d/b)*b,I):-Vn(Math.ceil(Math.abs(d)/b),I)}Vt.MATH=(d,b,j)=>{if(b instanceof Error)return b;b=b===void 0?0:b;const I=_e(d=te(d),b=te(b),j=te(j));if(I)return I;if(b===0)return 0;b=b?Math.abs(b):1;const U=-Math.floor(Math.log(b)/Math.log(10));return d>=0?Vn(Math.floor(d/b)*b,U):j===0||j===void 0?-Vn(Math.ceil(Math.abs(d)/b)*b,U):-Vn(Math.floor(Math.abs(d)/b)*b,U)},Vt.PRECISE=Vt.MATH;const on={CEILING:Pt};function Lt(d,b){const j=_e(d=te(d),b=te(b));if(j)return j;if(d===0&&b===0)return w;const I=Math.pow(d,b);return isNaN(I)?w:I}function ho(){const d=K(arguments).filter(I=>I!=null);if(d.length===0)return 0;const b=ot(d);if(b instanceof Error)return b;let j=1;for(let I=0;I<b.length;I++)j*=b[I];return j}function Vn(d,b){return _e(d=te(d),b=te(b))||Number(Math.round(Number(d+"e"+b))+"e"+-1*b)}function lr(){let d=0;return R(H(arguments),b=>{if(d instanceof Error)return!1;if(b instanceof Error)d=b;else if(typeof b=="number")d+=b;else if(typeof b=="string"){const j=parseFloat(b);!isNaN(j)&&(d+=j)}else if(Array.isArray(b)){const j=lr.apply(null,b);j instanceof Error?d=j:d+=j}}),d}var Ko=Object.freeze({__proto__:null,ADD:function(d,b){return arguments.length!==2?N:_e(d=te(d),b=te(b))||d+b},DIVIDE:function(d,b){return arguments.length!==2?N:_e(d=te(d),b=te(b))||(b===0?v:d/b)},EQ:function(d,b){return arguments.length!==2?N:d instanceof Error?d:b instanceof Error?b:(d===null&&(d=void 0),b===null&&(b=void 0),d===b)},GT:function(d,b){return arguments.length!==2?N:d instanceof Error?d:b instanceof Error?b:(Gt(d,b)?(d=St(d),b=St(b)):(d=te(d),b=te(b)),_e(d,b)||d>b)},GTE:function(d,b){return arguments.length!==2?N:(Gt(d,b)?(d=St(d),b=St(b)):(d=te(d),b=te(b)),_e(d,b)||d>=b)},LT:function(d,b){return arguments.length!==2?N:(Gt(d,b)?(d=St(d),b=St(b)):(d=te(d),b=te(b)),_e(d,b)||d<b)},LTE:function(d,b){return arguments.length!==2?N:(Gt(d,b)?(d=St(d),b=St(b)):(d=te(d),b=te(b)),_e(d,b)||d<=b)},MINUS:function(d,b){return arguments.length!==2?N:_e(d=te(d),b=te(b))||d-b},MULTIPLY:function(d,b){return arguments.length!==2?N:_e(d=te(d),b=te(b))||d*b},NE:function(d,b){return arguments.length!==2?N:d instanceof Error?d:b instanceof Error?b:(d===null&&(d=void 0),b===null&&(b=void 0),d!==b)},POW:function(d,b){return arguments.length!==2?N:Lt(d,b)}});const Yo=new Date(Date.UTC(1900,0,1)),qo=[void 0,0,1,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,1,2,3,4,5,6,0],Ji=[[],[1,2,3,4,5,6,7],[7,1,2,3,4,5,6],[6,0,1,2,3,4,5],[],[],[],[],[],[],[],[7,1,2,3,4,5,6],[6,7,1,2,3,4,5],[5,6,7,1,2,3,4],[4,5,6,7,1,2,3],[3,4,5,6,7,1,2],[2,3,4,5,6,7,1],[1,2,3,4,5,6,7]],Vr=[[],[6,0],[0,1],[1,2],[2,3],[3,4],[4,5],[5,6],void 0,void 0,void 0,[0,0],[1,1],[2,2],[3,3],[4,4],[5,5],[6,6]];function Dr(d,b,j){j=j.toUpperCase(),d=ut(d),b=ut(b);const I=d.getFullYear(),U=d.getMonth(),X=d.getDate(),oe=b.getFullYear(),Se=b.getMonth(),ke=b.getDate();let Qe;switch(j){case"Y":Qe=Math.floor(Kr(d,b));break;case"D":Qe=Qn(b,d);break;case"M":Qe=Se-U+12*(oe-I),ke<X&&Qe--;break;case"MD":X<=ke?Qe=ke-X:(Se===0?(d.setFullYear(oe-1),d.setMonth(12)):(d.setFullYear(oe),d.setMonth(Se-1)),Qe=Qn(b,d));break;case"YM":Qe=Se-U+12*(oe-I),ke<X&&Qe--,Qe%=12;break;case"YD":Se>U||Se===U&&ke<X?d.setFullYear(oe):d.setFullYear(oe-1),Qe=Qn(b,d)}return Qe}function Wr(d){const b=new Date(d);return b.setHours(0,0,0,0),b}function Qn(d,b){return d=ut(d),b=ut(b),d instanceof Error?d:b instanceof Error?b:Go(Wr(d))-Go(Wr(b))}function Gn(d,b,j){if(j=pt(j||"false"),d=ut(d),b=ut(b),d instanceof Error)return d;if(b instanceof Error)return b;if(j instanceof Error)return j;const I=d.getMonth();let U,X,oe=b.getMonth();if(j)U=d.getDate()===31?30:d.getDate(),X=b.getDate()===31?30:b.getDate();else{const Se=new Date(d.getFullYear(),I+1,0).getDate(),ke=new Date(b.getFullYear(),oe+1,0).getDate();U=d.getDate()===Se?30:d.getDate(),b.getDate()===ke?U<30?(oe++,X=1):X=30:X=b.getDate()}return 360*(b.getFullYear()-d.getFullYear())+30*(oe-I)+(X-U)}function mo(d){if((d=ut(d))instanceof Error)return d;(d=Wr(d)).setDate(d.getDate()+4-(d.getDay()||7));const b=new Date(d.getFullYear(),0,1);return Math.ceil(((d-b)/864e5+1)/7)}function Tr(d,b,j){return Tr.INTL(d,b,1,j)}function zr(d,b,j){return zr.INTL(d,b,1,j)}function Ur(d){return new Date(d,1,29).getMonth()===1}function cr(d,b){return Math.ceil((b-d)/1e3/60/60/24)}function Kr(d,b,j){if((d=ut(d))instanceof Error)return d;if((b=ut(b))instanceof Error)return b;j=j||0;let I=d.getDate();const U=d.getMonth()+1,X=d.getFullYear();let oe=b.getDate();const Se=b.getMonth()+1,ke=b.getFullYear();switch(j){case 0:return I===31&&oe===31?(I=30,oe=30):I===31?I=30:I===30&&oe===31&&(oe=30),(oe+30*Se+360*ke-(I+30*U+360*X))/360;case 1:{const Qe=(kt,Kt)=>{const Xt=kt.getFullYear(),An=new Date(Xt,2,1);if(Ur(Xt)&&kt<An&&Kt>=An)return!0;const un=Kt.getFullYear(),or=new Date(un,2,1);return Ur(un)&&Kt>=or&&kt<or};let bt=365;if(X===ke||X+1===ke&&(U>Se||U===Se&&I>=oe))return(X===ke&&Ur(X)||Qe(d,b)||Se===1&&oe===29)&&(bt=366),cr(d,b)/bt;const At=ke-X+1,vt=(new Date(ke+1,0,1)-new Date(X,0,1))/1e3/60/60/24/At;return cr(d,b)/vt}case 2:return cr(d,b)/360;case 3:return cr(d,b)/365;case 4:return(oe+30*Se+360*ke-(I+30*U+360*X))/360}}function Go(d){const b=d>-22038912e5?2:1;return Math.ceil((d-Yo)/864e5)+b}function go(d){return(d=te(d))===0?m:d instanceof Error?d:String.fromCharCode(d)}function bo(d){if(me(d))return d;let b=(d=d||"").charCodeAt(0);return isNaN(b)&&(b=m),b}function Yr(){const d=K(arguments),b=_e.apply(void 0,d);if(b)return b;let j=0;for(;(j=d.indexOf(!0))>-1;)d[j]="TRUE";let I=0;for(;(I=d.indexOf(!1))>-1;)d[I]="FALSE";return d.join("")}Tr.INTL=(d,b,j,I)=>{if((d=ut(d))instanceof Error)return d;if((b=ut(b))instanceof Error)return b;let U=!1;const X=[],oe=[1,2,3,4,5,6,0],Se=new RegExp("^[0|1]{7}$");if(j===void 0)j=Vr[1];else if(typeof j=="string"&&Se.test(j)){U=!0,j=j.split("");for(let At=0;At<j.length;At++)j[At]==="1"&&X.push(oe[At])}else j=Vr[j];if(!(j instanceof Array))return m;I===void 0?I=[]:I instanceof Array||(I=[I]);for(let At=0;At<I.length;At++){const vt=ut(I[At]);if(vt instanceof Error)return vt;I[At]=vt}const ke=Math.round((b-d)/864e5)+1;let Qe=ke;const bt=d;for(let At=0;At<ke;At++){const vt=new Date().getTimezoneOffset()>0?bt.getUTCDay():bt.getDay();let kt=U?X.includes(vt):vt===j[0]||vt===j[1];for(let Kt=0;Kt<I.length;Kt++){const Xt=I[Kt];if(Xt.getDate()===bt.getDate()&&Xt.getMonth()===bt.getMonth()&&Xt.getFullYear()===bt.getFullYear()){kt=!0;break}}kt&&Qe--,bt.setDate(bt.getDate()+1)}return Qe},zr.INTL=(d,b,j,I)=>{if((d=ut(d))instanceof Error)return d;if((b=te(b))instanceof Error)return b;if(b<0)return w;if(!((j=j===void 0?Vr[1]:Vr[j])instanceof Array))return m;I===void 0?I=[]:I instanceof Array||(I=[I]);for(let X=0;X<I.length;X++){const oe=ut(I[X]);if(oe instanceof Error)return oe;I[X]=oe}let U=0;for(;U<b;){d.setDate(d.getDate()+1);const X=d.getDay();if(X!==j[0]&&X!==j[1]){for(let oe=0;oe<I.length;oe++){const Se=I[oe];if(Se.getDate()===d.getDate()&&Se.getMonth()===d.getMonth()&&Se.getFullYear()===d.getFullYear()){U--;break}}U++}}return d};const Xi=Yr;function vo(d,b=2,j=!1){if(d=te(d),isNaN(d)||(b=te(b),isNaN(b)))return m;if(b<0){const I=Math.pow(10,-b);d=Math.round(d/I)*I}else d=d.toFixed(b);if(j)d=d.toString().replace(/,/g,"");else{const I=d.toString().split(".");I[0]=I[0].replace(/\B(?=(\d{3})+$)/g,","),d=I.join(".")}return d}function Cn(d,b){return _e(d,b)||(d=St(d),(b=te(b))instanceof Error?b:new Array(b+1).join(d))}const yo=go,wr=bo;function qr(d){return/^[01]{1,10}$/.test(d)}function gn(d,b,j){if(me(d=te(d),b=te(b)))return d;if((j=j===void 0?"i":j)!=="i"&&j!=="j")return m;if(d===0&&b===0)return 0;if(d===0)return b===1?j:b.toString()+j;if(b===0)return d.toString();{const I=b>0?"+":"";return d.toString()+I+(b===1?j:b.toString()+j)}}function Eo(d,b){return b=b===void 0?0:b,me(d=te(d),b=te(b))?m:u.erf(d)}function Gr(d){return isNaN(d)?m:u.erfc(d)}function Jr(d){const b=Qt(d),j=Zt(d);return me(b,j)?m:Math.sqrt(Math.pow(b,2)+Math.pow(j,2))}function Zt(d){if(d===void 0||d===!0||d===!1)return m;if(d===0||d==="0")return 0;if(["i","j"].indexOf(d)>=0)return 1;let b=(d=(d+="").replace("+i","+1i").replace("-i","-1i").replace("+j","+1j").replace("-j","-1j")).indexOf("+"),j=d.indexOf("-");b===0&&(b=d.indexOf("+",1)),j===0&&(j=d.indexOf("-",1));const I=d.substring(d.length-1,d.length),U=I==="i"||I==="j";return b>=0||j>=0?U?b>=0?isNaN(d.substring(0,b))||isNaN(d.substring(b+1,d.length-1))?w:Number(d.substring(b+1,d.length-1)):isNaN(d.substring(0,j))||isNaN(d.substring(j+1,d.length-1))?w:-Number(d.substring(j+1,d.length-1)):w:U?isNaN(d.substring(0,d.length-1))?w:d.substring(0,d.length-1):isNaN(d)?w:0}function Xr(d){const b=Qt(d),j=Zt(d);return me(b,j)?m:b===0&&j===0?v:b===0&&j>0?Math.PI/2:b===0&&j<0?-Math.PI/2:j===0&&b>0?0:j===0&&b<0?-Math.PI:b>0?Math.atan(j/b):b<0&&j>=0?Math.atan(j/b)+Math.PI:Math.atan(j/b)-Math.PI}function Zr(d){const b=Qt(d),j=Zt(d);if(me(b,j))return m;let I=d.substring(d.length-1);return I=I==="i"||I==="j"?I:"i",gn(Math.cos(b)*(Math.exp(j)+Math.exp(-j))/2,-Math.sin(b)*(Math.exp(j)-Math.exp(-j))/2,I)}function Jo(d){const b=Qt(d),j=Zt(d);if(me(b,j))return m;let I=d.substring(d.length-1);return I=I==="i"||I==="j"?I:"i",gn(Math.cos(j)*(Math.exp(b)+Math.exp(-b))/2,Math.sin(j)*(Math.exp(b)-Math.exp(-b))/2,I)}function ur(d,b){const j=Qt(d),I=Zt(d),U=Qt(b),X=Zt(b);if(me(j,I,U,X))return m;const oe=d.substring(d.length-1),Se=b.substring(b.length-1);let ke="i";if((oe==="j"||Se==="j")&&(ke="j"),U===0&&X===0)return w;const Qe=U*U+X*X;return gn((j*U+I*X)/Qe,(I*U-j*X)/Qe,ke)}function Qt(d){if(d===void 0||d===!0||d===!1)return m;if(d===0||d==="0"||["i","+i","1i","+1i","-i","-1i","j","+j","1j","+1j","-j","-1j"].indexOf(d)>=0)return 0;let b=(d+="").indexOf("+"),j=d.indexOf("-");b===0&&(b=d.indexOf("+",1)),j===0&&(j=d.indexOf("-",1));const I=d.substring(d.length-1,d.length),U=I==="i"||I==="j";return b>=0||j>=0?U?b>=0?isNaN(d.substring(0,b))||isNaN(d.substring(b+1,d.length-1))?w:Number(d.substring(0,b)):isNaN(d.substring(0,j))||isNaN(d.substring(j+1,d.length-1))?w:Number(d.substring(0,j)):w:U?isNaN(d.substring(0,d.length-1))?w:0:isNaN(d)?w:d}function Qr(d){const b=Qt(d),j=Zt(d);if(me(b,j))return m;let I=d.substring(d.length-1);return I=I==="i"||I==="j"?I:"i",gn(Math.sin(b)*(Math.exp(j)+Math.exp(-j))/2,Math.cos(b)*(Math.exp(j)-Math.exp(-j))/2,I)}function Xo(d){const b=Qt(d),j=Zt(d);if(me(b,j))return m;let I=d.substring(d.length-1);return I=I==="i"||I==="j"?I:"i",gn(Math.cos(j)*(Math.exp(b)-Math.exp(-b))/2,Math.sin(j)*(Math.exp(b)+Math.exp(-b))/2,I)}Eo.PRECISE=()=>{throw new Error("ERF.PRECISE is not implemented")},Gr.PRECISE=()=>{throw new Error("ERFC.PRECISE is not implemented")};const Zi=A.DIST,Qi=A.INV,Co=J.DIST,es=Pt.MATH,ns=Pt.PRECISE,rs=he.DIST,is=he.DIST.RT,ss=he.INV,sn=he.INV.RT,rn=he.TEST,as=Z.P,ls=Z.P,cs=Z.S,us=J.INV,ds=Gr.PRECISE,fs=Eo.PRECISE,Zo=ue.DIST,ps=we.DIST,bn=we.DIST.RT,So=we.INV,dr=we.INV.RT,Qo=Vt.MATH,To=Vt.PRECISE,Dn=we.TEST,ei=je.DIST,ti=je.INV,ni=ze.PRECISE,ri=it.DIST,oi=Ot.INV,ii=Ot.DIST,Nn=Ot.INV,hs=ne.MULT,Rn=ne.SNGL,ms=fe.DIST,si=Tr.INTL,er=P.DIST,eo=P.INV,wo=P.S.DIST,cn=P.S.INV,nr=ce.EXC,Ao=ce.INC,gs=De.EXC,xo=De.INC,bs=de.DIST,vs=Me.EXC,ys=Me.INC,ai=He.AVG,to=He.EQ,Ar=lt.P,Es=dt.P,li=dt.S,ci=gt.DIST,_o=gt.DIST.RT,No=gt.INV,ui=gt.TEST,Cs=Ft.P,jo=Ft.S,Oo=Ue.DIST,Ss=zr.INTL,di=Et.TEST;function Sn(d){const b=[];return R(d,j=>{j&&b.push(j)}),b}function wn(d,b){const j={};for(let X=1;X<d[0].length;++X)j[X]=!0;let I=b[0].length;for(let X=1;X<b.length;++X)b[X].length>I&&(I=b[X].length);for(let X=1;X<d.length;++X)for(let oe=1;oe<d[X].length;++oe){let Se=!1,ke=!1;for(let Qe=0;Qe<b.length;++Qe){const bt=b[Qe];if(bt.length<I)continue;const At=bt[0];if(d[X][0]===At){ke=!0;for(let vt=1;vt<bt.length;++vt)if(!Se)if(bt[vt]===void 0||bt[vt]==="*")Se=!0;else{const kt=$e(bt[vt]+""),Kt=[Ie(d[X][oe],Te)].concat(kt);Se=Be(Kt)}}}ke&&(j[oe]=j[oe]&&Se)}const U=[];for(let X=0;X<d[0].length;++X)j[X]&&U.push(X-1);return U}function fr(d){return d&&d.getTime&&!isNaN(d.getTime())}function no(d){return d instanceof Date?d:new Date(d)}function rr(d,b,j,I,U){if(I=I||0,U=U||0,me(d=te(d),b=te(b),j=te(j),I=te(I),U=te(U)))return m;let X;if(d===0)X=I+j*b;else{const oe=Math.pow(1+d,b);X=U===1?I*oe+j*(1+d)*(oe-1)/d:I*oe+j*(oe-1)/d}return-X}function fi(d,b,j,I,U,X){if(U=U||0,X=X||0,me(d=te(d),b=te(b),j=te(j),I=te(I),U=te(U),X=te(X)))return m;const oe=Rr(d,j,I,U,X);return(b===1?X===1?0:-I:X===1?rr(d,b-2,oe,I,1)-oe:rr(d,b-1,oe,I,0))*d}function Mo(){const d=ot(K(arguments));if(d instanceof Error)return d;const b=d[0];let j=0;for(let I=1;I<d.length;I++)j+=d[I]/Math.pow(1+b,I);return j}function Rr(d,b,j,I,U){if(I=I||0,U=U||0,me(d=te(d),b=te(b),j=te(j),I=te(I),U=te(U)))return m;let X;if(d===0)X=(j+I)/b;else{const oe=Math.pow(1+d,b);X=U===1?(I*d/(oe-1)+j*d/(1-1/oe))/(1+d):I*d/(oe-1)+j*d/(1-1/oe)}return-X}const Ts={errors:L,symbols:Ko};l.ABS=function(d){return(d=te(d))instanceof Error?d:Math.abs(d)},l.ACCRINT=function(d,b,j,I,U,X,oe){return d=no(d),b=no(b),j=no(j),fr(d)&&fr(b)&&fr(j)?I<=0||U<=0||[1,2,4].indexOf(X)===-1||[0,1,2,3,4].indexOf(oe)===-1||j<=d?w:(U=U||0)*I*Kr(d,j,oe=oe||0):m},l.ACCRINTM=function(){throw new Error("ACCRINTM is not implemented")},l.ACOS=function(d){if((d=te(d))instanceof Error)return d;let b=Math.acos(d);return isNaN(b)&&(b=w),b},l.ACOSH=function(d){if((d=te(d))instanceof Error)return d;let b=Math.log(d+Math.sqrt(d*d-1));return isNaN(b)&&(b=w),b},l.ACOT=function(d){return(d=te(d))instanceof Error?d:Math.atan(1/d)},l.ACOTH=function(d){if((d=te(d))instanceof Error)return d;let b=.5*Math.log((d+1)/(d-1));return isNaN(b)&&(b=w),b},l.AGGREGATE=function(d,b,j,I){if(me(d=te(d),te(d)))return m;switch(d){case 1:return V(j);case 2:return q(j);case 3:return z(j);case 4:return ve(j);case 5:return Xe(j);case 6:return ho(j);case 7:return dt.S(j);case 8:return dt.P(j);case 9:return lr(j);case 10:return Ft.S(j);case 11:return Ft.P(j);case 12:return Le(j);case 13:return ne.SNGL(j);case 14:return ct(j,I);case 15:return qe(j,I);case 16:return ce.INC(j,I);case 17:return Me.INC(j,I);case 18:return ce.EXC(j,I);case 19:return Me.EXC(j,I)}},l.AMORDEGRC=function(){throw new Error("AMORDEGRC is not implemented")},l.AMORLINC=function(){throw new Error("AMORLINC is not implemented")},l.AND=function(){const d=K(arguments);let b=m;for(let j=0;j<d.length;j++){if(d[j]instanceof Error)return d[j];d[j]!==void 0&&d[j]!==null&&typeof d[j]!="string"&&(b===m&&(b=!0),d[j]||(b=!1))}return b},l.ARABIC=function(d){if(d==null)return 0;if(d instanceof Error)return d;if(!/^M*(?:D?C{0,3}|C[MD])(?:L?X{0,3}|X[CL])(?:V?I{0,3}|I[XV])$/.test(d))return m;let b=0;return d.replace(/[MDLV]|C[MD]?|X[CL]?|I[XV]?/g,j=>{b+={M:1e3,CM:900,D:500,CD:400,C:100,XC:90,L:50,XL:40,X:10,IX:9,V:5,IV:4,I:1}[j]}),b},l.ASC=function(){throw new Error("ASC is not implemented")},l.ASIN=function(d){if((d=te(d))instanceof Error)return d;let b=Math.asin(d);return isNaN(b)&&(b=w),b},l.ASINH=function(d){return(d=te(d))instanceof Error?d:Math.log(d+Math.sqrt(d*d+1))},l.ATAN=function(d){return(d=te(d))instanceof Error?d:Math.atan(d)},l.ATAN2=function(d,b){return _e(d=te(d),b=te(b))||Math.atan2(d,b)},l.ATANH=function(d){if((d=te(d))instanceof Error)return d;let b=Math.log((1+d)/(1-d))/2;return isNaN(b)&&(b=w),b},l.AVEDEV=function(){const d=K(arguments).filter(_t);if(d.length===0)return w;const b=ot(d);return b instanceof Error?b:u.sum(u(b).subtract(u.mean(b)).abs()[0])/b.length},l.AVERAGE=V,l.AVERAGEA=O,l.AVERAGEIF=function(d,b,j){if(arguments.length<=1)return N;if(j=ot(K(j=j||d).filter(_t)),d=K(d),j instanceof Error)return j;let I=0,U=0;const X=b===void 0||b==="*",oe=X?null:$e(b+"");for(let Se=0;Se<d.length;Se++){const ke=d[Se];if(X)U+=j[Se],I++;else{const Qe=[Ie(ke,Te)].concat(oe);Be(Qe)&&(U+=j[Se],I++)}}return U/I},l.AVERAGEIFS=function(){const d=H(arguments),b=(d.length-1)/2,j=K(d[0]);let I=0,U=0;for(let oe=0;oe<j.length;oe++){let Se=!1;for(let ke=0;ke<b;ke++){const Qe=d[2*ke+1][oe],bt=d[2*ke+2];let At=!1;if(bt===void 0||bt==="*")At=!0;else{const vt=$e(bt+""),kt=[Ie(Qe,Te)].concat(vt);At=Be(kt)}if(!At){Se=!1;break}Se=!0}Se&&(U+=j[oe],I++)}const X=U/I;return isNaN(X)?0:X},l.BAHTTEXT=function(){throw new Error("BAHTTEXT is not implemented")},l.BASE=function(d,b,j){const I=_e(d=te(d),b=te(b),j=te(j));if(I)return I;if(b===0)return w;const U=d.toString(b);return new Array(Math.max(j+1-U.length,0)).join("0")+U},l.BESSELI=function(d,b){return me(d=te(d),b=te(b))?m:g.besseli(d,b)},l.BESSELJ=function(d,b){return me(d=te(d),b=te(b))?m:g.besselj(d,b)},l.BESSELK=function(d,b){return me(d=te(d),b=te(b))?m:g.besselk(d,b)},l.BESSELY=function(d,b){return me(d=te(d),b=te(b))?m:g.bessely(d,b)},l.BETA=A,l.BETADIST=Zi,l.BETAINV=Qi,l.BIN2DEC=function(d){if(!qr(d))return w;const b=parseInt(d,2),j=d.toString();return j.length===10&&j.substring(0,1)==="1"?parseInt(j.substring(1),2)-512:b},l.BIN2HEX=function(d,b){if(!qr(d))return w;const j=d.toString();if(j.length===10&&j.substring(0,1)==="1")return(0xfffffffe00+parseInt(j.substring(1),2)).toString(16);const I=parseInt(d,2).toString(16);return b===void 0?I:isNaN(b)?m:b<0?w:(b=Math.floor(b))>=I.length?Cn("0",b-I.length)+I:w},l.BIN2OCT=function(d,b){if(!qr(d))return w;const j=d.toString();if(j.length===10&&j.substring(0,1)==="1")return(1073741312+parseInt(j.substring(1),2)).toString(8);const I=parseInt(d,2).toString(8);return b===void 0?I:isNaN(b)?m:b<0?w:(b=Math.floor(b))>=I.length?Cn("0",b-I.length)+I:w},l.BINOM=J,l.BINOMDIST=Co,l.BITAND=function(d,b){return me(d=te(d),b=te(b))?m:d<0||b<0||Math.floor(d)!==d||Math.floor(b)!==b||d>0xffffffffffff||b>0xffffffffffff?w:d&b},l.BITLSHIFT=function(d,b){return me(d=te(d),b=te(b))?m:d<0||Math.floor(d)!==d||d>0xffffffffffff||Math.abs(b)>53?w:b>=0?d<<b:d>>-b},l.BITOR=function(d,b){return me(d=te(d),b=te(b))?m:d<0||b<0||Math.floor(d)!==d||Math.floor(b)!==b||d>0xffffffffffff||b>0xffffffffffff?w:d|b},l.BITRSHIFT=function(d,b){return me(d=te(d),b=te(b))?m:d<0||Math.floor(d)!==d||d>0xffffffffffff||Math.abs(b)>53?w:b>=0?d>>b:d<<-b},l.BITXOR=function(d,b){return me(d=te(d),b=te(b))?m:d<0||b<0||Math.floor(d)!==d||Math.floor(b)!==b||d>0xffffffffffff||b>0xffffffffffff?w:d^b},l.CEILING=Pt,l.CEILINGMATH=es,l.CEILINGPRECISE=ns,l.CELL=function(){throw new Error("CELL is not implemented")},l.CHAR=go,l.CHIDIST=rs,l.CHIDISTRT=is,l.CHIINV=ss,l.CHIINVRT=sn,l.CHISQ=he,l.CHITEST=rn,l.CHOOSE=function(){if(arguments.length<2)return N;const d=arguments[0];return d<1||d>254||arguments.length<d+1?m:arguments[d]},l.CLEAN=function(d){return me(d)?d:(d=d||"").replace(/[\0-\x1F]/g,"")},l.CODE=bo,l.COLUMN=function(d,b){return arguments.length!==2?N:b<0?w:d instanceof Array&&typeof b=="number"?d.length!==0?u.col(d,b):void 0:m},l.COLUMNS=function(d){return arguments.length!==1?N:d instanceof Array?d.length===0?0:u.cols(d):m},l.COMBIN=Ht,l.COMBINA=function(d,b){return _e(d=te(d),b=te(b))||(d<b?w:d===0&&b===0?1:Ht(d+b-1,d-1))},l.COMPLEX=gn,l.CONCAT=Xi,l.CONCATENATE=Yr,l.CONFIDENCE=be,l.CONVERT=function(d,b,j){if((d=te(d))instanceof Error)return d;const I=[["a.u. of action","?",null,"action",!1,!1,105457168181818e-48],["a.u. of charge","e",null,"electric_charge",!1,!1,160217653141414e-33],["a.u. of energy","Eh",null,"energy",!1,!1,435974417757576e-32],["a.u. of length","a?",null,"length",!1,!1,529177210818182e-25],["a.u. of mass","m?",null,"mass",!1,!1,910938261616162e-45],["a.u. of time","?/Eh",null,"time",!1,!1,241888432650516e-31],["admiralty knot","admkn",null,"speed",!1,!0,.514773333],["ampere","A",null,"electric_current",!0,!1,1],["ampere per meter","A/m",null,"magnetic_field_intensity",!0,!1,1],["ångström","Å",["ang"],"length",!1,!0,1e-10],["are","ar",null,"area",!1,!0,100],["astronomical unit","ua",null,"length",!1,!1,149597870691667e-25],["bar","bar",null,"pressure",!1,!1,1e5],["barn","b",null,"area",!1,!1,1e-28],["becquerel","Bq",null,"radioactivity",!0,!1,1],["bit","bit",["b"],"information",!1,!0,1],["btu","BTU",["btu"],"energy",!1,!0,1055.05585262],["byte","byte",null,"information",!1,!0,8],["candela","cd",null,"luminous_intensity",!0,!1,1],["candela per square metre","cd/m?",null,"luminance",!0,!1,1],["coulomb","C",null,"electric_charge",!0,!1,1],["cubic ångström","ang3",["ang^3"],"volume",!1,!0,1e-30],["cubic foot","ft3",["ft^3"],"volume",!1,!0,.028316846592],["cubic inch","in3",["in^3"],"volume",!1,!0,16387064e-12],["cubic light-year","ly3",["ly^3"],"volume",!1,!0,846786664623715e-61],["cubic metre","m?",null,"volume",!0,!0,1],["cubic mile","mi3",["mi^3"],"volume",!1,!0,416818182544058e-5],["cubic nautical mile","Nmi3",["Nmi^3"],"volume",!1,!0,6352182208],["cubic Pica","Pica3",["Picapt3","Pica^3","Picapt^3"],"volume",!1,!0,758660370370369e-22],["cubic yard","yd3",["yd^3"],"volume",!1,!0,.764554857984],["cup","cup",null,"volume",!1,!0,.0002365882365],["dalton","Da",["u"],"mass",!1,!1,166053886282828e-41],["day","d",["day"],"time",!1,!0,86400],["degree","°",null,"angle",!1,!1,.0174532925199433],["degrees Rankine","Rank",null,"temperature",!1,!0,.555555555555556],["dyne","dyn",["dy"],"force",!1,!0,1e-5],["electronvolt","eV",["ev"],"energy",!1,!0,1.60217656514141],["ell","ell",null,"length",!1,!0,1.143],["erg","erg",["e"],"energy",!1,!0,1e-7],["farad","F",null,"electric_capacitance",!0,!1,1],["fluid ounce","oz",null,"volume",!1,!0,295735295625e-16],["foot","ft",null,"length",!1,!0,.3048],["foot-pound","flb",null,"energy",!1,!0,1.3558179483314],["gal","Gal",null,"acceleration",!1,!1,.01],["gallon","gal",null,"volume",!1,!0,.003785411784],["gauss","G",["ga"],"magnetic_flux_density",!1,!0,1],["grain","grain",null,"mass",!1,!0,647989e-10],["gram","g",null,"mass",!1,!0,.001],["gray","Gy",null,"absorbed_dose",!0,!1,1],["gross registered ton","GRT",["regton"],"volume",!1,!0,2.8316846592],["hectare","ha",null,"area",!1,!0,1e4],["henry","H",null,"inductance",!0,!1,1],["hertz","Hz",null,"frequency",!0,!1,1],["horsepower","HP",["h"],"power",!1,!0,745.69987158227],["horsepower-hour","HPh",["hh","hph"],"energy",!1,!0,2684519538e-3],["hour","h",["hr"],"time",!1,!0,3600],["imperial gallon (U.K.)","uk_gal",null,"volume",!1,!0,.00454609],["imperial hundredweight","lcwt",["uk_cwt","hweight"],"mass",!1,!0,50.802345],["imperial quart (U.K)","uk_qt",null,"volume",!1,!0,.0011365225],["imperial ton","brton",["uk_ton","LTON"],"mass",!1,!0,1016.046909],["inch","in",null,"length",!1,!0,.0254],["international acre","uk_acre",null,"area",!1,!0,4046.8564224],["IT calorie","cal",null,"energy",!1,!0,4.1868],["joule","J",null,"energy",!0,!0,1],["katal","kat",null,"catalytic_activity",!0,!1,1],["kelvin","K",["kel"],"temperature",!0,!0,1],["kilogram","kg",null,"mass",!0,!0,1],["knot","kn",null,"speed",!1,!0,.514444444444444],["light-year","ly",null,"length",!1,!0,9460730472580800],["litre","L",["l","lt"],"volume",!1,!0,.001],["lumen","lm",null,"luminous_flux",!0,!1,1],["lux","lx",null,"illuminance",!0,!1,1],["maxwell","Mx",null,"magnetic_flux",!1,!1,1e-18],["measurement ton","MTON",null,"volume",!1,!0,1.13267386368],["meter per hour","m/h",["m/hr"],"speed",!1,!0,.00027777777777778],["meter per second","m/s",["m/sec"],"speed",!0,!0,1],["meter per second squared","m?s??",null,"acceleration",!0,!1,1],["parsec","pc",["parsec"],"length",!1,!0,0x6da012f958ee1c],["meter squared per second","m?/s",null,"kinematic_viscosity",!0,!1,1],["metre","m",null,"length",!0,!0,1],["miles per hour","mph",null,"speed",!1,!0,.44704],["millimetre of mercury","mmHg",null,"pressure",!1,!1,133.322],["minute","?",null,"angle",!1,!1,.000290888208665722],["minute","min",["mn"],"time",!1,!0,60],["modern teaspoon","tspm",null,"volume",!1,!0,5e-6],["mole","mol",null,"amount_of_substance",!0,!1,1],["morgen","Morgen",null,"area",!1,!0,2500],["n.u. of action","?",null,"action",!1,!1,105457168181818e-48],["n.u. of mass","m?",null,"mass",!1,!1,910938261616162e-45],["n.u. of speed","c?",null,"speed",!1,!1,299792458],["n.u. of time","?/(me?c??)",null,"time",!1,!1,128808866778687e-35],["nautical mile","M",["Nmi"],"length",!1,!0,1852],["newton","N",null,"force",!0,!0,1],["œrsted","Oe ",null,"magnetic_field_intensity",!1,!1,79.5774715459477],["ohm","Ω",null,"electric_resistance",!0,!1,1],["ounce mass","ozm",null,"mass",!1,!0,.028349523125],["pascal","Pa",null,"pressure",!0,!1,1],["pascal second","Pa?s",null,"dynamic_viscosity",!0,!1,1],["pferdestärke","PS",null,"power",!1,!0,735.49875],["phot","ph",null,"illuminance",!1,!1,1e-4],["pica (1/6 inch)","pica",null,"length",!1,!0,.00035277777777778],["pica (1/72 inch)","Pica",["Picapt"],"length",!1,!0,.00423333333333333],["poise","P",null,"dynamic_viscosity",!1,!1,.1],["pond","pond",null,"force",!1,!0,.00980665],["pound force","lbf",null,"force",!1,!0,4.4482216152605],["pound mass","lbm",null,"mass",!1,!0,.45359237],["quart","qt",null,"volume",!1,!0,.000946352946],["radian","rad",null,"angle",!0,!1,1],["second","?",null,"angle",!1,!1,484813681109536e-20],["second","s",["sec"],"time",!0,!0,1],["short hundredweight","cwt",["shweight"],"mass",!1,!0,45.359237],["siemens","S",null,"electrical_conductance",!0,!1,1],["sievert","Sv",null,"equivalent_dose",!0,!1,1],["slug","sg",null,"mass",!1,!0,14.59390294],["square ångström","ang2",["ang^2"],"area",!1,!0,1e-20],["square foot","ft2",["ft^2"],"area",!1,!0,.09290304],["square inch","in2",["in^2"],"area",!1,!0,64516e-8],["square light-year","ly2",["ly^2"],"area",!1,!0,895054210748189e17],["square meter","m?",null,"area",!0,!0,1],["square mile","mi2",["mi^2"],"area",!1,!0,2589988110336e-6],["square nautical mile","Nmi2",["Nmi^2"],"area",!1,!0,3429904],["square Pica","Pica2",["Picapt2","Pica^2","Picapt^2"],"area",!1,!0,1792111111111e-17],["square yard","yd2",["yd^2"],"area",!1,!0,.83612736],["statute mile","mi",null,"length",!1,!0,1609.344],["steradian","sr",null,"solid_angle",!0,!1,1],["stilb","sb",null,"luminance",!1,!1,1e-4],["stokes","St",null,"kinematic_viscosity",!1,!1,1e-4],["stone","stone",null,"mass",!1,!0,6.35029318],["tablespoon","tbs",null,"volume",!1,!0,147868e-10],["teaspoon","tsp",null,"volume",!1,!0,492892e-11],["tesla","T",null,"magnetic_flux_density",!0,!0,1],["thermodynamic calorie","c",null,"energy",!1,!0,4.184],["ton","ton",null,"mass",!1,!0,907.18474],["tonne","t",null,"mass",!1,!1,1e3],["U.K. pint","uk_pt",null,"volume",!1,!0,.00056826125],["U.S. bushel","bushel",null,"volume",!1,!0,.03523907],["U.S. oil barrel","barrel",null,"volume",!1,!0,.158987295],["U.S. pint","pt",["us_pt"],"volume",!1,!0,.000473176473],["U.S. survey mile","survey_mi",null,"length",!1,!0,1609.347219],["U.S. survey/statute acre","us_acre",null,"area",!1,!0,4046.87261],["volt","V",null,"voltage",!0,!1,1],["watt","W",null,"power",!0,!0,1],["watt-hour","Wh",["wh"],"energy",!1,!0,3600],["weber","Wb",null,"magnetic_flux",!0,!1,1],["yard","yd",null,"length",!1,!0,.9144],["year","yr",null,"time",!1,!0,31557600]],U={Yi:["yobi",80,12089258196146292e8,"Yi","yotta"],Zi:["zebi",70,11805916207174113e5,"Zi","zetta"],Ei:["exbi",60,1152921504606847e3,"Ei","exa"],Pi:["pebi",50,0x4000000000000,"Pi","peta"],Ti:["tebi",40,1099511627776,"Ti","tera"],Gi:["gibi",30,1073741824,"Gi","giga"],Mi:["mebi",20,1048576,"Mi","mega"],ki:["kibi",10,1024,"ki","kilo"]},X={Y:["yotta",1e24,"Y"],Z:["zetta",1e21,"Z"],E:["exa",1e18,"E"],P:["peta",1e15,"P"],T:["tera",1e12,"T"],G:["giga",1e9,"G"],M:["mega",1e6,"M"],k:["kilo",1e3,"k"],h:["hecto",100,"h"],e:["dekao",10,"e"],d:["deci",.1,"d"],c:["centi",.01,"c"],m:["milli",.001,"m"],u:["micro",1e-6,"u"],n:["nano",1e-9,"n"],p:["pico",1e-12,"p"],f:["femto",1e-15,"f"],a:["atto",1e-18,"a"],z:["zepto",1e-21,"z"],y:["yocto",1e-24,"y"]};let oe,Se=null,ke=null,Qe=b,bt=j,At=1,vt=1;for(let kt=0;kt<I.length;kt++)oe=I[kt][2]===null?[]:I[kt][2],(I[kt][1]===Qe||oe.indexOf(Qe)>=0)&&(Se=I[kt]),(I[kt][1]===bt||oe.indexOf(bt)>=0)&&(ke=I[kt]);if(Se===null){const kt=U[b.substring(0,2)];let Kt=X[b.substring(0,1)];b.substring(0,2)==="da"&&(Kt=["dekao",10,"da"]),kt?(At=kt[2],Qe=b.substring(2)):Kt&&(At=Kt[1],Qe=b.substring(Kt[2].length));for(let Xt=0;Xt<I.length;Xt++)oe=I[Xt][2]===null?[]:I[Xt][2],(I[Xt][1]===Qe||oe.indexOf(Qe)>=0)&&(Se=I[Xt])}if(ke===null){const kt=U[j.substring(0,2)];let Kt=X[j.substring(0,1)];j.substring(0,2)==="da"&&(Kt=["dekao",10,"da"]),kt?(vt=kt[2],bt=j.substring(2)):Kt&&(vt=Kt[1],bt=j.substring(Kt[2].length));for(let Xt=0;Xt<I.length;Xt++)oe=I[Xt][2]===null?[]:I[Xt][2],(I[Xt][1]===bt||oe.indexOf(bt)>=0)&&(ke=I[Xt])}return Se===null||ke===null||Se[3]!==ke[3]?N:d*Se[6]*At/(ke[6]*vt)},l.CORREL=function(d,b){return me(d=ot(K(d)),b=ot(K(b)))?m:u.corrcoeff(d,b)},l.COS=function(d){return(d=te(d))instanceof Error?d:Math.cos(d)},l.COSH=function(d){return(d=te(d))instanceof Error?d:(Math.exp(d)+Math.exp(-d))/2},l.COT=function(d){return(d=te(d))instanceof Error?d:d===0?v:1/Math.tan(d)},l.COTH=function(d){if((d=te(d))instanceof Error)return d;if(d===0)return v;const b=Math.exp(2*d);return(b+1)/(b-1)},l.COUNT=q,l.COUNTA=z,l.COUNTBLANK=ee,l.COUNTIF=function(d,b){if(d=K(d),b===void 0||b==="*")return d.length;let j=0;const I=$e(b+"");for(let U=0;U<d.length;U++){const X=[Ie(d[U],Te)].concat(I);Be(X)&&j++}return j},l.COUNTIFS=function(){const d=H(arguments),b=new Array(K(d[0]).length);for(let I=0;I<b.length;I++)b[I]=!0;for(let I=0;I<d.length;I+=2){const U=K(d[I]),X=d[I+1];if(X!==void 0&&X!=="*"){const oe=$e(X+"");for(let Se=0;Se<U.length;Se++){const ke=[Ie(U[Se],Te)].concat(oe);b[Se]=b[Se]&&Be(ke)}}}let j=0;for(let I=0;I<b.length;I++)b[I]&&j++;return j},l.COUPDAYBS=function(){throw new Error("COUPDAYBS is not implemented")},l.COUPDAYS=function(){throw new Error("COUPDAYS is not implemented")},l.COUPDAYSNC=function(){throw new Error("COUPDAYSNC is not implemented")},l.COUPNCD=function(){throw new Error("COUPNCD is not implemented")},l.COUPNUM=function(){throw new Error("COUPNUM is not implemented")},l.COUPPCD=function(){throw new Error("COUPPCD is not implemented")},l.COVAR=as,l.COVARIANCE=Z,l.COVARIANCEP=ls,l.COVARIANCES=cs,l.CRITBINOM=us,l.CSC=function(d){return(d=te(d))instanceof Error?d:d===0?v:1/Math.sin(d)},l.CSCH=function(d){return(d=te(d))instanceof Error?d:d===0?v:2/(Math.exp(d)-Math.exp(-d))},l.CUMIPMT=function(d,b,j,I,U,X){if(me(d=te(d),b=te(b),j=te(j)))return m;if(d<=0||b<=0||j<=0||I<1||U<1||I>U||X!==0&&X!==1)return w;const oe=Rr(d,b,j,0,X);let Se=0;I===1&&(X===0&&(Se=-j),I++);for(let ke=I;ke<=U;ke++)Se+=X===1?rr(d,ke-2,oe,j,1)-oe:rr(d,ke-1,oe,j,0);return Se*=d,Se},l.CUMPRINC=function(d,b,j,I,U,X){if(me(d=te(d),b=te(b),j=te(j)))return m;if(d<=0||b<=0||j<=0||I<1||U<1||I>U||X!==0&&X!==1)return w;const oe=Rr(d,b,j,0,X);let Se=0;I===1&&(Se=X===0?oe+j*d:oe,I++);for(let ke=I;ke<=U;ke++)Se+=X>0?oe-(rr(d,ke-2,oe,j,1)-oe)*d:oe-rr(d,ke-1,oe,j,0)*d;return Se},l.DATE=function(d,b,j){let I;return me(d=te(d),b=te(b),j=te(j))?I=m:(I=new Date(d,b-1,j),I.getFullYear()<0&&(I=w)),I},l.DATEDIF=Dr,l.DATEVALUE=function(d){if(typeof d!="string")return m;const b=Date.parse(d);return isNaN(b)?m:new Date(d)},l.DAVERAGE=function(d,b,j){if(isNaN(b)&&typeof b!="string")return m;const I=wn(d,j);let U=[];if(typeof b=="string"){const oe=Ne(d,b);U=le(d[oe])}else U=le(d[b]);let X=0;return R(I,oe=>{X+=U[oe]}),I.length===0?v:X/I.length},l.DAY=function(d){const b=ut(d);return b instanceof Error?b:b.getDate()},l.DAYS=Qn,l.DAYS360=Gn,l.DB=function(d,b,j,I,U){if(U=U===void 0?12:U,me(d=te(d),b=te(b),j=te(j),I=te(I),U=te(U)))return m;if(d<0||b<0||j<0||I<0||[1,2,3,4,5,6,7,8,9,10,11,12].indexOf(U)===-1||I>j)return w;if(b>=d)return 0;const X=(1-Math.pow(b/d,1/j)).toFixed(3),oe=d*X*U/12;let Se=oe,ke=0;const Qe=I===j?j-1:I;for(let bt=2;bt<=Qe;bt++)ke=(d-Se)*X,Se+=ke;return I===1?oe:I===j?(d-Se)*X:ke},l.DBCS=function(){throw new Error("DBCS is not implemented")},l.DCOUNT=function(d,b,j){if(isNaN(b)&&typeof b!="string")return m;const I=wn(d,j);let U=[];if(typeof b=="string"){const oe=Ne(d,b);U=le(d[oe])}else U=le(d[b]);const X=[];return R(I,oe=>{X.push(U[oe])}),q(X)},l.DCOUNTA=function(d,b,j){if(isNaN(b)&&typeof b!="string")return m;const I=wn(d,j);let U=[];if(typeof b=="string"){const oe=Ne(d,b);U=le(d[oe])}else U=le(d[b]);const X=[];return R(I,oe=>{X.push(U[oe])}),z(X)},l.DDB=function(d,b,j,I,U){if(U=U===void 0?2:U,me(d=te(d),b=te(b),j=te(j),I=te(I),U=te(U)))return m;if(d<0||b<0||j<0||I<0||U<=0||I>j)return w;if(b>=d)return 0;let X=0,oe=0;for(let Se=1;Se<=I;Se++)oe=Math.min(U/j*(d-X),d-b-X),X+=oe;return oe},l.DEC2BIN=function(d,b){if((d=te(d))instanceof Error)return d;if(!/^-?[0-9]{1,3}$/.test(d)||d<-512||d>511)return w;if(d<0)return"1"+Cn("0",9-(512+d).toString(2).length)+(512+d).toString(2);const j=parseInt(d,10).toString(2);return b===void 0?j:isNaN(b)?m:b<0?w:(b=Math.floor(b))>=j.length?Cn("0",b-j.length)+j:w},l.DEC2HEX=function(d,b){if((d=te(d))instanceof Error)return d;if(!/^-?[0-9]{1,12}$/.test(d)||d<-549755813888||d>549755813887)return w;if(d<0)return(1099511627776+d).toString(16);const j=parseInt(d,10).toString(16);return b===void 0?j:isNaN(b)?m:b<0?w:(b=Math.floor(b))>=j.length?Cn("0",b-j.length)+j:w},l.DEC2OCT=function(d,b){if((d=te(d))instanceof Error)return d;if(!/^-?[0-9]{1,9}$/.test(d)||d<-536870912||d>536870911)return w;if(d<0)return(1073741824+d).toString(8);const j=parseInt(d,10).toString(8);return b===void 0?j:isNaN(b)?m:b<0?w:(b=Math.floor(b))>=j.length?Cn("0",b-j.length)+j:w},l.DECIMAL=function(d,b){return arguments.length<1?m:_e(d=te(d),b=te(b))||(b===0?w:parseInt(d,b))},l.DEGREES=function(d){return(d=te(d))instanceof Error?d:180*d/Math.PI},l.DELTA=function(d,b){return b=b===void 0?0:b,me(d=te(d),b=te(b))?m:d===b?1:0},l.DEVSQ=function(){const d=ot(K(arguments));if(d instanceof Error)return d;const b=u.mean(d);let j=0;for(let I=0;I<d.length;I++)j+=Math.pow(d[I]-b,2);return j},l.DGET=function(d,b,j){if(isNaN(b)&&typeof b!="string")return m;const I=wn(d,j);let U=[];return U=le(typeof b=="string"?d[Ne(d,b)]:d[b]),I.length===0?m:I.length>1?w:U[I[0]]},l.DISC=function(d,b,j,I,U){if(me(d=ut(d),b=ut(b),j=te(j),I=te(I),U=(U=te(U))||0))return m;if(j<=0||I<=0)return w;if(d>=b)return m;let X,oe;switch(U){case 0:X=360,oe=Gn(d,b,!1);break;case 1:case 3:X=365,oe=Dr(d,b,"D");break;case 2:X=360,oe=Dr(d,b,"D");break;case 4:X=360,oe=Gn(d,b,!0);break;default:return w}return(I-j)/I*X/oe},l.DMAX=function(d,b,j){if(isNaN(b)&&typeof b!="string")return m;const I=wn(d,j);let U=[];if(typeof b=="string"){const oe=Ne(d,b);U=le(d[oe])}else U=le(d[b]);let X=U[I[0]];return R(I,oe=>{X<U[oe]&&(X=U[oe])}),X},l.DMIN=function(d,b,j){if(isNaN(b)&&typeof b!="string")return m;const I=wn(d,j);let U=[];if(typeof b=="string"){const oe=Ne(d,b);U=le(d[oe])}else U=le(d[b]);let X=U[I[0]];return R(I,oe=>{X>U[oe]&&(X=U[oe])}),X},l.DOLLAR=function(d,b=2){if(d=te(d),isNaN(d))return m;const j={style:"currency",currency:"USD",minimumFractionDigits:b>=0?b:0,maximumFractionDigits:b>=0?b:0},I=(d=Vn(d,b)).toLocaleString("en-US",j);return d<0?"$("+I.slice(2)+")":I},l.DOLLARDE=function(d,b){if(me(d=te(d),b=te(b)))return m;if(b<0)return w;if(b>=0&&b<1)return v;b=parseInt(b,10);let j=parseInt(d,10);j+=d%1*Math.pow(10,Math.ceil(Math.log(b)/Math.LN10))/b;const I=Math.pow(10,Math.ceil(Math.log(b)/Math.LN2)+1);return j=Math.round(j*I)/I,j},l.DOLLARFR=function(d,b){if(me(d=te(d),b=te(b)))return m;if(b<0)return w;if(b>=0&&b<1)return v;b=parseInt(b,10);let j=parseInt(d,10);return j+=d%1*Math.pow(10,-Math.ceil(Math.log(b)/Math.LN10))*b,j},l.DPRODUCT=function(d,b,j){if(isNaN(b)&&typeof b!="string")return m;const I=wn(d,j);let U=[];if(typeof b=="string"){const Se=Ne(d,b);U=le(d[Se])}else U=le(d[b]);let X=[];R(I,Se=>{X.push(U[Se])}),X=Sn(X);let oe=1;return R(X,Se=>{oe*=Se}),oe},l.DSTDEV=function(d,b,j){if(isNaN(b)&&typeof b!="string")return m;const I=wn(d,j);let U=[];if(typeof b=="string"){const oe=Ne(d,b);U=le(d[oe])}else U=le(d[b]);let X=[];return R(I,oe=>{X.push(U[oe])}),X=Sn(X),dt.S(X)},l.DSTDEVP=function(d,b,j){if(isNaN(b)&&typeof b!="string")return m;const I=wn(d,j);let U=[];if(typeof b=="string"){const oe=Ne(d,b);U=le(d[oe])}else U=le(d[b]);let X=[];return R(I,oe=>{X.push(U[oe])}),X=Sn(X),dt.P(X)},l.DSUM=function(d,b,j){if(isNaN(b)&&typeof b!="string")return m;const I=wn(d,j);let U=[];if(typeof b=="string"){const oe=Ne(d,b);U=le(d[oe])}else U=le(d[b]);const X=[];return R(I,oe=>{X.push(U[oe])}),lr(X)},l.DURATION=function(){throw new Error("DURATION is not implemented")},l.DVAR=function(d,b,j){if(isNaN(b)&&typeof b!="string")return m;const I=wn(d,j);let U=[];if(typeof b=="string"){const oe=Ne(d,b);U=le(d[oe])}else U=le(d[b]);const X=[];return R(I,oe=>{X.push(U[oe])}),Ft.S(X)},l.DVARP=function(d,b,j){if(isNaN(b)&&typeof b!="string")return m;const I=wn(d,j);let U=[];if(typeof b=="string"){const oe=Ne(d,b);U=le(d[oe])}else U=le(d[b]);const X=[];return R(I,oe=>{X.push(U[oe])}),Ft.P(X)},l.EDATE=function(d,b){return(d=ut(d))instanceof Error?d:isNaN(b)?m:(b=parseInt(b,10),d.setMonth(d.getMonth()+b),d)},l.EFFECT=function(d,b){return me(d=te(d),b=te(b))?m:d<=0||b<1?w:(b=parseInt(b,10),Math.pow(1+d/b,b)-1)},l.EOMONTH=function(d,b){return(d=ut(d))instanceof Error?d:isNaN(b)?m:(b=parseInt(b,10),new Date(d.getFullYear(),d.getMonth()+b+1,0))},l.ERF=Eo,l.ERFC=Gr,l.ERFCPRECISE=ds,l.ERFPRECISE=fs,l.ERROR=nt,l.EVEN=function(d){return(d=te(d))instanceof Error?d:Pt(d,-2,-1)},l.EXACT=function(d,b){return arguments.length!==2?N:_e(d,b)||(d=St(d))===St(b)},l.EXP=function(d){return arguments.length<1?N:arguments.length>1?D:(d=te(d))instanceof Error?d:d=Math.exp(d)},l.EXPON=ue,l.EXPONDIST=Zo,l.F=we,l.FACT=dn,l.FACTDOUBLE=function d(b){if((b=te(b))instanceof Error)return b;const j=Math.floor(b);return j<=0?1:j*d(j-2)},l.FALSE=function(){return!1},l.FDIST=ps,l.FDISTRT=bn,l.FIND=function(d,b,j){if(arguments.length<2)return N;d=St(d),j=j===void 0?0:j;const I=(b=St(b)).indexOf(d,j-1);return I===-1?m:I+1},l.FINV=So,l.FINVRT=dr,l.FISHER=function(d){return(d=te(d))instanceof Error?d:Math.log((1+d)/(1-d))/2},l.FISHERINV=function(d){if((d=te(d))instanceof Error)return d;const b=Math.exp(2*d);return(b-1)/(b+1)},l.FIXED=vo,l.FLOOR=Vt,l.FLOORMATH=Qo,l.FLOORPRECISE=To,l.FORECAST=Ae,l.FREQUENCY=function(d,b){if(me(d=ot(K(d)),b=ot(K(b))))return m;const j=d.length,I=b.length,U=[];for(let X=0;X<=I;X++){U[X]=0;for(let oe=0;oe<j;oe++)X===0?d[oe]<=b[0]&&(U[0]+=1):X<I?d[oe]>b[X-1]&&d[oe]<=b[X]&&(U[X]+=1):X===I&&d[oe]>b[I-1]&&(U[I]+=1)}return U},l.FTEST=Dn,l.FV=rr,l.FVSCHEDULE=function(d,b){if(me(d=te(d),b=ot(K(b))))return m;const j=b.length;let I=d;for(let U=0;U<j;U++)I*=1+b[U];return I},l.GAMMA=je,l.GAMMADIST=ei,l.GAMMAINV=ti,l.GAMMALN=ze,l.GAMMALNPRECISE=ni,l.GAUSS=function(d){return(d=te(d))instanceof Error?d:u.normal.cdf(d,0,1)-.5},l.GCD=function(){const d=ot(K(arguments));if(d instanceof Error)return d;const b=d.length,j=d[0];let I=j<0?-j:j;for(let U=1;U<b;U++){const X=d[U];let oe=X<0?-X:X;for(;I&&oe;)I>oe?I%=oe:oe%=I;I+=oe}return I},l.GEOMEAN=function(){const d=ot(K(arguments));return d instanceof Error?d:u.geomean(d)},l.GESTEP=function(d,b){return me(b=b||0,d=te(d))?d:d>=b?1:0},l.GROWTH=function(d,b,j,I){if((d=ot(d))instanceof Error)return d;let U;if(b===void 0)for(b=[],U=1;U<=d.length;U++)b.push(U);if(j===void 0)for(j=[],U=1;U<=d.length;U++)j.push(U);if(me(b=ot(b),j=ot(j)))return m;I===void 0&&(I=!0);const X=d.length;let oe,Se,ke=0,Qe=0,bt=0,At=0;for(U=0;U<X;U++){const kt=b[U],Kt=Math.log(d[U]);ke+=kt,Qe+=Kt,bt+=kt*Kt,At+=kt*kt}ke/=X,Qe/=X,bt/=X,At/=X,I?(oe=(bt-ke*Qe)/(At-ke*ke),Se=Qe-oe*ke):(oe=bt/At,Se=0);const vt=[];for(U=0;U<j.length;U++)vt.push(Math.exp(Se+oe*j[U]));return vt},l.HARMEAN=function(){const d=ot(K(arguments));if(d instanceof Error)return d;const b=d.length;let j=0;for(let I=0;I<b;I++)j+=1/d[I];return b/j},l.HEX2BIN=function(d,b){if(!/^[0-9A-Fa-f]{1,10}$/.test(d))return w;const j=!(d.length!==10||d.substring(0,1).toLowerCase()!=="f"),I=j?parseInt(d,16)-1099511627776:parseInt(d,16);if(I<-512||I>511)return w;if(j)return"1"+Cn("0",9-(512+I).toString(2).length)+(512+I).toString(2);const U=I.toString(2);return b===void 0?U:isNaN(b)?m:b<0?w:(b=Math.floor(b))>=U.length?Cn("0",b-U.length)+U:w},l.HEX2DEC=function(d){if(!/^[0-9A-Fa-f]{1,10}$/.test(d))return w;const b=parseInt(d,16);return b>=549755813888?b-1099511627776:b},l.HEX2OCT=function(d,b){if(!/^[0-9A-Fa-f]{1,10}$/.test(d))return w;const j=parseInt(d,16);if(j>536870911&&j<0xffe0000000)return w;if(j>=0xffe0000000)return(j-0xffc0000000).toString(8);const I=j.toString(8);return b===void 0?I:isNaN(b)?m:b<0?w:(b=Math.floor(b))>=I.length?Cn("0",b-I.length)+I:w},l.HLOOKUP=function(d,b,j,I){return F(d,Ee(b),j,I)},l.HOUR=function(d){return(d=ut(d))instanceof Error?d:d.getHours()},l.HYPGEOM=it,l.HYPGEOMDIST=ri,l.IF=function(d,b,j){return d instanceof Error?d:((b=!(arguments.length>=2)||b)==null&&(b=0),(j=arguments.length===3&&j)==null&&(j=0),d?b:j)},l.IFERROR=function(d,b){return st(d)?b:d},l.IFNA=function(d,b){return d===N?b:d},l.IFS=function(){for(let d=0;d<arguments.length/2;d++)if(arguments[2*d])return arguments[2*d+1];return N},l.IMABS=Jr,l.IMAGINARY=Zt,l.IMARGUMENT=Xr,l.IMCONJUGATE=function(d){const b=Qt(d),j=Zt(d);if(me(b,j))return m;let I=d.substring(d.length-1);return I=I==="i"||I==="j"?I:"i",j!==0?gn(b,-j,I):d},l.IMCOS=Zr,l.IMCOSH=Jo,l.IMCOT=function(d){return me(Qt(d),Zt(d))?m:ur(Zr(d),Qr(d))},l.IMCSC=function(d){return d===!0||d===!1?m:me(Qt(d),Zt(d))?w:ur("1",Qr(d))},l.IMCSCH=function(d){return d===!0||d===!1?m:me(Qt(d),Zt(d))?w:ur("1",Xo(d))},l.IMDIV=ur,l.IMEXP=function(d){const b=Qt(d),j=Zt(d);if(me(b,j))return m;let I=d.substring(d.length-1);I=I==="i"||I==="j"?I:"i";const U=Math.exp(b);return gn(U*Math.cos(j),U*Math.sin(j),I)},l.IMLN=function(d){const b=Qt(d),j=Zt(d);if(me(b,j))return m;let I=d.substring(d.length-1);return I=I==="i"||I==="j"?I:"i",gn(Math.log(Math.sqrt(b*b+j*j)),Math.atan(j/b),I)},l.IMLOG10=function(d){const b=Qt(d),j=Zt(d);if(me(b,j))return m;let I=d.substring(d.length-1);return I=I==="i"||I==="j"?I:"i",gn(Math.log(Math.sqrt(b*b+j*j))/Math.log(10),Math.atan(j/b)/Math.log(10),I)},l.IMLOG2=function(d){const b=Qt(d),j=Zt(d);if(me(b,j))return m;let I=d.substring(d.length-1);return I=I==="i"||I==="j"?I:"i",gn(Math.log(Math.sqrt(b*b+j*j))/Math.log(2),Math.atan(j/b)/Math.log(2),I)},l.IMPOWER=function(d,b){if(me(b=te(b),Qt(d),Zt(d)))return m;let j=d.substring(d.length-1);j=j==="i"||j==="j"?j:"i";const I=Math.pow(Jr(d),b),U=Xr(d);return gn(I*Math.cos(b*U),I*Math.sin(b*U),j)},l.IMPRODUCT=function(){let d=arguments[0];if(!arguments.length)return m;for(let b=1;b<arguments.length;b++){const j=Qt(d),I=Zt(d),U=Qt(arguments[b]),X=Zt(arguments[b]);if(me(j,I,U,X))return m;d=gn(j*U-I*X,j*X+I*U)}return d},l.IMREAL=Qt,l.IMSEC=function(d){return d===!0||d===!1||me(Qt(d),Zt(d))?m:ur("1",Zr(d))},l.IMSECH=function(d){return me(Qt(d),Zt(d))?m:ur("1",Jo(d))},l.IMSIN=Qr,l.IMSINH=Xo,l.IMSQRT=function(d){if(me(Qt(d),Zt(d)))return m;let b=d.substring(d.length-1);b=b==="i"||b==="j"?b:"i";const j=Math.sqrt(Jr(d)),I=Xr(d);return gn(j*Math.cos(I/2),j*Math.sin(I/2),b)},l.IMSUB=function(d,b){const j=Qt(d),I=Zt(d),U=Qt(b),X=Zt(b);if(me(j,I,U,X))return m;const oe=d.substring(d.length-1),Se=b.substring(b.length-1);let ke="i";return(oe==="j"||Se==="j")&&(ke="j"),gn(j-U,I-X,ke)},l.IMSUM=function(){if(!arguments.length)return m;const d=K(arguments);let b=d[0];for(let j=1;j<d.length;j++){const I=Qt(b),U=Zt(b),X=Qt(d[j]),oe=Zt(d[j]);if(me(I,U,X,oe))return m;b=gn(I+X,U+oe)}return b},l.IMTAN=function(d){return d===!0||d===!1||me(Qt(d),Zt(d))?m:ur(Qr(d),Zr(d))},l.INDEX=function(d,b,j){const I=_e(d,b,j);if(I)return I;if(!Array.isArray(d))return m;const U=d.length>0&&!Array.isArray(d[0]);return U&&!j?(j=b,b=1):(j=j||1,b=b||1),j<0||b<0?m:U&&b===1&&j<=d.length?d[j-1]:b<=d.length&&j<=d[b-1].length?d[b-1][j-1]:S},l.INFO=function(){throw new Error("INFO is not implemented")},l.INT=function(d){return(d=te(d))instanceof Error?d:Math.floor(d)},l.INTERCEPT=function(d,b){return me(d=ot(d),b=ot(b))?m:d.length!==b.length?N:Ae(0,d,b)},l.INTRATE=function(){throw new Error("INTRATE is not implemented")},l.IPMT=fi,l.IRR=function(d,b){if(b=b||0,me(d=ot(K(d)),b=te(b)))return m;const j=(vt,kt,Kt)=>{const Xt=Kt+1;let An=vt[0];for(let un=1;un<vt.length;un++)An+=vt[un]/Math.pow(Xt,(kt[un]-kt[0])/365);return An},I=(vt,kt,Kt)=>{const Xt=Kt+1;let An=0;for(let un=1;un<vt.length;un++){const or=(kt[un]-kt[0])/365;An-=or*vt[un]/Math.pow(Xt,or+1)}return An},U=[];let X=!1,oe=!1;for(let vt=0;vt<d.length;vt++)U[vt]=vt===0?0:U[vt-1]+365,d[vt]>0&&(X=!0),d[vt]<0&&(oe=!0);if(!X||!oe)return w;let Se,ke,Qe,bt=b=b===void 0?.1:b,At=!0;do Qe=j(d,U,bt),Se=bt-Qe/I(d,U,bt),ke=Math.abs(Se-bt),bt=Se,At=ke>1e-10&&Math.abs(Qe)>1e-10;while(At);return bt},l.ISBLANK=function(d){return d===null},l.ISERR=ft,l.ISERROR=st,l.ISEVEN=function(d){return!(1&Math.floor(Math.abs(d)))},l.ISFORMULA=function(){throw new Error("ISFORMULA is not implemented")},l.ISLOGICAL=at,l.ISNA=function(d){return d===N},l.ISNONTEXT=function(d){return typeof d!="string"},l.ISNUMBER=Fe,l.ISO=on,l.ISODD=function(d){return!!(1&Math.floor(Math.abs(d)))},l.ISOWEEKNUM=mo,l.ISPMT=function(d,b,j,I){return me(d=te(d),b=te(b),j=te(j),I=te(I))?m:I*d*(b/j-1)},l.ISREF=function(){throw new Error("ISREF is not implemented")},l.ISTEXT=Ct,l.KURT=function(){const d=ot(K(arguments));if(d instanceof Error)return d;const b=u.mean(d),j=d.length;let I=0;for(let U=0;U<j;U++)I+=Math.pow(d[U]-b,4);return I/=Math.pow(u.stdev(d,!0),4),j*(j+1)/((j-1)*(j-2)*(j-3))*I-3*(j-1)*(j-1)/((j-2)*(j-3))},l.LARGE=ct,l.LCM=function(){const d=ot(K(arguments));if(d instanceof Error)return d;for(var b,j,I,U,X=1;(I=d.pop())!==void 0;){if(I===0)return 0;for(;I>1;){if(I%2){for(b=3,j=Math.floor(Math.sqrt(I));b<=j&&I%b;b+=2);U=b<=j?b:I}else U=2;for(I/=U,X*=U,b=d.length;b;d[--b]%U==0&&(d[b]/=U)==1&&d.splice(b,1));}}return X},l.LEFT=function(d,b){return _e(d,b)||(d=St(d),(b=te(b=b===void 0?1:b))instanceof Error||typeof d!="string"?m:d.substring(0,b))},l.LEN=function(d){return arguments.length===0?D:d instanceof Error?d:Array.isArray(d)?m:St(d).length},l.LINEST=Nt,l.LN=function(d){return(d=te(d))instanceof Error?d:d===0?w:Math.log(d)},l.LOG=function(d,b){return _e(d=te(d),b=te(b))||(d===0||b===0?w:Math.log(d)/Math.log(b))},l.LOG10=function(d){return(d=te(d))instanceof Error?d:d===0?w:Math.log(d)/Math.log(10)},l.LOGEST=function(d,b){if(me(d=ot(K(d)),b=ot(K(b)))||d.length!==b.length)return m;for(let I=0;I<d.length;I++)d[I]=Math.log(d[I]);const j=Nt(d,b);return j[0]=Math.round(1e6*Math.exp(j[0]))/1e6,j[1]=Math.round(1e6*Math.exp(j[1]))/1e6,j},l.LOGINV=oi,l.LOGNORM=Ot,l.LOGNORMDIST=ii,l.LOGNORMINV=Nn,l.LOOKUP=function(d,b,j){b=K(b),j=j?K(j):b;const I=typeof d=="number";let U=N;for(let X=0;X<b.length;X++){if(b[X]===d)return j[X];if(I&&b[X]<=d||typeof b[X]=="string"&&b[X].localeCompare(d)<0)U=j[X];else if(I&&b[X]>d)return U}return U},l.LOWER=function(d){return arguments.length!==1?m:me(d=St(d))?d:d.toLowerCase()},l.MATCH=function(d,b,j){if(!d||!b||(arguments.length===2&&(j=1),!((b=K(b))instanceof Array))||j!==-1&&j!==0&&j!==1)return N;let I,U;for(let X=0;X<b.length;X++)if(j===1){if(b[X]===d)return X+1;b[X]<d&&(U?b[X]>U&&(I=X+1,U=b[X]):(I=X+1,U=b[X]))}else if(j===0){if(typeof d=="string"&&typeof b[X]=="string"){const oe=d.toLowerCase().replace(/\?/g,".").replace(/\*/g,".*").replace(/~/g,"\\");if(new RegExp("^"+oe+"$").test(b[X].toLowerCase()))return X+1}else if(b[X]===d)return X+1}else if(j===-1){if(b[X]===d)return X+1;b[X]>d&&(U?b[X]<U&&(I=X+1,U=b[X]):(I=X+1,U=b[X]))}return I||N},l.MAX=ve,l.MAXA=function(){const d=K(arguments),b=_e.apply(void 0,d);if(b)return b;let j=B(d);return j=j.map(I=>I??0),j.length===0?0:Math.max.apply(Math,j)},l.MDURATION=function(){throw new Error("MDURATION is not implemented")},l.MEDIAN=Le,l.MID=function(d,b,j){if(b==null)return m;if(me(b=te(b),j=te(j))||typeof d!="string")return j;const I=b-1,U=I+j;return d.substring(I,U)},l.MIN=Xe,l.MINA=function(){const d=K(arguments),b=_e.apply(void 0,d);if(b)return b;let j=B(d);return j=j.map(I=>I??0),j.length===0?0:Math.min.apply(Math,j)},l.MINUTE=function(d){return(d=ut(d))instanceof Error?d:d.getMinutes()},l.MIRR=function(d,b,j){if(me(d=ot(K(d)),b=te(b),j=te(j)))return m;const I=d.length,U=[],X=[];for(let ke=0;ke<I;ke++)d[ke]<0?U.push(d[ke]):X.push(d[ke]);const oe=-Mo(j,X)*Math.pow(1+j,I-1),Se=Mo(b,U)*(1+b);return Math.pow(oe/Se,1/(I-1))-1},l.MMULT=function(d,b){return!Array.isArray(d)||!Array.isArray(b)||d.some(j=>!j.length)||b.some(j=>!j.length)||se(d).some(j=>typeof j!="number")||se(b).some(j=>typeof j!="number")||d[0].length!==b.length?m:Array(d.length).fill(0).map(()=>Array(b[0].length).fill(0)).map((j,I)=>j.map((U,X)=>d[I].reduce((oe,Se,ke)=>oe+Se*b[ke][X],0)))},l.MOD=function(d,b){const j=_e(d=te(d),b=te(b));if(j)return j;if(b===0)return v;let I=Math.abs(d%b);return I=d<0?b-I:I,b>0?I:-I},l.MODE=ne,l.MODEMULT=hs,l.MODESNGL=Rn,l.MONTH=function(d){return(d=ut(d))instanceof Error?d:d.getMonth()+1},l.MROUND=function(d,b){return _e(d=te(d),b=te(b))||(d*b==0?0:d*b<0?w:Math.round(d/b)*b)},l.MULTINOMIAL=function(){const d=ot(K(arguments));if(d instanceof Error)return d;let b=0,j=1;for(let I=0;I<d.length;I++)b+=d[I],j*=dn(d[I]);return dn(b)/j},l.MUNIT=function(d){return arguments.length>1?N:!(d=parseInt(d))||d<=0?m:Array(d).fill(0).map(()=>Array(d).fill(0)).map((b,j)=>(b[j]=1,b))},l.N=function(d){return Fe(d)?d:d instanceof Date?d.getTime():d===!0?1:d===!1?0:st(d)?d:0},l.NA=function(){return N},l.NEGBINOM=fe,l.NEGBINOMDIST=ms,l.NETWORKDAYS=Tr,l.NETWORKDAYSINTL=si,l.NOMINAL=function(d,b){return me(d=te(d),b=te(b))?m:d<=0||b<1?w:(b=parseInt(b,10),(Math.pow(d+1,1/b)-1)*b)},l.NORM=P,l.NORMDIST=er,l.NORMINV=eo,l.NORMSDIST=wo,l.NORMSINV=cn,l.NOT=function(d){return typeof d=="string"?m:d instanceof Error?d:!d},l.NOW=function(){return new Date},l.NPER=function(d,b,j,I,U){if(U=U===void 0?0:U,I=I===void 0?0:I,me(d=te(d),b=te(b),j=te(j),I=te(I),U=te(U)))return m;if(d===0)return-(j+I)/b;{const X=b*(1+d*U)-I*d,oe=j*d+b*(1+d*U);return Math.log(X/oe)/Math.log(1+d)}},l.NPV=Mo,l.NUMBERVALUE=function(d,b,j){return typeof(d=_t(d)?d:"")=="number"?d:typeof d!="string"?N:(b=b===void 0?".":b,j=j===void 0?",":j,Number(d.replace(b,".").replace(j,"")))},l.OCT2BIN=function(d,b){if(!/^[0-7]{1,10}$/.test(d))return w;const j=!(d.length!==10||d.substring(0,1)!=="7"),I=j?parseInt(d,8)-1073741824:parseInt(d,8);if(I<-512||I>511)return w;if(j)return"1"+Cn("0",9-(512+I).toString(2).length)+(512+I).toString(2);const U=I.toString(2);return b===void 0?U:isNaN(b)?m:b<0?w:(b=Math.floor(b))>=U.length?Cn("0",b-U.length)+U:w},l.OCT2DEC=function(d){if(!/^[0-7]{1,10}$/.test(d))return w;const b=parseInt(d,8);return b>=536870912?b-1073741824:b},l.OCT2HEX=function(d,b){if(!/^[0-7]{1,10}$/.test(d))return w;const j=parseInt(d,8);if(j>=536870912)return"ff"+(j+3221225472).toString(16);const I=j.toString(16);return b===void 0?I:isNaN(b)?m:b<0?w:(b=Math.floor(b))>=I.length?Cn("0",b-I.length)+I:w},l.ODD=function(d){if((d=te(d))instanceof Error)return d;let b=Math.ceil(Math.abs(d));return b=1&b?b:b+1,d>=0?b:-b},l.ODDFPRICE=function(){throw new Error("ODDFPRICE is not implemented")},l.ODDFYIELD=function(){throw new Error("ODDFYIELD is not implemented")},l.ODDLPRICE=function(){throw new Error("ODDLPRICE is not implemented")},l.ODDLYIELD=function(){throw new Error("ODDLYIELD is not implemented")},l.OR=function(){const d=K(arguments);let b=m;for(let j=0;j<d.length;j++){if(d[j]instanceof Error)return d[j];d[j]!==void 0&&d[j]!==null&&typeof d[j]!="string"&&(b===m&&(b=!1),d[j]&&(b=!0))}return b},l.PDURATION=function(d,b,j){return me(d=te(d),b=te(b),j=te(j))?m:d<=0?w:(Math.log(j)-Math.log(b))/Math.log(1+d)},l.PEARSON=G,l.PERCENTILE=ce,l.PERCENTILEEXC=nr,l.PERCENTILEINC=Ao,l.PERCENTRANK=De,l.PERCENTRANKEXC=gs,l.PERCENTRANKINC=xo,l.PERMUT=function(d,b){return me(d=te(d),b=te(b))?m:dn(d)/dn(d-b)},l.PERMUTATIONA=function(d,b){return me(d=te(d),b=te(b))?m:Math.pow(d,b)},l.PHI=function(d){return(d=te(d))instanceof Error?m:Math.exp(-.5*d*d)/2.5066282746310002},l.PI=function(){return Math.PI},l.PMT=Rr,l.POISSON=de,l.POISSONDIST=bs,l.POWER=Lt,l.PPMT=function(d,b,j,I,U,X){return U=U||0,X=X||0,me(d=te(d),j=te(j),I=te(I),U=te(U),X=te(X))?m:Rr(d,j,I,U,X)-fi(d,b,j,I,U,X)},l.PRICE=function(){throw new Error("PRICE is not implemented")},l.PRICEDISC=function(d,b,j,I,U){if(me(d=ut(d),b=ut(b),j=te(j),I=te(I),U=(U=te(U))||0))return m;if(j<=0||I<=0)return w;if(d>=b)return m;let X,oe;switch(U){case 0:X=360,oe=Gn(d,b,!1);break;case 1:case 3:X=365,oe=Dr(d,b,"D");break;case 2:X=360,oe=Dr(d,b,"D");break;case 4:X=360,oe=Gn(d,b,!0);break;default:return w}return I-j*I*oe/X},l.PRICEMAT=function(){throw new Error("PRICEMAT is not implemented")},l.PROB=function(d,b,j,I){if(j===void 0)return 0;if(I=I===void 0?j:I,me(d=ot(K(d)),b=ot(K(b)),j=te(j),I=te(I)))return m;if(j===I)return d.indexOf(j)>=0?b[d.indexOf(j)]:0;const U=d.sort((Se,ke)=>Se-ke),X=U.length;let oe=0;for(let Se=0;Se<X;Se++)U[Se]>=j&&U[Se]<=I&&(oe+=b[d.indexOf(U[Se])]);return oe},l.PRODUCT=ho,l.PRONETIC=function(){throw new Error("PRONETIC is not implemented")},l.PROPER=function(d){return me(d)?d:isNaN(d)&&typeof d=="number"?m:(d=St(d)).replace(/\w\S*/g,b=>b.charAt(0).toUpperCase()+b.substr(1).toLowerCase())},l.PV=function(d,b,j,I,U){return I=I||0,U=U||0,me(d=te(d),b=te(b),j=te(j),I=te(I),U=te(U))?m:d===0?-j*b-I:((1-Math.pow(1+d,b))/d*j*(1+d*U)-I)/Math.pow(1+d,b)},l.QUARTILE=Me,l.QUARTILEEXC=vs,l.QUARTILEINC=ys,l.QUOTIENT=function(d,b){return _e(d=te(d),b=te(b))||parseInt(d/b,10)},l.RADIANS=function(d){return(d=te(d))instanceof Error?d:d*Math.PI/180},l.RAND=function(){return Math.random()},l.RANDBETWEEN=function(d,b){return _e(d=te(d),b=te(b))||d+Math.ceil((b-d+1)*Math.random())-1},l.RANK=He,l.RANKAVG=ai,l.RANKEQ=to,l.RATE=function(d,b,j,I,U,X){if(X=X===void 0?.01:X,I=I===void 0?0:I,U=U===void 0?0:U,me(d=te(d),b=te(b),j=te(j),I=te(I),U=te(U),X=te(X)))return m;const oe=1e-10;let Se=X;U=U?1:0;for(let ke=0;ke<20;ke++){if(Se<=-1)return w;let Qe,bt,At;if(Math.abs(Se)<oe?Qe=j*(1+d*Se)+b*(1+Se*U)*d+I:(bt=Math.pow(1+Se,d),Qe=j*bt+b*(1/Se+U)*(bt-1)+I),Math.abs(Qe)<oe)return Se;if(Math.abs(Se)<oe)At=j*d+b*U*d;else{bt=Math.pow(1+Se,d);const vt=d*Math.pow(1+Se,d-1);At=j*vt+b*(1/Se+U)*vt+b*(-1/(Se*Se))*(bt-1)}Se-=Qe/At}return Se},l.RECEIVED=function(){throw new Error("RECEIVED is not implemented")},l.REPLACE=function(d,b,j,I){return me(b=te(b),j=te(j))||typeof d!="string"||typeof I!="string"?m:d.substr(0,b-1)+I+d.substr(b-1+j)},l.REPT=Cn,l.RIGHT=function(d,b){return _e(d,b)||(d=St(d),(b=te(b=b===void 0?1:b))instanceof Error?b:d.substring(d.length-b))},l.ROMAN=function(d){if((d=te(d))instanceof Error)return d;const b=String(d).split(""),j=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"];let I="",U=3;for(;U--;)I=(j[+b.pop()+10*U]||"")+I;return new Array(+b.join("")+1).join("M")+I},l.ROUND=Vn,l.ROUNDDOWN=function(d,b){return _e(d=te(d),b=te(b))||(d>0?1:-1)*Math.floor(Math.abs(d)*Math.pow(10,b))/Math.pow(10,b)},l.ROUNDUP=function(d,b){return _e(d=te(d),b=te(b))||(d>0?1:-1)*Math.ceil(Math.abs(d)*Math.pow(10,b))/Math.pow(10,b)},l.ROW=function(d,b){return arguments.length!==2?N:b<0?w:d instanceof Array&&typeof b=="number"?d.length!==0?u.row(d,b):void 0:m},l.ROWS=function(d){return arguments.length!==1?N:d instanceof Array?d.length===0?0:u.rows(d):m},l.RRI=function(d,b,j){return me(d=te(d),b=te(b),j=te(j))?m:d===0||b===0?w:Math.pow(j/b,1/d)-1},l.RSQ=function(d,b){return me(d=ot(K(d)),b=ot(K(b)))?m:Math.pow(G(d,b),2)},l.SEARCH=function(d,b,j){let I;return typeof d!="string"||typeof b!="string"?m:(j=j===void 0?0:j,I=b.toLowerCase().indexOf(d.toLowerCase(),j-1)+1,I===0?m:I)},l.SEC=function(d){return(d=te(d))instanceof Error?d:1/Math.cos(d)},l.SECH=function(d){return(d=te(d))instanceof Error?d:2/(Math.exp(d)+Math.exp(-d))},l.SECOND=function(d){return(d=ut(d))instanceof Error?d:d.getSeconds()},l.SERIESSUM=function(d,b,j,I){if(me(d=te(d),b=te(b),j=te(j),I=ot(I)))return m;let U=I[0]*Math.pow(d,b);for(let X=1;X<I.length;X++)U+=I[X]*Math.pow(d,b+X*j);return U},l.SHEET=function(){throw new Error("SHEET is not implemented")},l.SHEETS=function(){throw new Error("SHEETS is not implemented")},l.SIGN=function(d){return(d=te(d))instanceof Error?d:d<0?-1:d===0?0:1},l.SIN=function(d){return(d=te(d))instanceof Error?d:Math.sin(d)},l.SINH=function(d){return(d=te(d))instanceof Error?d:(Math.exp(d)-Math.exp(-d))/2},l.SKEW=lt,l.SKEWP=Ar,l.SLN=function(d,b,j){return me(d=te(d),b=te(b),j=te(j))?m:j===0?w:(d-b)/j},l.SLOPE=function(d,b){if(me(d=ot(K(d)),b=ot(K(b))))return m;const j=u.mean(b),I=u.mean(d),U=b.length;let X=0,oe=0;for(let Se=0;Se<U;Se++)X+=(b[Se]-j)*(d[Se]-I),oe+=Math.pow(b[Se]-j,2);return X/oe},l.SMALL=qe,l.SORT=function(d,b=1,j=1,I=!1){if(!d||!Array.isArray(d))return N;if(d.length===0)return 0;if(!(b=te(b))||b<1||(j=te(j))!==1&&j!==-1)return m;if(typeof(I=pt(I))!="boolean")return T;const U=Se=>Se.sort((ke,Qe)=>(ke=St(ke[b-1]),Qe=St(Qe[b-1]),j===1?ke<Qe?-1*j:j:ke>Qe?j:-1*j)),X=Y(d),oe=I?Ee(X):X;return b>=1&&b<=oe[0].length?I?Ee(U(oe)):U(oe):m},l.SQRT=function(d){return(d=te(d))instanceof Error?d:d<0?w:Math.sqrt(d)},l.SQRTPI=function(d){return(d=te(d))instanceof Error?d:Math.sqrt(d*Math.PI)},l.STANDARDIZE=function(d,b,j){return me(d=te(d),b=te(b),j=te(j))?m:(d-b)/j},l.STDEV=dt,l.STDEVA=function(){const d=Ce.apply(this,arguments);return Math.sqrt(d)},l.STDEVP=Es,l.STDEVPA=function(){const d=We.apply(this,arguments);let b=Math.sqrt(d);return isNaN(b)&&(b=w),b},l.STDEVS=li,l.STEYX=function(d,b){if(me(d=ot(K(d)),b=ot(K(b))))return m;const j=u.mean(b),I=u.mean(d),U=b.length;let X=0,oe=0,Se=0;for(let ke=0;ke<U;ke++)X+=Math.pow(d[ke]-I,2),oe+=(b[ke]-j)*(d[ke]-I),Se+=Math.pow(b[ke]-j,2);return Math.sqrt((X-oe*oe/Se)/(U-2))},l.SUBSTITUTE=function(d,b,j,I){if(arguments.length<3)return N;if(d&&b){if(I===void 0)return d.split(b).join(j);{if(I=Math.floor(Number(I)),Number.isNaN(I)||I<=0)return m;let U=0,X=0;for(;U>-1&&d.indexOf(b,U)>-1;)if(U=d.indexOf(b,U+1),X++,U>-1&&X===I)return d.substring(0,U)+j+d.substring(U+b.length);return d}}return d},l.SUBTOTAL=function(d,b){if((d=te(d))instanceof Error)return d;switch(d){case 1:case 101:return V(b);case 2:case 102:return q(b);case 3:case 103:return z(b);case 4:case 104:return ve(b);case 5:case 105:return Xe(b);case 6:case 106:return ho(b);case 7:case 107:return dt.S(b);case 8:case 108:return dt.P(b);case 9:case 109:return lr(b);case 10:case 110:return Ft.S(b);case 11:case 111:return Ft.P(b)}},l.SUM=lr,l.SUMIF=function(d,b,j){if(d=K(d),j=j?K(j):d,d instanceof Error)return d;if(b==null||b instanceof Error)return 0;let I=0;const U=b==="*",X=U?null:$e(b+"");for(let oe=0;oe<d.length;oe++){const Se=d[oe],ke=j[oe];if(U)I+=Se;else{const Qe=[Ie(Se,Te)].concat(X);I+=Be(Qe)?ke:0}}return I},l.SUMIFS=function(){const d=H(arguments),b=ot(K(d.shift()));if(b instanceof Error)return b;const j=d,I=j.length/2;for(let X=0;X<I;X++)j[2*X]=K(j[2*X]);let U=0;for(let X=0;X<b.length;X++){let oe=!1;for(let Se=0;Se<I;Se++){const ke=j[2*Se][X],Qe=j[2*Se+1];let bt=!1;if(Qe===void 0||Qe==="*")bt=!0;else{const At=$e(Qe+""),vt=[Ie(ke,Te)].concat(At);bt=Be(vt)}if(!bt){oe=!1;break}oe=!0}oe&&(U+=b[X])}return U},l.SUMPRODUCT=function(){if(!arguments||arguments.length===0)return m;const d=arguments.length+1;let b,j,I,U,X=0;for(let oe=0;oe<arguments[0].length;oe++)if(arguments[0][oe]instanceof Array)for(let Se=0;Se<arguments[0][oe].length;Se++){for(b=1,j=1;j<d;j++){const ke=arguments[j-1][oe][Se];if(ke instanceof Error)return ke;if(U=te(ke),U instanceof Error)return U;b*=U}X+=b}else{for(b=1,j=1;j<d;j++){const Se=arguments[j-1][oe];if(Se instanceof Error)return Se;if(I=te(Se),I instanceof Error)return I;b*=I}X+=b}return X},l.SUMSQ=function(){const d=ot(K(arguments));if(d instanceof Error)return d;let b=0;const j=d.length;for(let I=0;I<j;I++)b+=Fe(d[I])?d[I]*d[I]:0;return b},l.SUMX2MY2=function(d,b){if(me(d=ot(K(d)),b=ot(K(b))))return m;let j=0;for(let I=0;I<d.length;I++)j+=d[I]*d[I]-b[I]*b[I];return j},l.SUMX2PY2=function(d,b){if(me(d=ot(K(d)),b=ot(K(b))))return m;let j=0;d=ot(K(d)),b=ot(K(b));for(let I=0;I<d.length;I++)j+=d[I]*d[I]+b[I]*b[I];return j},l.SUMXMY2=function(d,b){if(me(d=ot(K(d)),b=ot(K(b))))return m;let j=0;d=K(d),b=K(b);for(let I=0;I<d.length;I++)j+=Math.pow(d[I]-b[I],2);return j},l.SWITCH=function(){let d;if(arguments.length>0){const b=arguments[0],j=arguments.length-1,I=Math.floor(j/2);let U=!1;const X=j%2!=0,oe=j%2==0?null:arguments[arguments.length-1];if(I){for(let Se=0;Se<I;Se++)if(b===arguments[2*Se+1]){d=arguments[2*Se+2],U=!0;break}}U||(d=X?oe:N)}else d=m;return d},l.SYD=function(d,b,j,I){return me(d=te(d),b=te(b),j=te(j),I=te(I))?m:j===0||I<1||I>j?w:(d-b)*(j-(I=parseInt(I,10))+1)*2/(j*(j+1))},l.T=function(d){return d instanceof Error||typeof d=="string"?d:""},l.TAN=function(d){return(d=te(d))instanceof Error?d:Math.tan(d)},l.TANH=function(d){if((d=te(d))instanceof Error)return d;const b=Math.exp(2*d);return(b-1)/(b+1)},l.TBILLEQ=function(d,b,j){return me(d=ut(d),b=ut(b),j=te(j))?m:j<=0||d>b||b-d>31536e6?w:365*j/(360-j*Gn(d,b,!1))},l.TBILLPRICE=function(d,b,j){return me(d=ut(d),b=ut(b),j=te(j))?m:j<=0||d>b||b-d>31536e6?w:100*(1-j*Gn(d,b,!1)/360)},l.TBILLYIELD=function(d,b,j){return me(d=ut(d),b=ut(b),j=te(j))?m:j<=0||d>b||b-d>31536e6?w:360*(100-j)/(j*Gn(d,b,!1))},l.TDIST=ci,l.TDISTRT=_o,l.TEXT=function(d,b){if(d===void 0||d instanceof Error||b instanceof Error)return N;if(b==null)return"";if(typeof b=="number")return String(b);if(typeof b!="string")return m;const j=b.startsWith("$")?"$":"",I=b.endsWith("%");return I&&(d*=100),d=(d=vo(d,(b=b.replace(/%/g,"").replace(/\$/g,"")).split(".")[1].match(/0/g).length,!b.includes(","))).startsWith("-")?"-"+j+(d=d.replace("-","")):j+d,I&&(d+="%"),d},l.TEXTJOIN=function(d,b,...j){if(typeof b!="boolean"&&(b=pt(b)),arguments.length<3)return N;d=d??"";let I=K(j),U=b?I.filter(X=>X):I;if(Array.isArray(d)){d=K(d);let X=U.map(Se=>[Se]),oe=0;for(let Se=0;Se<X.length-1;Se++)X[Se].push(d[oe]),oe++,oe===d.length&&(oe=0);return U=K(X),U.join("")}return U.join(d)},l.TIME=function(d,b,j){return me(d=te(d),b=te(b),j=te(j))?m:d<0||b<0||j<0?w:(3600*d+60*b+j)/86400},l.TIMEVALUE=function(d){return(d=ut(d))instanceof Error?d:(3600*d.getHours()+60*d.getMinutes()+d.getSeconds())/86400},l.TINV=No,l.TODAY=function(){return Wr(new Date)},l.TRANSPOSE=function(d){return d?Ee(Y(d)):N},l.TREND=function(d,b,j){if(me(d=ot(K(d)),b=ot(K(b)),j=ot(K(j))))return m;const I=Nt(d,b),U=I[0],X=I[1],oe=[];return j.forEach(Se=>{oe.push(U*Se+X)}),oe},l.TRIM=function(d){return(d=St(d))instanceof Error?d:d.replace(/\s+/g," ").trim()},l.TRIMMEAN=function(d,b){if(me(d=ot(K(d)),b=te(b)))return m;const j=Vt(d.length*b,2)/2;return u.mean((U=(U=j)||1,(I=le(d.sort((X,oe)=>X-oe),j))&&typeof I.slice=="function"?I.slice(0,I.length-U):I));var I,U},l.TRUE=function(){return!0},l.TRUNC=function(d,b){return _e(d=te(d),b=te(b))||(d>0?1:-1)*Math.floor(Math.abs(d)*Math.pow(10,b))/Math.pow(10,b)},l.TTEST=ui,l.TYPE=function(d){return Fe(d)?1:Ct(d)?2:at(d)?4:st(d)?16:Array.isArray(d)?64:void 0},l.UNICHAR=yo,l.UNICODE=wr,l.UNIQUE=mt,l.UPPER=function(d){return(d=St(d))instanceof Error?d:d.toUpperCase()},l.VALUE=function(d){const b=_e(d);if(b)return b;if(typeof d=="number")return d;if(_t(d)||(d=""),typeof d!="string")return m;const j=/(%)$/.test(d)||/^(%)/.test(d);if((d=(d=(d=d.replace(/^[^0-9-]{0,3}/,"")).replace(/[^0-9]{0,3}$/,"")).replace(/[ ,]/g,""))==="")return 0;let I=Number(d);return isNaN(I)?m:(I=I||0,j&&(I*=.01),I)},l.VAR=Ft,l.VARA=Ce,l.VARP=Cs,l.VARPA=We,l.VARS=jo,l.VDB=function(){throw new Error("VDB is not implemented")},l.VLOOKUP=F,l.WEEKDAY=function(d,b){if((d=ut(d))instanceof Error)return d;b===void 0&&(b=1);const j=d.getDay();return Ji[b][j]},l.WEEKNUM=function(d,b){if((d=ut(d))instanceof Error)return d;if(b===void 0&&(b=1),b===21)return mo(d);const j=qo[b];let I=new Date(d.getFullYear(),0,1);const U=I.getDay()<j?1:0;return I-=24*Math.abs(I.getDay()-j)*60*60*1e3,Math.floor((d-I)/864e5/7+1)+U},l.WEIBULL=Ue,l.WEIBULLDIST=Oo,l.WORKDAY=zr,l.WORKDAYINTL=Ss,l.XIRR=function(d,b,j){if(me(d=ot(K(d)),b=It(K(b)),j=te(j)))return m;const I=(vt,kt,Kt)=>{const Xt=Kt+1;let An=vt[0];for(let un=1;un<vt.length;un++)An+=vt[un]/Math.pow(Xt,Qn(kt[un],kt[0])/365);return An},U=(vt,kt,Kt)=>{const Xt=Kt+1;let An=0;for(let un=1;un<vt.length;un++){const or=Qn(kt[un],kt[0])/365;An-=or*vt[un]/Math.pow(Xt,or+1)}return An};let X=!1,oe=!1;for(let vt=0;vt<d.length;vt++)d[vt]>0&&(X=!0),d[vt]<0&&(oe=!0);if(!X||!oe)return w;let Se,ke,Qe,bt=j=j||.1,At=!0;do Qe=I(d,b,bt),Se=bt-Qe/U(d,b,bt),ke=Math.abs(Se-bt),bt=Se,At=ke>1e-10&&Math.abs(Qe)>1e-10;while(At);return bt},l.XNPV=function(d,b,j){if(me(d=te(d),b=ot(K(b)),j=It(K(j))))return m;let I=0;for(let U=0;U<b.length;U++)I+=b[U]/Math.pow(1+d,Qn(j[U],j[0])/365);return I},l.XOR=function(){const d=K(arguments);let b=m;for(let j=0;j<d.length;j++){if(d[j]instanceof Error)return d[j];d[j]!==void 0&&d[j]!==null&&typeof d[j]!="string"&&(b===m&&(b=0),d[j]&&b++)}return b===m?b:!!(1&Math.floor(Math.abs(b)))},l.YEAR=function(d){return(d=ut(d))instanceof Error?d:d.getFullYear()},l.YEARFRAC=Kr,l.YIELD=function(){throw new Error("YIELD is not implemented")},l.YIELDDISC=function(){throw new Error("YIELDDISC is not implemented")},l.YIELDMAT=function(){throw new Error("YIELDMAT is not implemented")},l.Z=Et,l.ZTEST=di,l.utils=Ts}},r={};function o(a){var l=r[a];if(l!==void 0)return l.exports;var c=r[a]={exports:{}};return n[a].call(c.exports,c,c.exports,o),c.exports}o.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();var s=o(960);e=s}(),e)},44:function(module,__unused_webpack_exports,__webpack_require__){if(!formula)var formula=__webpack_require__(463);var factory;factory=function(){var Version=(info={title:"Jspreadsheet",version:"4.15.0",type:"CE",host:"https://bossanova.uk/jspreadsheet",license:"MIT",print:function(){return[this.title+" "+this.type+" "+this.version,this.host,this.license].join(`\r
`)}},function(){return info}),info,isFormula=function(t){var e=(""+t)[0];return e=="="||e=="#"},getMask=function(t){if(t.format||t.mask||t.locale){var e={};return t.mask?e.mask=t.mask:t.format?e.mask=t.format:(e.locale=t.locale,e.options=t.options),t.decimal&&(e.options||(e.options={}),e.options={decimal:t.decimal}),e}return null},jexcel=function(el,options){var obj={options:{}};if(!(el instanceof Element||el instanceof HTMLDocument))return console.error("Jspreadsheet: el is not a valid DOM element"),!1;if(el.tagName=="TABLE"){if(!(options=jexcel.createFromTable(el,options)))return console.error("Jspreadsheet: el is not a valid DOM element"),!1;var div=document.createElement("div");el.parentNode.insertBefore(div,el),el.remove(),el=div}var defaults={url:null,method:"GET",requestVariables:null,data:null,sorting:null,copyCompatibility:!1,root:null,rows:[],columns:[],colHeaders:[],colWidths:[],colAlignments:[],nestedHeaders:null,defaultColWidth:50,defaultColAlign:"center",defaultRowHeight:null,minSpareRows:0,minSpareCols:0,minDimensions:[0,0],allowExport:!0,includeHeadersOnDownload:!1,includeHeadersOnCopy:!1,columnSorting:!0,columnDrag:!1,columnResize:!0,rowResize:!1,rowDrag:!0,editable:!0,allowInsertRow:!0,allowManualInsertRow:!0,allowInsertColumn:!0,allowManualInsertColumn:!0,allowDeleteRow:!0,allowDeletingAllRows:!1,allowDeleteColumn:!0,allowRenameColumn:!0,allowComments:!1,wordWrap:!1,imageOptions:null,csv:null,csvFileName:"jspreadsheet",csvHeaders:!0,csvDelimiter:",",parseTableFirstRowAsHeader:!1,parseTableAutoCellType:!1,selectionCopy:!0,mergeCells:{},toolbar:null,search:!1,pagination:!1,paginationOptions:null,fullscreen:!1,lazyLoading:!1,loadingSpin:!1,tableOverflow:!1,tableHeight:"300px",tableWidth:null,textOverflow:!1,meta:null,style:null,classes:null,parseFormulas:!0,autoIncrement:!0,autoCasting:!0,secureFormulas:!0,stripHTML:!0,stripHTMLOnCopy:!1,filters:!1,footers:null,onundo:null,onredo:null,onload:null,onchange:null,oncomments:null,onbeforechange:null,onafterchanges:null,onbeforeinsertrow:null,oninsertrow:null,onbeforeinsertcolumn:null,oninsertcolumn:null,onbeforedeleterow:null,ondeleterow:null,onbeforedeletecolumn:null,ondeletecolumn:null,onmoverow:null,onmovecolumn:null,onresizerow:null,onresizecolumn:null,onsort:null,onselection:null,oncopy:null,onpaste:null,onbeforepaste:null,onmerge:null,onfocus:null,onblur:null,onchangeheader:null,oncreateeditor:null,oneditionstart:null,oneditionend:null,onchangestyle:null,onchangemeta:null,onchangepage:null,onbeforesave:null,onsave:null,onevent:null,persistance:!1,updateTable:null,detachForUpdates:!1,freezeColumns:null,text:{noRecordsFound:"No records found",showingPage:"Showing page {0} of {1} entries",show:"Show ",search:"Search",entries:" entries",columnName:"Column name",insertANewColumnBefore:"Insert a new column before",insertANewColumnAfter:"Insert a new column after",deleteSelectedColumns:"Delete selected columns",renameThisColumn:"Rename this column",orderAscending:"Order ascending",orderDescending:"Order descending",insertANewRowBefore:"Insert a new row before",insertANewRowAfter:"Insert a new row after",deleteSelectedRows:"Delete selected rows",editComments:"Edit comments",addComments:"Add comments",comments:"Comments",clearComments:"Clear comments",copy:"Copy...",paste:"Paste...",saveAs:"Save as...",about:"About",areYouSureToDeleteTheSelectedRows:"Are you sure to delete the selected rows?",areYouSureToDeleteTheSelectedColumns:"Are you sure to delete the selected columns?",thisActionWillDestroyAnyExistingMergedCellsAreYouSure:"This action will destroy any existing merged cells. Are you sure?",thisActionWillClearYourSearchResultsAreYouSure:"This action will clear your search results. Are you sure?",thereIsAConflictWithAnotherMergedCell:"There is a conflict with another merged cell",invalidMergeProperties:"Invalid merged properties",cellAlreadyMerged:"Cell already merged",noCellsSelected:"No cells selected"},about:!0};for(var property in defaults)if(options&&options.hasOwnProperty(property))if(property==="text")for(var textKey in obj.options[property]=defaults[property],options[property])options[property].hasOwnProperty(textKey)&&(obj.options[property][textKey]=options[property][textKey]);else obj.options[property]=options[property];else obj.options[property]=defaults[property];obj.el=el,obj.corner=null,obj.contextMenu=null,obj.textarea=null,obj.ads=null,obj.content=null,obj.table=null,obj.thead=null,obj.tbody=null,obj.rows=[],obj.results=null,obj.searchInput=null,obj.toolbar=null,obj.pagination=null,obj.pageNumber=null,obj.headerContainer=null,obj.colgroupContainer=null,obj.headers=[],obj.records=[],obj.history=[],obj.formula=[],obj.colgroup=[],obj.selection=[],obj.highlighted=[],obj.selectedCell=null,obj.selectedContainer=null,obj.style=[],obj.data=null,obj.filter=null,obj.filters=[],obj.cursor=null,obj.historyIndex=-1,obj.ignoreEvents=!1,obj.ignoreHistory=!1,obj.edition=null,obj.hashString=null,obj.resizing=null,obj.dragging=null,obj.options.lazyLoading==1&&obj.options.tableOverflow==0&&obj.options.fullscreen==0&&(console.error("Jspreadsheet: The lazyloading only works when tableOverflow = yes or fullscreen = yes"),obj.options.lazyLoading=!1),obj.fullscreen=function(t){t==null&&(t=!obj.options.fullscreen),obj.options.fullscreen!=t&&(obj.options.fullscreen=t,t==1?el.classList.add("fullscreen"):el.classList.remove("fullscreen"))},obj.dispatch=function(t){if(!obj.ignoreEvents){if(typeof obj.options.onevent=="function")var e=obj.options.onevent.apply(this,arguments);typeof obj.options[t]=="function"&&(e=obj.options[t].apply(this,Array.prototype.slice.call(arguments,1)))}if(t=="onafterchanges"&&obj.options.persistance){var n=obj.options.persistance==1?obj.options.url:obj.options.persistance,r=obj.prepareJson(arguments[2]);obj.save(n,r)}return e},obj.prepareTable=function(){var t=obj.options.columns.length;if(obj.options.data&&obj.options.data[0]!==void 0){var e=Object.keys(obj.options.data[0]);e.length>t&&(t=e.length)}obj.options.minDimensions[0]>t&&(t=obj.options.minDimensions[0]);for(var n=[],r=0;r<t;r++)obj.options.colHeaders[r]||(obj.options.colHeaders[r]=""),obj.options.colWidths[r]||(obj.options.colWidths[r]=obj.options.defaultColWidth),obj.options.colAlignments[r]||(obj.options.colAlignments[r]=obj.options.defaultColAlign),obj.options.columns[r]?obj.options.columns[r].type||(obj.options.columns[r].type="text"):obj.options.columns[r]={type:"text"},obj.options.columns[r].name||(obj.options.columns[r].name=e&&e[r]?e[r]:r),obj.options.columns[r].source||(obj.options.columns[r].source=[]),obj.options.columns[r].options||(obj.options.columns[r].options=[]),obj.options.columns[r].editor||(obj.options.columns[r].editor=null),obj.options.columns[r].allowEmpty||(obj.options.columns[r].allowEmpty=!1),obj.options.columns[r].title||(obj.options.columns[r].title=obj.options.colHeaders[r]?obj.options.colHeaders[r]:""),obj.options.columns[r].width||(obj.options.columns[r].width=obj.options.colWidths[r]?obj.options.colWidths[r]:obj.options.defaultColWidth),obj.options.columns[r].align||(obj.options.columns[r].align=obj.options.colAlignments[r]?obj.options.colAlignments[r]:"center"),obj.options.columns[r].type=="autocomplete"||obj.options.columns[r].type=="dropdown"?obj.options.columns[r].url&&n.push({url:obj.options.columns[r].url,index:r,method:"GET",dataType:"json",success:function(o){for(var s=0;s<o.length;s++)obj.options.columns[this.index].source.push(o[s])}}):obj.options.columns[r].type=="calendar"&&(obj.options.columns[r].options.format||(obj.options.columns[r].options.format="DD/MM/YYYY"));n.length?jSuites.ajax(n,function(){obj.createTable()}):obj.createTable()},obj.createTable=function(){obj.table=document.createElement("table"),obj.thead=document.createElement("thead"),obj.tbody=document.createElement("tbody"),obj.headers=[],obj.colgroup=[],obj.content=document.createElement("div"),obj.content.classList.add("jexcel_content"),obj.content.onscroll=function(T){obj.scrollControls(T)},obj.content.onwheel=function(T){obj.wheelControls(T)},obj.toolbar=document.createElement("div"),obj.toolbar.classList.add("jexcel_toolbar");var t=document.createElement("div"),e=document.createTextNode(obj.options.text.search+": ");obj.searchInput=document.createElement("input"),obj.searchInput.classList.add("jexcel_search"),t.appendChild(e),t.appendChild(obj.searchInput),obj.searchInput.onfocus=function(){obj.resetSelection()};var n=document.createElement("div");if(obj.options.pagination>0&&obj.options.paginationOptions&&obj.options.paginationOptions.length>0){obj.paginationDropdown=document.createElement("select"),obj.paginationDropdown.classList.add("jexcel_pagination_dropdown"),obj.paginationDropdown.onchange=function(){obj.options.pagination=parseInt(this.value),obj.page(0)};for(var r=0;r<obj.options.paginationOptions.length;r++){var o=document.createElement("option");o.value=obj.options.paginationOptions[r],o.innerHTML=obj.options.paginationOptions[r],obj.paginationDropdown.appendChild(o)}obj.paginationDropdown.value=obj.options.pagination,n.appendChild(document.createTextNode(obj.options.text.show)),n.appendChild(obj.paginationDropdown),n.appendChild(document.createTextNode(obj.options.text.entries))}var s,a=document.createElement("div");if(a.classList.add("jexcel_filter"),a.appendChild(n),a.appendChild(t),obj.colgroupContainer=document.createElement("colgroup"),(s=document.createElement("col")).setAttribute("width","50"),obj.colgroupContainer.appendChild(s),obj.options.nestedHeaders&&obj.options.nestedHeaders.length>0)if(obj.options.nestedHeaders[0]&&obj.options.nestedHeaders[0][0])for(var l=0;l<obj.options.nestedHeaders.length;l++)obj.thead.appendChild(obj.createNestedHeader(obj.options.nestedHeaders[l]));else obj.thead.appendChild(obj.createNestedHeader(obj.options.nestedHeaders));for(obj.headerContainer=document.createElement("tr"),(s=document.createElement("td")).classList.add("jexcel_selectall"),obj.headerContainer.appendChild(s),r=0;r<obj.options.columns.length;r++)obj.createCellHeader(r),obj.headerContainer.appendChild(obj.headers[r]),obj.colgroupContainer.appendChild(obj.colgroup[r]);if(obj.thead.appendChild(obj.headerContainer),obj.options.filters==1){obj.filter=document.createElement("tr");var c=document.createElement("td");for(obj.filter.appendChild(c),r=0;r<obj.options.columns.length;r++)(c=document.createElement("td")).innerHTML="&nbsp;",c.setAttribute("data-x",r),c.className="jexcel_column_filter",obj.options.columns[r].type=="hidden"&&(c.style.display="none"),obj.filter.appendChild(c);obj.thead.appendChild(obj.filter)}obj.table=document.createElement("table"),obj.table.classList.add("jexcel"),obj.table.setAttribute("cellpadding","0"),obj.table.setAttribute("cellspacing","0"),obj.table.setAttribute("unselectable","yes"),obj.table.appendChild(obj.colgroupContainer),obj.table.appendChild(obj.thead),obj.table.appendChild(obj.tbody),obj.options.textOverflow||obj.table.classList.add("jexcel_overflow"),obj.corner=document.createElement("div"),obj.corner.className="jexcel_corner",obj.corner.setAttribute("unselectable","on"),obj.corner.setAttribute("onselectstart","return false"),obj.options.selectionCopy==0&&(obj.corner.style.display="none"),obj.textarea=document.createElement("textarea"),obj.textarea.className="jexcel_textarea",obj.textarea.id="jexcel_textarea",obj.textarea.tabIndex="-1",obj.contextMenu=document.createElement("div"),obj.contextMenu.className="jexcel_contextmenu",jSuites.contextmenu(obj.contextMenu,{onclick:function(){obj.contextMenu.contextmenu.close(!1)}});var u=document.createElement("a");u.setAttribute("href","https://bossanova.uk/jspreadsheet/"),obj.ads=document.createElement("div"),obj.ads.className="jexcel_about";var g=document.createElement("span");g.innerHTML="Jspreadsheet CE",u.appendChild(g),obj.ads.appendChild(u),document.createElement("div").classList.add("jexcel_table"),obj.pagination=document.createElement("div"),obj.pagination.classList.add("jexcel_pagination");var C=document.createElement("div"),v=document.createElement("div");if(obj.pagination.appendChild(C),obj.pagination.appendChild(v),obj.options.pagination||(obj.pagination.style.display="none"),obj.options.search==1&&el.appendChild(a),obj.content.appendChild(obj.table),obj.content.appendChild(obj.corner),obj.content.appendChild(obj.textarea),el.appendChild(obj.toolbar),el.appendChild(obj.content),el.appendChild(obj.pagination),el.appendChild(obj.contextMenu),el.appendChild(obj.ads),el.classList.add("jexcel_container"),obj.options.toolbar&&obj.options.toolbar.length&&obj.createToolbar(),obj.options.fullscreen==1?el.classList.add("fullscreen"):obj.options.tableOverflow==1&&(obj.options.tableHeight&&(obj.content.style["overflow-y"]="auto",obj.content.style["box-shadow"]="rgb(221 221 221) 2px 2px 5px 0.1px",obj.content.style.maxHeight=obj.options.tableHeight),obj.options.tableWidth&&(obj.content.style["overflow-x"]="auto",obj.content.style.width=obj.options.tableWidth)),obj.options.tableOverflow!=1&&obj.options.toolbar&&el.classList.add("with-toolbar"),obj.options.columnDrag==1&&obj.thead.classList.add("draggable"),obj.options.columnResize==1&&obj.thead.classList.add("resizable"),obj.options.rowDrag==1&&obj.tbody.classList.add("draggable"),obj.options.rowResize==1&&obj.tbody.classList.add("resizable"),obj.setData(),obj.options.style&&obj.setStyle(obj.options.style,null,null,1,1),obj.options.classes){var m=Object.keys(obj.options.classes);for(r=0;r<m.length;r++){var S=jexcel.getIdFromColumnName(m[r],!0);obj.records[S[1]][S[0]].classList.add(obj.options.classes[m[r]])}}},obj.refresh=function(){obj.options.url?(obj.options.loadingSpin==1&&jSuites.loading.show(),jSuites.ajax({url:obj.options.url,method:obj.options.method,data:obj.options.requestVariables,dataType:"json",success:function(t){obj.options.data=t.data?t.data:t,obj.setData(),obj.options.loadingSpin==1&&jSuites.loading.hide()}})):obj.setData()},obj.setData=function(t){if(t&&(typeof t=="string"&&(t=JSON.parse(t)),obj.options.data=t),obj.options.data||(obj.options.data=[]),obj.options.data&&obj.options.data[0]&&!Array.isArray(obj.options.data[0])){t=[];for(var e=0;e<obj.options.data.length;e++){for(var n=[],r=0;r<obj.options.columns.length;r++)n[r]=obj.options.data[e][obj.options.columns[r].name];t.push(n)}obj.options.data=t}e=0,r=0;var o=obj.options.columns.length,s=obj.options.data.length,a=obj.options.minDimensions[0],l=obj.options.minDimensions[1],c=a>o?a:o,u=l>s?l:s;for(e=0;e<u;e++)for(r=0;r<c;r++)obj.options.data[e]==null&&(obj.options.data[e]=[]),obj.options.data[e][r]==null&&(obj.options.data[e][r]="");if(obj.rows=[],obj.results=null,obj.records=[],obj.history=[],obj.historyIndex=-1,obj.tbody.innerHTML="",obj.options.lazyLoading==1){var g=0,C=obj.options.data.length<100?obj.options.data.length:100;obj.options.pagination&&(obj.options.pagination=!1,console.error("Jspreadsheet: Pagination will be disable due the lazyLoading"))}else obj.options.pagination?(obj.pageNumber||(obj.pageNumber=0),obj.options.pagination,g=obj.options.pagination*obj.pageNumber,C=obj.options.pagination*obj.pageNumber+obj.options.pagination,obj.options.data.length<C&&(C=obj.options.data.length)):(g=0,C=obj.options.data.length);for(e=0;e<obj.options.data.length;e++){var v=obj.createRow(e,obj.options.data[e]);e>=g&&e<C&&obj.tbody.appendChild(v)}if(obj.options.lazyLoading==1||obj.options.pagination&&obj.updatePagination(),obj.options.mergeCells){var m=Object.keys(obj.options.mergeCells);for(r=0;r<m.length;r++){var S=obj.options.mergeCells[m[r]];obj.setMerge(m[r],S[0],S[1],1)}}obj.updateTable(),obj.dispatch("onload",el,obj)},obj.getData=function(t,e){for(var n=[],r=0,o=0,s=e==1||obj.options.copyCompatibility==0,a=obj.options.columns.length,l=obj.options.data.length,c=0;c<l;c++){r=0;for(var u=0;u<a;u++)t&&!obj.records[c][u].classList.contains("highlight")||(n[o]||(n[o]=[]),n[o][r]=s?obj.options.data[c][u]:obj.records[c][u].innerHTML,r++);r>0&&o++}return n},obj.getJsonRow=function(t){for(var e=obj.options.data[t],n=obj.options.columns.length,r={},o=0;o<n;o++)obj.options.columns[o].name||(obj.options.columns[o].name=o),r[obj.options.columns[o].name]=e[o];return r},obj.getJson=function(t){for(var e=[],n=obj.options.columns.length,r=obj.options.data.length,o=0;o<r;o++){for(var s=null,a=0;a<n;a++)t&&!obj.records[o][a].classList.contains("highlight")||(s==null&&(s={}),obj.options.columns[a].name||(obj.options.columns[a].name=a),s[obj.options.columns[a].name]=obj.options.data[o][a]);s!=null&&e.push(s)}return e},obj.prepareJson=function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n].x,o=t[n].y,s=obj.options.columns[r].name?obj.options.columns[r].name:r;e[o]||(e[o]={row:o,data:{}}),e[o].data[s]=t[n].newValue}return e.filter(function(a){return a!=null})},obj.save=function(t,e){var n=obj.dispatch("onbeforesave",el,obj,e);if(n)e=n;else if(n===!1)return!1;jSuites.ajax({url:t,method:"POST",dataType:"json",data:{data:JSON.stringify(e)},success:function(r){obj.dispatch("onsave",el,obj,e)}})},obj.getRowData=function(t){return obj.options.data[t]},obj.setRowData=function(t,e){for(var n=0;n<obj.headers.length;n++){var r=jexcel.getColumnNameFromId([n,t]);e[n]!=null&&obj.setValue(r,e[n])}},obj.getColumnData=function(t){for(var e=[],n=0;n<obj.options.data.length;n++)e.push(obj.options.data[n][t]);return e},obj.setColumnData=function(t,e){for(var n=0;n<obj.rows.length;n++){var r=jexcel.getColumnNameFromId([t,n]);e[n]!=null&&obj.setValue(r,e[n])}},obj.createRow=function(t,e){obj.records[t]||(obj.records[t]=[]),e||(e=obj.options.data[t]),obj.rows[t]=document.createElement("tr"),obj.rows[t].setAttribute("data-y",t);var n=null;obj.options.defaultRowHeight&&(obj.rows[t].style.height=obj.options.defaultRowHeight+"px"),obj.options.rows[t]&&(obj.options.rows[t].height&&(obj.rows[t].style.height=obj.options.rows[t].height),obj.options.rows[t].title&&(n=obj.options.rows[t].title)),n||(n=parseInt(t+1));var r=document.createElement("td");r.innerHTML=n,r.setAttribute("data-y",t),r.className="jexcel_row",obj.rows[t].appendChild(r);for(var o=0;o<obj.options.columns.length;o++)obj.records[t][o]=obj.createCell(o,t,e[o]),obj.rows[t].appendChild(obj.records[t][o]);return obj.rows[t]},obj.parseValue=function(t,e,n,r){(""+n).substr(0,1)=="="&&obj.options.parseFormulas==1&&(n=obj.executeFormula(n,t,e));var o=obj.options.columns[t];if(o&&!isFormula(n)){var s=null;if(s=getMask(o)){n&&n==Number(n)&&(n=Number(n));var a=jSuites.mask.render(n,s,!0);if(r&&s.mask){var l=s.mask.split(";");l[1]&&(l[1].match(new RegExp("\\[Red\\]","gi"))&&(n<0?r.classList.add("red"):r.classList.remove("red")),l[1].match(new RegExp("\\(","gi"))&&n<0&&(a="("+a+")"))}a&&(n=a)}}return n};var validDate=function(t){return(t=""+t).substr(4,1)=="-"&&t.substr(7,1)=="-"||(t=t.split("-"))[0].length==4&&t[0]==Number(t[0])&&t[1].length==2&&t[1]==Number(t[1])};obj.createCell=function(t,e,n){var r=document.createElement("td");if(r.setAttribute("data-x",t),r.setAttribute("data-y",e),(""+n).substr(0,1)=="="&&obj.options.secureFormulas==1){var o=secureFormula(n);o!=n&&(n=o)}if(obj.options.columns[t].editor)obj.options.stripHTML===!1||obj.options.columns[t].stripHTML===!1?r.innerHTML=n:r.textContent=n,typeof obj.options.columns[t].editor.createCell=="function"&&(r=obj.options.columns[t].editor.createCell(r));else if(obj.options.columns[t].type=="hidden")r.style.display="none",r.textContent=n;else if(obj.options.columns[t].type=="checkbox"||obj.options.columns[t].type=="radio"){var s=document.createElement("input");s.type=obj.options.columns[t].type,s.name="c"+t,s.checked=n==1||n==1||n=="true",s.onclick=function(){obj.setValue(r,this.checked)},obj.options.columns[t].readOnly!=1&&obj.options.editable!=0||s.setAttribute("disabled","disabled"),r.appendChild(s),obj.options.data[e][t]=s.checked}else if(obj.options.columns[t].type=="calendar"){var a=null;if(!validDate(n)){var l=jSuites.calendar.extractDateFromString(n,obj.options.columns[t].options.format);l&&(a=l)}r.textContent=jSuites.calendar.getDateString(a||n,obj.options.columns[t].options.format)}else if(obj.options.columns[t].type=="dropdown"||obj.options.columns[t].type=="autocomplete")r.classList.add("jexcel_dropdown"),r.textContent=obj.getDropDownValue(t,n);else if(obj.options.columns[t].type=="color")if(obj.options.columns[t].render=="square"){var c=document.createElement("div");c.className="color",c.style.backgroundColor=n,r.appendChild(c)}else r.style.color=n,r.textContent=n;else if(obj.options.columns[t].type=="image"){if(n&&n.substr(0,10)=="data:image"){var u=document.createElement("img");u.src=n,r.appendChild(u)}}else obj.options.columns[t].type=="html"||obj.options.stripHTML===!1||obj.options.columns[t].stripHTML===!1?r.innerHTML=stripScript(obj.parseValue(t,e,n,r)):r.textContent=obj.parseValue(t,e,n,r);obj.options.columns[t].readOnly==1&&(r.className="readonly");var g=obj.options.columns[t].align?obj.options.columns[t].align:"center";return r.style.textAlign=g,obj.options.columns[t].wordWrap!=0&&(obj.options.wordWrap==1||obj.options.columns[t].wordWrap==1||r.innerHTML.length>200)&&(r.style.whiteSpace="pre-wrap"),t>0&&this.options.textOverflow==1&&(n||r.innerHTML?obj.records[e][t-1].style.overflow="hidden":t==obj.options.columns.length-1&&(r.style.overflow="hidden")),r},obj.createCellHeader=function(t){var e=obj.options.columns[t].width?obj.options.columns[t].width:obj.options.defaultColWidth,n=obj.options.columns[t].align?obj.options.columns[t].align:obj.options.defaultColAlign;obj.headers[t]=document.createElement("td"),obj.options.stripHTML?obj.headers[t].textContent=obj.options.columns[t].title?obj.options.columns[t].title:jexcel.getColumnName(t):obj.headers[t].innerHTML=obj.options.columns[t].title?obj.options.columns[t].title:jexcel.getColumnName(t),obj.headers[t].setAttribute("data-x",t),obj.headers[t].style.textAlign=n,obj.options.columns[t].title&&obj.headers[t].setAttribute("title",obj.headers[t].innerText),obj.options.columns[t].id&&obj.headers[t].setAttribute("id",obj.options.columns[t].id),obj.colgroup[t]=document.createElement("col"),obj.colgroup[t].setAttribute("width",e),obj.options.columns[t].type=="hidden"&&(obj.headers[t].style.display="none",obj.colgroup[t].style.display="none")},obj.updateNestedHeader=function(t,e,n){obj.options.nestedHeaders[e][t].title&&(obj.options.nestedHeaders[e][t].title=n,obj.options.nestedHeaders[e].element.children[t+1].textContent=n)},obj.createNestedHeader=function(t){var e=document.createElement("tr");e.classList.add("jexcel_nested");var n=document.createElement("td");e.appendChild(n),t.element=e;for(var r=0,o=0;o<t.length;o++){t[o].colspan||(t[o].colspan=1),t[o].align||(t[o].align="center"),t[o].title||(t[o].title=""),t[o].id||(t[o].id="");for(var s=t[o].colspan,a=[],l=0;l<s;l++)obj.options.columns[r]&&obj.options.columns[r].type=="hidden"&&s++,a.push(r),r++;(n=document.createElement("td")).setAttribute("data-column",a.join(",")),n.setAttribute("colspan",t[o].colspan),n.setAttribute("align",t[o].align),n.setAttribute("id",t[o].id),n.textContent=t[o].title,e.appendChild(n)}return e},obj.createToolbar=function(t){t?obj.options.toolbar=t:t=obj.options.toolbar;for(var e=0;e<t.length;e++)if(t[e].type=="i")(s=document.createElement("i")).classList.add("jexcel_toolbar_item"),s.classList.add("material-icons"),s.setAttribute("data-k",t[e].k),s.setAttribute("data-v",t[e].v),s.setAttribute("id",t[e].id),t[e].tooltip&&s.setAttribute("title",t[e].tooltip),t[e].onclick&&(t[e].onclick,1)?s.onclick=function(a){var l=a;return function(){t[l].onclick(el,obj,this)}}(e):s.onclick=function(){var a=this.getAttribute("data-k"),l=this.getAttribute("data-v");obj.setStyle(obj.highlighted,a,l)},s.textContent=t[e].content,obj.toolbar.appendChild(s);else if(t[e].type=="select"){var n=!1;(s=document.createElement("select")).classList.add("jexcel_toolbar_item"),s.setAttribute("data-k",t[e].k),t[e].tooltip&&s.setAttribute("title",t[e].tooltip),t[e].onchange&&(t[e].onchange,1)?(s.onchange=t[e].onchange,n=!0):s.onchange=function(){var a=this.getAttribute("data-k");obj.setStyle(obj.highlighted,a,this.value)};for(var r=0;r<t[e].v.length;r++){var o=document.createElement("option");o.value=t[e].v[r],o.textContent=t[e].v[r],t[e].selectedValue&&o.value===t[e].selectedValue&&(o.selected=!0),s.appendChild(o)}n&&s.dispatchEvent(new Event("change")),obj.toolbar.appendChild(s)}else if(t[e].type=="color"){var s;(s=document.createElement("i")).classList.add("jexcel_toolbar_item"),s.classList.add("material-icons"),s.setAttribute("data-k",t[e].k),s.setAttribute("data-v",""),t[e].tooltip&&s.setAttribute("title",t[e].tooltip),obj.toolbar.appendChild(s),s.textContent=t[e].content,jSuites.color(s,{onchange:function(a,l){var c=a.getAttribute("data-k");obj.setStyle(obj.highlighted,c,l)}})}},obj.setMerge=function(t,e,n,r){var o=!1;if(!t){if(!obj.highlighted.length)return alert(obj.options.text.noCellsSelected),null;var s=parseInt(obj.highlighted[0].getAttribute("data-x")),a=parseInt(obj.highlighted[0].getAttribute("data-y")),l=parseInt(obj.highlighted[obj.highlighted.length-1].getAttribute("data-x")),c=parseInt(obj.highlighted[obj.highlighted.length-1].getAttribute("data-y"));t=jexcel.getColumnNameFromId([s,a]),e=l-s+1,n=c-a+1}var u=jexcel.getIdFromColumnName(t,!0);if(obj.options.mergeCells[t])obj.records[u[1]][u[0]].getAttribute("data-merged")&&(o=obj.options.text.cellAlreadyMerged);else if((!e||e<2)&&(!n||n<2))o=obj.options.text.invalidMergeProperties;else for(var g=u[1];g<u[1]+n;g++)for(var C=u[0];C<u[0]+e;C++)jexcel.getColumnNameFromId([C,g]),obj.records[g][C].getAttribute("data-merged")&&(o=obj.options.text.thereIsAConflictWithAnotherMergedCell);if(o)alert(o);else{e>1?obj.records[u[1]][u[0]].setAttribute("colspan",e):e=1,n>1?obj.records[u[1]][u[0]].setAttribute("rowspan",n):n=1,obj.options.mergeCells[t]=[e,n,[]],obj.records[u[1]][u[0]].setAttribute("data-merged","true"),obj.records[u[1]][u[0]].style.overflow="hidden";for(var v=[],m=u[1];m<u[1]+n;m++)for(var S=u[0];S<u[0]+e;S++)u[0]==S&&u[1]==m||(v.push(obj.options.data[m][S]),obj.updateCell(S,m,"",!0),obj.options.mergeCells[t][2].push(obj.records[m][S]),obj.records[m][S].style.display="none",obj.records[m][S]=obj.records[u[1]][u[0]]);obj.updateSelection(obj.records[u[1]][u[0]]),r||(obj.setHistory({action:"setMerge",column:t,colspan:e,rowspan:n,data:v}),obj.dispatch("onmerge",el,t,e,n))}},obj.getMerge=function(t){var e={};if(t)e=obj.options.mergeCells[t]?[obj.options.mergeCells[t][0],obj.options.mergeCells[t][1]]:null;else if(obj.options.mergeCells){obj.options.mergeCells;for(var n=Object.keys(obj.options.mergeCells),r=0;r<n.length;r++)e[n[r]]=[obj.options.mergeCells[n[r]][0],obj.options.mergeCells[n[r]][1]]}return e},obj.removeMerge=function(t,e,n){if(obj.options.mergeCells[t]){var r=jexcel.getIdFromColumnName(t,!0);obj.records[r[1]][r[0]].removeAttribute("colspan"),obj.records[r[1]][r[0]].removeAttribute("rowspan"),obj.records[r[1]][r[0]].removeAttribute("data-merged");for(var o=obj.options.mergeCells[t],s=0,a=0;a<o[1];a++)for(var l=0;l<o[0];l++)(a>0||l>0)&&(obj.records[r[1]+a][r[0]+l]=o[2][s],obj.records[r[1]+a][r[0]+l].style.display="",e&&e[s]&&obj.updateCell(r[0]+l,r[1]+a,e[s]),s++);obj.updateSelection(obj.records[r[1]][r[0]],obj.records[r[1]+a-1][r[0]+l-1]),n||delete obj.options.mergeCells[t]}},obj.destroyMerged=function(t){if(obj.options.mergeCells){obj.options.mergeCells;for(var e=Object.keys(obj.options.mergeCells),n=0;n<e.length;n++)obj.removeMerge(e[n],null,t)}},obj.isColMerged=function(t,e){var n=[];if(obj.options.mergeCells)for(var r=Object.keys(obj.options.mergeCells),o=0;o<r.length;o++){var s=jexcel.getIdFromColumnName(r[o],!0),a=obj.options.mergeCells[r[o]][0],l=s[0],c=s[0]+(a>1?a-1:0);e==null?l<=t&&c>=t&&n.push(r[o]):e?l<t&&c>=t&&n.push(r[o]):l<=t&&c>t&&n.push(r[o])}return n},obj.isRowMerged=function(t,e){var n=[];if(obj.options.mergeCells)for(var r=Object.keys(obj.options.mergeCells),o=0;o<r.length;o++){var s=jexcel.getIdFromColumnName(r[o],!0),a=obj.options.mergeCells[r[o]][1],l=s[1],c=s[1]+(a>1?a-1:0);e==null?l<=t&&c>=t&&n.push(r[o]):e?l<t&&c>=t&&n.push(r[o]):l<=t&&c>t&&n.push(r[o])}return n},obj.openFilter=function(t){if(obj.options.filters){t=parseInt(t),obj.resetSelection();var e=[];if(obj.options.columns[t].type=="checkbox")e.push({id:"true",name:"True"}),e.push({id:"false",name:"False"});else{for(var n=[],r=!1,o=0;o<obj.options.data.length;o++){var s=obj.options.data[o][t],a=obj.records[o][t].innerHTML;s&&a?n[s]=a:r=!0}var l=Object.keys(n);for(e=[],o=0;o<l.length;o++)e.push({id:l[o],name:n[l[o]]});r&&e.push({value:"",id:"",name:"(Blanks)"})}var c=document.createElement("div");obj.filter.children[t+1].innerHTML="",obj.filter.children[t+1].appendChild(c),obj.filter.children[t+1].style.paddingLeft="0px",obj.filter.children[t+1].style.paddingRight="0px",obj.filter.children[t+1].style.overflow="initial";var u={data:e,multiple:!0,autocomplete:!0,opened:!0,value:obj.filters[t]!==void 0?obj.filters[t]:null,width:"100%",position:obj.options.tableOverflow==1||obj.options.fullscreen==1,onclose:function(g){obj.resetFilters(),obj.filters[t]=g.dropdown.getValue(!0),obj.filter.children[t+1].innerHTML=g.dropdown.getText(),obj.filter.children[t+1].style.paddingLeft="",obj.filter.children[t+1].style.paddingRight="",obj.filter.children[t+1].style.overflow="",obj.closeFilter(t),obj.refreshSelection()}};jSuites.dropdown(c,u)}else console.log("Jspreadsheet: filters not enabled.")},obj.resetFilters=function(){if(obj.options.filters)for(var t=0;t<obj.filter.children.length;t++)obj.filter.children[t].innerHTML="&nbsp;",obj.filters[t]=null;obj.results=null,obj.updateResult()},obj.closeFilter=function(t){if(!t)for(var e=0;e<obj.filter.children.length;e++)obj.filters[e]&&(t=e);var n=function(s,a,l){for(var c=0;c<s.length;c++){var u=""+obj.options.data[l][a],g=""+obj.records[l][a].innerHTML;if(s[c]==u||s[c]==g)return!0}return!1},r=obj.filters[t];obj.results=[];for(var o=0;o<obj.options.data.length;o++)n(r,t,o)&&obj.results.push(o);obj.results.length||(obj.results=null),obj.updateResult()},obj.openEditor=function(t,e,n){var r=t.getAttribute("data-y"),o=t.getAttribute("data-x");obj.dispatch("oneditionstart",el,t,o,r),o>0&&(obj.records[r][o-1].style.overflow="hidden");var s=function(D){var k=t.getBoundingClientRect(),L=document.createElement(D);return L.style.width=k.width+"px",L.style.height=k.height-2+"px",L.style.minHeight=k.height-2+"px",t.classList.add("editor"),t.innerHTML="",t.appendChild(L),obj.dispatch("oncreateeditor",el,t,o,r,L),L};if(t.classList.contains("readonly")!=1){if(obj.edition=[obj.records[r][o],obj.records[r][o].innerHTML,o,r],obj.options.columns[o].editor)obj.options.columns[o].editor.openEditor(t,el,e,n);else if(obj.options.columns[o].type!="hidden")if(obj.options.columns[o].type=="checkbox"||obj.options.columns[o].type=="radio"){var a=!t.children[0].checked;obj.setValue(t,a),obj.edition=null}else if(obj.options.columns[o].type=="dropdown"||obj.options.columns[o].type=="autocomplete"){if(a=obj.options.data[r][o],obj.options.columns[o].multiple&&!Array.isArray(a)&&(a=a.split(";")),typeof obj.options.columns[o].filter=="function")var l=obj.options.columns[o].filter(el,t,o,r,obj.options.columns[o].source);else l=obj.options.columns[o].source;for(var c=[],u=0;u<l.length;u++)c.push(l[u]);var g=s("div"),C={data:c,multiple:!!obj.options.columns[o].multiple,autocomplete:!(!obj.options.columns[o].autocomplete&&obj.options.columns[o].type!="autocomplete"),opened:!0,value:a,width:"100%",height:g.style.minHeight,position:obj.options.tableOverflow==1||obj.options.fullscreen==1,onclose:function(){obj.closeEditor(t,!0)}};obj.options.columns[o].options&&obj.options.columns[o].options.type&&(C.type=obj.options.columns[o].options.type),jSuites.dropdown(g,C)}else if(obj.options.columns[o].type=="calendar"||obj.options.columns[o].type=="color")a=obj.options.data[r][o],(g=s("input")).value=a,obj.options.tableOverflow!=1&&obj.options.fullscreen!=1||(obj.options.columns[o].options.position=!0),obj.options.columns[o].options.value=obj.options.data[r][o],obj.options.columns[o].options.opened=!0,obj.options.columns[o].options.onclose=function(D,k){obj.closeEditor(t,!0)},obj.options.columns[o].type=="color"?jSuites.color(g,obj.options.columns[o].options):jSuites.calendar(g,obj.options.columns[o].options),g.focus();else if(obj.options.columns[o].type=="html"){a=obj.options.data[r][o],(g=s("div")).style.position="relative",(S=document.createElement("div")).classList.add("jexcel_richtext"),g.appendChild(S),jSuites.editor(S,{focus:!0,value:a});var v=t.getBoundingClientRect(),m=S.getBoundingClientRect();window.innerHeight<v.bottom+m.height?S.style.top=v.top-(m.height+2)+"px":S.style.top=v.top+"px"}else if(obj.options.columns[o].type=="image"){var S,T=t.children[0];(g=s("div")).style.position="relative",(S=document.createElement("div")).classList.add("jclose"),T&&T.src&&S.appendChild(T),g.appendChild(S),jSuites.image(S,obj.options.imageOptions),v=t.getBoundingClientRect(),m=S.getBoundingClientRect(),window.innerHeight<v.bottom+m.height?S.style.top=v.top-(m.height+2)+"px":S.style.top=v.top+"px"}else{a=e==1?"":obj.options.data[r][o],obj.options.columns[o].wordWrap==0||obj.options.wordWrap!=1&&obj.options.columns[o].wordWrap!=1?g=s("input"):g=s("textarea"),g.focus(),g.value=a,C=obj.options.columns[o];var w=null;if(!isFormula(a)&&(w=getMask(C))){if(!C.disabledMaskOnEdition)if(C.mask){var N=C.mask.split(";");g.setAttribute("data-mask",N[0])}else C.locale&&g.setAttribute("data-locale",C.locale);w.input=g,g.mask=w,jSuites.mask.render(a,w,!1)}g.onblur=function(){obj.closeEditor(t,!0)},g.scrollLeft=g.scrollWidth}}},obj.closeEditor=function(t,e){var n=parseInt(t.getAttribute("data-x")),r=parseInt(t.getAttribute("data-y"));if(e==1){if(obj.options.columns[n].editor)var o=obj.options.columns[n].editor.closeEditor(t,e);else if(!(obj.options.columns[n].type=="checkbox"||obj.options.columns[n].type=="radio"||obj.options.columns[n].type=="hidden"))if(obj.options.columns[n].type=="dropdown"||obj.options.columns[n].type=="autocomplete")o=t.children[0].dropdown.close(!0);else if(obj.options.columns[n].type=="calendar")o=t.children[0].calendar.close(!0);else if(obj.options.columns[n].type=="color")o=t.children[0].color.close(!0);else if(obj.options.columns[n].type=="html")o=t.children[0].children[0].editor.getData();else if(obj.options.columns[n].type=="image"){var s=t.children[0].children[0].children[0];o=s&&s.tagName=="IMG"?s.src:""}else if(obj.options.columns[n].type=="numeric")(""+(o=t.children[0].value)).substr(0,1)!="="&&o==""&&(o=obj.options.columns[n].allowEmpty?"":0),t.children[0].onblur=null;else{o=t.children[0].value,t.children[0].onblur=null;var a,l=obj.options.columns[n];if((a=getMask(l))&&o!==""&&!isFormula(o)&&typeof o!="number"){var c=jSuites.mask.extract(o,a,!0);c&&c.value!==""&&(o=c.value)}}obj.options.data[r][n]==o?t.innerHTML=obj.edition[1]:obj.setValue(t,o)}else obj.options.columns[n].editor?obj.options.columns[n].editor.closeEditor(t,e):obj.options.columns[n].type=="dropdown"||obj.options.columns[n].type=="autocomplete"?t.children[0].dropdown.close(!0):obj.options.columns[n].type=="calendar"?t.children[0].calendar.close(!0):obj.options.columns[n].type=="color"?t.children[0].color.close(!0):t.children[0].onblur=null,t.innerHTML=obj.edition&&obj.edition[1]?obj.edition[1]:"";obj.dispatch("oneditionend",el,t,n,r,o,e),t.classList.remove("editor"),obj.edition=null},obj.getCell=function(t){var e=(t=jexcel.getIdFromColumnName(t,!0))[0],n=t[1];return obj.records[n][e]},obj.getColumnOptions=function(t,e){var n=obj.options.columns[t];return n||(n={type:"text"}),n},obj.getCellFromCoords=function(t,e){return obj.records[e][t]},obj.getLabel=function(t){var e=(t=jexcel.getIdFromColumnName(t,!0))[0],n=t[1];return obj.records[n][e].innerHTML},obj.getLabelFromCoords=function(t,e){return obj.records[e][t].innerHTML},obj.getValue=function(t,e){if(typeof t=="object")var n=t.getAttribute("data-x"),r=t.getAttribute("data-y");else n=(t=jexcel.getIdFromColumnName(t,!0))[0],r=t[1];var o=null;return n!=null&&r!=null&&(obj.records[r]&&obj.records[r][n]&&(e||obj.options.copyCompatibility==1)?o=obj.records[r][n].innerHTML:obj.options.data[r]&&obj.options.data[r][n]!="undefined"&&(o=obj.options.data[r][n])),o},obj.getValueFromCoords=function(t,e,n){var r=null;return t!=null&&e!=null&&(obj.records[e]&&obj.records[e][t]&&n||obj.options.copyCompatibility==1?r=obj.records[e][t].innerHTML:obj.options.data[e]&&obj.options.data[e][t]!="undefined"&&(r=obj.options.data[e][t])),r},obj.setValue=function(t,e,n){var r=[];if(typeof t=="string"){var o=(c=jexcel.getIdFromColumnName(t,!0))[0],s=c[1];r.push(obj.updateCell(o,s,e,n)),obj.updateFormulaChain(o,s,r)}else if(o=null,s=null,t&&t.getAttribute&&(o=t.getAttribute("data-x"),s=t.getAttribute("data-y")),o!=null&&s!=null)r.push(obj.updateCell(o,s,e,n)),obj.updateFormulaChain(o,s,r);else{var a=Object.keys(t);if(a.length>0)for(var l=0;l<a.length;l++){var c;typeof t[l]=="string"?(o=(c=jexcel.getIdFromColumnName(t[l],!0))[0],s=c[1]):t[l].x!=null&&t[l].y!=null?(o=t[l].x,s=t[l].y,t[l].newValue!=null?e=t[l].newValue:t[l].value!=null&&(e=t[l].value)):(o=t[l].getAttribute("data-x"),s=t[l].getAttribute("data-y")),o!=null&&s!=null&&(r.push(obj.updateCell(o,s,e,n)),obj.updateFormulaChain(o,s,r))}}obj.setHistory({action:"setValue",records:r,selection:obj.selectedCell}),obj.updateTable(),obj.onafterchanges(el,r)},obj.setValueFromCoords=function(t,e,n,r){var o=[];o.push(obj.updateCell(t,e,n,r)),obj.updateFormulaChain(t,e,o),obj.setHistory({action:"setValue",records:o,selection:obj.selectedCell}),obj.updateTable(),obj.onafterchanges(el,o)},obj.setCheckRadioValue=function(){for(var t=[],e=Object.keys(obj.highlighted),n=0;n<e.length;n++){var r=obj.highlighted[n].getAttribute("data-x"),o=obj.highlighted[n].getAttribute("data-y");obj.options.columns[r].type!="checkbox"&&obj.options.columns[r].type!="radio"||t.push(obj.updateCell(r,o,!obj.options.data[o][r]))}t.length&&(obj.setHistory({action:"setValue",records:t,selection:obj.selectedCell}),obj.onafterchanges(el,t))};var stripScript=function(t){var e=new Option;e.innerHTML=t;var n=null;for(t=e.getElementsByTagName("script");n=t[0];)n.parentNode.removeChild(n);return e.innerHTML};obj.updateCell=function(t,e,n,r){if(obj.records[e][t].classList.contains("readonly")!=1||r){var o;(""+n).substr(0,1)=="="&&obj.options.secureFormulas==1&&(o=secureFormula(n))!=n&&(n=o),(o=obj.dispatch("onbeforechange",el,obj.records[e][t],t,e,n))!=null&&(n=o),obj.options.columns[t].editor&&typeof obj.options.columns[t].editor.updateCell=="function"&&(n=obj.options.columns[t].editor.updateCell(obj.records[e][t],n,r)),g={x:t,y:e,col:t,row:e,newValue:n,oldValue:obj.options.data[e][t]};let C=obj.options.columns[t].editor;if(C)obj.options.data[e][t]=n,typeof C.setValue=="function"&&C.setValue(obj.records[e][t],n);else if(obj.options.columns[t].type=="checkbox"||obj.options.columns[t].type=="radio"){if(obj.options.columns[t].type=="radio")for(var s=0;s<obj.options.data.length;s++)obj.options.data[s][t]=!1;obj.records[e][t].children[0].checked=n==1||n==1||n=="true"||n=="TRUE",obj.options.data[e][t]=obj.records[e][t].children[0].checked}else if(obj.options.columns[t].type=="dropdown"||obj.options.columns[t].type=="autocomplete")obj.options.data[e][t]=n,obj.records[e][t].textContent=obj.getDropDownValue(t,n);else if(obj.options.columns[t].type=="calendar"){var a=null;if(!validDate(n)){var l=jSuites.calendar.extractDateFromString(n,obj.options.columns[t].options.format);l&&(a=l)}obj.options.data[e][t]=n,obj.records[e][t].textContent=jSuites.calendar.getDateString(a||n,obj.options.columns[t].options.format)}else if(obj.options.columns[t].type=="color")if(obj.options.data[e][t]=n,obj.options.columns[t].render=="square"){var c=document.createElement("div");c.className="color",c.style.backgroundColor=n,obj.records[e][t].textContent="",obj.records[e][t].appendChild(c)}else obj.records[e][t].style.color=n,obj.records[e][t].textContent=n;else if(obj.options.columns[t].type=="image"){if(n=""+n,obj.options.data[e][t]=n,obj.records[e][t].innerHTML="",n&&n.substr(0,10)=="data:image"){var u=document.createElement("img");u.src=n,obj.records[e][t].appendChild(u)}}else obj.options.data[e][t]=n,obj.options.columns[t].type=="html"?obj.records[e][t].innerHTML=stripScript(obj.parseValue(t,e,n)):obj.options.stripHTML===!1||obj.options.columns[t].stripHTML===!1?obj.records[e][t].innerHTML=stripScript(obj.parseValue(t,e,n,obj.records[e][t])):obj.records[e][t].textContent=obj.parseValue(t,e,n,obj.records[e][t]),obj.options.columns[t].wordWrap!=0&&(obj.options.wordWrap==1||obj.options.columns[t].wordWrap==1||obj.records[e][t].innerHTML.length>200)?obj.records[e][t].style.whiteSpace="pre-wrap":obj.records[e][t].style.whiteSpace="";t>0&&(obj.records[e][t-1].style.overflow=n?"hidden":""),obj.dispatch("onchange",el,obj.records[e]&&obj.records[e][t]?obj.records[e][t]:null,t,e,n,g.oldValue)}else var g={x:t,y:e,col:t,row:e};return g},obj.copyData=function(t,e){var n=obj.getData(!0,!0),r=obj.selectedContainer,o=parseInt(t.getAttribute("data-x")),s=parseInt(t.getAttribute("data-y")),a=parseInt(e.getAttribute("data-x")),l=parseInt(e.getAttribute("data-y")),c=[],u=!1;if(r[0]==o){if(s<r[1])var g=s-r[1];else g=1;var C=0}else C=o<r[0]?o-r[0]:1,g=0;for(var v=0,m=0,S=s;S<=l;S++)if(!obj.rows[S]||obj.rows[S].style.display!="none"){n[m]==null&&(m=0),v=0,r[0]!=o&&(C=o<r[0]?o-r[0]:1);for(var T=o;T<=a;T++){if(obj.records[S][T]&&!obj.records[S][T].classList.contains("readonly")&&obj.records[S][T].style.display!="none"&&u==0){if(!obj.selection.length&&obj.options.data[S][T]!=""){u=!0;continue}(n[m]==null||n[m][v]==null)&&(v=0);var w=n[m][v];if(w&&!n[1]&&obj.options.autoIncrement==1){if(obj.options.columns[T].type=="text"||obj.options.columns[T].type=="number")if((""+w).substr(0,1)=="="){var N=w.match(/([A-Z]+[0-9]+)/g);if(N){for(var D=[],k=0;k<N.length;k++){var L=jexcel.getIdFromColumnName(N[k],1);L[0]+=C,L[1]+=g,L[1]<0&&(L[1]=0);var H=jexcel.getColumnNameFromId([L[0],L[1]]);H!=N[k]&&(D[N[k]]=H)}D&&(w=obj.updateFormula(w,D))}}else w==Number(w)&&(w=Number(w)+g);else if(obj.options.columns[T].type=="calendar"){var R=new Date(w);R.setDate(R.getDate()+g),w=R.getFullYear()+"-"+jexcel.doubleDigitFormat(parseInt(R.getMonth()+1))+"-"+jexcel.doubleDigitFormat(R.getDate())+" 00:00:00"}}c.push(obj.updateCell(T,S,w)),obj.updateFormulaChain(T,S,c)}v++,r[0]!=o&&C++}m++,g++}obj.setHistory({action:"setValue",records:c,selection:obj.selectedCell}),obj.updateTable(),obj.onafterchanges(el,c)},obj.refreshSelection=function(){obj.selectedCell&&obj.updateSelectionFromCoords(obj.selectedCell[0],obj.selectedCell[1],obj.selectedCell[2],obj.selectedCell[3])},obj.conditionalSelectionUpdate=function(t,e,n){if(t==1){if(obj.selectedCell&&(e>=obj.selectedCell[1]&&e<=obj.selectedCell[3]||n>=obj.selectedCell[1]&&n<=obj.selectedCell[3]))return void obj.resetSelection()}else if(obj.selectedCell&&(e>=obj.selectedCell[0]&&e<=obj.selectedCell[2]||n>=obj.selectedCell[0]&&n<=obj.selectedCell[2]))return void obj.resetSelection()},obj.resetSelection=function(t){if(obj.highlighted.length){u=1;for(var e=0;e<obj.highlighted.length;e++){obj.highlighted[e].classList.remove("highlight"),obj.highlighted[e].classList.remove("highlight-left"),obj.highlighted[e].classList.remove("highlight-right"),obj.highlighted[e].classList.remove("highlight-top"),obj.highlighted[e].classList.remove("highlight-bottom"),obj.highlighted[e].classList.remove("highlight-selected");var n=parseInt(obj.highlighted[e].getAttribute("data-x")),r=parseInt(obj.highlighted[e].getAttribute("data-y"));if(obj.highlighted[e].getAttribute("data-merged"))var o=parseInt(obj.highlighted[e].getAttribute("colspan")),s=parseInt(obj.highlighted[e].getAttribute("rowspan")),a=o>0?n+(o-1):n,l=s>0?r+(s-1):r;else a=n,l=r;for(var c=n;c<=a;c++)obj.headers[c]&&obj.headers[c].classList.remove("selected");for(c=r;c<=l;c++)obj.rows[c]&&obj.rows[c].classList.remove("selected")}}else var u=0;return obj.highlighted=[],obj.selectedCell=null,obj.corner.style.top="-2000px",obj.corner.style.left="-2000px",t==1&&u==1&&obj.dispatch("onblur",el),u},obj.updateSelection=function(t,e,n){var r=t.getAttribute("data-x"),o=t.getAttribute("data-y");if(e)var s=e.getAttribute("data-x"),a=e.getAttribute("data-y");else s=r,a=o;obj.updateSelectionFromCoords(r,o,s,a,n)},obj.updateSelectionFromCoords=function(t,e,n,r,o){var s=obj.resetSelection();if(e==null&&(e=0,r=obj.rows.length-1),n==null&&(n=t),r==null&&(r=e),t>=obj.headers.length&&(t=obj.headers.length-1),e>=obj.rows.length&&(e=obj.rows.length-1),n>=obj.headers.length&&(n=obj.headers.length-1),r>=obj.rows.length&&(r=obj.rows.length-1),obj.selectedCell=[t,e,n,r],t!=null){if(obj.records[e][t]&&obj.records[e][t].classList.add("highlight-selected"),parseInt(t)<parseInt(n))var a=parseInt(t),l=parseInt(n);else a=parseInt(n),l=parseInt(t);if(parseInt(e)<parseInt(r))var c=parseInt(e),u=parseInt(r);else c=parseInt(r),u=parseInt(e);for(var g=a;g<=l;g++)for(var C=c;C<=u;C++)if(obj.records[C][g]&&obj.records[C][g].getAttribute("data-merged")){var v=parseInt(obj.records[C][g].getAttribute("data-x")),m=parseInt(obj.records[C][g].getAttribute("data-y")),S=parseInt(obj.records[C][g].getAttribute("colspan")),T=parseInt(obj.records[C][g].getAttribute("rowspan"));S>1&&(v<a&&(a=v),v+S>l&&(l=v+S-1)),T&&(m<c&&(c=m),m+T>u&&(u=m+T-1))}var w=null,N=null,D=null,k=null;for(C=c;C<=u;C++)obj.rows[C].style.display!="none"&&(D==null&&(D=C),k=C);for(g=a;g<=l;g++){for(C=c;C<=u;C++)obj.rows[C].style.display!="none"&&obj.records[C][g].style.display!="none"&&(obj.records[C][g].classList.add("highlight"),obj.highlighted.push(obj.records[C][g]));obj.options.columns[g].type!="hidden"&&(w==null&&(w=g),N=g)}for(w||(w=0),N||(N=0),g=w;g<=N;g++)obj.options.columns[g].type!="hidden"&&obj.colgroup[g].style&&obj.colgroup[g].style.display!="none"&&(obj.records[D]&&obj.records[D][g]&&obj.records[D][g].classList.add("highlight-top"),obj.records[k]&&obj.records[k][g]&&obj.records[k][g].classList.add("highlight-bottom"),obj.headers[g].classList.add("selected"));for(C=D;C<=k;C++)obj.rows[C]&&obj.rows[C].style.display!="none"&&(obj.records[C][w].classList.add("highlight-left"),obj.records[C][N].classList.add("highlight-right"),obj.rows[C].classList.add("selected"));obj.selectedContainer=[w,D,N,k]}s==0&&(obj.dispatch("onfocus",el),obj.removeCopyingSelection()),obj.dispatch("onselection",el,w,D,N,k,o),obj.updateCornerPosition()},obj.removeCopySelection=function(){for(var t=0;t<obj.selection.length;t++)obj.selection[t].classList.remove("selection"),obj.selection[t].classList.remove("selection-left"),obj.selection[t].classList.remove("selection-right"),obj.selection[t].classList.remove("selection-top"),obj.selection[t].classList.remove("selection-bottom");obj.selection=[]},obj.updateCopySelection=function(t,e){obj.removeCopySelection();var n=obj.selectedContainer[0],r=obj.selectedContainer[1],o=obj.selectedContainer[2],s=obj.selectedContainer[3];if(t!=null&&e!=null){if(t-o>0)var a=parseInt(o)+1,l=parseInt(t);else a=parseInt(t),l=parseInt(n)-1;if(e-s>0)var c=parseInt(s)+1,u=parseInt(e);else c=parseInt(e),u=parseInt(r)-1;l-a<=u-c?(a=parseInt(n),l=parseInt(o)):(c=parseInt(r),u=parseInt(s));for(var g=c;g<=u;g++)for(var C=a;C<=l;C++)obj.records[g][C]&&obj.rows[g].style.display!="none"&&obj.records[g][C].style.display!="none"&&(obj.records[g][C].classList.add("selection"),obj.records[c][C].classList.add("selection-top"),obj.records[u][C].classList.add("selection-bottom"),obj.records[g][a].classList.add("selection-left"),obj.records[g][l].classList.add("selection-right"),obj.selection.push(obj.records[g][C]))}},obj.updateCornerPosition=function(){if(obj.highlighted.length){var t=obj.highlighted[obj.highlighted.length-1],e=t.getAttribute("data-x"),n=obj.content.getBoundingClientRect(),r=n.left,o=n.top,s=t.getBoundingClientRect(),a=s.left,l=s.top,c=s.width,u=s.height,g=a-r+obj.content.scrollLeft+c-4,C=l-o+obj.content.scrollTop+u-4;if(obj.corner.style.top=C+"px",obj.corner.style.left=g+"px",obj.options.freezeColumns){var v=obj.getFreezeWidth();e>obj.options.freezeColumns-1&&a-r+c<v?obj.corner.style.display="none":obj.options.selectionCopy==1&&(obj.corner.style.display="")}else obj.options.selectionCopy==1&&(obj.corner.style.display="")}else obj.corner.style.top="-2000px",obj.corner.style.left="-2000px"},obj.updateScroll=function(t){var e=obj.content.getBoundingClientRect(),n=e.left,r=e.top,o=e.width,s=e.height,a=obj.records[obj.selectedCell[3]][obj.selectedCell[2]].getBoundingClientRect(),l=a.left,c=a.top,u=a.width,g=a.height;if(t==0||t==1)var C=l-n+obj.content.scrollLeft,v=c-r+obj.content.scrollTop-2;else C=l-n+obj.content.scrollLeft+u,v=c-r+obj.content.scrollTop+g;v>obj.content.scrollTop+30&&v<obj.content.scrollTop+s||(v<obj.content.scrollTop+30?obj.content.scrollTop=v-g:obj.content.scrollTop=v-(s-2));var m=obj.getFreezeWidth();C>obj.content.scrollLeft+m&&C<obj.content.scrollLeft+o||(C<obj.content.scrollLeft+30?(obj.content.scrollLeft=C,obj.content.scrollLeft<50&&(obj.content.scrollLeft=0)):C<obj.content.scrollLeft+m?obj.content.scrollLeft=C-m-1:obj.content.scrollLeft=C-(o-20))},obj.getWidth=function(t){if(t===void 0)for(var e=[],n=0;n<obj.headers.length;n++)e.push(obj.options.columns[n].width);else typeof t=="object"&&(t=t.getAttribute("data-x")),e=obj.colgroup[t].getAttribute("width");return e},obj.setWidth=function(t,e,n){if(e){if(Array.isArray(t)){n||(n=[]);for(var r=0;r<t.length;r++){n[r]||(n[r]=obj.colgroup[t[r]].getAttribute("width"));var o=Array.isArray(e)&&e[r]?e[r]:e;obj.colgroup[t[r]].setAttribute("width",o),obj.options.columns[t[r]].width=o}}else n||(n=obj.colgroup[t].getAttribute("width")),obj.colgroup[t].setAttribute("width",e),obj.options.columns[t].width=e;obj.setHistory({action:"setWidth",column:t,oldValue:n,newValue:e}),obj.dispatch("onresizecolumn",el,t,e,n),obj.updateCornerPosition()}},obj.setHeight=function(t,e,n){e>0&&(typeof t=="object"&&(t=t.getAttribute("data-y")),n||(n=obj.rows[t].getAttribute("height"))||(n=obj.rows[t].getBoundingClientRect().height),e=parseInt(e),obj.rows[t].style.height=e+"px",obj.options.rows[t]||(obj.options.rows[t]={}),obj.options.rows[t].height=e,obj.setHistory({action:"setHeight",row:t,oldValue:n,newValue:e}),obj.dispatch("onresizerow",el,t,e,n),obj.updateCornerPosition())},obj.getHeight=function(t){if(t===void 0)for(var e=[],n=0;n<obj.rows.length;n++){var r=obj.rows[n].style.height;r&&(e[n]=r)}else typeof t=="object"&&(t=$(t).getAttribute("data-y")),e=obj.rows[t].style.height;return e},obj.setFooter=function(t){if(t&&(obj.options.footers=t),obj.options.footers){obj.tfoot||(obj.tfoot=document.createElement("tfoot"),obj.table.appendChild(obj.tfoot));for(var e=0;e<obj.options.footers.length;e++){if(obj.tfoot.children[e])var n=obj.tfoot.children[e];else{n=document.createElement("tr");var r=document.createElement("td");n.appendChild(r),obj.tfoot.appendChild(n)}for(var o=0;o<obj.headers.length;o++){if(obj.options.footers[e][o]||(obj.options.footers[e][o]=""),obj.tfoot.children[e].children[o+1])r=obj.tfoot.children[e].children[o+1];else{r=document.createElement("td"),n.appendChild(r);var s=obj.options.columns[o].align?obj.options.columns[o].align:"center";r.style.textAlign=s}r.textContent=obj.parseValue(+obj.records.length+o,e,obj.options.footers[e][o]),r.style.display=obj.colgroup[o].style.display}}}},obj.getHeader=function(t){return obj.headers[t].textContent},obj.setHeader=function(t,e){if(obj.headers[t]){var n=obj.headers[t].textContent;e||(e=prompt(obj.options.text.columnName,n)),e&&(obj.headers[t].textContent=e,obj.headers[t].setAttribute("title",e),obj.options.columns[t].title=e),obj.setHistory({action:"setHeader",column:t,oldValue:n,newValue:e}),obj.dispatch("onchangeheader",el,t,n,e)}},obj.getHeaders=function(t){for(var e=[],n=0;n<obj.headers.length;n++)e.push(obj.getHeader(n));return t?e:e.join(obj.options.csvDelimiter)},obj.getMeta=function(t,e){return t?e?obj.options.meta[t]&&obj.options.meta[t][e]?obj.options.meta[t][e]:null:obj.options.meta[t]?obj.options.meta[t]:null:obj.options.meta},obj.setMeta=function(t,e,n){if(obj.options.meta||(obj.options.meta={}),e&&n)obj.options.meta[t]||(obj.options.meta[t]={}),obj.options.meta[t][e]=n;else for(var r=Object.keys(t),o=0;o<r.length;o++){obj.options.meta[r[o]]||(obj.options.meta[r[o]]={});for(var s=Object.keys(t[r[o]]),a=0;a<s.length;a++)obj.options.meta[r[o]][s[a]]=t[r[o]][s[a]]}obj.dispatch("onchangemeta",el,t,e,n)},obj.updateMeta=function(t){if(obj.options.meta){for(var e={},n=Object.keys(obj.options.meta),r=0;r<n.length;r++)t[n[r]]?e[t[n[r]]]=obj.options.meta[n[r]]:e[n[r]]=obj.options.meta[n[r]];obj.options.meta=e}},obj.getStyle=function(t,e){if(t)return t=jexcel.getIdFromColumnName(t,!0),e?obj.records[t[1]][t[0]].style[e]:obj.records[t[1]][t[0]].getAttribute("style");for(var n={},r=obj.options.data[0].length,o=obj.options.data.length,s=0;s<o;s++)for(var a=0;a<r;a++){var l=e?obj.records[s][a].style[e]:obj.records[s][a].getAttribute("style");l&&(n[jexcel.getColumnNameFromId([a,s])]=l)}return n},obj.resetStyle=function(t,e){for(var n=Object.keys(t),r=0;r<n.length;r++){var o=jexcel.getIdFromColumnName(n[r],!0);obj.records[o[1]]&&obj.records[o[1]][o[0]]&&obj.records[o[1]][o[0]].setAttribute("style","")}obj.setStyle(t,null,null,null,e)},obj.setStyle=function(t,e,n,r,o){var s={},a={},l=function(w,N,D){var k=jexcel.getIdFromColumnName(w,!0);if(obj.records[k[1]]&&obj.records[k[1]][k[0]]&&(obj.records[k[1]][k[0]].classList.contains("readonly")==0||r)){var L=obj.records[k[1]][k[0]].style[N];L!=D||r?obj.records[k[1]][k[0]].style[N]=D:(D="",obj.records[k[1]][k[0]].style[N]=""),a[w]||(a[w]=[]),s[w]||(s[w]=[]),a[w].push([N+":"+L]),s[w].push([N+":"+D])}};if(e&&n)if(typeof t=="string")l(t,e,n);else for(var c=[],u=0;u<t.length;u++){var g=t[u].getAttribute("data-x"),C=t[u].getAttribute("data-y"),v=jexcel.getColumnNameFromId([g,C]);c[v]||(l(v,e,n),c[v]=!0)}else{var m=Object.keys(t);for(u=0;u<m.length;u++){var S=t[m[u]];typeof S=="string"&&(S=S.split(";"));for(var T=0;T<S.length;T++)typeof S[T]=="string"&&(S[T]=S[T].split(":")),S[T][0].trim()&&l(m[u],S[T][0].trim(),S[T][1])}}for(m=Object.keys(a),u=0;u<m.length;u++)a[m[u]]=a[m[u]].join(";");for(m=Object.keys(s),u=0;u<m.length;u++)s[m[u]]=s[m[u]].join(";");o||obj.setHistory({action:"setStyle",oldValue:a,newValue:s}),obj.dispatch("onchangestyle",el,t,e,n)},obj.getComments=function(t,e){if(t)return typeof t=="string"&&(t=jexcel.getIdFromColumnName(t,!0)),e?[obj.records[t[1]][t[0]].getAttribute("title"),obj.records[t[1]][t[0]].getAttribute("author")]:obj.records[t[1]][t[0]].getAttribute("title")||"";for(var n={},r=0;r<obj.options.data.length;r++)for(var o=0;o<obj.options.columns.length;o++){var s=obj.records[r][o].getAttribute("title");s&&(n[t=jexcel.getColumnNameFromId([o,r])]=s)}return n},obj.setComments=function(t,e,n){if(typeof t=="string")var r=jexcel.getIdFromColumnName(t,!0);else r=t;var o=obj.records[r[1]][r[0]].getAttribute("title"),s=[o,n=obj.records[r[1]][r[0]].getAttribute("data-author")];obj.records[r[1]][r[0]].setAttribute("title",e||""),obj.records[r[1]][r[0]].setAttribute("data-author",n||""),e?obj.records[r[1]][r[0]].classList.add("jexcel_comments"):obj.records[r[1]][r[0]].classList.remove("jexcel_comments"),obj.setHistory({action:"setComments",column:t,newValue:[e,n],oldValue:s}),obj.dispatch("oncomments",el,e,o,r,r[0],r[1])},obj.getConfig=function(){var t=obj.options;return t.style=obj.getStyle(),t.mergeCells=obj.getMerge(),t.comments=obj.getComments(),t},obj.orderBy=function(t,e){if(t>=0){if(Object.keys(obj.options.mergeCells).length>0){if(!confirm(obj.options.text.thisActionWillDestroyAnyExistingMergedCellsAreYouSure))return!1;obj.destroyMerged()}e=e==null?obj.headers[t].classList.contains("arrow-down")?1:0:e?1:0;var n=[];if(obj.options.columns[t].type=="number"||obj.options.columns[t].type=="numeric"||obj.options.columns[t].type=="percentage"||obj.options.columns[t].type=="autonumber"||obj.options.columns[t].type=="color")for(var r=0;r<obj.options.data.length;r++)n[r]=[r,Number(obj.options.data[r][t])];else if(obj.options.columns[t].type=="calendar"||obj.options.columns[t].type=="checkbox"||obj.options.columns[t].type=="radio")for(r=0;r<obj.options.data.length;r++)n[r]=[r,obj.options.data[r][t]];else for(r=0;r<obj.options.data.length;r++)n[r]=[r,obj.records[r][t].textContent.toLowerCase()];typeof obj.options.sorting!="function"&&(obj.options.sorting=function(s){return function(a,l){var c=a[1],u=l[1];return s?c===""&&u!==""?1:c!==""&&u===""||c>u?-1:c<u?1:0:c===""&&u!==""?1:c!==""&&u===""?-1:c>u?1:c<u?-1:0}}),n=n.sort(obj.options.sorting(e));var o=[];for(r=0;r<n.length;r++)o[r]=n[r][0];return obj.setHistory({action:"orderBy",rows:o,column:t,order:e}),obj.updateOrderArrow(t,e),obj.updateOrder(o),obj.dispatch("onsort",el,t,e),!0}},obj.updateOrderArrow=function(t,e){for(var n=0;n<obj.headers.length;n++)obj.headers[n].classList.remove("arrow-up"),obj.headers[n].classList.remove("arrow-down");e?obj.headers[t].classList.add("arrow-up"):obj.headers[t].classList.add("arrow-down")},obj.updateOrder=function(t){for(var e=[],n=0;n<t.length;n++)e[n]=obj.options.data[t[n]];for(obj.options.data=e,e=[],n=0;n<t.length;n++)e[n]=obj.records[t[n]];for(obj.records=e,e=[],n=0;n<t.length;n++)e[n]=obj.rows[t[n]];if(obj.rows=e,obj.updateTableReferences(),obj.results&&obj.results.length)obj.searchInput.value?obj.search(obj.searchInput.value):obj.closeFilter();else if(obj.results=null,obj.pageNumber=0,obj.options.pagination>0)obj.page(0);else if(obj.options.lazyLoading==1)obj.loadPage(0);else for(n=0;n<obj.rows.length;n++)obj.tbody.appendChild(obj.rows[n])},obj.moveRow=function(t,e,n){if(Object.keys(obj.options.mergeCells).length>0){if(t>e)var r=1;else r=0;if(obj.isRowMerged(t).length||obj.isRowMerged(e,r).length){if(!confirm(obj.options.text.thisActionWillDestroyAnyExistingMergedCellsAreYouSure))return!1;obj.destroyMerged()}}if(obj.options.search==1){if(obj.results&&obj.results.length!=obj.rows.length){if(!confirm(obj.options.text.thisActionWillClearYourSearchResultsAreYouSure))return!1;obj.resetSearch()}obj.results=null}n||(Array.prototype.indexOf.call(obj.tbody.children,obj.rows[e])>=0?t>e?obj.tbody.insertBefore(obj.rows[t],obj.rows[e]):obj.tbody.insertBefore(obj.rows[t],obj.rows[e].nextSibling):obj.tbody.removeChild(obj.rows[t])),obj.rows.splice(e,0,obj.rows.splice(t,1)[0]),obj.records.splice(e,0,obj.records.splice(t,1)[0]),obj.options.data.splice(e,0,obj.options.data.splice(t,1)[0]),obj.options.pagination>0&&obj.tbody.children.length!=obj.options.pagination&&obj.page(obj.pageNumber),obj.setHistory({action:"moveRow",oldValue:t,newValue:e}),obj.updateTableReferences(),obj.dispatch("onmoverow",el,t,e)},obj.insertRow=function(t,e,n){if(obj.options.allowInsertRow==1){var r=[];if(t>0)var o=t;else o=1,t&&(r=t);n=!!n;var s=obj.options.data.length-1;if((e==null||e>=parseInt(s)||e<0)&&(e=s),obj.dispatch("onbeforeinsertrow",el,e,o,n)===!1)return!1;if(Object.keys(obj.options.mergeCells).length>0&&obj.isRowMerged(e,n).length){if(!confirm(obj.options.text.thisActionWillDestroyAnyExistingMergedCellsAreYouSure))return!1;obj.destroyMerged()}if(obj.options.search==1){if(obj.results&&obj.results.length!=obj.rows.length){if(!confirm(obj.options.text.thisActionWillClearYourSearchResultsAreYouSure))return!1;obj.resetSearch()}obj.results=null}for(var a=n?e:e+1,l=obj.records.splice(a),c=obj.options.data.splice(a),u=obj.rows.splice(a),g=[],C=[],v=[],m=a;m<o+a;m++){obj.options.data[m]=[];for(var S=0;S<obj.options.columns.length;S++)obj.options.data[m][S]=r[S]?r[S]:"";var T=obj.createRow(m,obj.options.data[m]);u[0]?Array.prototype.indexOf.call(obj.tbody.children,u[0])>=0&&obj.tbody.insertBefore(T,u[0]):Array.prototype.indexOf.call(obj.tbody.children,obj.rows[e])>=0&&obj.tbody.appendChild(T),g.push(obj.records[m]),C.push(obj.options.data[m]),v.push(T)}Array.prototype.push.apply(obj.records,l),Array.prototype.push.apply(obj.options.data,c),Array.prototype.push.apply(obj.rows,u),obj.options.pagination>0&&obj.page(obj.pageNumber),obj.setHistory({action:"insertRow",rowNumber:e,numOfRows:o,insertBefore:n,rowRecords:g,rowData:C,rowNode:v}),obj.updateTableReferences(),obj.dispatch("oninsertrow",el,e,o,g,n)}},obj.deleteRow=function(t,e){if(obj.options.allowDeleteRow==1)if(obj.options.allowDeletingAllRows==1||obj.options.data.length>1){if(t==null){var n=obj.getSelectedRows();n[0]?(t=parseInt(n[0].getAttribute("data-y")),e=n.length):(t=obj.options.data.length-1,e=1)}var r=obj.options.data.length-1;if((t==null||t>r||t<0)&&(t=r),e||(e=1),t+e>=obj.options.data.length&&(e=obj.options.data.length-t),obj.dispatch("onbeforedeleterow",el,t,e)===!1)return!1;if(parseInt(t)>-1){var o=!1;if(Object.keys(obj.options.mergeCells).length>0)for(var s=t;s<t+e;s++)obj.isRowMerged(s,!1).length&&(o=!0);if(o){if(!confirm(obj.options.text.thisActionWillDestroyAnyExistingMergedCellsAreYouSure))return!1;obj.destroyMerged()}if(obj.options.search==1){if(obj.results&&obj.results.length!=obj.rows.length){if(!confirm(obj.options.text.thisActionWillClearYourSearchResultsAreYouSure))return!1;obj.resetSearch()}obj.results=null}for(obj.options.allowDeletingAllRows==0&&r+1===e&&(e--,console.error("Jspreadsheet: It is not possible to delete the last row")),s=t;s<t+e;s++)Array.prototype.indexOf.call(obj.tbody.children,obj.rows[s])>=0&&(obj.rows[s].className="",obj.rows[s].parentNode.removeChild(obj.rows[s]));var a=obj.records.splice(t,e),l=obj.options.data.splice(t,e),c=obj.rows.splice(t,e);obj.options.pagination>0&&obj.tbody.children.length!=obj.options.pagination&&obj.page(obj.pageNumber),obj.conditionalSelectionUpdate(1,t,t+e-1),obj.setHistory({action:"deleteRow",rowNumber:t,numOfRows:e,insertBefore:1,rowRecords:a,rowData:l,rowNode:c}),obj.updateTableReferences(),obj.dispatch("ondeleterow",el,t,e,a)}}else console.error("Jspreadsheet: It is not possible to delete the last row")},obj.moveColumn=function(t,e){if(Object.keys(obj.options.mergeCells).length>0){if(t>e)var n=1;else n=0;if(obj.isColMerged(t).length||obj.isColMerged(e,n).length){if(!confirm(obj.options.text.thisActionWillDestroyAnyExistingMergedCellsAreYouSure))return!1;obj.destroyMerged()}}if((t=parseInt(t))>(e=parseInt(e))){obj.headerContainer.insertBefore(obj.headers[t],obj.headers[e]),obj.colgroupContainer.insertBefore(obj.colgroup[t],obj.colgroup[e]);for(var r=0;r<obj.rows.length;r++)obj.rows[r].insertBefore(obj.records[r][t],obj.records[r][e])}else for(obj.headerContainer.insertBefore(obj.headers[t],obj.headers[e].nextSibling),obj.colgroupContainer.insertBefore(obj.colgroup[t],obj.colgroup[e].nextSibling),r=0;r<obj.rows.length;r++)obj.rows[r].insertBefore(obj.records[r][t],obj.records[r][e].nextSibling);for(obj.options.columns.splice(e,0,obj.options.columns.splice(t,1)[0]),obj.headers.splice(e,0,obj.headers.splice(t,1)[0]),obj.colgroup.splice(e,0,obj.colgroup.splice(t,1)[0]),r=0;r<obj.rows.length;r++)obj.options.data[r].splice(e,0,obj.options.data[r].splice(t,1)[0]),obj.records[r].splice(e,0,obj.records[r].splice(t,1)[0]);if(obj.options.footers)for(r=0;r<obj.options.footers.length;r++)obj.options.footers[r].splice(e,0,obj.options.footers[r].splice(t,1)[0]);obj.setHistory({action:"moveColumn",oldValue:t,newValue:e}),obj.updateTableReferences(),obj.dispatch("onmovecolumn",el,t,e)},obj.insertColumn=function(t,e,n,r){if(obj.options.allowInsertColumn==1){var o=[];if(t>0)var s=t;else s=1,t&&(o=t);n=!!n;var a=obj.options.columns.length-1;if((e==null||e>=parseInt(a)||e<0)&&(e=a),obj.dispatch("onbeforeinsertcolumn",el,e,s,n)===!1)return!1;if(Object.keys(obj.options.mergeCells).length>0&&obj.isColMerged(e,n).length){if(!confirm(obj.options.text.thisActionWillDestroyAnyExistingMergedCellsAreYouSure))return!1;obj.destroyMerged()}r||(r=[]);for(var l=0;l<s;l++)r[l]||(r[l]={type:"text",source:[],options:[],width:obj.options.defaultColWidth,align:obj.options.defaultColAlign});var c=n?e:e+1;obj.options.columns=jexcel.injectArray(obj.options.columns,c,r);for(var u=obj.headers.splice(c),g=obj.colgroup.splice(c),C=[],v=[],m=[],S=[],T=[],w=c;w<s+c;w++)obj.createCellHeader(w),obj.headerContainer.insertBefore(obj.headers[w],obj.headerContainer.children[w+1]),obj.colgroupContainer.insertBefore(obj.colgroup[w],obj.colgroupContainer.children[w+1]),C.push(obj.headers[w]),v.push(obj.colgroup[w]);if(obj.options.footers)for(var N=0;N<obj.options.footers.length;N++){for(T[N]=[],l=0;l<s;l++)T[N].push("");obj.options.footers[N].splice(c,0,T[N])}for(var D=0;D<obj.options.data.length;D++){var k=obj.options.data[D].splice(c),L=obj.records[D].splice(c);for(S[D]=[],m[D]=[],w=c;w<s+c;w++){var H=o[D]?o[D]:"";obj.options.data[D][w]=H;var R=obj.createCell(w,D,obj.options.data[D][w]);obj.records[D][w]=R,obj.rows[D]&&obj.rows[D].insertBefore(R,obj.rows[D].children[w+1]),S[D].push(H),m[D].push(R)}Array.prototype.push.apply(obj.options.data[D],k),Array.prototype.push.apply(obj.records[D],L)}if(Array.prototype.push.apply(obj.headers,u),Array.prototype.push.apply(obj.colgroup,g),obj.options.nestedHeaders&&obj.options.nestedHeaders.length>0)if(obj.options.nestedHeaders[0]&&obj.options.nestedHeaders[0][0])for(N=0;N<obj.options.nestedHeaders.length;N++){var B=parseInt(obj.options.nestedHeaders[N][obj.options.nestedHeaders[N].length-1].colspan)+s;obj.options.nestedHeaders[N][obj.options.nestedHeaders[N].length-1].colspan=B,obj.thead.children[N].children[obj.thead.children[N].children.length-1].setAttribute("colspan",B);var Y=obj.thead.children[N].children[obj.thead.children[N].children.length-1].getAttribute("data-column");for(Y=Y.split(","),w=c;w<s+c;w++)Y.push(w);obj.thead.children[N].children[obj.thead.children[N].children.length-1].setAttribute("data-column",Y)}else B=parseInt(obj.options.nestedHeaders[0].colspan)+s,obj.options.nestedHeaders[0].colspan=B,obj.thead.children[0].children[obj.thead.children[0].children.length-1].setAttribute("colspan",B);obj.setHistory({action:"insertColumn",columnNumber:e,numOfColumns:s,insertBefore:n,columns:r,headers:C,colgroup:v,records:m,footers:T,data:S}),obj.updateTableReferences(),obj.dispatch("oninsertcolumn",el,e,s,m,n)}},obj.deleteColumn=function(t,e){if(obj.options.allowDeleteColumn==1)if(obj.headers.length>1){if(t==null){var n=obj.getSelectedColumns(!0);n.length?(t=parseInt(n[0]),e=parseInt(n.length)):(t=obj.headers.length-1,e=1)}var r=obj.options.data[0].length-1;if((t==null||t>r||t<0)&&(t=r),e||(e=1),e>obj.options.data[0].length-t&&(e=obj.options.data[0].length-t),obj.dispatch("onbeforedeletecolumn",el,t,e)===!1)return!1;if(parseInt(t)>-1){var o=!1;if(Object.keys(obj.options.mergeCells).length>0)for(var s=t;s<t+e;s++)obj.isColMerged(s,!1).length&&(o=!0);if(o){if(!confirm(obj.options.text.thisActionWillDestroyAnyExistingMergedCellsAreYouSure))return!1;obj.destroyMerged()}var a=obj.options.columns.splice(t,e);for(s=t;s<t+e;s++)obj.colgroup[s].className="",obj.headers[s].className="",obj.colgroup[s].parentNode.removeChild(obj.colgroup[s]),obj.headers[s].parentNode.removeChild(obj.headers[s]);for(var l=obj.headers.splice(t,e),c=obj.colgroup.splice(t,e),u=[],g=[],C=[],v=0;v<obj.options.data.length;v++)for(s=t;s<t+e;s++)obj.records[v][s].className="",obj.records[v][s].parentNode.removeChild(obj.records[v][s]);for(v=0;v<obj.options.data.length;v++)g[v]=obj.options.data[v].splice(t,e),u[v]=obj.records[v].splice(t,e);if(obj.options.footers)for(v=0;v<obj.options.footers.length;v++)C[v]=obj.options.footers[v].splice(t,e);if(obj.conditionalSelectionUpdate(0,t,t+e-1),obj.options.nestedHeaders&&obj.options.nestedHeaders.length>0)if(obj.options.nestedHeaders[0]&&obj.options.nestedHeaders[0][0])for(var m=0;m<obj.options.nestedHeaders.length;m++){var S=parseInt(obj.options.nestedHeaders[m][obj.options.nestedHeaders[m].length-1].colspan)-e;obj.options.nestedHeaders[m][obj.options.nestedHeaders[m].length-1].colspan=S,obj.thead.children[m].children[obj.thead.children[m].children.length-1].setAttribute("colspan",S)}else S=parseInt(obj.options.nestedHeaders[0].colspan)-e,obj.options.nestedHeaders[0].colspan=S,obj.thead.children[0].children[obj.thead.children[0].children.length-1].setAttribute("colspan",S);obj.setHistory({action:"deleteColumn",columnNumber:t,numOfColumns:e,insertBefore:1,columns:a,headers:l,colgroup:c,records:u,footers:C,data:g}),obj.updateTableReferences(),obj.dispatch("ondeletecolumn",el,t,e,u)}}else console.error("Jspreadsheet: It is not possible to delete the last column")},obj.getSelectedRows=function(t){for(var e=[],n=0;n<obj.rows.length;n++)obj.rows[n].classList.contains("selected")&&(t?e.push(n):e.push(obj.rows[n]));return e},obj.getSelectedColumns=function(){for(var t=[],e=0;e<obj.headers.length;e++)obj.headers[e].classList.contains("selected")&&t.push(e);return t},obj.getHighlighted=function(){return obj.highlighted},obj.updateTableReferences=function(){for(var t=0;t<obj.headers.length;t++)(s=obj.headers[t].getAttribute("data-x"))!=t&&(obj.headers[t].setAttribute("data-x",t),obj.headers[t].getAttribute("title")||(obj.headers[t].innerHTML=jexcel.getColumnName(t)));for(var e=0;e<obj.rows.length;e++)obj.rows[e]&&(a=obj.rows[e].getAttribute("data-y"))!=e&&(obj.rows[e].setAttribute("data-y",e),obj.rows[e].children[0].setAttribute("data-y",e),obj.rows[e].children[0].innerHTML=e+1);var n=[],r=[],o=function(m,S,T,w){if(m!=T&&obj.records[w][T].setAttribute("data-x",T),S!=w&&obj.records[w][T].setAttribute("data-y",w),m!=T||S!=w){var N=jexcel.getColumnNameFromId([m,S]),D=jexcel.getColumnNameFromId([T,w]);n[N]=D}};for(e=0;e<obj.records.length;e++)for(t=0;t<obj.records[0].length;t++)if(obj.records[e][t]){var s=obj.records[e][t].getAttribute("data-x"),a=obj.records[e][t].getAttribute("data-y");if(obj.records[e][t].getAttribute("data-merged")){var l=jexcel.getColumnNameFromId([s,a]),c=jexcel.getColumnNameFromId([t,e]);if(r[l]==null)if(l==c)r[l]=!1;else{var u=parseInt(t-s),g=parseInt(e-a);r[l]=[c,u,g]}}else o(s,a,t,e)}var C=Object.keys(r);if(C.length){for(t=0;t<C.length;t++)if(r[C[t]]){var v=jexcel.getIdFromColumnName(C[t],!0);for(o(s=v[0],a=v[1],s+r[C[t]][1],a+r[C[t]][2]),l=C[t],c=r[C[t]][0],e=0;e<obj.options.mergeCells[l][2].length;e++)s=parseInt(obj.options.mergeCells[l][2][e].getAttribute("data-x")),a=parseInt(obj.options.mergeCells[l][2][e].getAttribute("data-y")),obj.options.mergeCells[l][2][e].setAttribute("data-x",s+r[C[t]][1]),obj.options.mergeCells[l][2][e].setAttribute("data-y",a+r[C[t]][2]);obj.options.mergeCells[c]=obj.options.mergeCells[l],delete obj.options.mergeCells[l]}}obj.updateFormulas(n),obj.updateMeta(n),obj.refreshSelection(),obj.updateTable()},obj.updateTable=function(){if(obj.options.minSpareRows>0){for(var t=0,e=obj.rows.length-1;e>=0;e--){for(var n=!1,r=0;r<obj.headers.length;r++)obj.options.data[e][r]&&(n=!0);if(n)break;t++}obj.options.minSpareRows-t>0&&obj.insertRow(obj.options.minSpareRows-t)}if(obj.options.minSpareCols>0){var o=0;for(r=obj.headers.length-1;r>=0;r--){for(n=!1,e=0;e<obj.rows.length;e++)obj.options.data[e][r]&&(n=!0);if(n)break;o++}obj.options.minSpareCols-o>0&&obj.insertColumn(obj.options.minSpareCols-o)}if(typeof obj.options.updateTable=="function"){for(obj.options.detachForUpdates&&el.removeChild(obj.content),e=0;e<obj.rows.length;e++)for(r=0;r<obj.headers.length;r++)obj.options.updateTable(el,obj.records[e][r],r,e,obj.options.data[e][r],obj.records[e][r].textContent,jexcel.getColumnNameFromId([r,e]));obj.options.detachForUpdates&&el.insertBefore(obj.content,obj.pagination)}obj.options.footers&&obj.setFooter(),setTimeout(function(){obj.updateCornerPosition()},0)},obj.isReadOnly=function(t){if(t=obj.getCell(t))return!!t.classList.contains("readonly")},obj.setReadOnly=function(t,e){(t=obj.getCell(t))&&(e?t.classList.add("readonly"):t.classList.remove("readonly"))},obj.showRow=function(t){obj.rows[t].style.display=""},obj.hideRow=function(t){obj.rows[t].style.display="none"},obj.showColumn=function(t){obj.headers[t].style.display="",obj.colgroup[t].style.display="",obj.filter&&obj.filter.children.length>t+1&&(obj.filter.children[t+1].style.display="");for(var e=0;e<obj.options.data.length;e++)obj.records[e][t].style.display="";obj.options.footers&&obj.setFooter(),obj.resetSelection()},obj.hideColumn=function(t){obj.headers[t].style.display="none",obj.colgroup[t].style.display="none",obj.filter&&obj.filter.children.length>t+1&&(obj.filter.children[t+1].style.display="none");for(var e=0;e<obj.options.data.length;e++)obj.records[e][t].style.display="none";obj.options.footers&&obj.setFooter(),obj.resetSelection()},obj.showIndex=function(){obj.table.classList.remove("jexcel_hidden_index")},obj.hideIndex=function(){obj.table.classList.add("jexcel_hidden_index")};var chainLoopProtection=[];obj.updateFormulaChain=function(t,e,n){var r=jexcel.getColumnNameFromId([t,e]);if(obj.formula[r]&&obj.formula[r].length>0)if(chainLoopProtection[r])obj.records[e][t].innerHTML="#ERROR",obj.formula[r]="";else{chainLoopProtection[r]=!0;for(var o=0;o<obj.formula[r].length;o++){var s=jexcel.getIdFromColumnName(obj.formula[r][o],!0),a=""+obj.options.data[s[1]][s[0]];a.substr(0,1)=="="?n.push(obj.updateCell(s[0],s[1],a,!0)):Object.keys(obj.formula)[o]=null,obj.updateFormulaChain(s[0],s[1],n)}}chainLoopProtection=[]},obj.updateFormulas=function(t){for(var e=0;e<obj.options.data.length;e++)for(var n=0;n<obj.options.data[0].length;n++)if((l=""+obj.options.data[e][n]).substr(0,1)=="="){var r=obj.updateFormula(l,t);r!=l&&(obj.options.data[e][n]=r)}var o=[],s=Object.keys(obj.formula);for(e=0;e<s.length;e++){var a=s[e],l=obj.formula[a];for(t[a]&&(a=t[a]),o[a]=[],n=0;n<l.length;n++){var c=l[n];t[c]&&(c=t[c]),o[a].push(c)}}obj.formula=o},obj.updateFormula=function(t,e){for(var n=/[A-Z]/,r=/[0-9]/,o="",s=null,a=null,l="",c=0;c<t.length;c++)n.exec(t[c])?(s=1,a=0,l+=t[c]):r.exec(t[c])?(a=s?1:0,l+=t[c]):(s&&a&&(l=e[l]?e[l]:l),o+=l,o+=t[c],s=0,a=0,l="");return l&&(s&&a&&(l=e[l]?e[l]:l),o+=l),o};var secureFormula=function(t){for(var e="",n=0,r=0;r<t.length;r++)t[r]=='"'&&(n=n==0?1:0),e+=n==1?t[r]:t[r].toUpperCase();return e};obj.executeFormula=function(expression,x,y){var formulaResults=[],formulaLoopProtection=[],execute=function(expression,x,y){var parentId=jexcel.getColumnNameFromId([x,y]);if(formulaLoopProtection[parentId])return console.error("Reference loop detected"),"#ERROR";formulaLoopProtection[parentId]=!0;var tokensUpdate=function(t){for(var e=0;e<t.length;e++){var n=[],r=t[e].split(":"),o=jexcel.getIdFromColumnName(r[0],!0),s=jexcel.getIdFromColumnName(r[1],!0);if(o[0]<=s[0])var a=o[0],l=s[0];else a=s[0],l=o[0];if(o[1]<=s[1])var c=o[1],u=s[1];else c=s[1],u=o[1];for(var g=c;g<=u;g++)for(var C=a;C<=l;C++)n.push(jexcel.getColumnNameFromId([C,g]));expression=expression.replace(t[e],n.join(","))}};expression=expression.replace(/\$?([A-Z]+)\$?([0-9]+)/g,"$1$2");var tokens=expression.match(/([A-Z]+[0-9]+)\:([A-Z]+[0-9]+)/g);tokens&&tokens.length&&tokensUpdate(tokens);var tokens=expression.match(/([A-Z]+[0-9]+)/g);if(tokens&&tokens.indexOf(parentId)>-1)return console.error("Self Reference detected"),"#ERROR";var formulaExpressions={};if(tokens){for(var i=0;i<tokens.length;i++)if(obj.formula[tokens[i]]||(obj.formula[tokens[i]]=[]),obj.formula[tokens[i]].indexOf(parentId)<0&&obj.formula[tokens[i]].push(parentId),eval("typeof("+tokens[i]+') == "undefined"')){var position=jexcel.getIdFromColumnName(tokens[i],1);if(obj.options.data[position[1]]!==void 0&&obj.options.data[position[1]][position[0]]!==void 0)var value=obj.options.data[position[1]][position[0]];else var value="";if((""+value).substr(0,1)=="="&&(formulaResults[tokens[i]]!==void 0?value=formulaResults[tokens[i]]:(value=execute(value,position[0],position[1]),formulaResults[tokens[i]]=value)),(""+value).trim()=="")formulaExpressions[tokens[i]]=null;else if(value==Number(value)&&obj.options.autoCasting==1)formulaExpressions[tokens[i]]=Number(value);else{var number=obj.parseNumber(value,position[0]);obj.options.autoCasting==1&&number?formulaExpressions[tokens[i]]=number:formulaExpressions[tokens[i]]='"'+value+'"'}}}try{var res=jexcel.formula(expression.substr(1),formulaExpressions,x,y,obj)}catch(t){var res="#ERROR";console.log(t)}return res};return execute(expression,x,y)},obj.parseNumber=function(t,e){var n=e&&obj.options.columns[e].decimal?obj.options.columns[e].decimal:".",r=""+t;return(r=r.split(n))[0]=r[0].match(/[+-]?[0-9]/g),r[0]&&(r[0]=r[0].join("")),r[1]&&(r[1]=r[1].match(/[0-9]*/g).join("")),r[0]&&Number.isInteger(Number(r[0]))?r[1]?t=Number(r[0]+"."+r[1]):t=Number(r[0]+".00"):t=null,t},obj.row=function(t){},obj.col=function(t){},obj.up=function(t,e){if(t?obj.selectedCell[3]>0&&obj.up.visible(1,e?0:1):(obj.selectedCell[1]>0&&obj.up.visible(0,e?0:1),obj.selectedCell[2]=obj.selectedCell[0],obj.selectedCell[3]=obj.selectedCell[1]),obj.updateSelectionFromCoords(obj.selectedCell[0],obj.selectedCell[1],obj.selectedCell[2],obj.selectedCell[3]),obj.options.lazyLoading==1)if(obj.selectedCell[1]==0||obj.selectedCell[3]==0)obj.loadPage(0),obj.updateSelectionFromCoords(obj.selectedCell[0],obj.selectedCell[1],obj.selectedCell[2],obj.selectedCell[3]);else if(obj.loadValidation())obj.updateSelectionFromCoords(obj.selectedCell[0],obj.selectedCell[1],obj.selectedCell[2],obj.selectedCell[3]);else{var n=parseInt(obj.tbody.firstChild.getAttribute("data-y"));obj.selectedCell[1]-n<30&&(obj.loadUp(),obj.updateSelectionFromCoords(obj.selectedCell[0],obj.selectedCell[1],obj.selectedCell[2],obj.selectedCell[3]))}else if(obj.options.pagination>0){var r=obj.whichPage(obj.selectedCell[3]);r!=obj.pageNumber&&obj.page(r)}obj.updateScroll(1)},obj.up.visible=function(t,e){if(t==0)var n=parseInt(obj.selectedCell[0]),r=parseInt(obj.selectedCell[1]);else n=parseInt(obj.selectedCell[2]),r=parseInt(obj.selectedCell[3]);if(e==0){for(var o=0;o<r;o++)if(obj.records[o][n].style.display!="none"&&obj.rows[o].style.display!="none"){r=o;break}}else r=obj.up.get(n,r);t==0?(obj.selectedCell[0]=n,obj.selectedCell[1]=r):(obj.selectedCell[2]=n,obj.selectedCell[3]=r)},obj.up.get=function(t,e){t=parseInt(t);for(var n=(e=parseInt(e))-1;n>=0;n--)if(obj.records[n][t].style.display!="none"&&obj.rows[n].style.display!="none"){if(obj.records[n][t].getAttribute("data-merged")&&obj.records[n][t]==obj.records[e][t])continue;e=n;break}return e},obj.down=function(t,e){if(t?obj.selectedCell[3]<obj.records.length-1&&obj.down.visible(1,e?0:1):(obj.selectedCell[1]<obj.records.length-1&&obj.down.visible(0,e?0:1),obj.selectedCell[2]=obj.selectedCell[0],obj.selectedCell[3]=obj.selectedCell[1]),obj.updateSelectionFromCoords(obj.selectedCell[0],obj.selectedCell[1],obj.selectedCell[2],obj.selectedCell[3]),obj.options.lazyLoading==1)obj.selectedCell[1]==obj.records.length-1||obj.selectedCell[3]==obj.records.length-1?(obj.loadPage(-1),obj.updateSelectionFromCoords(obj.selectedCell[0],obj.selectedCell[1],obj.selectedCell[2],obj.selectedCell[3])):obj.loadValidation()?obj.updateSelectionFromCoords(obj.selectedCell[0],obj.selectedCell[1],obj.selectedCell[2],obj.selectedCell[3]):parseInt(obj.tbody.lastChild.getAttribute("data-y"))-obj.selectedCell[3]<30&&(obj.loadDown(),obj.updateSelectionFromCoords(obj.selectedCell[0],obj.selectedCell[1],obj.selectedCell[2],obj.selectedCell[3]));else if(obj.options.pagination>0){var n=obj.whichPage(obj.selectedCell[3]);n!=obj.pageNumber&&obj.page(n)}obj.updateScroll(3)},obj.down.visible=function(t,e){if(t==0)var n=parseInt(obj.selectedCell[0]),r=parseInt(obj.selectedCell[1]);else n=parseInt(obj.selectedCell[2]),r=parseInt(obj.selectedCell[3]);if(e==0){for(var o=obj.rows.length-1;o>r;o--)if(obj.records[o][n].style.display!="none"&&obj.rows[o].style.display!="none"){r=o;break}}else r=obj.down.get(n,r);t==0?(obj.selectedCell[0]=n,obj.selectedCell[1]=r):(obj.selectedCell[2]=n,obj.selectedCell[3]=r)},obj.down.get=function(t,e){t=parseInt(t);for(var n=(e=parseInt(e))+1;n<obj.rows.length;n++)if(obj.records[n][t].style.display!="none"&&obj.rows[n].style.display!="none"){if(obj.records[n][t].getAttribute("data-merged")&&obj.records[n][t]==obj.records[e][t])continue;e=n;break}return e},obj.right=function(t,e){t?obj.selectedCell[2]<obj.headers.length-1&&obj.right.visible(1,e?0:1):(obj.selectedCell[0]<obj.headers.length-1&&obj.right.visible(0,e?0:1),obj.selectedCell[2]=obj.selectedCell[0],obj.selectedCell[3]=obj.selectedCell[1]),obj.updateSelectionFromCoords(obj.selectedCell[0],obj.selectedCell[1],obj.selectedCell[2],obj.selectedCell[3]),obj.updateScroll(2)},obj.right.visible=function(t,e){if(t==0)var n=parseInt(obj.selectedCell[0]),r=parseInt(obj.selectedCell[1]);else n=parseInt(obj.selectedCell[2]),r=parseInt(obj.selectedCell[3]);if(e==0){for(var o=obj.headers.length-1;o>n;o--)if(obj.records[r][o].style.display!="none"){n=o;break}}else n=obj.right.get(n,r);t==0?(obj.selectedCell[0]=n,obj.selectedCell[1]=r):(obj.selectedCell[2]=n,obj.selectedCell[3]=r)},obj.right.get=function(t,e){t=parseInt(t),e=parseInt(e);for(var n=t+1;n<obj.headers.length;n++)if(obj.records[e][n].style.display!="none"){if(obj.records[e][n].getAttribute("data-merged")&&obj.records[e][n]==obj.records[e][t])continue;t=n;break}return t},obj.left=function(t,e){t?obj.selectedCell[2]>0&&obj.left.visible(1,e?0:1):(obj.selectedCell[0]>0&&obj.left.visible(0,e?0:1),obj.selectedCell[2]=obj.selectedCell[0],obj.selectedCell[3]=obj.selectedCell[1]),obj.updateSelectionFromCoords(obj.selectedCell[0],obj.selectedCell[1],obj.selectedCell[2],obj.selectedCell[3]),obj.updateScroll(0)},obj.left.visible=function(t,e){if(t==0)var n=parseInt(obj.selectedCell[0]),r=parseInt(obj.selectedCell[1]);else n=parseInt(obj.selectedCell[2]),r=parseInt(obj.selectedCell[3]);if(e==0){for(var o=0;o<n;o++)if(obj.records[r][o].style.display!="none"){n=o;break}}else n=obj.left.get(n,r);t==0?(obj.selectedCell[0]=n,obj.selectedCell[1]=r):(obj.selectedCell[2]=n,obj.selectedCell[3]=r)},obj.left.get=function(t,e){t=parseInt(t),e=parseInt(e);for(var n=t-1;n>=0;n--)if(obj.records[e][n].style.display!="none"){if(obj.records[e][n].getAttribute("data-merged")&&obj.records[e][n]==obj.records[e][t])continue;t=n;break}return t},obj.first=function(t,e){if(t?e?obj.selectedCell[3]=0:obj.left.visible(1,0):(e?obj.selectedCell[1]=0:obj.left.visible(0,0),obj.selectedCell[2]=obj.selectedCell[0],obj.selectedCell[3]=obj.selectedCell[1]),obj.options.lazyLoading!=1||obj.selectedCell[1]!=0&&obj.selectedCell[3]!=0){if(obj.options.pagination>0){var n=obj.whichPage(obj.selectedCell[3]);n!=obj.pageNumber&&obj.page(n)}}else obj.loadPage(0);obj.updateSelectionFromCoords(obj.selectedCell[0],obj.selectedCell[1],obj.selectedCell[2],obj.selectedCell[3]),obj.updateScroll(1)},obj.last=function(t,e){if(t?e?obj.selectedCell[3]=obj.records.length-1:obj.right.visible(1,0):(e?obj.selectedCell[1]=obj.records.length-1:obj.right.visible(0,0),obj.selectedCell[2]=obj.selectedCell[0],obj.selectedCell[3]=obj.selectedCell[1]),obj.options.lazyLoading!=1||obj.selectedCell[1]!=obj.records.length-1&&obj.selectedCell[3]!=obj.records.length-1){if(obj.options.pagination>0){var n=obj.whichPage(obj.selectedCell[3]);n!=obj.pageNumber&&obj.page(n)}}else obj.loadPage(-1);obj.updateSelectionFromCoords(obj.selectedCell[0],obj.selectedCell[1],obj.selectedCell[2],obj.selectedCell[3]),obj.updateScroll(3)},obj.selectAll=function(){obj.selectedCell||(obj.selectedCell=[]),obj.selectedCell[0]=0,obj.selectedCell[1]=0,obj.selectedCell[2]=obj.headers.length-1,obj.selectedCell[3]=obj.records.length-1,obj.updateSelectionFromCoords(obj.selectedCell[0],obj.selectedCell[1],obj.selectedCell[2],obj.selectedCell[3])},obj.loadPage=function(t){if(obj.options.search!=1&&obj.options.filters!=1||!obj.results)e=obj.rows;else var e=obj.results;var n=100;t!=null&&t!=-1||(t=Math.ceil(e.length/n)-1);var r=t*n,o=t*n+n;o>e.length&&(o=e.length),(r=o-100)<0&&(r=0);for(var s=r;s<o;s++)obj.options.search!=1&&obj.options.filters!=1||!obj.results?obj.tbody.appendChild(obj.rows[s]):obj.tbody.appendChild(obj.rows[e[s]]),obj.tbody.children.length>n&&obj.tbody.removeChild(obj.tbody.firstChild)},obj.loadUp=function(){if(obj.options.search!=1&&obj.options.filters!=1||!obj.results)t=obj.rows;else var t=obj.results;var e=0;if(t.length>100){var n=parseInt(obj.tbody.firstChild.getAttribute("data-y"));if(obj.options.search!=1&&obj.options.filters!=1||!obj.results||(n=t.indexOf(n)),n>0)for(var r=0;r<30;r++)(n-=1)>-1&&(obj.options.search!=1&&obj.options.filters!=1||!obj.results?obj.tbody.insertBefore(obj.rows[n],obj.tbody.firstChild):obj.tbody.insertBefore(obj.rows[t[n]],obj.tbody.firstChild),obj.tbody.children.length>100&&(obj.tbody.removeChild(obj.tbody.lastChild),e=1))}return e},obj.loadDown=function(){if(obj.options.search!=1&&obj.options.filters!=1||!obj.results)t=obj.rows;else var t=obj.results;var e=0;if(t.length>100){var n=parseInt(obj.tbody.lastChild.getAttribute("data-y"));if(obj.options.search!=1&&obj.options.filters!=1||!obj.results||(n=t.indexOf(n)),n<obj.rows.length-1)for(var r=0;r<=30;r++)n<t.length&&(obj.options.search!=1&&obj.options.filters!=1||!obj.results?obj.tbody.appendChild(obj.rows[n]):obj.tbody.appendChild(obj.rows[t[n]]),obj.tbody.children.length>100&&(obj.tbody.removeChild(obj.tbody.firstChild),e=1)),n+=1}return e},obj.loadValidation=function(){if(obj.selectedCell){var t=parseInt(obj.tbody.firstChild.getAttribute("data-y"))/100,e=parseInt(obj.selectedCell[3]/100),n=parseInt(obj.rows.length/100);if(t!=e&&e<=n&&!Array.prototype.indexOf.call(obj.tbody.children,obj.rows[obj.selectedCell[3]]))return obj.loadPage(e),!0}return!1},obj.resetSearch=function(){obj.searchInput.value="",obj.search(""),obj.results=null},obj.search=function(t){if(obj.options.filters&&obj.resetFilters(),obj.resetSelection(),obj.pageNumber=0,obj.results=[],t){var e=function(r){obj.results.indexOf(r)==-1&&obj.results.push(r)},n=t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");n=new RegExp(n,"i"),obj.options.data.forEach(function(r,o){if(function(u,g,C){for(var v=0;v<u.length;v++)if((""+u[v]).toLowerCase().search(g)>=0||(""+obj.records[C][v].innerHTML).toLowerCase().search(g)>=0)return!0;return!1}(r,n,o)){var s=obj.isRowMerged(o);if(s.length)for(var a=0;a<s.length;a++)for(var l=jexcel.getIdFromColumnName(s[a],!0),c=0;c<obj.options.mergeCells[s[a]][1];c++)e(l[1]+c);else e(o)}})}else obj.results=null;return obj.updateResult()},obj.updateResult=function(){var t,e=0;for(t=obj.options.lazyLoading==1?100:obj.options.pagination>0?obj.options.pagination:obj.results?obj.results.length:obj.rows.length;obj.tbody.firstChild;)obj.tbody.removeChild(obj.tbody.firstChild);for(var n=0;n<obj.rows.length;n++)!obj.results||obj.results.indexOf(n)>-1?(e<t&&(obj.tbody.appendChild(obj.rows[n]),e++),obj.rows[n].style.display=""):obj.rows[n].style.display="none";return obj.options.pagination>0&&obj.updatePagination(),obj.updateCornerPosition(),t},obj.whichPage=function(t){return obj.options.search!=1&&obj.options.filters!=1||!obj.results||(t=obj.results.indexOf(t)),Math.ceil((parseInt(t)+1)/parseInt(obj.options.pagination))-1},obj.page=function(t){var e=obj.pageNumber;if(obj.options.search!=1&&obj.options.filters!=1||!obj.results)n=obj.rows;else var n=obj.results;var r=parseInt(obj.options.pagination);t!=null&&t!=-1||(t=Math.ceil(n.length/r)-1),obj.pageNumber=t;var o=t*r,s=t*r+r;for(s>n.length&&(s=n.length),o<0&&(o=0);obj.tbody.firstChild;)obj.tbody.removeChild(obj.tbody.firstChild);for(var a=o;a<s;a++)obj.options.search!=1&&obj.options.filters!=1||!obj.results?obj.tbody.appendChild(obj.rows[a]):obj.tbody.appendChild(obj.rows[n[a]]);obj.options.pagination>0&&obj.updatePagination(),obj.updateCornerPosition(),obj.dispatch("onchangepage",el,t,e)},obj.updatePagination=function(){if(obj.pagination.children[0].innerHTML="",obj.pagination.children[1].innerHTML="",obj.options.pagination){if(obj.options.search!=1&&obj.options.filters!=1||!obj.results)t=obj.rows.length;else var t=obj.results.length;if(t){var e=Math.ceil(t/obj.options.pagination);if(obj.pageNumber<6)var n=1,r=e<10?e:10;else e-obj.pageNumber<5?(r=e,(n=e-9)<1&&(n=1)):(n=obj.pageNumber-4,r=obj.pageNumber+5);n>1&&((s=document.createElement("div")).className="jexcel_page",s.innerHTML="<",s.title=1,obj.pagination.children[1].appendChild(s));for(var o=n;o<=r;o++){var s;(s=document.createElement("div")).className="jexcel_page",s.innerHTML=o,obj.pagination.children[1].appendChild(s),obj.pageNumber==o-1&&s.classList.add("jexcel_page_selected")}r<e&&((s=document.createElement("div")).className="jexcel_page",s.innerHTML=">",s.title=e,obj.pagination.children[1].appendChild(s)),obj.pagination.children[0].innerHTML=function(a){var l=Array.prototype.slice.call(arguments,1);return a.replace(/{(\d+)}/g,function(c,u){return l[u]!==void 0?l[u]:c})}(obj.options.text.showingPage,obj.pageNumber+1,e)}else obj.pagination.children[0].innerHTML=obj.options.text.noRecordsFound}},obj.download=function(t){if(obj.options.allowExport==0)console.error("Export not allowed");else{var e="";e+=obj.copy(!1,obj.options.csvDelimiter,!0,t,!0);var n=new Blob(["\uFEFF"+e],{type:"text/csv;charset=utf-8;"});if(window.navigator&&window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(n,obj.options.csvFileName+".csv");else{var r=document.createElement("a"),o=URL.createObjectURL(n);r.href=o,r.setAttribute("download",obj.options.csvFileName+".csv"),document.body.appendChild(r),r.click(),r.parentNode.removeChild(r)}}},obj.setHistory=function(t){if(obj.ignoreHistory!=1){var e=++obj.historyIndex;obj.history=obj.history=obj.history.slice(0,e+1),obj.history[e]=t}},obj.copy=function(t,e,n,r,o){e||(e="	");for(var s=new RegExp(e,"ig"),a=[],l=[],c=[],u=[],g=[],C=obj.options.data[0].length,v=obj.options.data.length,m="",S=!1,T="",w="",N=0,D=0,k=0,L=0,H=!0,R=0;R<v;R++)for(var B=0;B<C;B++)t&&!obj.records[R][B].classList.contains("highlight")||(k<=B&&(k=B),L<=R&&(L=R));if(C===k+1&&v===L+1&&(H=!1),o&&obj.options.includeHeadersOnDownload==1||!o&&obj.options.includeHeadersOnCopy==1&&!H||r){if(obj.options.nestedHeaders&&obj.options.nestedHeaders.length>0)for(m=obj.options.nestedHeaders[0]&&obj.options.nestedHeaders[0][0]?obj.options.nestedHeaders:[obj.options.nestedHeaders],R=0;R<m.length;R++){var Y=[];for(B=0;B<m[R].length;B++){var K=parseInt(m[R][B].colspan);Y.push(m[R][B].title);for(var se=0;se<K-1;se++)Y.push("")}w+=Y.join(e)+`\r
`}S=!0}for(obj.style=[],R=0;R<v;R++){for(l=[],c=[],B=0;B<C;B++)if(!t||obj.records[R][B].classList.contains("highlight")){S==1&&a.push(obj.headers[B].textContent);var pe=obj.options.data[R][B];if(pe.match&&(pe.match(s)||pe.match(/,/g)||pe.match(/\n/)||pe.match(/\"/))&&(pe='"'+(pe=pe.replace(new RegExp('"',"g"),'""'))+'"'),l.push(pe),obj.options.columns[B].type=="checkbox"||obj.options.columns[B].type=="radio")var le=pe;else(le=obj.options.stripHTMLOnCopy==1?obj.records[R][B].textContent:obj.records[R][B].innerHTML).match&&(le.match(s)||le.match(/,/g)||le.match(/\n/)||le.match(/\"/))&&(le='"'+(le=le.replace(new RegExp('"',"g"),'""'))+'"');c.push(le),m=(m=obj.records[R][B].getAttribute("style")).replace("display: none;",""),obj.style.push(m||"")}l.length&&(S&&(N=l.length,u.push(a.join(e))),u.push(l.join(e))),c.length&&(D++,S&&(g.push(a.join(e)),S=!1),g.push(c.join(e)))}C==N&&v==D&&(T=w);var Ee=T+u.join(`\r
`),Ne=T+g.join(`\r
`);if(n||(obj.options.copyCompatibility==1?obj.textarea.value=Ne:obj.textarea.value=Ee,obj.textarea.select(),document.execCommand("copy")),obj.options.copyCompatibility==1?obj.data=Ne:obj.data=Ee,obj.hashString=obj.hash(obj.data),!n){if(obj.removeCopyingSelection(),obj.highlighted)for(B=0;B<obj.highlighted.length;B++)obj.highlighted[B].classList.add("copying"),obj.highlighted[B].classList.contains("highlight-left")&&obj.highlighted[B].classList.add("copying-left"),obj.highlighted[B].classList.contains("highlight-right")&&obj.highlighted[B].classList.add("copying-right"),obj.highlighted[B].classList.contains("highlight-top")&&obj.highlighted[B].classList.add("copying-top"),obj.highlighted[B].classList.contains("highlight-bottom")&&obj.highlighted[B].classList.add("copying-bottom");obj.dispatch("oncopy",el,obj.options.copyCompatibility==1?g:u,obj.hashString)}return obj.data},obj.paste=function(t,e,n){var r=parseInt(t),o=parseInt(e),s=parseInt(obj.selectedCell[2]),a=parseInt(obj.selectedCell[3]),l=s-r+1,c=a-o+1;s<r&&(t=s.toString(),l=r-s+1),a<o&&(e=a.toString(),c=o-a+1);var u=obj.dispatch("onbeforepaste",el,n,t,e);if(u===!1)return!1;u&&(n=u);var g=obj.hash(n),C=g==obj.hashString?obj.style:null;if(obj.options.copyCompatibility==1&&g==obj.hashString&&(n=obj.data),n=obj.parseCSV(n,"	"),l>1&Number.isInteger(l/n[0].length)){C=null,m=l/n[0].length;var v=n.map(function(K,se){var pe=Array.apply(null,{length:m*K.length}).map(function(le,Ee){return K[Ee%K.length]});return pe});n=v}if(c>1&Number.isInteger(c/n.length)){C=null;var m=c/n.length;v=Array.apply(null,{length:m*n.length}).map(function(K,se){return n[se%n.length]}),n=v}if(t!=null&&e!=null&&n){for(var S=0,T=0,w=[],N={},D={},k=0,L=parseInt(t),H=parseInt(e),R=null;R=n[T];){for(S=0,L=parseInt(t);R[S]!=null;){var B=obj.updateCell(L,H,R[S]);if(w.push(B),obj.updateFormulaChain(L,H,w),C&&C[k]){var Y=jexcel.getColumnNameFromId([L,H]);N[Y]=C[k],D[Y]=obj.getStyle(Y),obj.records[H][L].setAttribute("style",C[k]),k++}if(R[++S]!=null){if(L>=obj.headers.length-1){if(obj.options.allowInsertColumn!=1)break;obj.insertColumn()}L=obj.right.get(L,H)}}if(T++,n[T]){if(H>=obj.rows.length-1){if(obj.options.allowInsertRow!=1)break;obj.insertRow()}H=obj.down.get(t,H)}}obj.updateSelectionFromCoords(t,e,L,H),obj.setHistory({action:"setValue",records:w,selection:obj.selectedCell,newStyle:N,oldStyle:D}),obj.updateTable(),obj.dispatch("onpaste",el,n),obj.onafterchanges(el,w)}obj.removeCopyingSelection()},obj.removeCopyingSelection=function(){for(var t=document.querySelectorAll(".jexcel .copying"),e=0;e<t.length;e++)t[e].classList.remove("copying"),t[e].classList.remove("copying-left"),t[e].classList.remove("copying-right"),t[e].classList.remove("copying-top"),t[e].classList.remove("copying-bottom")},obj.historyProcessRow=function(t,e){var n=e.insertBefore?+e.rowNumber:e.rowNumber+1;if(obj.options.search==1&&obj.results&&obj.results.length!=obj.rows.length&&obj.resetSearch(),t==1){for(var r=e.numOfRows,o=n;o<r+n;o++)obj.rows[o].parentNode.removeChild(obj.rows[o]);obj.records.splice(n,r),obj.options.data.splice(n,r),obj.rows.splice(n,r),obj.conditionalSelectionUpdate(1,n,r+n-1)}else{obj.records=jexcel.injectArray(obj.records,n,e.rowRecords),obj.options.data=jexcel.injectArray(obj.options.data,n,e.rowData),obj.rows=jexcel.injectArray(obj.rows,n,e.rowNode);var s=0;for(o=n;o<e.numOfRows+n;o++)obj.tbody.insertBefore(e.rowNode[s],obj.tbody.children[o]),s++}obj.options.pagination>0&&obj.page(obj.pageNumber),obj.updateTableReferences()},obj.historyProcessColumn=function(t,e){var n=e.insertBefore?e.columnNumber:e.columnNumber+1;if(t==1){var r=e.numOfColumns;obj.options.columns.splice(n,r);for(var o=n;o<r+n;o++)obj.headers[o].parentNode.removeChild(obj.headers[o]),obj.colgroup[o].parentNode.removeChild(obj.colgroup[o]);obj.headers.splice(n,r),obj.colgroup.splice(n,r);for(var s=0;s<e.data.length;s++){for(o=n;o<r+n;o++)obj.records[s][o].parentNode.removeChild(obj.records[s][o]);obj.records[s].splice(n,r),obj.options.data[s].splice(n,r)}if(obj.options.footers)for(s=0;s<obj.options.footers.length;s++)obj.options.footers[s].splice(n,r)}else{obj.options.columns=jexcel.injectArray(obj.options.columns,n,e.columns),obj.headers=jexcel.injectArray(obj.headers,n,e.headers),obj.colgroup=jexcel.injectArray(obj.colgroup,n,e.colgroup);var a=0;for(o=n;o<e.numOfColumns+n;o++)obj.headerContainer.insertBefore(e.headers[a],obj.headerContainer.children[o+1]),obj.colgroupContainer.insertBefore(e.colgroup[a],obj.colgroupContainer.children[o+1]),a++;for(s=0;s<e.data.length;s++)for(obj.options.data[s]=jexcel.injectArray(obj.options.data[s],n,e.data[s]),obj.records[s]=jexcel.injectArray(obj.records[s],n,e.records[s]),a=0,o=n;o<e.numOfColumns+n;o++)obj.rows[s].insertBefore(e.records[s][a],obj.rows[s].children[o+1]),a++;if(obj.options.footers)for(s=0;s<obj.options.footers.length;s++)obj.options.footers[s]=jexcel.injectArray(obj.options.footers[s],n,e.footers[s])}if(obj.options.nestedHeaders&&obj.options.nestedHeaders.length>0)if(obj.options.nestedHeaders[0]&&obj.options.nestedHeaders[0][0])for(s=0;s<obj.options.nestedHeaders.length;s++){if(t==1)var l=parseInt(obj.options.nestedHeaders[s][obj.options.nestedHeaders[s].length-1].colspan)-e.numOfColumns;else l=parseInt(obj.options.nestedHeaders[s][obj.options.nestedHeaders[s].length-1].colspan)+e.numOfColumns;obj.options.nestedHeaders[s][obj.options.nestedHeaders[s].length-1].colspan=l,obj.thead.children[s].children[obj.thead.children[s].children.length-1].setAttribute("colspan",l)}else l=t==1?parseInt(obj.options.nestedHeaders[0].colspan)-e.numOfColumns:parseInt(obj.options.nestedHeaders[0].colspan)+e.numOfColumns,obj.options.nestedHeaders[0].colspan=l,obj.thead.children[0].children[obj.thead.children[0].children.length-1].setAttribute("colspan",l);obj.updateTableReferences()},obj.undo=function(){var t=!!obj.ignoreEvents,e=!!obj.ignoreHistory;obj.ignoreEvents=!0,obj.ignoreHistory=!0;var n=[];if(obj.historyIndex>=0){var r=obj.history[obj.historyIndex--];if(r.action=="insertRow")obj.historyProcessRow(1,r);else if(r.action=="deleteRow")obj.historyProcessRow(0,r);else if(r.action=="insertColumn")obj.historyProcessColumn(1,r);else if(r.action=="deleteColumn")obj.historyProcessColumn(0,r);else if(r.action=="moveRow")obj.moveRow(r.newValue,r.oldValue);else if(r.action=="moveColumn")obj.moveColumn(r.newValue,r.oldValue);else if(r.action=="setMerge")obj.removeMerge(r.column,r.data);else if(r.action=="setStyle")obj.setStyle(r.oldValue,null,null,1);else if(r.action=="setWidth")obj.setWidth(r.column,r.oldValue);else if(r.action=="setHeight")obj.setHeight(r.row,r.oldValue);else if(r.action=="setHeader")obj.setHeader(r.column,r.oldValue);else if(r.action=="setComments")obj.setComments(r.column,r.oldValue[0],r.oldValue[1]);else if(r.action=="orderBy"){for(var o=[],s=0;s<r.rows.length;s++)o[r.rows[s]]=s;obj.updateOrderArrow(r.column,r.order?0:1),obj.updateOrder(o)}else if(r.action=="setValue"){for(var a=0;a<r.records.length;a++)n.push({x:r.records[a].x,y:r.records[a].y,newValue:r.records[a].oldValue}),r.oldStyle&&obj.resetStyle(r.oldStyle);obj.setValue(n),r.selection&&obj.updateSelectionFromCoords(r.selection[0],r.selection[1],r.selection[2],r.selection[3])}}obj.ignoreEvents=t,obj.ignoreHistory=e,obj.dispatch("onundo",el,r)},obj.redo=function(){var t=!!obj.ignoreEvents,e=!!obj.ignoreHistory;if(obj.ignoreEvents=!0,obj.ignoreHistory=!0,obj.historyIndex<obj.history.length-1){var n=obj.history[++obj.historyIndex];if(n.action=="insertRow")obj.historyProcessRow(0,n);else if(n.action=="deleteRow")obj.historyProcessRow(1,n);else if(n.action=="insertColumn")obj.historyProcessColumn(0,n);else if(n.action=="deleteColumn")obj.historyProcessColumn(1,n);else if(n.action=="moveRow")obj.moveRow(n.oldValue,n.newValue);else if(n.action=="moveColumn")obj.moveColumn(n.oldValue,n.newValue);else if(n.action=="setMerge")obj.setMerge(n.column,n.colspan,n.rowspan,1);else if(n.action=="setStyle")obj.setStyle(n.newValue,null,null,1);else if(n.action=="setWidth")obj.setWidth(n.column,n.newValue);else if(n.action=="setHeight")obj.setHeight(n.row,n.newValue);else if(n.action=="setHeader")obj.setHeader(n.column,n.newValue);else if(n.action=="setComments")obj.setComments(n.column,n.newValue[0],n.newValue[1]);else if(n.action=="orderBy")obj.updateOrderArrow(n.column,n.order),obj.updateOrder(n.rows);else if(n.action=="setValue"){obj.setValue(n.records);for(var r=0;r<n.records.length;r++)n.oldStyle&&obj.resetStyle(n.newStyle);n.selection&&obj.updateSelectionFromCoords(n.selection[0],n.selection[1],n.selection[2],n.selection[3])}}obj.ignoreEvents=t,obj.ignoreHistory=e,obj.dispatch("onredo",el,n)},obj.getDropDownValue=function(t,e){var n=[];if(obj.options.columns[t]&&obj.options.columns[t].source){for(var r=[],o=obj.options.columns[t].source,s=0;s<o.length;s++)typeof o[s]=="object"?r[o[s].id]=o[s].name:r[o[s]]=o[s];var a=Array.isArray(e)?e:(""+e).split(";");for(s=0;s<a.length;s++)typeof a[s]=="object"?n.push(r[a[s].id]):r[a[s]]&&n.push(r[a[s]])}else console.error("Invalid column");return n.length>0?n.join("; "):""},obj.parseCSV=function(t,e){(t=t.replace(/\r?\n$|\r$|\n$/g,"")).charCodeAt(t.length-1)==9&&(t+="\0"),e=e||",";for(var n=[],r=!1,o=0,s=0,a=0;a<t.length;a++){var l=t[a],c=t[a+1];n[o]=n[o]||[],n[o][s]=n[o][s]||"",l=='"'&&r&&c=='"'?(n[o][s]+=l,++a):l!='"'?l!=e||r?l!="\r"||c!=`
`||r?l==`
`&&!r||l=="\r"&&!r?(++o,s=0):n[o][s]+=l:(++o,s=0,++a):++s:r=!r}return n},obj.hash=function(t){var e,n=0;if(t.length===0)return n;for(e=0;e<t.length;e++)n=(n<<5)-n+t.charCodeAt(e),n|=0;return n},obj.onafterchanges=function(t,e){obj.dispatch("onafterchanges",t,e)},obj.destroy=function(){jexcel.destroy(el)},obj.init=function(){jexcel.current=obj,typeof jexcel.build=="function"&&(obj.options.root?jexcel.build(obj.options.root):(jexcel.build(document),jexcel.build=null)),el.setAttribute("tabindex",1),el.addEventListener("focus",function(t){jexcel.current&&!obj.selectedCell&&(obj.updateSelectionFromCoords(0,0,0,0),obj.left())}),obj.options.csv?(obj.options.loadingSpin==1&&jSuites.loading.show(),jSuites.ajax({url:obj.options.csv,method:obj.options.method,data:obj.options.requestVariables,dataType:"text",success:function(t){var e=obj.parseCSV(t,obj.options.csvDelimiter);if(obj.options.csvHeaders==1&&e.length>0)for(var n=e.shift(),r=0;r<n.length;r++)obj.options.columns[r]||(obj.options.columns[r]={type:"text",align:obj.options.defaultColAlign,width:obj.options.defaultColWidth}),obj.options.columns[r].title===void 0&&(obj.options.columns[r].title=n[r]);obj.options.data=e,obj.prepareTable(),obj.options.loadingSpin==1&&jSuites.loading.hide()}})):obj.options.url?(obj.options.loadingSpin==1&&jSuites.loading.show(),jSuites.ajax({url:obj.options.url,method:obj.options.method,data:obj.options.requestVariables,dataType:"json",success:function(t){obj.options.data=t.data?t.data:t,obj.prepareTable(),obj.options.loadingSpin==1&&jSuites.loading.hide()}})):obj.prepareTable()},options&&options.contextMenu!=null?obj.options.contextMenu=options.contextMenu:obj.options.contextMenu=function(t,e,n,r){var o=[];if(n==null)obj.options.allowInsertColumn==1&&o.push({title:obj.options.text.insertANewColumnBefore,onclick:function(){obj.insertColumn(1,parseInt(e),1)}}),obj.options.allowInsertColumn==1&&o.push({title:obj.options.text.insertANewColumnAfter,onclick:function(){obj.insertColumn(1,parseInt(e),0)}}),obj.options.allowDeleteColumn==1&&o.push({title:obj.options.text.deleteSelectedColumns,onclick:function(){obj.deleteColumn(obj.getSelectedColumns().length?void 0:parseInt(e))}}),obj.options.allowRenameColumn==1&&o.push({title:obj.options.text.renameThisColumn,onclick:function(){obj.setHeader(e)}}),obj.options.columnSorting==1&&(o.push({type:"line"}),o.push({title:obj.options.text.orderAscending,onclick:function(){obj.orderBy(e,0)}}),o.push({title:obj.options.text.orderDescending,onclick:function(){obj.orderBy(e,1)}}));else if(obj.options.allowInsertRow==1&&(o.push({title:obj.options.text.insertANewRowBefore,onclick:function(){obj.insertRow(1,parseInt(n),1)}}),o.push({title:obj.options.text.insertANewRowAfter,onclick:function(){obj.insertRow(1,parseInt(n))}})),obj.options.allowDeleteRow==1&&o.push({title:obj.options.text.deleteSelectedRows,onclick:function(){obj.deleteRow(obj.getSelectedRows().length?void 0:parseInt(n))}}),e&&obj.options.allowComments==1){o.push({type:"line"});var s=obj.records[n][e].getAttribute("title")||"";o.push({title:s?obj.options.text.editComments:obj.options.text.addComments,onclick:function(){var a=prompt(obj.options.text.comments,s);a&&obj.setComments([e,n],a)}}),s&&o.push({title:obj.options.text.clearComments,onclick:function(){obj.setComments([e,n],"")}})}return o.push({type:"line"}),o.push({title:obj.options.text.copy,shortcut:"Ctrl + C",onclick:function(){obj.copy(!0)}}),navigator&&navigator.clipboard&&o.push({title:obj.options.text.paste,shortcut:"Ctrl + V",onclick:function(){obj.selectedCell&&navigator.clipboard.readText().then(function(a){a&&jexcel.current.paste(obj.selectedCell[0],obj.selectedCell[1],a)})}}),obj.options.allowExport&&o.push({title:obj.options.text.saveAs,shortcut:"Ctrl + S",onclick:function(){obj.download()}}),obj.options.about&&o.push({title:obj.options.text.about,onclick:function(){obj.options.about===!0?alert(Version().print()):alert(obj.options.about)}}),o},obj.scrollControls=function(t){obj.wheelControls(),obj.options.freezeColumns>0&&obj.content.scrollLeft!=scrollLeft&&obj.updateFreezePosition(),obj.options.lazyLoading!=1&&obj.options.tableOverflow!=1||obj.edition&&t.target.className.substr(0,9)!="jdropdown"&&obj.closeEditor(obj.edition[0],!0)},obj.wheelControls=function(t){obj.options.lazyLoading==1&&jexcel.timeControlLoading==null&&(jexcel.timeControlLoading=setTimeout(function(){obj.content.scrollTop+obj.content.clientHeight>=obj.content.scrollHeight-10?obj.loadDown()&&(obj.content.scrollTop+obj.content.clientHeight>obj.content.scrollHeight-10&&(obj.content.scrollTop=obj.content.scrollTop-obj.content.clientHeight),obj.updateCornerPosition()):obj.content.scrollTop<=obj.content.clientHeight&&obj.loadUp()&&(obj.content.scrollTop<10&&(obj.content.scrollTop=obj.content.scrollTop+obj.content.clientHeight),obj.updateCornerPosition()),jexcel.timeControlLoading=null},100))},obj.getFreezeWidth=function(){var t=0;if(obj.options.freezeColumns>0)for(var e=0;e<obj.options.freezeColumns;e++)t+=parseInt(obj.options.columns[e].width);return t};var scrollLeft=0;return obj.updateFreezePosition=function(){var t=0;if((scrollLeft=obj.content.scrollLeft)>50)for(var e=0;e<obj.options.freezeColumns;e++){e>0&&obj.options.columns[e-1].type!=="hidden"&&(t+=parseInt(obj.options.columns[e-1].width)),obj.headers[e].classList.add("jexcel_freezed"),obj.headers[e].style.left=t+"px";for(var n=0;n<obj.rows.length;n++)if(obj.rows[n]&&obj.records[n][e]){var r=scrollLeft+(e>0?obj.records[n][e-1].style.width:0)-51+"px";obj.records[n][e].classList.add("jexcel_freezed"),obj.records[n][e].style.left=r}}else for(e=0;e<obj.options.freezeColumns;e++)for(obj.headers[e].classList.remove("jexcel_freezed"),obj.headers[e].style.left="",n=0;n<obj.rows.length;n++)obj.records[n][e]&&(obj.records[n][e].classList.remove("jexcel_freezed"),obj.records[n][e].style.left="");obj.updateCornerPosition()},el.addEventListener("DOMMouseScroll",obj.wheelControls),el.addEventListener("mousewheel",obj.wheelControls),el.jexcel=obj,el.jspreadsheet=obj,obj.init(),obj};jexcel.setDictionary=function(t){jSuites.setDictionary(t)},jexcel.setExtensions=function(t){for(var e=Object.keys(t),n=0;n<e.length;n++)typeof t[e[n]]=="function"&&(jexcel[e[n]]=t[e[n]],jexcel.license&&typeof t[e[n]].license=="function"&&t[e[n]].license(jexcel.license))},formula!==void 0&&(jexcel.formula=formula),jexcel.version=Version,jexcel.current=null,jexcel.timeControl=null,jexcel.timeControlLoading=null;const destroyEvents=function(t){t.removeEventListener("mouseup",jexcel.mouseUpControls),t.removeEventListener("mousedown",jexcel.mouseDownControls),t.removeEventListener("mousemove",jexcel.mouseMoveControls),t.removeEventListener("mouseover",jexcel.mouseOverControls),t.removeEventListener("dblclick",jexcel.doubleClickControls),t.removeEventListener("paste",jexcel.pasteControls),t.removeEventListener("contextmenu",jexcel.contextMenuControls),t.removeEventListener("touchstart",jexcel.touchStartControls),t.removeEventListener("touchend",jexcel.touchEndControls),t.removeEventListener("touchcancel",jexcel.touchEndControls),document.removeEventListener("keydown",jexcel.keyDownControls)};var component;return jexcel.destroy=function(t,e){if(t.jexcel){var n=t.jexcel.options.root?t.jexcel.options.root:document;t.removeEventListener("DOMMouseScroll",t.jexcel.scrollControls),t.removeEventListener("mousewheel",t.jexcel.scrollControls),t.jexcel=null,t.innerHTML="",e&&(destroyEvents(n),jexcel=null)}},jexcel.build=function(t){destroyEvents(t),t.addEventListener("mouseup",jexcel.mouseUpControls),t.addEventListener("mousedown",jexcel.mouseDownControls),t.addEventListener("mousemove",jexcel.mouseMoveControls),t.addEventListener("mouseover",jexcel.mouseOverControls),t.addEventListener("dblclick",jexcel.doubleClickControls),t.addEventListener("paste",jexcel.pasteControls),t.addEventListener("contextmenu",jexcel.contextMenuControls),t.addEventListener("touchstart",jexcel.touchStartControls),t.addEventListener("touchend",jexcel.touchEndControls),t.addEventListener("touchcancel",jexcel.touchEndControls),t.addEventListener("touchmove",jexcel.touchEndControls),document.addEventListener("keydown",jexcel.keyDownControls)},jexcel.keyDownControls=function(t){if(jexcel.current){if(jexcel.current.edition)if(t.which==27)jexcel.current.edition&&jexcel.current.closeEditor(jexcel.current.edition[0],!1),t.preventDefault();else if(t.which==13){if(jexcel.current.options.columns[jexcel.current.edition[2]].type=="calendar")jexcel.current.closeEditor(jexcel.current.edition[0],!0);else if(!(jexcel.current.options.columns[jexcel.current.edition[2]].type=="dropdown"||jexcel.current.options.columns[jexcel.current.edition[2]].type=="autocomplete"))if((jexcel.current.options.wordWrap==1||jexcel.current.options.columns[jexcel.current.edition[2]].wordWrap==1||jexcel.current.options.data[jexcel.current.edition[3]][jexcel.current.edition[2]].length>200)&&t.altKey){var e=jexcel.current.edition[0].children[0],n=jexcel.current.edition[0].children[0].value,r=e.selectionStart;n=n.slice(0,r)+`
`+n.slice(r),e.value=n,e.focus(),e.selectionStart=r+1,e.selectionEnd=r+1}else jexcel.current.edition[0].children[0].blur()}else t.which==9&&(["calendar","html"].includes(jexcel.current.options.columns[jexcel.current.edition[2]].type)?jexcel.current.closeEditor(jexcel.current.edition[0],!0):jexcel.current.edition[0].children[0].blur());if(!jexcel.current.edition&&jexcel.current.selectedCell)if(t.which==37)jexcel.current.left(t.shiftKey,t.ctrlKey),t.preventDefault();else if(t.which==39)jexcel.current.right(t.shiftKey,t.ctrlKey),t.preventDefault();else if(t.which==38)jexcel.current.up(t.shiftKey,t.ctrlKey),t.preventDefault();else if(t.which==40)jexcel.current.down(t.shiftKey,t.ctrlKey),t.preventDefault();else if(t.which==36)jexcel.current.first(t.shiftKey,t.ctrlKey),t.preventDefault();else if(t.which==35)jexcel.current.last(t.shiftKey,t.ctrlKey),t.preventDefault();else if(t.which==46||t.which==8)jexcel.current.options.editable==1&&(jexcel.current.selectedRow?jexcel.current.options.allowDeleteRow==1&&confirm(jexcel.current.options.text.areYouSureToDeleteTheSelectedRows)&&jexcel.current.deleteRow():jexcel.current.selectedHeader?jexcel.current.options.allowDeleteColumn==1&&confirm(jexcel.current.options.text.areYouSureToDeleteTheSelectedColumns)&&jexcel.current.deleteColumn():jexcel.current.setValue(jexcel.current.highlighted,""));else if(t.which==13)t.shiftKey?jexcel.current.up():(jexcel.current.options.allowInsertRow==1&&jexcel.current.options.allowManualInsertRow==1&&jexcel.current.selectedCell[1]==jexcel.current.options.data.length-1&&jexcel.current.insertRow(),jexcel.current.down()),t.preventDefault();else if(t.which==9)t.shiftKey?jexcel.current.left():(jexcel.current.options.allowInsertColumn==1&&jexcel.current.options.allowManualInsertColumn==1&&jexcel.current.selectedCell[0]==jexcel.current.options.data[0].length-1&&jexcel.current.insertColumn(),jexcel.current.right()),t.preventDefault();else if(!t.ctrlKey&&!t.metaKey||t.shiftKey){if(jexcel.current.selectedCell&&jexcel.current.options.editable==1){var o=jexcel.current.selectedCell[1],s=jexcel.current.selectedCell[0];jexcel.current.options.columns[s].type!="readonly"&&(t.keyCode==32?(t.preventDefault(),jexcel.current.options.columns[s].type=="checkbox"||jexcel.current.options.columns[s].type=="radio"?jexcel.current.setCheckRadioValue():jexcel.current.openEditor(jexcel.current.records[o][s],!0)):t.keyCode==113?jexcel.current.openEditor(jexcel.current.records[o][s],!1):(t.keyCode==8||t.keyCode>=48&&t.keyCode<=57||t.keyCode>=96&&t.keyCode<=111||t.keyCode>=187&&t.keyCode<=190||(String.fromCharCode(t.keyCode)==t.key||String.fromCharCode(t.keyCode).toLowerCase()==t.key.toLowerCase())&&jexcel.validLetter(String.fromCharCode(t.keyCode)))&&(jexcel.current.openEditor(jexcel.current.records[o][s],!0),jexcel.current.options.columns[s].type=="calendar"&&t.preventDefault()))}}else t.which==65?(jexcel.current.selectAll(),t.preventDefault()):t.which==83?(jexcel.current.download(),t.preventDefault()):t.which==89?(jexcel.current.redo(),t.preventDefault()):t.which==90?(jexcel.current.undo(),t.preventDefault()):t.which==67?(jexcel.current.copy(!0),t.preventDefault()):t.which==88?(jexcel.current.options.editable==1?jexcel.cutControls():jexcel.copyControls(),t.preventDefault()):t.which==86&&jexcel.pasteControls();else t.target.classList.contains("jexcel_search")&&(jexcel.timeControl&&clearTimeout(jexcel.timeControl),jexcel.timeControl=setTimeout(function(){jexcel.current.search(t.target.value)},200))}},jexcel.isMouseAction=!1,jexcel.mouseDownControls=function(t){if((t=t||window.event).buttons)var e=t.buttons;else e=t.button?t.button:t.which;var n=jexcel.getElement(t.target);if(n[0]?jexcel.current!=n[0].jexcel&&(jexcel.current&&(jexcel.current.edition&&jexcel.current.closeEditor(jexcel.current.edition[0],!0),jexcel.current.resetSelection()),jexcel.current=n[0].jexcel):jexcel.current&&(jexcel.current.edition&&jexcel.current.closeEditor(jexcel.current.edition[0],!0),jexcel.current.resetSelection(!0),jexcel.current=null),jexcel.current&&e==1){if(t.target.classList.contains("jexcel_selectall"))jexcel.current&&jexcel.current.selectAll();else if(t.target.classList.contains("jexcel_corner"))jexcel.current.options.editable==1&&(jexcel.current.selectedCorner=!0);else{if(n[1]==1){if(m=t.target.getAttribute("data-x")){var r=t.target.getBoundingClientRect();if(jexcel.current.options.columnResize==1&&r.width-t.offsetX<6){jexcel.current.resizing={mousePosition:t.pageX,column:m,width:r.width},jexcel.current.headers[m].classList.add("resizing");for(var o=0;o<jexcel.current.records.length;o++)jexcel.current.records[o][m]&&jexcel.current.records[o][m].classList.add("resizing")}else if(jexcel.current.options.columnDrag==1&&r.height-t.offsetY<6)if(jexcel.current.isColMerged(m).length)console.error("Jspreadsheet: This column is part of a merged cell.");else for(jexcel.current.resetSelection(),jexcel.current.dragging={element:t.target,column:m,destination:m},jexcel.current.headers[m].classList.add("dragging"),o=0;o<jexcel.current.records.length;o++)jexcel.current.records[o][m]&&jexcel.current.records[o][m].classList.add("dragging");else{if(jexcel.current.selectedHeader&&(t.shiftKey||t.ctrlKey))var s=jexcel.current.selectedHeader,a=m;else jexcel.current.selectedHeader==m&&jexcel.current.options.allowRenameColumn==1&&(jexcel.timeControl=setTimeout(function(){jexcel.current.setHeader(m)},800)),jexcel.current.selectedHeader=m,s=m,a=m;jexcel.current.updateSelectionFromCoords(s,0,a,jexcel.current.options.data.length-1)}}else if(t.target.parentNode.classList.contains("jexcel_nested")){if(t.target.getAttribute("data-column"))var l=t.target.getAttribute("data-column").split(","),c=parseInt(l[0]),u=parseInt(l[l.length-1]);else c=0,u=jexcel.current.options.columns.length-1;jexcel.current.updateSelectionFromCoords(c,0,u,jexcel.current.options.data.length-1)}}else jexcel.current.selectedHeader=!1;if(n[1]==2){var g=t.target.getAttribute("data-y");if(t.target.classList.contains("jexcel_row"))r=t.target.getBoundingClientRect(),jexcel.current.options.rowResize==1&&r.height-t.offsetY<6?(jexcel.current.resizing={element:t.target.parentNode,mousePosition:t.pageY,row:g,height:r.height},t.target.parentNode.classList.add("resizing")):jexcel.current.options.rowDrag==1&&r.width-t.offsetX<6?jexcel.current.isRowMerged(g).length?console.error("Jspreadsheet: This row is part of a merged cell"):jexcel.current.options.search==1&&jexcel.current.results?console.error("Jspreadsheet: Please clear your search before perform this action"):(jexcel.current.resetSelection(),jexcel.current.dragging={element:t.target.parentNode,row:g,destination:g},t.target.parentNode.classList.add("dragging")):(jexcel.current.selectedRow&&(t.shiftKey||t.ctrlKey)?(s=jexcel.current.selectedRow,a=g):(jexcel.current.selectedRow=g,s=g,a=g),jexcel.current.updateSelectionFromCoords(0,s,jexcel.current.options.data[0].length-1,a));else if(t.target.classList.contains("jclose")&&t.target.clientWidth-t.offsetX<50&&t.offsetY<50)jexcel.current.closeEditor(jexcel.current.edition[0],!0);else{var C=function(S){var T=S.getAttribute("data-x"),w=S.getAttribute("data-y");return T&&w?[T,w]:S.parentNode?C(S.parentNode):void 0},v=C(t.target);if(v){var m=v[0];g=v[1],jexcel.current.edition&&(jexcel.current.edition[2]==m&&jexcel.current.edition[3]==g||jexcel.current.closeEditor(jexcel.current.edition[0],!0)),jexcel.current.edition||(t.shiftKey?jexcel.current.updateSelectionFromCoords(jexcel.current.selectedCell[0],jexcel.current.selectedCell[1],m,g):jexcel.current.updateSelectionFromCoords(m,g)),jexcel.current.selectedHeader=null,jexcel.current.selectedRow=null}}}else jexcel.current.selectedRow=!1;t.target.classList.contains("jexcel_page")&&(t.target.textContent=="<"?jexcel.current.page(0):t.target.textContent==">"?jexcel.current.page(t.target.getAttribute("title")-1):jexcel.current.page(t.target.textContent-1))}jexcel.current.edition?jexcel.isMouseAction=!1:jexcel.isMouseAction=!0}else jexcel.isMouseAction=!1},jexcel.mouseUpControls=function(t){if(jexcel.current)if(jexcel.current.resizing){if(jexcel.current.resizing.column){var e=jexcel.current.colgroup[jexcel.current.resizing.column].getAttribute("width"),n=jexcel.current.getSelectedColumns();if(n.length>1){for(var r=[],o=0;o<n.length;o++)r.push(parseInt(jexcel.current.colgroup[n[o]].getAttribute("width")));r[n.indexOf(parseInt(jexcel.current.resizing.column))]=jexcel.current.resizing.width,jexcel.current.setWidth(n,e,r)}else jexcel.current.setWidth(jexcel.current.resizing.column,e,jexcel.current.resizing.width);jexcel.current.headers[jexcel.current.resizing.column].classList.remove("resizing");for(var s=0;s<jexcel.current.records.length;s++)jexcel.current.records[s][jexcel.current.resizing.column]&&jexcel.current.records[s][jexcel.current.resizing.column].classList.remove("resizing")}else{jexcel.current.rows[jexcel.current.resizing.row].children[0].classList.remove("resizing");var a=jexcel.current.rows[jexcel.current.resizing.row].getAttribute("height");jexcel.current.setHeight(jexcel.current.resizing.row,a,jexcel.current.resizing.height),jexcel.current.resizing.element.classList.remove("resizing")}jexcel.current.resizing=null}else if(jexcel.current.dragging){if(jexcel.current.dragging){if(jexcel.current.dragging.column){var l=t.target.getAttribute("data-x");for(jexcel.current.headers[jexcel.current.dragging.column].classList.remove("dragging"),s=0;s<jexcel.current.rows.length;s++)jexcel.current.records[s][jexcel.current.dragging.column]&&jexcel.current.records[s][jexcel.current.dragging.column].classList.remove("dragging");for(o=0;o<jexcel.current.headers.length;o++)jexcel.current.headers[o].classList.remove("dragging-left"),jexcel.current.headers[o].classList.remove("dragging-right");l&&jexcel.current.dragging.column!=jexcel.current.dragging.destination&&jexcel.current.moveColumn(jexcel.current.dragging.column,jexcel.current.dragging.destination)}else{if(jexcel.current.dragging.element.nextSibling){var c=parseInt(jexcel.current.dragging.element.nextSibling.getAttribute("data-y"));jexcel.current.dragging.row<c&&(c-=1)}else c=parseInt(jexcel.current.dragging.element.previousSibling.getAttribute("data-y"));jexcel.current.dragging.row!=jexcel.current.dragging.destination&&jexcel.current.moveRow(jexcel.current.dragging.row,c,!0),jexcel.current.dragging.element.classList.remove("dragging")}jexcel.current.dragging=null}}else jexcel.current.selectedCorner&&(jexcel.current.selectedCorner=!1,jexcel.current.selection.length>0&&(jexcel.current.copyData(jexcel.current.selection[0],jexcel.current.selection[jexcel.current.selection.length-1]),jexcel.current.removeCopySelection()));jexcel.timeControl&&(clearTimeout(jexcel.timeControl),jexcel.timeControl=null),jexcel.isMouseAction=!1},jexcel.mouseMoveControls=function(t){if((t=t||window.event).buttons)var e=t.buttons;else e=t.button?t.button:t.which;if(e||(jexcel.isMouseAction=!1),jexcel.current)if(jexcel.isMouseAction==1){if(jexcel.current.resizing)if(jexcel.current.resizing.column){var n=t.pageX-jexcel.current.resizing.mousePosition;if(jexcel.current.resizing.width+n>0){var r=jexcel.current.resizing.width+n;jexcel.current.colgroup[jexcel.current.resizing.column].setAttribute("width",r),jexcel.current.updateCornerPosition()}}else{var o=t.pageY-jexcel.current.resizing.mousePosition;if(jexcel.current.resizing.height+o>0){var s=jexcel.current.resizing.height+o;jexcel.current.rows[jexcel.current.resizing.row].setAttribute("height",s),jexcel.current.updateCornerPosition()}}else if(jexcel.current.dragging)if(jexcel.current.dragging.column){var a=t.target.getAttribute("data-x");if(a)if(jexcel.current.isColMerged(a).length)console.error("Jspreadsheet: This column is part of a merged cell.");else{for(var l=0;l<jexcel.current.headers.length;l++)jexcel.current.headers[l].classList.remove("dragging-left"),jexcel.current.headers[l].classList.remove("dragging-right");jexcel.current.dragging.column==a?jexcel.current.dragging.destination=parseInt(a):t.target.clientWidth/2>t.offsetX?(jexcel.current.dragging.column<a?jexcel.current.dragging.destination=parseInt(a)-1:jexcel.current.dragging.destination=parseInt(a),jexcel.current.headers[a].classList.add("dragging-left")):(jexcel.current.dragging.column<a?jexcel.current.dragging.destination=parseInt(a):jexcel.current.dragging.destination=parseInt(a)+1,jexcel.current.headers[a].classList.add("dragging-right"))}}else{var c=t.target.getAttribute("data-y");if(c)if(jexcel.current.isRowMerged(c).length)console.error("Jspreadsheet: This row is part of a merged cell.");else{var u=t.target.clientHeight/2>t.offsetY?t.target.parentNode.nextSibling:t.target.parentNode;jexcel.current.dragging.element!=u&&(t.target.parentNode.parentNode.insertBefore(jexcel.current.dragging.element,u),jexcel.current.dragging.destination=Array.prototype.indexOf.call(jexcel.current.dragging.element.parentNode.children,jexcel.current.dragging.element))}}}else{var g=t.target.getAttribute("data-x"),C=t.target.getAttribute("data-y"),v=t.target.getBoundingClientRect();jexcel.current.cursor&&(jexcel.current.cursor.style.cursor="",jexcel.current.cursor=null),t.target.parentNode.parentNode&&t.target.parentNode.parentNode.className&&(t.target.parentNode.parentNode.classList.contains("resizable")&&(t.target&&g&&!C&&v.width-(t.clientX-v.left)<6?(jexcel.current.cursor=t.target,jexcel.current.cursor.style.cursor="col-resize"):t.target&&!g&&C&&v.height-(t.clientY-v.top)<6&&(jexcel.current.cursor=t.target,jexcel.current.cursor.style.cursor="row-resize")),t.target.parentNode.parentNode.classList.contains("draggable")&&(t.target&&!g&&C&&v.width-(t.clientX-v.left)<6||t.target&&g&&!C&&v.height-(t.clientY-v.top)<6)&&(jexcel.current.cursor=t.target,jexcel.current.cursor.style.cursor="move"))}},jexcel.mouseOverControls=function(t){if((t=t||window.event).buttons)var e=t.buttons;else e=t.button?t.button:t.which;if(e||(jexcel.isMouseAction=!1),jexcel.current&&jexcel.isMouseAction==1){var n=jexcel.getElement(t.target);if(n[0]){if(jexcel.current!=n[0].jexcel&&jexcel.current)return!1;var r=t.target.getAttribute("data-x"),o=t.target.getAttribute("data-y");if(!(jexcel.current.resizing||jexcel.current.dragging)){if(n[1]==1&&jexcel.current.selectedHeader){r=t.target.getAttribute("data-x");var s=jexcel.current.selectedHeader,a=r;jexcel.current.updateSelectionFromCoords(s,0,a,jexcel.current.options.data.length-1)}n[1]==2&&(t.target.classList.contains("jexcel_row")?jexcel.current.selectedRow&&(s=jexcel.current.selectedRow,a=o,jexcel.current.updateSelectionFromCoords(0,s,jexcel.current.options.data[0].length-1,a)):jexcel.current.edition||r&&o&&(jexcel.current.selectedCorner?jexcel.current.updateCopySelection(r,o):jexcel.current.selectedCell&&jexcel.current.updateSelectionFromCoords(jexcel.current.selectedCell[0],jexcel.current.selectedCell[1],r,o)))}}}jexcel.timeControl&&(clearTimeout(jexcel.timeControl),jexcel.timeControl=null)},jexcel.doubleClickControls=function(t){if(jexcel.current)if(t.target.classList.contains("jexcel_corner")){if(jexcel.current.highlighted.length>0){var e=jexcel.current.highlighted[0].getAttribute("data-x"),n=parseInt(jexcel.current.highlighted[jexcel.current.highlighted.length-1].getAttribute("data-y"))+1,r=jexcel.current.highlighted[jexcel.current.highlighted.length-1].getAttribute("data-x"),o=jexcel.current.records.length-1;jexcel.current.copyData(jexcel.current.records[n][e],jexcel.current.records[o][r])}}else if(t.target.classList.contains("jexcel_column_filter")){var s=t.target.getAttribute("data-x");jexcel.current.openFilter(s)}else{var a=jexcel.getElement(t.target);if(a[1]==1&&jexcel.current.options.columnSorting==1&&(s=t.target.getAttribute("data-x"))&&jexcel.current.orderBy(s),a[1]==2&&jexcel.current.options.editable==1&&!jexcel.current.edition){var l=function(u){if(u.parentNode){var g=u.getAttribute("data-x"),C=u.getAttribute("data-y");return g&&C?u:l(u.parentNode)}},c=l(t.target);c&&c.classList.contains("highlight")&&jexcel.current.openEditor(c)}}},jexcel.copyControls=function(t){jexcel.current&&jexcel.copyControls.enabled&&(jexcel.current.edition||jexcel.current.copy(!0))},jexcel.cutControls=function(t){jexcel.current&&(jexcel.current.edition||(jexcel.current.copy(!0),jexcel.current.options.editable==1&&jexcel.current.setValue(jexcel.current.highlighted,"")))},jexcel.pasteControls=function(t){jexcel.current&&jexcel.current.selectedCell&&(jexcel.current.edition||jexcel.current.options.editable==1&&(t&&t.clipboardData?(jexcel.current.paste(jexcel.current.selectedCell[0],jexcel.current.selectedCell[1],t.clipboardData.getData("text")),t.preventDefault()):window.clipboardData&&jexcel.current.paste(jexcel.current.selectedCell[0],jexcel.current.selectedCell[1],window.clipboardData.getData("text"))))},jexcel.contextMenuControls=function(t){if("buttons"in(t=t||window.event)?t.buttons:t.which||t.button,jexcel.current){if(jexcel.current.edition)t.preventDefault();else if(jexcel.current.options.contextMenu&&(jexcel.current.contextMenu.contextmenu.close(),jexcel.current)){var e=t.target.getAttribute("data-x"),n=t.target.getAttribute("data-y");if(e||n){(e<parseInt(jexcel.current.selectedCell[0])||e>parseInt(jexcel.current.selectedCell[2])||n<parseInt(jexcel.current.selectedCell[1])||n>parseInt(jexcel.current.selectedCell[3]))&&jexcel.current.updateSelectionFromCoords(e,n,e,n);var r=jexcel.current.options.contextMenu(jexcel.current,e,n,t);jexcel.current.contextMenu.contextmenu.open(t,r),t.preventDefault()}}}},jexcel.touchStartControls=function(t){var e=jexcel.getElement(t.target);if(e[0]?jexcel.current!=e[0].jexcel&&(jexcel.current&&jexcel.current.resetSelection(),jexcel.current=e[0].jexcel):jexcel.current&&(jexcel.current.resetSelection(),jexcel.current=null),jexcel.current&&!jexcel.current.edition){var n=t.target.getAttribute("data-x"),r=t.target.getAttribute("data-y");n&&r&&(jexcel.current.updateSelectionFromCoords(n,r),jexcel.timeControl=setTimeout(function(){jexcel.current.options.columns[n].type=="color"?jexcel.tmpElement=null:jexcel.tmpElement=t.target,jexcel.current.openEditor(t.target,!1,t)},500))}},jexcel.touchEndControls=function(t){jexcel.timeControl&&(clearTimeout(jexcel.timeControl),jexcel.timeControl=null,jexcel.tmpElement&&jexcel.tmpElement.children[0].tagName=="INPUT"&&jexcel.tmpElement.children[0].focus(),jexcel.tmpElement=null)},jexcel.tabs=function(t,e){var n=[];if(t.classList.contains("jexcel_tabs"))o=t.children[0],s=t.children[1];else{t.innerHTML="",t.classList.add("jexcel_tabs"),t.jexcel=[];var r=document.createElement("div"),o=t.appendChild(r),s=(r=document.createElement("div"),t.appendChild(r))}for(var a=[],l=[],c=0;c<e.length;c++){a[c]=document.createElement("div"),a[c].classList.add("jexcel_tab");var u=jexcel(a[c],e[c]);s.appendChild(a[c]),n[c]=t.jexcel.push(u),l[c]=document.createElement("div"),l[c].classList.add("jexcel_tab_link"),l[c].setAttribute("data-spreadsheet",t.jexcel.length-1),l[c].innerHTML=e[c].sheetName,l[c].onclick=function(){for(var C=0;C<o.children.length;C++)o.children[C].classList.remove("selected"),s.children[C].style.display="none";var v=this.getAttribute("data-spreadsheet");s.children[v].style.display="block",o.children[v].classList.add("selected")},o.appendChild(l[c])}for(var g=0;g<o.children.length;g++)o.children[g].classList.remove("selected"),s.children[g].style.display="none";return o.children[o.children.length-1].classList.add("selected"),s.children[o.children.length-1].style.display="block",n},jexcel.createTabs=jexcel.tabs,jexcel.fromSpreadsheet=function(t,e){var n,r=function(o){var s=[];return o.SheetNames.forEach(function(a){var l={rows:[],columns:[],data:[],style:{}};if(l.sheetName=a,(w=o.Sheets[a]["!cols"])&&w.length)for(var c=0;c<w.length;c++)l.columns[c]={},w[c]&&w[c].wpx&&(l.columns[c].width=w[c].wpx+"px");if((w=o.Sheets[a]["!rows"])&&w.length)for(c=0;c<w.length;c++)w[c]&&w[c].hpx&&(l.rows[c]={},l.rows[c].height=w[c].hpx+"px");if((w=o.Sheets[a]["!merges"])&&w.length>0)for(l.mergeCells=[],c=0;c<w.length;c++){var u=w[c].s.c,g=w[c].s.r,C=w[c].e.c,v=w[c].e.r,m=jexcel.getColumnNameFromId([u,g]);l.mergeCells[m]=[C-u+1,v-g+1]}var S=0,T=0,w=Object.keys(o.Sheets[a]);for(c=0;c<w.length;c++)if(w[c].substr(0,1)!="!"){var N=o.Sheets[a][w[c]],D=jexcel.getIdFromColumnName(w[c],!0);l.data[D[1]]||(l.data[D[1]]=[]),l.data[D[1]][D[0]]=N.f?"="+N.f:N.w,S<D[0]&&(S=D[0]),T<D[1]&&(T=D[1]),N.style&&Object.keys(N.style).length>0&&(l.style[w[c]]=N.style),N.s&&N.s.fgColor&&(l.style[w[c]]&&(l.style[w[c]]+=";"),l.style[w[c]]+="background-color:#"+N.s.fgColor.rgb)}for(var k=l.columns,L=0;L<=T;L++)for(c=0;c<=S;c++)l.data[L]||(l.data[L]=[]),l.data[L][c]||k<c&&(l.data[L][c]="");s.push(l)}),s};(n=new XMLHttpRequest).open("GET",t,!0),typeof Uint8Array<"u"?(n.responseType="arraybuffer",n.onload=function(o){var s=n.response,a=new Uint8Array(s),l=XLSX.read(a,{type:"array",cellFormula:!0,cellStyles:!0});e(r(l))}):(n.setRequestHeader("Accept-Charset","x-user-defined"),n.onreadystatechange=function(){if(n.readyState==4&&n.status==200){var o=convertResponseBodyToText(n.responseBody),s=XLSX.read(o,{type:"binary",cellFormula:!0,cellStyles:!0});e(r(s))}}),n.send()},jexcel.validLetter=function(t){return t.match(/([\u0041-\u005A\u0061-\u007A\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC-\u0400-\u04FF']+)/g)?1:0},jexcel.injectArray=function(t,e,n){return t.slice(0,e).concat(n).concat(t.slice(e))},jexcel.getColumnName=function(t){return jexcel.helpers.getColumnName(t)},jexcel.getIdFromColumnName=function(t,e){var n=/^[a-zA-Z]+/.exec(t);if(n){for(var r=0,o=0;o<n[0].length;o++)r+=parseInt(n[0].charCodeAt(o)-64)*Math.pow(26,n[0].length-1-o);--r<0&&(r=0);var s=parseInt(/[0-9]+$/.exec(t));s>0&&s--,t=e==1?[r,s]:r+"-"+s}return t},jexcel.getColumnNameFromId=function(t){return Array.isArray(t)||(t=t.split("-")),jexcel.getColumnName(parseInt(t[0]))+(parseInt(t[1])+1)},jexcel.getElement=function(t){var e=0,n=0;return function r(o){o.className&&o.classList.contains("jexcel_container")&&(n=o),o.tagName=="THEAD"?e=1:o.tagName=="TBODY"&&(e=2),o.parentNode&&(n||r(o.parentNode))}(t),[n,e]},jexcel.doubleDigitFormat=function(t){return(t=""+t).length==1&&(t="0"+t),t},jexcel.createFromTable=function(t,e){if(t.tagName=="TABLE"){e||(e={}),e.columns=[],e.data=[];var n=t.querySelectorAll("colgroup > col");if(n.length)for(var r=0;r<n.length;r++){if(!(o=n[r].style.width))var o=n[r].getAttribute("width");o&&(e.columns[r]||(e.columns[r]={}),e.columns[r].width=o)}var s=function(Ee){var Ne=Ee.getBoundingClientRect(),_e=Ne.width>50?Ne.width:50;e.columns[r]||(e.columns[r]={}),Ee.getAttribute("data-celltype")?e.columns[r].type=Ee.getAttribute("data-celltype"):e.columns[r].type="text",e.columns[r].width=_e+"px",e.columns[r].title=Ee.innerHTML,e.columns[r].align=Ee.style.textAlign||"center",(Ne=Ee.getAttribute("name"))&&(e.columns[r].name=Ne),(Ne=Ee.getAttribute("id"))&&(e.columns[r].id=Ne),(Ne=Ee.getAttribute("data-mask"))&&(e.columns[r].mask=Ne)},a=[],l=t.querySelectorAll(":scope > thead > tr");if(l.length){for(var c=0;c<l.length-1;c++){var u=[];for(r=0;r<l[c].children.length;r++){var g={title:l[c].children[r].textContent,colspan:l[c].children[r].getAttribute("colspan")||1};u.push(g)}a.push(u)}for(l=l[l.length-1].children,r=0;r<l.length;r++)s(l[r])}var C=0,v={},m={},S={},T={},w=t.querySelectorAll(":scope > tr, :scope > tbody > tr");for(c=0;c<w.length;c++)if(e.data[C]=[],e.parseTableFirstRowAsHeader!=1||l.length||c!=0){for(r=0;r<w[c].children.length;r++){if(N=w[c].children[r].getAttribute("data-formula"))N.substr(0,1)!="="&&(N="="+N);else var N=w[c].children[r].innerHTML;e.data[C].push(N);var D=jexcel.getColumnNameFromId([r,c]),k=w[c].children[r].getAttribute("class");k&&(T[D]=k);var L=parseInt(w[c].children[r].getAttribute("colspan"))||0,H=parseInt(w[c].children[r].getAttribute("rowspan"))||0;(L||H)&&(v[D]=[L||1,H||1]),w[c].children[r].style&&w[c].children[r].style.display=="none"&&(w[c].children[r].style.display="");var R=w[c].children[r].getAttribute("style");R&&(S[D]=R),w[c].children[r].classList.contains("styleBold")&&(S[D]?S[D]+="; font-weight:bold;":S[D]="font-weight:bold;")}w[c].style&&w[c].style.height&&(m[c]={height:w[c].style.height}),C++}else for(r=0;r<w[c].children.length;r++)s(w[c].children[r]);if(Object.keys(a).length>0&&(e.nestedHeaders=a),Object.keys(S).length>0&&(e.style=S),Object.keys(v).length>0&&(e.mergeCells=v),Object.keys(m).length>0&&(e.rows=m),Object.keys(T).length>0&&(e.classes=T),(w=t.querySelectorAll("tfoot tr")).length){var B=[];for(c=0;c<w.length;c++){var Y=[];for(r=0;r<w[c].children.length;r++)Y.push(w[c].children[r].textContent);B.push(Y)}Object.keys(B).length>0&&(e.footers=B)}if(e.parseTableAutoCellType==1){var K=[];for(r=0;r<e.columns.length;r++){var se=!0,pe=!0;for(K[r]=[],c=0;c<e.data.length;c++)N=e.data[c][r],K[r][N]||(K[r][N]=0),K[r][N]++,N.length>25&&(se=!1),N.length==10&&N.substr(4,1)=="-"&&N.substr(7,1)=="-"||(pe=!1);var le=Object.keys(K[r]).length;pe?e.columns[r].type="calendar":se==1&&le>1&&le<=parseInt(.1*e.data.length)&&(e.columns[r].type="dropdown",e.columns[r].source=Object.keys(K[r]))}}return e}console.log("Element is not a table")},jexcel.helpers=(component={getCaretIndex:function(t){if(this.config.root)var e=this.config.root;else e=window;var n=0,r=e.getSelection();if(r&&r.rangeCount!==0){var o=r.getRangeAt(0),s=o.cloneRange();s.selectNodeContents(t),s.setEnd(o.endContainer,o.endOffset),n=s.toString().length}return n},invert:function(t){for(var e=[],n=Object.keys(t),r=0;r<n.length;r++)e[t[n[r]]]=n[r];return e},getColumnName:function(t){let e,n=t+1,r="";for(;n>0;)e=(n-1)%26,r=String.fromCharCode(65+e).toString()+r,n=parseInt((n-e)/26);return r},getColumnNameFromCoords:function(t,e){return component.getColumnName(parseInt(t))+(parseInt(e)+1)},getCoordsFromColumnName:function(t){var e=/^[a-zA-Z]+/.exec(t);if(e){for(var n=0,r=0;r<e[0].length;r++)n+=parseInt(e[0].charCodeAt(r)-64)*Math.pow(26,e[0].length-1-r);--n<0&&(n=0);var o=parseInt(/[0-9]+$/.exec(t))||null;return o>0&&o--,[n,o]}},createFromTable:function(){},injectArray:function(t,e,n){return t.slice(0,e).concat(n).concat(t.slice(e))},parseCSV:function(t,e){e=e||",";for(var n=0,r=0,o=[[]],s=0,a=null,l=!1,c=!1,u=0;u<t.length;u++)if(o[r]||(o[r]=[]),o[r][n]||(o[r][n]=""),t[u]!="\r")if(t[u]!=`
`&&t[u]!=e||l!=0&&c!=1&&a){if(t[u]=='"'&&(l=!l),a===null){if((a=l)==1)continue}else if(a===!0&&!c&&t[u]=='"'){t[u+1]=='"'?(l=!0,o[r][n]+=t[u],u++):c=!0;continue}o[r][n]+=t[u]}else{if(a=null,l=!1,c=!1,o[r][n][0]=='"'){var g=o[r][n].trim();g[g.length-1]=='"'&&(o[r][n]=g.substr(1,g.length-2))}t[u]==`
`?(n=0,r++):++n>s&&(s=n)}for(var C=0;C<o.length;C++)for(u=0;u<=s;u++)o[C][u]===void 0&&(o[C][u]="");return o}},component),typeof jQuery<"u"&&function(t){t.fn.jspreadsheet=t.fn.jexcel=function(e){var n=t(this).get(0);return n.jexcel?Array.isArray(n.jexcel)?n.jexcel[e][arguments[1]].apply(this,Array.prototype.slice.call(arguments,2)):n.jexcel[e].apply(this,Array.prototype.slice.call(arguments,1)):jexcel(t(this).get(0),arguments[0])}}(jQuery),jexcel},module.exports=factory()}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(e!==void 0)return e.exports;var n=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t].call(n.exports,n,n.exports,__webpack_require__),n.exports}var __webpack_exports__=__webpack_require__(44);jspreadsheet=__webpack_exports__}(),jspreadsheet})})(dist);const jspreadsheet$1=distExports,jspreadsheet="",JspreadsheetComponent_vue_vue_type_style_index_0_scoped_10e37365_lang="",_sfc_main={name:"JspreadsheetComponent",setup(){const t=ref(null);return onMounted(()=>{const e={data:[["","T-Shirt","Pants"],["Size","XL","M"]],columns:[{type:"text",title:"Product",width:120},{type:"dropdown",title:"Option",width:120,source:["Option1","Option2","Option3"]},{type:"text",title:"Details",width:150}]};console.log("Jspreadsheet config:",e),jspreadsheet$1(t.value,e)}),{spreadsheetContainer:t}}},_hoisted_1={ref:"spreadsheetContainer"};function _sfc_render(t,e,n,r,o,s){return openBlock(),createElementBlock("div",_hoisted_1,null,512)}const JspreadsheetComponent=_export_sfc(_sfc_main,[["render",_sfc_render],["__scopeId","data-v-10e37365"]]),app=createApp({});app.component("VueDatepickerNext",VueDatepickerNext);document.getElementById("app")!=null&&app.mount("#app");const datePicker=createApp({});datePicker.component("vue-datepicker-next",VueDatepickerNext);document.getElementById("datePicker")!=null&&datePicker.mount("#datePicker");const camion=createApp({el:"#camion",data(){return{tip_camion:tipCamionVechi,tipuriCamioane,tipuriCamioaneListaAutocomplete:[],firma_id:firmaIdVechi,firma_nume:"",firme,firmeListaAutocomplete:[]}},created:function(){if(this.firma_id){for(var t=0;t<this.firme.length;t++)if(this.firme[t].id==this.firma_id){this.firma_nume=this.firme[t].nume;break}}},methods:{autocompleteTipuriCamioane(){this.tipuriCamioaneListaAutocomplete=[];for(var t=0;t<this.tipuriCamioane.length;t++)this.tipuriCamioane[t].tip_camion&&this.tipuriCamioane[t].tip_camion.toLowerCase().includes(this.tip_camion.toLowerCase())&&this.tipuriCamioaneListaAutocomplete.push(this.tipuriCamioane[t])},autocompleteFirme(){this.firmeListaAutocomplete=[];for(var t=0;t<this.firme.length;t++)this.firme[t].nume&&this.firme[t].nume.toLowerCase().includes(this.firma_nume.toLowerCase())&&this.firmeListaAutocomplete.push(this.firme[t])}}});document.getElementById("camion")!=null&&camion.mount("#camion");const formularComanda=createApp({el:"#formularComanda",data(){return{firmaTransportatorId:firmaTransportatorIdVechi,firmaTransportatorNume:"",firmeTransportatori,firmeTransportatoriListaAutocomplete:[],firmaClientId:firmaClientIdVechi,firmaClientNume:"",firmeClienti,firmeClientiListaAutocomplete:[],clientiListaTotiDinDB:[],clientiAtasatiLaComanda:typeof clientiAtasatiLaComanda<"u"?clientiAtasatiLaComanda:[],camionId:camionIdVechi,camionNumarInmatriculare:"",camionTipCamion:"",camionPretKmGoi:"",camionPretKmPlini:"",camioane,camioaneListaAutocomplete:[],locuriOperareIncarcari:[],locuriOperareDescarcari:[],incarcari:typeof incarcari<"u"?incarcari:[],descarcari:typeof descarcari<"u"?descarcari:[],transportatorTarifPeKm:typeof transportatorTarifPeKmVechi<"u"?transportatorTarifPeKmVechi:"",transportatorPretKmGoi:typeof transportatorPretKmGoiVechi<"u"?transportatorPretKmGoiVechi:"",transportatorPretKmPlini:typeof transportatorPretKmPliniVechi<"u"?transportatorPretKmPliniVechi:"",transportatorKmGoi:typeof transportatorKmGoiVechi<"u"?transportatorKmGoiVechi:"",transportatorKmPlini:typeof transportatorKmPliniVechi<"u"?transportatorKmPliniVechi:"",transportatorValoareKmGoi:typeof transportatorValoareKmGoiVechi<"u"?transportatorValoareKmGoiVechi:"",transportatorValoareKmPlini:typeof transportatorValoareKmPliniVechi<"u"?transportatorValoareKmPliniVechi:"",transportatorValoareContract:typeof transportatorValoareContractVechi<"u"?transportatorValoareContractVechi:"",transportatorPretAutostrada:typeof transportatorPretAutostradaVechi<"u"?transportatorPretAutostradaVechi:"",transportatorPretFerry:typeof transportatorPretFerryVechi<"u"?transportatorPretFerryVechi:"",clientValoareContractInitiala:typeof clientValoareContractInitialaVechi<"u"?clientValoareContractInitialaVechi:"",clientValoareContract:typeof clientValoareContractVechi<"u"?clientValoareContractVechi:"",alertaCampuriNecompletate:""}},created:function(){if(this.firmaTransportatorId)for(var t=0;t<this.firmeTransportatori.length;t++)this.firmeTransportatori[t].id==this.firmaTransportatorId&&(this.firmaTransportatorNume=this.firmeTransportatori[t].nume);if(this.firmaClientId)for(var t=0;t<this.firmeClienti.length;t++)this.firmeClienti[t].id==this.firmaClientId&&(this.firmaClientNume=this.firmeClienti[t].nume);if(this.camionId)for(var t=0;t<this.camioane.length;t++)this.camioane[t].id==this.camionId&&(this.camionNumarInmatriculare=this.camioane[t].numar_inmatriculare,this.camionTipCamion=this.camioane[t].tip_camion,this.camionPretKmGoi=this.camioane[t].pret_km_goi,this.camionPretKmPlini=this.camioane[t].pret_km_plini)},methods:{autocompleteFirmeTransportatori(){this.firmeTransportatoriListaAutocomplete=[];for(var t=0;t<this.firmeTransportatori.length;t++)this.firmeTransportatori[t].nume&&this.firmeTransportatori[t].nume.toLowerCase().includes(this.firmaTransportatorNume.toLowerCase())&&this.firmeTransportatoriListaAutocomplete.push(this.firmeTransportatori[t])},autocompleteFirmeClienti(){this.firmeClientiListaAutocomplete=[];for(var t=0;t<this.firmeClienti.length;t++)this.firmeClienti[t].nume&&this.firmeClienti[t].nume.toLowerCase().includes(this.firmaClientNume.toLowerCase())&&this.firmeClientiListaAutocomplete.push(this.firmeClienti[t])},autocompleteCamioane(){this.camioaneListaAutocomplete=[];for(var t=0;t<this.camioane.length;t++)this.camioane[t].numar_inmatriculare&&this.camioane[t].numar_inmatriculare.toLowerCase().includes(this.camionNumarInmatriculare.toLowerCase())&&this.camioaneListaAutocomplete.push(this.camioane[t])},getClienti(t){this.clientiListaTotiDinDB=[],clientiAtasatiLaComanda[t].nume&&clientiAtasatiLaComanda[t].nume.length>2&&axios.get("/axios/clienti",{params:{request:"clienti",nume:clientiAtasatiLaComanda[t].nume}}).then(e=>this.clientiListaTotiDinDB[t]=e.data.raspuns)},getLocuriOperareIncarcari(t){this.locuriOperareIncarcari=[],(incarcari[t].nume&&incarcari[t].nume.length>2||incarcari[t].oras&&incarcari[t].oras.length>2)&&axios.get("/axios/locuri-operare",{params:{request:"locuriOperare",nume:incarcari[t].nume,oras:incarcari[t].oras}}).then(e=>this.locuriOperareIncarcari[t]=e.data.raspuns)},getLocuriOperareDescarcari(t){this.locuriOperareDescarcari=[],(descarcari[t].nume&&descarcari[t].nume.length>2||descarcari[t].oras&&descarcari[t].oras.length>2)&&axios.get("/axios/locuri-operare",{params:{request:"locuriOperare",nume:descarcari[t].nume,oras:descarcari[t].oras}}).then(e=>this.locuriOperareDescarcari[t]=e.data.raspuns)},adaugaClientGol(){let t={tara:{},pivot:{moneda_id:2}};this.clientiAtasatiLaComanda.push(t)},adaugaIncarcareGoala(){let t={data_ora:"qweqweqwe",tara:{},pivot:{}};this.incarcari.push(t)},adaugaDescarcareGoala(){let t={tara:{id:"",nume:""},pivot:{}};this.descarcari.push(t)}}}),clickOutside={beforeMount:(t,e)=>{t.clickOutsideEvent=n=>{t==n.target||t.contains(n.target)||e.value()},document.addEventListener("click",t.clickOutsideEvent)},unmounted:t=>{document.removeEventListener("click",t.clickOutsideEvent)}};formularComanda.directive("clickOut",clickOutside);formularComanda.component("vue-datepicker-next",VueDatepickerNext);document.getElementById("formularComanda")!=null&&formularComanda.mount("#formularComanda");const statusuri=createApp({el:"#statusuri",data(){return{statusuri:[],timer:null,mesajLipsaStatusuri:"",comandaId:""}},created:function(){},mounted:function(){this.timer=setInterval(()=>{this.getStatusuri()},1e4)},beforeUnmount(){clearInterval(this.timer)},methods:{getStatusuri(){this.comandaId!==""&&axios.get("/axios/statusuri",{params:{comanda_id:this.comandaId}}).then(t=>{this.statusuri=t.data.raspuns,this.statusuri.length===0?this.mesajLipsaStatusuri="Nu există „statusuri” în baza de date pentru această comandă":this.mesajLipsaStatusuri=""})}}});document.getElementById("statusuri")!=null&&statusuri.mount("#statusuri");const mementoAlerte=createApp({el:"#mementoAlerte",data(){return{tip,dataExpirare:"",dataSelectata:"",dateSelectate}},methods:{captureDataExpirare(t){if(this.tip==2)var e=[3,15];else if(this.tip==3)var e=[3,30,60];if(e&&this.dataExpirare!==t){this.dataExpirare=t,this.dateSelectate=[];for(var n=0;n<e.length;n++){var r=new Date(t);r=r.setDate(r.getDate()-e[n]),r=new Date(r).toLocaleDateString("en-CA"),r!==null&&!this.dateSelectate.includes(r)&&this.dateSelectate.push(r)}}},captureDataDeLaCopil(t){this.dataSelectata!==t&&(this.dataSelectata=t)},adaugaAlerta:function(){this.dataSelectata!==null&&!this.dateSelectate.includes(this.dataSelectata)&&this.dateSelectate.push(this.dataSelectata)},stergeAlerta:function(t){for(var e=0;e<this.dateSelectate.length;e++)if(this.dateSelectate[e]==t){this.dateSelectate.splice(e,1);break}}}});mementoAlerte.component("vue-datepicker-next",VueDatepickerNext);document.getElementById("mementoAlerte")!=null&&mementoAlerte.mount("#mementoAlerte");const creareFactura=createApp({el:"#creareFactura",data(){return{firmeClienti,firmeClientiListaAutocomplete:[],firmaClient:"",client_id,client_nume,client_reg_com,client_cif,client_adresa,client_tara_id,client_telefon,client_email,numarDeCautat:"",comandaGasita:"",afisareMesajAtentionareNegasireComanda:!1,produsGasitDenumire:"",produsDenumire:"",produsUm:"",produsCantitate:"",produsPret:"",produsPretulIncludeTva:0,comandaId,produse,moneda_id,procenteTva,procent_tva_id,zile_scadente,showInfoAlerteScadenta:!1,showDateProdusIncomplete:"",total_fara_tva_moneda:0,total_tva_moneda:0,total_fara_tva_lei:0,total_tva_lei:0,chitanta_suma_incasata,dateFacturiIntocmitDeVechi,dateFacturiDelegatVechi,dateFacturiMentiuniVechi,dateFacturiIntocmitDeVechiListaAutocomplete:[],dateFacturiDelegatVechiListaAutocomplete:[],dateFacturiMentiuniVechiListaAutocomplete:[],intocmit_de,cnp,delegat,buletin,auto,mentiuni}},watch:{produse:{handler:function(t){this.calculeazaSumeTotale()},deep:!0}},created:function(){if(this.firmaClientId)for(var t=0;t<this.firmeClienti.length;t++)this.firmeClienti[t].id==this.firmaClientId&&(this.client_nume=this.firmeClienti[t].nume);this.calculeazaSumeTotale()},methods:{autocompleteFirmeClienti(){this.firmeClientiListaAutocomplete=[];for(var t=0;t<this.firmeClienti.length;t++)this.firmeClienti[t].nume&&this.firmeClienti[t].nume.toLowerCase().includes(this.client_nume.toLowerCase())&&this.firmeClientiListaAutocomplete.push(this.firmeClienti[t])},axiosCautaClient(t){axios.get("/facturi/axios/cauta-client",{params:{client_id:t}}).then(e=>{e.data.client&&(this.firmaClient=e.data.client,this.preiaDateClient()),this.firmeClientiListaAutocomplete=""})},preiaDateClient(){this.firmaClient&&(this.client_id=this.firmaClient.id,this.client_nume=this.firmaClient.nume,this.client_reg_com=this.firmaClient.reg_com,this.client_cif=this.firmaClient.cif,this.client_adresa=this.firmaClient.adresa,this.client_tara_id=this.firmaClient.tara_id,this.client_email=this.firmaClient.email)},preiaDateFacturare(){this.comandaGasita&&(this.comandaGasita.client_moneda&&(this.moneda_id=this.comandaGasita.client_moneda.id),this.procent_tva_id=this.comandaGasita.client_procent_tva_id,this.zile_scadente=this.comandaGasita.client_zile_scadente)},preiaDateProdus(){this.comandaGasita&&(this.produsDenumire=this.produsGasitDenumire,this.produsUm="um",this.produsCantitate=1,this.produsPret=this.comandaGasita.client_valoare_contract,this.produsPretulIncludeTva=0)},adaugaProdusLaFactura(){if(this.produsCantitate=parseInt(this.produsCantitate),this.produsPret=parseFloat(this.produsPret),this.showDateProdusIncomplete="",this.produsDenumire?this.produsUm?this.produsCantitate?this.produsPret?this.procent_tva_id?Number.isInteger(this.produsCantitate)?typeof this.produsPret!="number"?this.showDateProdusIncomplete+="Prețul trebuie să fie un număr. ":this.showDateProdusIncomplete="":this.showDateProdusIncomplete+="Cantitatea trebuie să fie un număr întreg. ":this.showDateProdusIncomplete="Alegeți procentul TVA. ":this.showDateProdusIncomplete="Completați prețul. ":this.showDateProdusIncomplete="Completați cantitatea. ":this.showDateProdusIncomplete="Completați unitatea de măsură. ":this.showDateProdusIncomplete="Completați denumirea. ",this.showDateProdusIncomplete)return;let t=0;for(var e=0;e<this.procenteTva.length;e++)this.procenteTva[e].id==this.procent_tva_id&&(t=parseInt(this.procenteTva[e].nume));if(isNaN(this.produsCantitate)||isNaN(this.produsPret)||isNaN(t))return;let n=0,r=0;t===0?(n=this.produsPret,r=0):parseInt(this.produsPretulIncludeTva)===0?(n=this.produsPret,r=this.produsPret*t/100):parseInt(this.produsPretulIncludeTva)===1&&(r=this.produsPret*t/100,n=this.produsPret-r);let o={comanda_id:this.comandaGasita.id,denumire:this.produsDenumire,um:"buc",cantitate:this.produsCantitate,pret_unitar_fara_tva:n,valoare:this.produsCantitate*n,valoare_tva:this.produsCantitate*r};this.produse.push(o)},axiosCautaComanda(){axios.post("/facturi/axios/cauta-comanda",{numarDeCautat:this.numarDeCautat},{params:{}}).then(t=>{if(this.comandaGasita=t.data.comanda,this.comandaGasita&&this.comandaGasita.client){this.afisareMesajAtentionareNegasireComanda=!1,this.firmaClient=this.comandaGasita.client,this.comandaId=this.comandaGasita.id,this.produsGasitDenumire=this.comandaGasita.client_contract?this.comandaGasita.client_contract+" // ":"";for(var e=0;e<this.comandaGasita.locuri_operare_incarcari.length;e++)this.comandaGasita.locuri_operare_incarcari[e].pivot&&this.comandaGasita.locuri_operare_incarcari[e].pivot.data_ora&&(this.produsGasitDenumire+=this.comandaGasita.locuri_operare_incarcari[e].pivot.data_ora.slice(8,10)+"."+this.comandaGasita.locuri_operare_incarcari[e].pivot.data_ora.slice(5,7)+"."+this.comandaGasita.locuri_operare_incarcari[e].pivot.data_ora.slice(0,4)),this.comandaGasita.locuri_operare_incarcari[e].oras&&(this.produsGasitDenumire+=" "+this.comandaGasita.locuri_operare_incarcari[e].oras),this.comandaGasita.locuri_operare_incarcari[e].tara&&this.comandaGasita.locuri_operare_incarcari[e].tara.nume&&(this.produsGasitDenumire+=" "+this.comandaGasita.locuri_operare_incarcari[e].tara.nume+" / ");for(var e=0;e<this.comandaGasita.locuri_operare_descarcari.length;e++)this.comandaGasita.locuri_operare_descarcari[e].pivot&&(this.produsGasitDenumire+=this.comandaGasita.locuri_operare_descarcari[e].pivot.data_ora.slice(8,10)+"."+this.comandaGasita.locuri_operare_descarcari[e].pivot.data_ora.slice(5,7)+"."+this.comandaGasita.locuri_operare_descarcari[e].pivot.data_ora.slice(0,4)),this.comandaGasita.locuri_operare_descarcari[e].oras&&(this.produsGasitDenumire+=" "+this.comandaGasita.locuri_operare_descarcari[e].oras),this.comandaGasita.locuri_operare_descarcari[e].tara&&this.comandaGasita.locuri_operare_descarcari[e].tara.nume&&(this.produsGasitDenumire+=" "+this.comandaGasita.locuri_operare_descarcari[e].tara.nume),e<this.comandaGasita.locuri_operare_descarcari.length-1&&(this.produsGasitDenumire+=" / ")}else this.afisareMesajAtentionareNegasireComanda=!0})},calculeazaSumeTotale(){if(this.total_fara_tva_moneda=0,this.total_tva_moneda=0,this.total_fara_tva_lei=0,this.total_tva_lei=0,this.total_lei=0,this.produse)for(var t=0;t<this.produse.length;t++)this.total_fara_tva_moneda+=parseFloat(this.produse[t].valoare),this.total_tva_moneda+=parseFloat(this.produse[t].valoare_tva)},autocompleteDateFacturiIntocmitDeVechi(){this.dateFacturiIntocmitDeVechiListaAutocomplete=[];for(var t=0;t<this.dateFacturiIntocmitDeVechi.length;t++)this.dateFacturiIntocmitDeVechi[t].intocmit_de&&this.dateFacturiIntocmitDeVechi[t].intocmit_de.toLowerCase().includes(this.intocmit_de.toLowerCase())&&this.dateFacturiIntocmitDeVechiListaAutocomplete.push(this.dateFacturiIntocmitDeVechi[t])},autocompleteDateFacturiDelegatVechi(){this.dateFacturiDelegatVechiListaAutocomplete=[];for(var t=0;t<this.dateFacturiDelegatVechi.length;t++)this.dateFacturiDelegatVechi[t].delegat&&this.dateFacturiDelegatVechi[t].delegat.toLowerCase().includes(this.delegat.toLowerCase())&&this.dateFacturiDelegatVechiListaAutocomplete.push(this.dateFacturiDelegatVechi[t])},autocompleteDateFacturiMentiuniVechi(){this.dateFacturiMentiuniVechiListaAutocomplete=[];for(var t=0;t<this.dateFacturiMentiuniVechi.length;t++)this.dateFacturiMentiuniVechi[t].mentiuni&&this.dateFacturiMentiuniVechi[t].mentiuni.toLowerCase().includes(this.mentiuni.toLowerCase())&&this.dateFacturiMentiuniVechiListaAutocomplete.push(this.dateFacturiMentiuniVechi[t])}}});creareFactura.directive("clickOut",clickOutside);creareFactura.component("vue-datepicker-next",VueDatepickerNext);document.getElementById("creareFactura")!=null&&creareFactura.mount("#creareFactura");const trimitereCodAutentificarePrinEmail=createApp({el:"#trimitereCodAutentificarePrinEmail",data(){return{email,mesajDeAfisat:"",statusMessage:"",showStatusMessage:!1,isSending:!1,flashObserver:null,hasSentRequest:!1}},mounted(){this.observeFlashMessages(),this.checkForAlerts()},beforeUnmount(){this.flashObserver&&this.flashObserver.disconnect()},methods:{trimiteEmail(){this.isSending||(this.mesajDeAfisat="",this.email?(this.isSending=!0,this.hasSentRequest=!0,this.statusMessage="Se trimite codul de autentificare…",this.showStatusMessage=!0,axios.get("/axios/trimitere-cod-autentificare-prin-email",{params:{email:this.email}}).then(t=>{this.showStatusMessage=!1,this.statusMessage="",this.mesajDeAfisat=t.data.raspuns}).catch(()=>{this.mesajDeAfisat="<span class='text-danger' style='font-size:80%'>A apărut o eroare neașteptată. Încearcă din nou.</span>",this.showStatusMessage=!1,this.statusMessage=""}).finally(()=>{this.showStatusMessage&&(this.showStatusMessage=!1,this.statusMessage=""),this.isSending=!1})):(this.mesajDeAfisat="<span class='text-danger' style='font-size:80%'>Introdu emailul.</span>",this.showStatusMessage=!1,this.statusMessage="",this.isSending=!1,this.hasSentRequest=!1))},observeFlashMessages(){typeof MutationObserver>"u"||(this.flashObserver&&this.flashObserver.disconnect(),this.flashObserver=new MutationObserver(()=>{this.checkForAlerts()}),this.$el&&this.flashObserver.observe(this.$el,{childList:!0,subtree:!0}))},checkForAlerts(){if(!this.$el)return;this.$el.querySelector(".alert")&&(this.isSending=!1,this.showStatusMessage=!1,this.statusMessage="")}}});document.getElementById("trimitereCodAutentificarePrinEmail")!=null&&trimitereCodAutentificarePrinEmail.mount("#trimitereCodAutentificarePrinEmail");const disableButton1=createApp({el:"#app1",data(){return{disableButton:!1}}});document.getElementById("disableButton1")!=null&&disableButton1.mount("#disableButton1");const disableButton2=createApp({el:"#app1",data(){return{disableButton:!1}}});document.getElementById("disableButton2")!=null&&disableButton2.mount("#disableButton2");const disableButton3=createApp({el:"#app1",data(){return{disableButton:!1}}});document.getElementById("disableButton3")!=null&&disableButton3.mount("#disableButton3");const disableButton4=createApp({el:"#app1",data(){return{disableButton:!1}}});document.getElementById("disableButton4")!=null&&disableButton4.mount("#disableButton4");const wysiwyg=createApp({el:"#app1",data(){return{disableButton:!1}}});wysiwyg.component("TiptapEditor",TiptapEditor);document.getElementById("wysiwyg")!=null&&wysiwyg.mount("#wysiwyg");const facturaMemento=createApp({el:"#facturaMemento",data(){return{facturi}}});facturaMemento.component("vue-datepicker-next",VueDatepickerNext);document.getElementById("facturaMemento")!=null&&facturaMemento.mount("#facturaMemento");const tabelIntermedieri=createApp({});tabelIntermedieri.component("toggle-predat",TogglePredat);document.getElementById("tabelIntermedieri")!=null&&tabelIntermedieri.mount("#tabelIntermedieri");const keyPerformanceIndicatorsMainPage=createApp({data(){return{lastUpdatedKpi:null}},methods:{handleUpdateSuccess(t){this.lastUpdatedKpi=t,setTimeout(()=>{this.lastUpdatedKpi=null},5e3)}}});keyPerformanceIndicatorsMainPage.component("inline-observatii-editor",InlineObservatiiEditor);document.getElementById("keyPerformanceIndicatorsMainPage")!=null&&keyPerformanceIndicatorsMainPage.mount("#keyPerformanceIndicatorsMainPage");const directoryTree=createApp({});directoryTree.component("directory-tree",DirectoryTree);document.getElementById("directoryTree")!=null&&directoryTree.mount("#directoryTree");const excel=createApp({});excel.component("jspreadsheet-component",JspreadsheetComponent);document.getElementById("excel")!=null&&excel.mount("#excel");document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("oferteBody");if(!t)return;const e=window.axios;if(!e){console.warn("[oferte changes] window.axios not found");return}const n=new URLSearchParams(window.location.search),o=Number(n.get("page")||"1")===1,s="/axios/oferte-changes?"+n.toString(),a=1e4;let l=null,c=null,u=null;function g(){l=setTimeout(v,a)}function C(S,T){const w=t.querySelector(`tr[data-id="${S}"]`);if(w)w.outerHTML=T;else if(o)for(t.insertAdjacentHTML("afterbegin",T);t.children.length>25;)t.removeChild(t.lastElementChild)}async function v(){try{const S=`${s}${n.toString()?"&":""}since=${encodeURIComponent(c)}`,T={"X-Requested-With":"XMLHttpRequest"};u&&(T["If-None-Match"]=u);const w=await e.get(S,{headers:T,validateStatus:D=>D===200||D===304}),N=w.headers["x-server-now"]||w.headers["X-Server-Now"];if(w.status===304)N&&(c=N);else{const{rows:D=[],deleted_ids:k=[],now:L}=w.data||{},H=R=>{const B=t.querySelector(`tr[data-id="${R}"]`);B&&B.remove()};if(D.forEach(R=>C(R.id,R.html)),Array.isArray(k)&&k.length&&k.forEach(H),o)for(;t.children.length>25;)t.removeChild(t.lastElementChild);L&&(c=L),u=w.headers.etag||w.headers.ETag||u}}catch{}finally{g()}}async function m(){try{const S=`${s}${n.toString()?"&":""}bootstrap=1`,T=await e.get(S,{headers:{"X-Requested-With":"XMLHttpRequest"}});c=T.data&&T.data.now?T.data.now:T.headers["x-server-now"]||new Date().toISOString()}catch{c=new Date().toISOString()}finally{g()}}m(),window.addEventListener("beforeunload",()=>{l&&clearTimeout(l)})});
